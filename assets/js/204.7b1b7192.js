(window.webpackJsonp=window.webpackJsonp||[]).push([[204],{823:function(t,s,a){"use strict";a.r(s);var n=a(30),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("四元数在3D计算机图形学中用于表示旋转，因为它们比欧拉角和旋转矩阵更稳定且不容易产生万向节锁问题")]),t._v(" "),s("h2",{attrs:{id:"_1、setfromrotationmatrix"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、setfromrotationmatrix"}},[t._v("#")]),t._v(" 1、setFromRotationMatrix")]),t._v(" "),s("p",[t._v("改方法的作用是将一个旋转矩阵转换为四元数。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 从旋转矩阵设置四元数\n *\n * @param m 旋转矩阵\n * @returns 当前四元数对象\n */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setFromRotationMatrix")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("m")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" te "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" m"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("elements"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n        m11 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" te"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" m12 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" te"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" m13 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" te"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        m21 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" te"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" m22 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" te"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" m23 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" te"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        m31 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" te"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" m32 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" te"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" m33 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" te"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n        trace "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" m11 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" m22 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" m33"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" trace "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" s "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" Math"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sqrt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" trace "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_w "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.25")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" m32 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" m23 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" m13 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" m31 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_z "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" m21 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" m12 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" m11 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" m22 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" m11 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" m33 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" s "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" Math"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sqrt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" m11 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" m22 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" m33 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_w "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" m32 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" m23 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.25")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" m12 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" m21 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_z "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" m13 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" m31 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" m22 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" m33 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" s "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" Math"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sqrt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" m22 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" m11 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" m33 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_w "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" m13 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" m31 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" m12 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" m21 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.25")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_z "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" m23 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" m32 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" s "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" Math"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sqrt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" m33 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" m11 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" m22 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_w "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" m21 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" m12 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" m13 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" m31 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" m23 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" m32 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_z "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.25")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_onChangeCallback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"_2、setfromeuler"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、setfromeuler"}},[t._v("#")]),t._v(" 2、setFromEuler")]),t._v(" "),s("p",[t._v("从欧拉角设置四元数")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 从欧拉角设置四元数\n *\n * @param euler 欧拉角对象，包含x、y、z和order属性\n * @param update 是否触发onChangeCallback回调，默认为true\n * @returns 返回当前四元数对象\n */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setFromEuler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("euler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" update "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" euler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" euler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_y"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" z "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" euler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_z"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" order "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" euler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_order"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// http://www.mathworks.com/matlabcentral/fileexchange/")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//\tcontent/SpinCalc.m")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" cos "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Math"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" sin "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Math"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" c1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cos")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" c2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cos")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" c3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cos")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" z "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" s3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" z "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("switch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" order "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'XYZ'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" c1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" c1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_z "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" c1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_w "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" c1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'YXZ'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" c1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" c1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_z "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" c1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_w "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" c1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ZXY'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" c1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" c1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_z "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" c1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_w "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" c1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ZYX'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" c1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" c1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_z "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" c1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_w "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" c1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'YZX'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" c1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" c1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_z "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" c1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_w "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" c1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'XZY'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" c1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" c1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_z "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" c1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_w "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" c1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" c3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n            console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("warn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'THREE.Quaternion: .setFromEuler() encountered an unknown order: '")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" order "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" update "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_onChangeCallback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"_3、setfromaxisangle"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、setfromaxisangle"}},[t._v("#")]),t._v(" 3、setFromAxisAngle")]),t._v(" "),s("p",[t._v("从轴和角度设置四元数")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n\t * 从轴和角度设置四元数\n\t *\n\t * @param {Vector3} axis 旋转轴，假设已经单位化\n\t * @param {number} angle 旋转角度，单位为弧度\n\t * @returns {Object} 当前对象\n\t */")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setFromAxisAngle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("axis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" angle")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// assumes axis is normalized")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" halfAngle "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" angle "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" s "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Math"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" halfAngle "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" axis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" axis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_z "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" axis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("z "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_w "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Math"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cos")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" halfAngle "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_onChangeCallback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("Valine")],1)}),[],!1,null,null,null);s.default=r.exports}}]);