<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack基础知识点总结 | 前端WebGL</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.1a435f77.css" as="style"><link rel="preload" href="/assets/js/app.b8d577b5.js" as="script"><link rel="preload" href="/assets/js/2.918eef7d.js" as="script"><link rel="preload" href="/assets/js/1.dd66940c.js" as="script"><link rel="preload" href="/assets/js/102.85fec55c.js" as="script"><link rel="prefetch" href="/assets/js/10.59c27d0c.js"><link rel="prefetch" href="/assets/js/100.e56f3d4b.js"><link rel="prefetch" href="/assets/js/101.07ada23c.js"><link rel="prefetch" href="/assets/js/103.c0e3c532.js"><link rel="prefetch" href="/assets/js/104.3deb87ae.js"><link rel="prefetch" href="/assets/js/105.8e10445b.js"><link rel="prefetch" href="/assets/js/106.086b4494.js"><link rel="prefetch" href="/assets/js/107.54b8d7a7.js"><link rel="prefetch" href="/assets/js/108.b193a4ac.js"><link rel="prefetch" href="/assets/js/109.accc59d9.js"><link rel="prefetch" href="/assets/js/11.08701c0e.js"><link rel="prefetch" href="/assets/js/110.1ef2937e.js"><link rel="prefetch" href="/assets/js/111.8051076e.js"><link rel="prefetch" href="/assets/js/112.65db6942.js"><link rel="prefetch" href="/assets/js/113.7bfdbc1a.js"><link rel="prefetch" href="/assets/js/114.93bad6a3.js"><link rel="prefetch" href="/assets/js/115.e6b95a65.js"><link rel="prefetch" href="/assets/js/116.a1ba085a.js"><link rel="prefetch" href="/assets/js/117.e4272996.js"><link rel="prefetch" href="/assets/js/118.028902a8.js"><link rel="prefetch" href="/assets/js/119.5bc218f8.js"><link rel="prefetch" href="/assets/js/12.6884c23f.js"><link rel="prefetch" href="/assets/js/120.91c31cb1.js"><link rel="prefetch" href="/assets/js/121.e424f641.js"><link rel="prefetch" href="/assets/js/122.c977231a.js"><link rel="prefetch" href="/assets/js/123.fe8b4e34.js"><link rel="prefetch" href="/assets/js/124.9b854ede.js"><link rel="prefetch" href="/assets/js/125.fdba328e.js"><link rel="prefetch" href="/assets/js/126.660b754f.js"><link rel="prefetch" href="/assets/js/127.50ee3e01.js"><link rel="prefetch" href="/assets/js/128.48e5ae05.js"><link rel="prefetch" href="/assets/js/129.44ca47d4.js"><link rel="prefetch" href="/assets/js/13.e0daf978.js"><link rel="prefetch" href="/assets/js/130.e1ac8d91.js"><link rel="prefetch" href="/assets/js/131.f4b49d23.js"><link rel="prefetch" href="/assets/js/132.b6091d30.js"><link rel="prefetch" href="/assets/js/133.252ae132.js"><link rel="prefetch" href="/assets/js/134.3850943c.js"><link rel="prefetch" href="/assets/js/135.9a5e4f48.js"><link rel="prefetch" href="/assets/js/136.38cbd2d5.js"><link rel="prefetch" href="/assets/js/137.2d816f5d.js"><link rel="prefetch" href="/assets/js/138.2ded09ab.js"><link rel="prefetch" href="/assets/js/139.7a498eab.js"><link rel="prefetch" href="/assets/js/14.f4c0f1e2.js"><link rel="prefetch" href="/assets/js/140.87a17f7c.js"><link rel="prefetch" href="/assets/js/141.8e389061.js"><link rel="prefetch" href="/assets/js/142.a2539e36.js"><link rel="prefetch" href="/assets/js/143.cce2facb.js"><link rel="prefetch" href="/assets/js/144.499084a9.js"><link rel="prefetch" href="/assets/js/145.f7e4b35e.js"><link rel="prefetch" href="/assets/js/146.43548e82.js"><link rel="prefetch" href="/assets/js/147.10415f57.js"><link rel="prefetch" href="/assets/js/148.0ef8ee2a.js"><link rel="prefetch" href="/assets/js/149.a24e72cd.js"><link rel="prefetch" href="/assets/js/15.0382753a.js"><link rel="prefetch" href="/assets/js/150.a580a96e.js"><link rel="prefetch" href="/assets/js/151.54910bf2.js"><link rel="prefetch" href="/assets/js/152.5646e4cd.js"><link rel="prefetch" href="/assets/js/153.035ee0c2.js"><link rel="prefetch" href="/assets/js/154.dec13aa9.js"><link rel="prefetch" href="/assets/js/155.df237b31.js"><link rel="prefetch" href="/assets/js/156.fce89a61.js"><link rel="prefetch" href="/assets/js/157.582f416e.js"><link rel="prefetch" href="/assets/js/158.e90b7377.js"><link rel="prefetch" href="/assets/js/159.dd7d38d9.js"><link rel="prefetch" href="/assets/js/16.4069cf12.js"><link rel="prefetch" href="/assets/js/160.96d9c629.js"><link rel="prefetch" href="/assets/js/161.bca72816.js"><link rel="prefetch" href="/assets/js/162.44a71b55.js"><link rel="prefetch" href="/assets/js/163.b6b640bb.js"><link rel="prefetch" href="/assets/js/164.423ea1c6.js"><link rel="prefetch" href="/assets/js/165.43a68447.js"><link rel="prefetch" href="/assets/js/166.24244820.js"><link rel="prefetch" href="/assets/js/167.cd80c500.js"><link rel="prefetch" href="/assets/js/168.c29d9d1e.js"><link rel="prefetch" href="/assets/js/169.fc672b9c.js"><link rel="prefetch" href="/assets/js/17.79bd023c.js"><link rel="prefetch" href="/assets/js/170.13dc39cb.js"><link rel="prefetch" href="/assets/js/171.0927e354.js"><link rel="prefetch" href="/assets/js/172.e3400179.js"><link rel="prefetch" href="/assets/js/173.9d81afd7.js"><link rel="prefetch" href="/assets/js/174.cd1fed6b.js"><link rel="prefetch" href="/assets/js/175.afd97572.js"><link rel="prefetch" href="/assets/js/176.8d38058d.js"><link rel="prefetch" href="/assets/js/177.4231fe96.js"><link rel="prefetch" href="/assets/js/178.0927691c.js"><link rel="prefetch" href="/assets/js/179.e11e3e1c.js"><link rel="prefetch" href="/assets/js/18.019a7c67.js"><link rel="prefetch" href="/assets/js/180.5ad3ad4f.js"><link rel="prefetch" href="/assets/js/181.24361fce.js"><link rel="prefetch" href="/assets/js/182.75d3d9ab.js"><link rel="prefetch" href="/assets/js/183.0994f96e.js"><link rel="prefetch" href="/assets/js/184.804627d0.js"><link rel="prefetch" href="/assets/js/185.d3dc237f.js"><link rel="prefetch" href="/assets/js/186.9f341504.js"><link rel="prefetch" href="/assets/js/187.80e71c52.js"><link rel="prefetch" href="/assets/js/188.7ffd7a17.js"><link rel="prefetch" href="/assets/js/189.9f18d6a7.js"><link rel="prefetch" href="/assets/js/19.7c15232c.js"><link rel="prefetch" href="/assets/js/190.421bce40.js"><link rel="prefetch" href="/assets/js/191.222a15a9.js"><link rel="prefetch" href="/assets/js/192.a5ff4c2b.js"><link rel="prefetch" href="/assets/js/193.969ff99c.js"><link rel="prefetch" href="/assets/js/194.99252669.js"><link rel="prefetch" href="/assets/js/195.11d74bd3.js"><link rel="prefetch" href="/assets/js/196.82ce66c5.js"><link rel="prefetch" href="/assets/js/197.c6674dc8.js"><link rel="prefetch" href="/assets/js/198.59857f4c.js"><link rel="prefetch" href="/assets/js/199.ac008a0e.js"><link rel="prefetch" href="/assets/js/20.becddea5.js"><link rel="prefetch" href="/assets/js/200.3a276c3c.js"><link rel="prefetch" href="/assets/js/201.cc333962.js"><link rel="prefetch" href="/assets/js/202.1c3daf66.js"><link rel="prefetch" href="/assets/js/203.41b03fa1.js"><link rel="prefetch" href="/assets/js/204.7b1b7192.js"><link rel="prefetch" href="/assets/js/205.a0365192.js"><link rel="prefetch" href="/assets/js/206.02e18e86.js"><link rel="prefetch" href="/assets/js/207.7028432a.js"><link rel="prefetch" href="/assets/js/208.60bac301.js"><link rel="prefetch" href="/assets/js/209.5a0e2a72.js"><link rel="prefetch" href="/assets/js/21.2abc4662.js"><link rel="prefetch" href="/assets/js/210.aade8a85.js"><link rel="prefetch" href="/assets/js/211.36d99177.js"><link rel="prefetch" href="/assets/js/212.ec83a667.js"><link rel="prefetch" href="/assets/js/213.7f17c24d.js"><link rel="prefetch" href="/assets/js/214.260cf4ee.js"><link rel="prefetch" href="/assets/js/215.c0ae0a7d.js"><link rel="prefetch" href="/assets/js/216.977c6d8e.js"><link rel="prefetch" href="/assets/js/217.8af8f50e.js"><link rel="prefetch" href="/assets/js/218.e85c2501.js"><link rel="prefetch" href="/assets/js/219.a5fa787a.js"><link rel="prefetch" href="/assets/js/22.43c1feff.js"><link rel="prefetch" href="/assets/js/220.aa5ccac9.js"><link rel="prefetch" href="/assets/js/221.b0cc7eba.js"><link rel="prefetch" href="/assets/js/222.e2084f0f.js"><link rel="prefetch" href="/assets/js/223.499c8b33.js"><link rel="prefetch" href="/assets/js/224.38f744db.js"><link rel="prefetch" href="/assets/js/225.01798e4d.js"><link rel="prefetch" href="/assets/js/226.6bc2603d.js"><link rel="prefetch" href="/assets/js/227.c26faceb.js"><link rel="prefetch" href="/assets/js/228.5d0e1dc8.js"><link rel="prefetch" href="/assets/js/229.1b7e0ef7.js"><link rel="prefetch" href="/assets/js/23.e2e7f6b9.js"><link rel="prefetch" href="/assets/js/230.e224cdfc.js"><link rel="prefetch" href="/assets/js/231.cf4bd793.js"><link rel="prefetch" href="/assets/js/232.f52d2707.js"><link rel="prefetch" href="/assets/js/233.93e1304f.js"><link rel="prefetch" href="/assets/js/234.342f195e.js"><link rel="prefetch" href="/assets/js/235.015fe820.js"><link rel="prefetch" href="/assets/js/236.20678fbe.js"><link rel="prefetch" href="/assets/js/237.15243cf1.js"><link rel="prefetch" href="/assets/js/238.fc6fc004.js"><link rel="prefetch" href="/assets/js/239.9e0b894f.js"><link rel="prefetch" href="/assets/js/24.33be9616.js"><link rel="prefetch" href="/assets/js/240.ebc0559b.js"><link rel="prefetch" href="/assets/js/241.198bdc0a.js"><link rel="prefetch" href="/assets/js/242.a7e61efe.js"><link rel="prefetch" href="/assets/js/243.e5f005de.js"><link rel="prefetch" href="/assets/js/244.a260a3c3.js"><link rel="prefetch" href="/assets/js/245.582bde7e.js"><link rel="prefetch" href="/assets/js/246.e6b4ede1.js"><link rel="prefetch" href="/assets/js/247.4ba7b90e.js"><link rel="prefetch" href="/assets/js/248.852f1c61.js"><link rel="prefetch" href="/assets/js/249.ff6f5167.js"><link rel="prefetch" href="/assets/js/25.92ef4807.js"><link rel="prefetch" href="/assets/js/250.d45beb05.js"><link rel="prefetch" href="/assets/js/251.15860c76.js"><link rel="prefetch" href="/assets/js/252.517da4e5.js"><link rel="prefetch" href="/assets/js/253.90b01696.js"><link rel="prefetch" href="/assets/js/254.11be4d6b.js"><link rel="prefetch" href="/assets/js/255.04e43c7d.js"><link rel="prefetch" href="/assets/js/256.f2261424.js"><link rel="prefetch" href="/assets/js/257.9f97bfde.js"><link rel="prefetch" href="/assets/js/258.cd542a96.js"><link rel="prefetch" href="/assets/js/259.9a8c54b4.js"><link rel="prefetch" href="/assets/js/26.0284307b.js"><link rel="prefetch" href="/assets/js/260.baa8d487.js"><link rel="prefetch" href="/assets/js/261.4ef855c1.js"><link rel="prefetch" href="/assets/js/262.070de9d2.js"><link rel="prefetch" href="/assets/js/263.74bb2e1d.js"><link rel="prefetch" href="/assets/js/264.f4ee9973.js"><link rel="prefetch" href="/assets/js/265.036afaa7.js"><link rel="prefetch" href="/assets/js/266.0880b02e.js"><link rel="prefetch" href="/assets/js/267.bb19f83d.js"><link rel="prefetch" href="/assets/js/268.b81c5554.js"><link rel="prefetch" href="/assets/js/269.58119514.js"><link rel="prefetch" href="/assets/js/27.fa145912.js"><link rel="prefetch" href="/assets/js/270.24c850fe.js"><link rel="prefetch" href="/assets/js/271.955d009f.js"><link rel="prefetch" href="/assets/js/272.fb422044.js"><link rel="prefetch" href="/assets/js/273.e160770c.js"><link rel="prefetch" href="/assets/js/274.9a486be5.js"><link rel="prefetch" href="/assets/js/275.a31f8bcb.js"><link rel="prefetch" href="/assets/js/276.2baeccae.js"><link rel="prefetch" href="/assets/js/277.0ea0d1af.js"><link rel="prefetch" href="/assets/js/28.3fe8a3b1.js"><link rel="prefetch" href="/assets/js/29.452f9ec2.js"><link rel="prefetch" href="/assets/js/3.078209c2.js"><link rel="prefetch" href="/assets/js/30.159abf4f.js"><link rel="prefetch" href="/assets/js/31.d922fcf9.js"><link rel="prefetch" href="/assets/js/32.8a637ecb.js"><link rel="prefetch" href="/assets/js/33.95ef74d0.js"><link rel="prefetch" href="/assets/js/34.efd23aa5.js"><link rel="prefetch" href="/assets/js/35.7416dc47.js"><link rel="prefetch" href="/assets/js/36.710fd3e2.js"><link rel="prefetch" href="/assets/js/37.8fc3cb59.js"><link rel="prefetch" href="/assets/js/38.8afeb2de.js"><link rel="prefetch" href="/assets/js/39.c4ce0598.js"><link rel="prefetch" href="/assets/js/4.8fe7a186.js"><link rel="prefetch" href="/assets/js/40.140b79eb.js"><link rel="prefetch" href="/assets/js/41.39a96049.js"><link rel="prefetch" href="/assets/js/42.a6b4bbda.js"><link rel="prefetch" href="/assets/js/43.f03b86b8.js"><link rel="prefetch" href="/assets/js/44.da0929d6.js"><link rel="prefetch" href="/assets/js/45.3fdc56bd.js"><link rel="prefetch" href="/assets/js/46.e9a82ef5.js"><link rel="prefetch" href="/assets/js/47.0931237f.js"><link rel="prefetch" href="/assets/js/48.61b0e2c9.js"><link rel="prefetch" href="/assets/js/49.e8723561.js"><link rel="prefetch" href="/assets/js/5.5967bee8.js"><link rel="prefetch" href="/assets/js/50.f288fa25.js"><link rel="prefetch" href="/assets/js/51.a0dc928a.js"><link rel="prefetch" href="/assets/js/52.e5dc9281.js"><link rel="prefetch" href="/assets/js/53.3713556c.js"><link rel="prefetch" href="/assets/js/54.101160d6.js"><link rel="prefetch" href="/assets/js/55.071dce7b.js"><link rel="prefetch" href="/assets/js/56.267a8552.js"><link rel="prefetch" href="/assets/js/57.bd69804b.js"><link rel="prefetch" href="/assets/js/58.bdabc7c8.js"><link rel="prefetch" href="/assets/js/59.3e5037f7.js"><link rel="prefetch" href="/assets/js/6.17dcb484.js"><link rel="prefetch" href="/assets/js/60.d40de169.js"><link rel="prefetch" href="/assets/js/61.7dc8e2e8.js"><link rel="prefetch" href="/assets/js/62.9a1231b4.js"><link rel="prefetch" href="/assets/js/63.bcae3768.js"><link rel="prefetch" href="/assets/js/64.bf09108d.js"><link rel="prefetch" href="/assets/js/65.9b486ac3.js"><link rel="prefetch" href="/assets/js/66.90e8a0f0.js"><link rel="prefetch" href="/assets/js/67.d01a2247.js"><link rel="prefetch" href="/assets/js/68.221079cf.js"><link rel="prefetch" href="/assets/js/69.5e64e3f0.js"><link rel="prefetch" href="/assets/js/7.28c1da78.js"><link rel="prefetch" href="/assets/js/70.59fbcdb2.js"><link rel="prefetch" href="/assets/js/71.1b9a3524.js"><link rel="prefetch" href="/assets/js/72.37939565.js"><link rel="prefetch" href="/assets/js/73.fe5c40a5.js"><link rel="prefetch" href="/assets/js/74.4b4ba2cb.js"><link rel="prefetch" href="/assets/js/75.16ea8ea6.js"><link rel="prefetch" href="/assets/js/76.40e37aa2.js"><link rel="prefetch" href="/assets/js/77.b454229e.js"><link rel="prefetch" href="/assets/js/78.9e461c2f.js"><link rel="prefetch" href="/assets/js/79.b4ad1ba8.js"><link rel="prefetch" href="/assets/js/80.b4d0f546.js"><link rel="prefetch" href="/assets/js/81.8cc80e22.js"><link rel="prefetch" href="/assets/js/82.b0eb7a5c.js"><link rel="prefetch" href="/assets/js/83.b6bfcf8c.js"><link rel="prefetch" href="/assets/js/84.21ce5c07.js"><link rel="prefetch" href="/assets/js/85.29fb0518.js"><link rel="prefetch" href="/assets/js/86.a3b54c1d.js"><link rel="prefetch" href="/assets/js/87.ff3adcc3.js"><link rel="prefetch" href="/assets/js/88.985c6a0f.js"><link rel="prefetch" href="/assets/js/89.979f9ae0.js"><link rel="prefetch" href="/assets/js/90.20fa6605.js"><link rel="prefetch" href="/assets/js/91.c65cb099.js"><link rel="prefetch" href="/assets/js/92.eff0c275.js"><link rel="prefetch" href="/assets/js/93.45204140.js"><link rel="prefetch" href="/assets/js/94.320cc47b.js"><link rel="prefetch" href="/assets/js/95.725966b1.js"><link rel="prefetch" href="/assets/js/96.d5603c60.js"><link rel="prefetch" href="/assets/js/97.b016582d.js"><link rel="prefetch" href="/assets/js/98.d296c438.js"><link rel="prefetch" href="/assets/js/99.235adf16.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.34249538.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1a435f77.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">前端WebGL</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/articles/webgl/" class="nav-link">
  图形学
</a></div><div class="nav-item"><a href="/articles/threejs/" class="nav-link">
  threejs
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/articles/webgl/" class="nav-link">
  图形学
</a></div><div class="nav-item"><a href="/articles/threejs/" class="nav-link">
  threejs
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/articles/webpack/" aria-current="page" class="active sidebar-link">webpack基础知识点总结</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/articles/webpack/webpack工作流程总结.html" class="sidebar-link">webpack工作流程总结</a></li><li><a href="/articles/webpack/webpack常见优化手段.html" class="sidebar-link">webpack常见优化手段</a></li><li><a href="/articles/webpack/webpack的Loader机制.html" class="sidebar-link">webpack的Loader机制</a></li><li><a href="/articles/webpack/webpack解决了什么问题？.html" class="sidebar-link">webpack解决了什么问题？</a></li><li><a href="/articles/webpack/常见打包工具的对比.html" class="sidebar-link">常见打包工具的对比</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>  &lt;该思维导图是根据<code>&lt;&lt;深入浅出webpack&gt;&gt;</code>章节大纲总结出来的。通过阅读这本书梳理webpack所包含的知识点，了解了webpack（版本为4.X）的相关配置，以及loader和plugin的原理以及编写。思维导图能够很形象的描述出各知识点之间的关系，同时也能加深知识点在我们心中的印象。画此思维导图的目的也是为了供以后自己复习用的。</p> <img src="/assets/img/webpack核心概念及常见配置项.50681c45.png" alt="webpack.png"> <h3 id="_1、webpack的作用"><a href="#_1、webpack的作用" class="header-anchor">#</a> 1、webpack的作用</h3> <p>  webpack的主要作用是构建，把源代码转换成发布到线上的可执行 JavaScrip、CSS、HTML 代码。在构建的过程中主要做了这几方面的功能。</p> <ul><li>代码转换：将非js文件如 TS 转换成 js，将 scss 转换成 css（Loaderclear）；</li> <li>文件优化：压缩 js、css、html、压缩合并图片（plugin如uglify）。</li> <li>代码分割：提取多个页面的公共代码，提取首屏不需要加载的代码让其异步加载（commons-chunk-plugin）。</li> <li>模块合并：将模块分类合并成一个文件。</li> <li>自动刷新：监听本地代码的变化，自动重新构建、并刷新浏览器（<strong>配置文件watch和watchOPtions及热更新plugin</strong>）。</li> <li>代码校验：代码提交到仓库之前需要校验代码是否符合规范，以及单元测试是否通过。</li> <li>自动发布：更新完代码后，自动构建出线上发布代码并传输到发布系统。</li></ul> <h3 id="_2、webpack核心概念"><a href="#_2、webpack核心概念" class="header-anchor">#</a> 2、webpack核心概念</h3> <ul><li>Entry：入口，Webpack 执行构建的第一步将从 Entry 开始，可抽象成输入。</li> <li>Output:出口，告诉 webpack 在哪里输出它所创建的 bundles，以及如何命名这些文件，默认值为 ./dist。</li> <li>Module：模块，在 Webpack 里一切皆模块，一个模块对应着一个文件。Webpack 会从配置的 Entry 开始递归找出所有依赖的模块。</li> <li>Chunk：代码块，一个 Chunk 由多个模块组合而成，用于代码合并与分割。</li> <li>Loader：模块转换器，用于把模块原内容按照需求转换成新内容。</li> <li>Plugin：扩展插件，在 Webpack 构建流程中的特定时机会广播出对应的事件，插件可以监听这些事件的发生，在特定时机做对应的事情。</li></ul> <h3 id="_3、webpack的常见配置"><a href="#_3、webpack的常见配置" class="header-anchor">#</a> 3、webpack的常见配置</h3> <p><strong>3.1 Entry</strong></p> <p>  构建的入口，Webpack 执行构建的第一步将从 Entry 开始，可抽象成输入。通过搜寻及递归找出所有入口所依赖的模块。<strong>Entry 主要有 String、Array 和 Object 三种类型</strong>。如果为 Array 类型时，搭配 output.library 配置项使用时，只有数组里的最后一个入口文件的模块会被导出。</p> <ul><li>如果 entry 是一个 string或者array，就只会生成一个 Chunk，这时 Chunk 的名称是 main 。</li> <li>如果 entry 是一个 object ，就可能会出现多个 Chunk，这时 Chunk 的名称是 object 键值对中键的名称。</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>    module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
        <span class="token literal-property property">entry</span><span class="token operator">:</span><span class="token string">'./app/entry'</span><span class="token punctuation">,</span>	<span class="token comment">//入口模块的文件路径，可以是相对路径。</span>
        <span class="token literal-property property">entry</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'./app/entry1'</span><span class="token punctuation">,</span> <span class="token string">'./app/entry2'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//入口模块的文件路径，可以是相对路径。只有1个入口,两个入口文件</span>
        <span class="token literal-property property">entry</span><span class="token operator">:</span><span class="token punctuation">{</span> 
            <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">'./app/entry-a'</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'./app/entry-b1'</span><span class="token punctuation">,</span> <span class="token string">'./app/entry-b2'</span><span class="token punctuation">]</span>
            <span class="token comment">//配置多个入口，每个入口生成一个 Chunk。两个入口。</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>  有时候由于项目需要，可能需要构建多个页面入口。除了上面的静态页面入口配置，还可以动态配置页面入口。一般有如下两种方式。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>    <span class="token comment">//同步函数</span>
    <span class="token function-variable function">entry</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token string">&quot;@/pages/index&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">&quot;@pages/user&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">//异步函数</span>
    <span class="token function-variable function">entry</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
           <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">'./pages/a'</span><span class="token punctuation">,</span>
           <span class="token literal-property property">b</span><span class="token operator">:</span><span class="token string">'./pages/b'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>3.2 Output</strong>：</p> <p>  配置如何输出最终想要的代码。output 是一个 object，里面包含一系列配置项，下面分别介绍它们。</p> <ul><li>filename:输出文件的名称，为string 类型。</li> <li>chunkFilename: 配置无入口的 Chunk 在输出时的文件名称。chunkFilename 只用于指定在运行过程中生成的 Chunk 在输出时的文件名称.常见的会在运行时生成 Chunk 场景有在使用 <strong>CommonChunkPlugin、使用 import('path/to/module')</strong> 动态加载等时。</li> <li>path:输出文件存放在本地的目录，必须是 string 类型的绝对路径。通常通过 Node.js 的 path 模块去获取绝对路径。</li> <li>publicPath:加载异步资源对应的 URL 地址。一般为CDN地址。通常用于配置发布到线上资源的 URL 前缀，为string 类型。 默认值是空字符串 ''，即使用相对路径。<strong>output.path 和 output.publicPath 都支持字符串模版，内置变量只有一个：hash 代表一次编译操作的 Hash 值。</strong></li> <li>libraryTarget：配置以何种方式导出库。是字符串的枚举类型。通常搭配target使用。通常有var、commonjs、commonjs2、this、window和global等值。</li> <li>target：配置导出库的名称。</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
      <span class="token operator">...</span>
      <span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span>
          <span class="token comment">//如果只有一个输出文件，则可以把它写成静态不变的。</span>
          <span class="token literal-property property">filename</span><span class="token operator">:</span><span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
          <span class="token comment">//多个 Chunk 要输出时,可以根据 Chunk 的名称来区分输出的文件名</span>
          <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span><span class="token comment">//可以将[name]看成字符串模板函数。该name为内置的哈希值。</span>
          <span class="token literal-property property">chunkFilename</span><span class="token operator">:</span><span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">.</span>js，
          <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          publicPath：<span class="token string">'https://cdn.example.com/assets/'</span>，
          <span class="token literal-property property">libraryTarget</span><span class="token operator">:</span><span class="token keyword">var</span>
          
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>内置变量主要有以下这些：</p> <ul><li>id：	Chunk 的唯一标识，从0开始。</li> <li>name：	Chunk 的名称。</li> <li>hash：	Chunk 的唯一标识的 Hash 值。</li> <li>chunkhash：	Chunk 内容的 Hash 值。</li></ul> <p><strong>3.3 Module</strong></p> <p>  模块，在 Webpack 里一切皆模块，一个模块对应着一个文件。Webpack 会从配置的 Entry 开始递归找出所有依赖的模块。主要有这些配置项。</p> <ul><li>rules：用来<strong>配置模块的读取和解析规则</strong>，通常用来配置 loader，是一个数组。配置一项 rule 一般是通过以下几项来完成的。</li> <li>noParse：忽略的文件。</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>    module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
        <span class="token operator">...</span>
        <span class="token literal-property property">module</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token comment">//让 Webpack 忽略对部分没采用模块化的文件的递归解析和处理。</span>
            noParse： <span class="token operator">/</span>jquery<span class="token operator">|</span>chartjs<span class="token operator">/</span>
            <span class="token comment">// 从 webpack 3.0.0 开始，也可以是函数</span>
            <span class="token function-variable function">noParse</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token keyword">return</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">jquery|lodash</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><span class="token comment">//转码执行后缀的文件，一般是正则表达式。可为数组</span>
                    <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'babel-loader?cacheDirectory'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//?cacheDirectory 表示传给 babel-loader 的参数，用于缓存 babel 编译结果加快重新编译速度。是loader 属性的简写方式.（如：use: [ { loader: &quot;style-loader &quot;} ]）。</span>
                    <span class="token literal-property property">include</span><span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&quot;src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//只命中src文件夹下的就是文件。可为数组</span>
                    <span class="token comment">//解析选项对象。可以更细粒度的配置哪些模块语法要解析哪些不解析</span>
                    <span class="token literal-property property">parser</span><span class="token operator">:</span><span class="token punctuation">{</span>
                        <span class="token literal-property property">amd</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 AMD</span>
                        <span class="token literal-property property">commonjs</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 CommonJS</span>
                        <span class="token literal-property property">system</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 SystemJS</span>
                        <span class="token literal-property property">harmony</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 ES2015 Harmony import/export</span>
                        <span class="token literal-property property">requireInclude</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 require.include</span>
                        <span class="token literal-property property">requireEnsure</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 require.ensure</span>
                        <span class="token literal-property property">requireContext</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 require.context</span>
                        <span class="token literal-property property">browserify</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用特殊处理的 browserify bundle</span>
                        <span class="token literal-property property">requireJs</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 requirejs.*</span>
                        <span class="token literal-property property">node</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 __dirname, __filename, module, require.extensions, require.main 等。</span>
                        <span class="token literal-property property">node</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span> <span class="token comment">// 在模块级别(module level)上重新配置 node 层(layer)</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">exclude</span><span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'node_modules'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//排除node_module文件夹下的js文件。可为数组。</span>
                    
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.scss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
                    <span class="token comment">// 使用一组 Loader 去处理 SCSS 文件。处理顺序为从后到前，即先交给 sass-loader 处理，再把结果交给 css-loader 最后再给 style-loader。</span>
                    <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'sass-loader'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                    <span class="token comment">// 排除 node_modules 目录下的文件</span>
                    <span class="token literal-property property">exclude</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'node_modules'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>   
                    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span>
                    <span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">[</span>
                        <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
                        <span class="token comment">//在 Loader 需要传入很多参数时，你还可以通过一个 Object 来描述。</span>
                        <span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span>
                          <span class="token literal-property property">cacheDirectory</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
                        <span class="token comment">// enforce:'post' 的含义是把该 Loader 的执行顺序放到最后。 enforce 的值还可以是 pre，代表把 Loader 的执行顺序放到最前面</span>
                        <span class="token literal-property property">enforce</span><span class="token operator">:</span><span class="token string">'post'</span>
                    <span class="token punctuation">]</span>
                 <span class="token punctuation">}</span><span class="token punctuation">,</span>
                 <span class="token comment">//loader还可以采用链式写法。loader从右到左的被调用</span>
                 <span class="token punctuation">{</span>
                    <span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span>
                     <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                      <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
                      <span class="token punctuation">{</span>
                        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
                        <span class="token comment">//</span>
                        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                          <span class="token literal-property property">importLoaders</span><span class="token operator">:</span> <span class="token number">1</span>
                        <span class="token punctuation">}</span>
                      <span class="token punctuation">}</span><span class="token punctuation">,</span>
                      <span class="token punctuation">{</span>
                        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'less-loader'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                          <span class="token literal-property property">noIeCompat</span><span class="token operator">:</span> <span class="token boolean">true</span>
                        <span class="token punctuation">}</span>
                      <span class="token punctuation">}</span>
                    <span class="token punctuation">]</span>
                 <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><p><strong>3.4 Resolve</strong></p> <p>  Resolve 配置 Webpack 如何寻找模块所对应的文件。设置模块如何被解析。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>    module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
        <span class="token operator">...</span>
        <span class="token literal-property property">resolve</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token comment">//通过别名来把原导入路径映射成一个新的导入路径</span>
            <span class="token literal-property property">alias</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token string-property property">'components'</span><span class="token operator">:</span> <span class="token string">'./src/components/'</span><span class="token punctuation">,</span>
                <span class="token string-property property">'@'</span><span class="token operator">:</span><span class="token string">&quot;./src&quot;</span><span class="token punctuation">,</span>
                 <span class="token operator">~</span><span class="token operator">:</span><span class="token string">&quot;./src&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">'vue$'</span><span class="token operator">:</span> <span class="token string">'vue/dist/vue.esm.js'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//指定一个字段，例如 browser(浏览器环境)，根据此规范进行解析。只会使用找到的第一个</span>
            <span class="token literal-property property">aliasFields</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'browser'</span><span class="token punctuation">,</span> <span class="token string">'main'</span><span class="token punctuation">]</span>
            <span class="token literal-property property">descriptionFiles</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;package.json&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//描述文件</span>
            <span class="token literal-property property">enforceExtension</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">//是否强制扩展名</span>
            <span class="token literal-property property">extensions</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;.js&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;.json&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//自动解析的扩展,导入语句没带文件后缀时，Webpack 会自动带上后缀后去尝试访问文件是否存在.</span>
            modules：<span class="token punctuation">[</span><span class="token string">'./src/components'</span><span class="token punctuation">,</span><span class="token string">'node_modules'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//告诉 webpack 解析模块时应该搜索的目录。绝对路径和相对路径都能使用。</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><p><strong>3.5 Plugins</strong></p> <p>  用于以各种方式自定义 webpack 构建过程。通过在webpack构建过程中，通过在特定的事件阶段，注入相应的逻辑来达到想要的效果。<br></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>    module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
        <span class="token operator">...</span>
        <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
            <span class="token comment">// 显示出被替换模块的名称</span>
            <span class="token keyword">new</span> <span class="token class-name">NamedModulesPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
             <span class="token comment">//定义全局环境变量的值</span>
            <span class="token keyword">new</span> <span class="token class-name">DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token comment">// 定义 NODE_ENV 环境变量为 production</span>
              <span class="token string-property property">'process.env'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token constant">NODE_ENV</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">'production'</span><span class="token punctuation">)</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">//清除文件夹（在打包时使用）</span>
            <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'dist'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">//生成模板文件，生成默认开始页面的文件，默认为index.html</span>
            <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Output Management'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">filename</span><span class="token operator">:</span><span class="token string">&quot;index.html&quot;</span><span class="token punctuation">,</span>
              <span class="token literal-property property">template</span><span class="token operator">:</span><span class="token string">&quot;index.html&quot;</span><span class="token punctuation">,</span>
              <span class="token literal-property property">inject</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//将所有的资源注入到template指定的index.html中。</span>
              
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">//压缩代码（只在生产环境下使用）</span>
            <span class="token keyword">new</span> <span class="token class-name">UglifyJSPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token literal-property property">cache</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//是否使文件缓存</span>
              <span class="token literal-property property">parallel</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//并行压缩代码</span>
              <span class="token literal-property property">sourceMap</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//是否为打包后的代码生成源码</span>
              <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token comment">// 在UglifyJs删除没有用到的代码时不输出警告</span>
                <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token comment">// 删除所有的 `console` 语句，可以兼容ie浏览器</span>
                <span class="token literal-property property">drop_console</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token comment">// 内嵌定义了但是只用到一次的变量</span>
                <span class="token literal-property property">collapse_vars</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token comment">// 提取出出现多次但是没有定义成变量去引用的静态值</span>
                <span class="token literal-property property">reduce_vars</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">dead_code</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//删除无用代码</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token comment">// 最紧凑的输出</span>
                <span class="token literal-property property">beautify</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token comment">// 删除所有的注释</span>
                <span class="token literal-property property">comments</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">//Scope Hoisting 作用域提升，使得代码体积更小，内存开销也更小 ,</span>
            <span class="token keyword">new</span> <span class="token class-name">ModuleConcatenationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">//在 Webpack 输出最终的代码之前，对这些代码进行优化</span>
            <span class="token keyword">new</span> <span class="token class-name">PrepackWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">// 生成动态链接库文件，一般会单独新建dll.config.js文件，调用此插件，把一些公共常用的第三方模块打包成一个动态链接库。动态链接库只需要编译一次，在之后的构建过程中被动态链接库包含的模块将不会在重新编译，而是直接使用动态链接库中的代码。</span>
            <span class="token keyword">new</span> <span class="token class-name">DllPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token comment">// 动态链接库的全局变量名称，需要和 output.library 中保持一致</span>
              <span class="token comment">// 该字段的值也就是输出的 manifest.json 文件 中 name 字段的值</span>
              <span class="token comment">// 例如 react.manifest.json 中就有 &quot;name&quot;: &quot;_dll_react&quot;</span>
              <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'_dll_[name]'</span><span class="token punctuation">,</span>
              <span class="token comment">// 描述动态链接库的 manifest.json 文件输出时的文件名称</span>
              <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">,</span> <span class="token string">'[name].manifest.json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">// 告诉 Webpack 使用了哪些动态链接库</span>
            <span class="token keyword">new</span> <span class="token class-name">DllReferencePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token comment">// 描述 react 动态链接库的文件内容</span>
              <span class="token literal-property property">manifest</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./dist/react.manifest.json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">// 该插件的作用就是实现模块热替换，实际上当启动时带上 `--hot` 参数，会注入该插件，生成 .hot-update.json 文件。</span>
            <span class="token keyword">new</span> <span class="token class-name">HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">//自动加载模块，而不必到处 import 或 require 。</span>
            <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token literal-property property">$</span><span class="token operator">:</span> <span class="token string">'jquery'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">jQuery</span><span class="token operator">:</span> <span class="token string">'jquery'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
</code></pre></div><p><strong>3.6 DevServer</strong></p> <p>  此配置项为webpack-dev-server的专有配置项。除了在DevServer中进行配置外，还可以通过命令行参数传入。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>    module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
        <span class="token operator">...</span>
        <span class="token literal-property property">devServer</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token literal-property property">hot</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//是否启用 webpack 的模块热替换功能。DevServer 默认的行为是在发现源代码被更新后会通过自动刷新整个页面来做到实时预览，开启模块热替换功能后将在不刷新整个页面的情况下通过用新模块替换老模块来做到实时预览。</span>
            <span class="token literal-property property">inline</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//DevServer 的实时预览功能依赖一个注入到页面里的代理客户端去接受来自 DevServer 的命令和负责刷新网页的工作。inline 用于配置是否自动注入这个代理客户端到将运行在页面里的 Chunk 里去，默认是会自动注入。</span>
            <span class="token literal-property property">contentBase</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token comment">//配置 DevServer HTTP 服务器的文件根目录。 默认情况下为当前执行目录，通常是项目根目录.</span>
            <span class="token comment">//可以在 HTTP 响应中注入一些 HTTP 响应头，</span>
            <span class="token literal-property property">headers</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token string-property property">'X-foo'</span><span class="token operator">:</span><span class="token string">'bar'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">host</span><span class="token operator">:</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token punctuation">,</span><span class="token comment">//配置监听地址</span>
            <span class="token literal-property property">port</span><span class="token operator">:</span><span class="token number">8080</span><span class="token punctuation">,</span><span class="token comment">//配置监听端口号</span>
            <span class="token literal-property property">open</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//是否自动打开浏览器，</span>
            <span class="token literal-property property">openPage</span><span class="token operator">:</span><span class="token string">&quot;index.html&quot;</span><span class="token punctuation">,</span><span class="token comment">//配置浏览器自启时的网页</span>
            allowedHosts： <span class="token punctuation">[</span>
              <span class="token string">'host.com'</span><span class="token punctuation">,</span>
              <span class="token string">'subdomain.host.com'</span><span class="token punctuation">,</span>
              <span class="token string">'subdomain2.host.com'</span><span class="token punctuation">,</span>
              <span class="token string">'host2.com'</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//配置一个白名单列表，只有 HTTP 请求的 HOST 在列表里才正常返回</span>
            <span class="token literal-property property">compress</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//是否开启gzip压缩。默认为false</span>
            <span class="token comment">//展示编译信息</span>
            <span class="token literal-property property">overlay</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">quiet</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//启用 quiet 后，除了初始启动信息之外的任何内容都不会被打印到控制台。这也意味着来自 webpack 的错误或警告在控制台不可见。</span>
            <span class="token comment">//设置前端代理，访问后台</span>
            
            <span class="token literal-property property">stats</span><span class="token operator">:</span><span class="token string">&quot;errors-only&quot;</span><span class="token punctuation">,</span><span class="token comment">//控制展示webpack构建信息</span>
            <span class="token literal-property property">proxy</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token string-property property">&quot;/api&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:3000&quot;</span><span class="token punctuation">,</span><span class="token comment">//表示后端服务接口地址为http://localhost:3000/api</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">//配置多个代理路径</span>
            <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
              <span class="token literal-property property">context</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;/auth&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/api&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:3000&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token keyword">public</span><span class="token operator">:</span><span class="token string">&quot;myapp.test:80&quot;</span><span class="token punctuation">,</span><span class="token comment">//当启用内联模式时（inline：true），内联的客户端脚本所在的目录。</span>
            <span class="token keyword">public</span>：<span class="token string">&quot;/assets/&quot;</span><span class="token punctuation">,</span><span class="token comment">//此路径下的打包文件可在浏览器中访问.http://localhost:8080/assets/bundle.js可以范围打包后的bundle.js文件。</span>
            
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><p><strong>3.7 其他常见配置项</strong></p> <ul><li>devtool：配置 Webpack 如何生成 Source Map。有很多配置项。可以使用SourceMapDevToolPlugin插件来替换该配置，进行更细粒度的控制。</li> <li>target：webpack 能够为多种环境或 target 构建编译。webpack 为目标(target)指定一个环境。target 的取值可以为 web（默认，浏览器环境）、node（node 环境，使用 require 加载 chunk 代码，此时源码中的 require(&quot;fs&quot;)中的方式模块不会打包到 chunk 里）、async-node（异步加载 chunk 代码）、webworker、electron-main、electron-renderer。</li> <li>watch：false,为true时表示启用 Watch 模式。这意味着在初始构建之后，webpack 将继续监听任何已解析文件的更改。Watch 模式默认关闭。<strong>在使用 DevServer 时，监听模式默认是开启的。</strong></li> <li>watchOptions：在watch为true时，才有效。</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
    module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
        <span class="token operator">...</span>
        <span class="token literal-property property">devtool</span><span class="token operator">:</span><span class="token string">&quot;cheap-source-map&quot;</span><span class="token punctuation">,</span> <span class="token comment">//转换过的代码（仅限行)</span>
        <span class="token literal-property property">devtool</span><span class="token operator">:</span><span class="token string">&quot;cheap-source-map&quot;</span><span class="token punctuation">,</span><span class="token comment">//原始源代码</span>
        <span class="token comment">//开发环境的配置</span>
        <span class="token literal-property property">devtool</span><span class="token operator">:</span><span class="token string">&quot;eval&quot;</span><span class="token punctuation">,</span><span class="token comment">//生成后的代码 ,每个模块相互分离，并用模块名称进行注释。</span>
        <span class="token literal-property property">devtool</span><span class="token operator">:</span><span class="token string">&quot;eval-source-map&quot;</span><span class="token punctuation">,</span><span class="token comment">//原始源代码</span>
        <span class="token literal-property property">devtool</span><span class="token operator">:</span><span class="token string">&quot;cheap-eval-source-map&quot;</span><span class="token punctuation">,</span><span class="token comment">//转换过的代码（仅限行），它会忽略源自 loader 的 source map，并且仅显示转译后的代码</span>
        <span class="token literal-property property">devtool</span><span class="token operator">:</span><span class="token string">&quot;cheap-module-eval-source-map&quot;</span><span class="token punctuation">,</span><span class="token comment">//原始源代码（仅限行），源自 loader 的 source map 会得到更好的处理结果</span>
        <span class="token comment">//生产环境的配置</span>
        <span class="token literal-property property">devtool</span><span class="token operator">:</span><span class="token punctuation">(</span>none<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//省略该项配置 //打包后的代码,所有生成的代码视为一大块代码。你看不到相互分离的模块。</span>
        <span class="token literal-property property">devtool</span><span class="token operator">:</span><span class="token string">&quot;source-map&quot;</span><span class="token punctuation">,</span> <span class="token comment">//原始源代码，便于调试。它为 bundle 添加了一个引用注释，以便开发工具知道在哪里可以找到它。</span>
        <span class="token literal-property property">devtool</span><span class="token operator">:</span><span class="token string">&quot;hidden-source-map&quot;</span><span class="token punctuation">,</span><span class="token comment">//与 source-map 相同，但不会为 bundle 添加引用注释。如果你只想 source map 映射那些源自错误报告的错误堆栈跟踪信息，但不想为浏览器开发工具暴露你的 source map，这个选项会很有用。</span>
        <span class="token literal-property property">devtool</span><span class="token operator">:</span><span class="token string">&quot;nosources-source-map&quot;</span><span class="token punctuation">,</span><span class="token comment">//创建的 source map 不包含 sourcesContent(源代码内容)。它可以用来映射客户端上的堆栈跟踪，而无须暴露所有的源代码。</span>
        target：<span class="token string">&quot;web&quot;</span><span class="token punctuation">,</span><span class="token comment">//默认值，浏览器环境</span>
        target：<span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span><span class="token comment">//node环境</span>
        <span class="token literal-property property">watch</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//在使用 DevServer 时，监听模式默认是开启的。</span>
        <span class="token comment">//在watch配置为true时，下面的配置项才会生效。</span>
        watchOptions：<span class="token punctuation">{</span>
            <span class="token literal-property property">ignored</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><span class="token comment">//不监听的文件夹</span>
            aggregateTimeout：<span class="token number">300</span><span class="token punctuation">,</span><span class="token comment">//监听到变化发生后会等300ms再去执行动作，防止文件更新太快导致重新编译频率太高</span>
            poll：<span class="token number">1000</span><span class="token punctuation">,</span><span class="token comment">//多久轮询一次</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><ul><li>externals：防止将某些 import 的包(package)打包到 bundle 中，而是在运行时(runtime)再去从外部获取这些扩展依赖。</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>    <span class="token comment">//在index.html以外联脚本的方式引入脚本文件</span>
    <span class="token operator">&lt;</span>script
      src<span class="token operator">=</span><span class="token string">&quot;https://code.jquery.com/jquery-3.1.0.js&quot;</span>
      integrity<span class="token operator">=</span><span class="token string">&quot;sha256-slogkvB1K3VOkzAI8QITxV3VzpOnkeNVsKvtkYLMjfk=&quot;</span>
      crossorigin<span class="token operator">=</span><span class="token string">&quot;anonymous&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token comment">//在配置文件中就可以通过如下配置，不讲jquery打包。</span>
    module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
        <span class="token operator">...</span>
        <span class="token literal-property property">externals</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token comment">//string类型</span>
          <span class="token literal-property property">$</span><span class="token operator">:</span> <span class="token string">'jQuery'</span><span class="token punctuation">,</span>
          <span class="token comment">//Array类型</span>
          <span class="token literal-property property">subtract</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'./math'</span><span class="token punctuation">,</span> <span class="token string">'subtract'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//表示的是。用subtract去代替./math/subtract方法。</span>
          <span class="token comment">//Object类型</span>
          <span class="token literal-property property">lodash</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">commonjs</span><span class="token operator">:</span> <span class="token string">&quot;lodash&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">amd</span><span class="token operator">:</span> <span class="token string">&quot;lodash&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token string">&quot;_&quot;</span> <span class="token comment">// 指向全局变量</span>
          <span class="token punctuation">}</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><ul><li>performance：这些选项可以控制 webpack 如何通知「资源(asset)和入口起点超过指定文件限制」。</li> <li>stat：webpack构建时的统计信息。</li> <li>node:配置是否 polyfill 或 mock 某些 Node.js 全局变量和模块。这可以使最初为 Node.js 环境编写的代码，在其他环境（如浏览器）中运行。此功能由 webpack 内部的 NodeStuffPlugin 插件提供。</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>    module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
        performance：<span class="token punctuation">{</span>
            <span class="token literal-property property">maxEntrypointSize</span><span class="token operator">:</span> <span class="token number">400000</span><span class="token punctuation">,</span><span class="token comment">//默认值是：250000 (bytes)。入口起点文件的最大体积。控制 webpack 何时生成性能提示.</span>
            maxAssetSize：<span class="token number">100000</span><span class="token punctuation">,</span><span class="token comment">//资源(asset)是从 webpack 生成的任何文件,控制 webpack 何时生成性能提示。默认值是：250000 (bytes)。</span>
            <span class="token literal-property property">hints</span><span class="token operator">:</span><span class="token boolean">false</span> <span class="token operator">|</span> <span class="token string">&quot;error&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;warning&quot;</span><span class="token punctuation">,</span><span class="token comment">//打开或关闭提示。此属性默认设置为 &quot;warning&quot;。可以以提醒或错误的方式提醒你文件大小是否超过你设置的大小。</span>
            <span class="token comment">//对提示文件进行一个过滤。</span>
            <span class="token function-variable function">assetFilter</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">assetFilename</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> assetFilename<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">stas</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token comment">// `webpack --colors` 等同于</span>
            <span class="token literal-property property">colors</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token comment">// 添加错误的详细信息（就像解析日志一样）</span>
            <span class="token literal-property property">errorDetails</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token comment">// 添加时间信息</span>
            <span class="token literal-property property">timings</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token comment">// 添加 webpack 版本信息</span>
            <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">//以下是默认值。从 webpack 3.0.0 开始，node 选项可能被设置为 false，以完全关闭 NodeStuffPlugin 和 NodeSourcePlugin 插件。</span>
        <span class="token literal-property property">node</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token literal-property property">console</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">// 什么都不提供。预期获取此对象的代码，可能会因为获取不到此对象，触发 ReferenceError 而崩溃</span>
            <span class="token literal-property property">global</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//为true时表示提供 polyfill。</span>
            <span class="token literal-property property">process</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token literal-property property">__filename</span><span class="token operator">:</span> <span class="token string">&quot;mock&quot;</span><span class="token punctuation">,</span><span class="token comment">//提供 mock 实现预期接口，但功能很少或没有。</span>
            <span class="token literal-property property">__dirname</span><span class="token operator">:</span> <span class="token string">&quot;mock&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">Buffer</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token literal-property property">setImmediate</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><p><strong>3.8 整体配置</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>    module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
        <span class="token literal-property property">context</span><span class="token operator">:</span>__dirname<span class="token punctuation">,</span> <span class="token comment">// Webpack 使用的根目录，入口文件所处的目录的绝对路径的字符串。</span>
        <span class="token comment">/********entry配置*******/</span>
        <span class="token literal-property property">entry</span><span class="token operator">:</span><span class="token string">'./app/entry'</span><span class="token punctuation">,</span>	<span class="token comment">//入口模块的文件路径，可以是相对路径。</span>
        <span class="token literal-property property">entry</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'./app/entry1'</span><span class="token punctuation">,</span> <span class="token string">'./app/entry2'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//入口模块的文件路径，可以是相对路径。只有1个入口,两个入口文件</span>
        <span class="token literal-property property">entry</span><span class="token operator">:</span><span class="token punctuation">{</span> 
            <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">'./app/entry-a'</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'./app/entry-b1'</span><span class="token punctuation">,</span> <span class="token string">'./app/entry-b2'</span><span class="token punctuation">]</span>
            <span class="token comment">//配置多个入口，每个入口生成一个 Chunk。两个入口。</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">//同步函数</span>
        <span class="token function-variable function">entry</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token string">&quot;@/pages/index&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">&quot;@pages/user&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">//异步函数</span>
        <span class="token function-variable function">entry</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
               <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">'./pages/a'</span><span class="token punctuation">,</span>
               <span class="token literal-property property">b</span><span class="token operator">:</span><span class="token string">'./pages/b'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">/********entry配置*******/</span>
        <span class="token comment">/********output配置*******/</span>
        <span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span>
             <span class="token comment">//如果只有一个输出文件，则可以把它写成静态不变的。</span>
            <span class="token literal-property property">filename</span><span class="token operator">:</span><span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
            <span class="token comment">//多个 Chunk 要输出时,可以根据 Chunk 的名称来区分输出的文件名</span>
            <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span><span class="token comment">//可以将[name]看成字符串模板函数。该name为内置的哈希值。</span>
            <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'[chunkhash].js'</span><span class="token punctuation">,</span> <span class="token comment">// 根据文件内容 hash 值生成文件名称，用于浏览器长时间缓存文件</span>
            <span class="token literal-property property">chunkFilename</span><span class="token operator">:</span><span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">.</span>js<span class="token punctuation">,</span><span class="token comment">//配置无入口的 Chunk 在输出时的文件名称。常见的会在运行时生成 Chunk 场景有在使用 CommonChunkPlugin、使用 import('path/to/module') 动态加载等时。</span>
            <span class="token literal-property property">sourceMapFilename</span><span class="token operator">:</span> <span class="token string">&quot;[file].map&quot;</span><span class="token punctuation">,</span><span class="token comment">//此选项会向硬盘写入一个输出文件，只在 devtool 启用了 SourceMap 选项时才使用。</span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出文件存放在本地的目录</span>
            publicPath：<span class="token string">'https://cdn.example.com/assets/'</span><span class="token punctuation">,</span><span class="token comment">//加载异步资源对应的 URL 地址。</span>
            <span class="token literal-property property">publicPath</span><span class="token operator">:</span><span class="token string">&quot;/dist&quot;</span><span class="token punctuation">,</span><span class="token comment">//放到指定目录下</span>
            publicPath：<span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token comment">//放到根目录下</span>
            <span class="token comment">//配置以何种方式导出库。注意，此选项与分配给 output.library 的值一同使用</span>
            <span class="token literal-property property">libraryTarget</span><span class="token operator">:</span><span class="token string">&quot;var&quot;</span><span class="token punctuation">,</span><span class="token comment">//（默认值）当 library 加载完成，入口起点的返回值将分配给一个变量：</span>
            <span class="token literal-property property">libraryTarget</span><span class="token operator">:</span> <span class="token string">&quot;this&quot;</span><span class="token punctuation">,</span><span class="token comment">//入口起点的返回值将分配给 this 的一个属性（此名称由 output.library 定义）</span>
            <span class="token literal-property property">libraryTarget</span><span class="token operator">:</span> <span class="token string">&quot;window&quot;</span><span class="token punctuation">,</span><span class="token comment">//分配给 window 对象</span>
            <span class="token literal-property property">libraryTarget</span><span class="token operator">:</span> <span class="token string">&quot;global&quot;</span><span class="token punctuation">,</span><span class="token comment">//分配给 global 对象</span>
            <span class="token literal-property property">libraryTarget</span><span class="token operator">:</span> <span class="token string">&quot;commonjs&quot;</span><span class="token punctuation">,</span><span class="token comment">//入口起点的返回值将使用 output.library 中定义的值，分配给 exports 对象。</span>
            <span class="token literal-property property">libraryTarget</span><span class="token operator">:</span> <span class="token string">&quot;commonjs2&quot;</span><span class="token punctuation">,</span><span class="token comment">//入口起点的返回值将分配给 module.exports 对象</span>
            <span class="token literal-property property">libraryTarget</span><span class="token operator">:</span> <span class="token string">&quot;amd&quot;</span><span class="token punctuation">,</span><span class="token comment">//将你的 library 暴露为 AMD 模块。</span>
            <span class="token literal-property property">libraryTarget</span><span class="token operator">:</span> <span class="token string">&quot;umd&quot;</span><span class="token punctuation">,</span><span class="token comment">//将你的 library 暴露为所有的模块定义下都可运行的方式</span>
            <span class="token literal-property property">library</span><span class="token operator">:</span> <span class="token string">&quot;MyLibrary&quot;</span><span class="token punctuation">,</span>
            <span class="token operator">...</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
         <span class="token comment">/********output配置*******/</span>
         <span class="token comment">/********module配置*******/</span>
        <span class="token literal-property property">module</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token comment">//让 Webpack 忽略对部分没采用模块化的文件的递归解析和处理。</span>
            noParse： <span class="token operator">/</span>jquery<span class="token operator">|</span>chartjs<span class="token operator">/</span>
            <span class="token comment">// 从 webpack 3.0.0 开始，也可以是函数</span>
            <span class="token function-variable function">noParse</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token keyword">return</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">jquery|lodash</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><span class="token comment">//转码执行后缀的文件，一般是正则表达式。可为数组</span>
                    <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'babel-loader?cacheDirectory'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//?cacheDirectory 表示传给 babel-loader 的参数，用于缓存 babel 编译结果加快重新编译速度。是loader 属性的简写方式.（如：use: [ { loader: &quot;style-loader &quot;} ]）。</span>
                    <span class="token literal-property property">include</span><span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&quot;src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//只命中src文件夹下的就是文件。可为数组</span>
                    <span class="token comment">//解析选项对象。可以更细粒度的配置哪些模块语法要解析哪些不解析</span>
                    <span class="token literal-property property">parser</span><span class="token operator">:</span><span class="token punctuation">{</span>
                        <span class="token literal-property property">amd</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 AMD</span>
                        <span class="token literal-property property">commonjs</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 CommonJS</span>
                        <span class="token literal-property property">system</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 SystemJS</span>
                        <span class="token literal-property property">harmony</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 ES2015 Harmony import/export</span>
                        <span class="token literal-property property">requireInclude</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 require.include</span>
                        <span class="token literal-property property">requireEnsure</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 require.ensure</span>
                        <span class="token literal-property property">requireContext</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 require.context</span>
                        <span class="token literal-property property">browserify</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用特殊处理的 browserify bundle</span>
                        <span class="token literal-property property">requireJs</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 requirejs.*</span>
                        <span class="token literal-property property">node</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 __dirname, __filename, module, require.extensions, require.main 等。</span>
                        <span class="token literal-property property">node</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span> <span class="token comment">// 在模块级别(module level)上重新配置 node 层(layer)</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">exclude</span><span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'node_modules'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//排除node_module文件夹下的js文件。可为数组。</span>
                    
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.scss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
                    <span class="token comment">// 使用一组 Loader 去处理 SCSS 文件。处理顺序为从后到前，即先交给 sass-loader 处理，再把结果交给 css-loader 最后再给 style-loader。</span>
                    <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'sass-loader'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                    <span class="token comment">// 排除 node_modules 目录下的文件</span>
                    <span class="token literal-property property">exclude</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'node_modules'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>   
                    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
                    <span class="token comment">//use等同loaders</span>
                    <span class="token literal-property property">use</span><span class="token operator">:</span><span class="token punctuation">[</span>
                        <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
                        <span class="token comment">//在 Loader 需要传入很多参数时，你还可以通过一个 Object 来描述。</span>
                        <span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span>
                          <span class="token literal-property property">cacheDirectory</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
                        <span class="token comment">// enforce:'post' 的含义是把该 Loader 的执行顺序放到最后。 enforce 的值还可以是 pre，代表把 Loader 的执行顺序放到最前面</span>
                        <span class="token literal-property property">enforce</span><span class="token operator">:</span><span class="token string">'post'</span>
                    <span class="token punctuation">]</span>
                 <span class="token punctuation">}</span><span class="token punctuation">,</span>
                 <span class="token comment">//loader还可以采用链式写法。loader从右到左的被调用</span>
                 <span class="token punctuation">{</span>
                    <span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span>
                     <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                      <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
                      <span class="token punctuation">{</span>
                        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
                        <span class="token comment">//</span>
                        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                          <span class="token literal-property property">importLoaders</span><span class="token operator">:</span> <span class="token number">1</span>
                        <span class="token punctuation">}</span>
                      <span class="token punctuation">}</span><span class="token punctuation">,</span>
                      <span class="token punctuation">{</span>
                        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'less-loader'</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                          <span class="token literal-property property">noIeCompat</span><span class="token operator">:</span> <span class="token boolean">true</span>
                        <span class="token punctuation">}</span>
                      <span class="token punctuation">}</span>
                    <span class="token punctuation">]</span>
                 <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 配置插件</span>
        <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
             <span class="token comment">//定义全局环境变量的值</span>
            <span class="token keyword">new</span> <span class="token class-name">DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token comment">// 定义 NODE_ENV 环境变量为 production</span>
              <span class="token string-property property">'process.env'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token constant">NODE_ENV</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">'production'</span><span class="token punctuation">)</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">//清除文件夹（在打包时使用）</span>
            <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'dist'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">//生成模板文件，生成默认开始页面的文件，默认为index.html</span>
            <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Output Management'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">filename</span><span class="token operator">:</span><span class="token string">&quot;index.html&quot;</span><span class="token punctuation">,</span>
              <span class="token literal-property property">template</span><span class="token operator">:</span><span class="token string">&quot;index.html&quot;</span><span class="token punctuation">,</span>
              <span class="token literal-property property">inject</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//将所有的资源注入到template指定的index.html中。</span>
              
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">//压缩代码（只在生产环境下使用）</span>
            <span class="token keyword">new</span> <span class="token class-name">UglifyJSPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token literal-property property">cache</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//是否使文件缓存</span>
              <span class="token literal-property property">parallel</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//并行压缩代码</span>
              <span class="token literal-property property">sourceMap</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//是否为打包后的代码生成源码</span>
              <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token comment">// 在UglifyJs删除没有用到的代码时不输出警告</span>
                <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token comment">// 删除所有的 `console` 语句，可以兼容ie浏览器</span>
                <span class="token literal-property property">drop_console</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token comment">// 内嵌定义了但是只用到一次的变量</span>
                <span class="token literal-property property">collapse_vars</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token comment">// 提取出出现多次但是没有定义成变量去引用的静态值</span>
                <span class="token literal-property property">reduce_vars</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">dead_code</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//删除无用代码</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token comment">// 最紧凑的输出</span>
                <span class="token literal-property property">beautify</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token comment">// 删除所有的注释</span>
                <span class="token literal-property property">comments</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">//Scope Hoisting 作用域提升，使得代码体积更小，内存开销也更小 ,</span>
            <span class="token keyword">new</span> <span class="token class-name">ModuleConcatenationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">//在 Webpack 输出最终的代码之前，对这些代码进行优化</span>
            <span class="token keyword">new</span> <span class="token class-name">PrepackWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">// 生成动态链接库文件，一般会单独新建dll.config.js文件，调用此插件，把一些公共常用的第三方模块打包成一个动态链接库。动态链接库只需要编译一次，在之后的构建过程中被动态链接库包含的模块将不会在重新编译，而是直接使用动态链接库中的代码。</span>
            <span class="token keyword">new</span> <span class="token class-name">DllPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token comment">// 动态链接库的全局变量名称，需要和 output.library 中保持一致</span>
              <span class="token comment">// 该字段的值也就是输出的 manifest.json 文件 中 name 字段的值</span>
              <span class="token comment">// 例如 react.manifest.json 中就有 &quot;name&quot;: &quot;_dll_react&quot;</span>
              <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'_dll_[name]'</span><span class="token punctuation">,</span>
              <span class="token comment">// 描述动态链接库的 manifest.json 文件输出时的文件名称</span>
              <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">,</span> <span class="token string">'[name].manifest.json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">// 告诉 Webpack 使用了哪些动态链接库</span>
            <span class="token keyword">new</span> <span class="token class-name">DllReferencePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token comment">// 描述 react 动态链接库的文件内容</span>
              <span class="token literal-property property">manifest</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./dist/react.manifest.json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">// 该插件的作用就是实现模块热替换，实际上当启动时带上 `--hot` 参数，会注入该插件，生成 .hot-update.json 文件。</span>
            <span class="token keyword">new</span> <span class="token class-name">HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">//自动加载模块，而不必到处 import 或 require 。</span>
            <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token literal-property property">$</span><span class="token operator">:</span> <span class="token string">'jquery'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">jQuery</span><span class="token operator">:</span> <span class="token string">'jquery'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">// 配置寻找模块的规则</span>
        <span class="token literal-property property">resolve</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token comment">//通过别名来把原导入路径映射成一个新的导入路径</span>
            <span class="token literal-property property">alias</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token string-property property">'components'</span><span class="token operator">:</span> <span class="token string">'./src/components/'</span><span class="token punctuation">,</span>
                <span class="token string-property property">'@'</span><span class="token operator">:</span><span class="token string">&quot;./src&quot;</span><span class="token punctuation">,</span>
                 <span class="token operator">~</span><span class="token operator">:</span><span class="token string">&quot;./src&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">'vue$'</span><span class="token operator">:</span> <span class="token string">'vue/dist/vue.esm.js'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//指定一个字段，例如 browser(浏览器环境)，根据此规范进行解析。只会使用找到的第一个</span>
            <span class="token literal-property property">aliasFields</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'browser'</span><span class="token punctuation">,</span> <span class="token string">'main'</span><span class="token punctuation">]</span>
            <span class="token literal-property property">descriptionFiles</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;package.json&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//描述文件</span>
            <span class="token literal-property property">enforceExtension</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">//是否强制扩展名</span>
            <span class="token literal-property property">extensions</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;.js&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;.json&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//自动解析的扩展,导入语句没带文件后缀时，Webpack 会自动带上后缀后去尝试访问文件是否存在.</span>
            modules：<span class="token punctuation">[</span><span class="token string">'./src/components'</span><span class="token punctuation">,</span><span class="token string">'node_modules'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//告诉 webpack 解析模块时应该搜索的目录。绝对路径和相对路径都能使用。  </span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">//开发模式下的服务器配置</span>
        <span class="token literal-property property">devServer</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token literal-property property">hot</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//是否启用 webpack 的模块热替换功能。DevServer 默认的行为是在发现源代码被更新后会通过自动刷新整个页面来做到实时预览，开启模块热替换功能后将在不刷新整个页面的情况下通过用新模块替换老模块来做到实时预览。</span>
            <span class="token literal-property property">inline</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//DevServer 的实时预览功能依赖一个注入到页面里的代理客户端去接受来自 DevServer 的命令和负责刷新网页的工作。inline 用于配置是否自动注入这个代理客户端到将运行在页面里的 Chunk 里去，默认是会自动注入。</span>
            <span class="token literal-property property">contentBase</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token comment">//配置 DevServer HTTP 服务器的文件根目录。 默认情况下为当前执行目录，通常是项目根目录.</span>
            <span class="token comment">//可以在 HTTP 响应中注入一些 HTTP 响应头，</span>
            <span class="token literal-property property">headers</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token string-property property">'X-foo'</span><span class="token operator">:</span><span class="token string">'bar'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">host</span><span class="token operator">:</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token punctuation">,</span><span class="token comment">//配置监听地址</span>
            <span class="token literal-property property">port</span><span class="token operator">:</span><span class="token number">8080</span><span class="token punctuation">,</span><span class="token comment">//配置监听端口号</span>
            <span class="token literal-property property">open</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//是否自动打开浏览器，</span>
            <span class="token literal-property property">openPage</span><span class="token operator">:</span><span class="token string">&quot;index.html&quot;</span><span class="token punctuation">,</span><span class="token comment">//配置浏览器自启时的网页</span>
            allowedHosts： <span class="token punctuation">[</span>
              <span class="token string">'host.com'</span><span class="token punctuation">,</span>
              <span class="token string">'subdomain.host.com'</span><span class="token punctuation">,</span>
              <span class="token string">'subdomain2.host.com'</span><span class="token punctuation">,</span>
              <span class="token string">'host2.com'</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//配置一个白名单列表，只有 HTTP 请求的 HOST 在列表里才正常返回</span>
            <span class="token literal-property property">compress</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//是否开启gzip压缩。默认为false</span>
            <span class="token comment">//展示编译信息</span>
            <span class="token literal-property property">overlay</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">quiet</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//启用 quiet 后，除了初始启动信息之外的任何内容都不会被打印到控制台。这也意味着来自 webpack 的错误或警告在控制台不可见。</span>
            <span class="token comment">//设置前端代理，访问后台</span>
            
            <span class="token literal-property property">stats</span><span class="token operator">:</span><span class="token string">&quot;errors-only&quot;</span><span class="token punctuation">,</span><span class="token comment">//控制展示webpack构建信息</span>
            <span class="token literal-property property">proxy</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token string-property property">&quot;/api&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:3000&quot;</span><span class="token punctuation">,</span><span class="token comment">//表示后端服务接口地址为http://localhost:3000/api</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">//配置多个代理路径</span>
            <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
              <span class="token literal-property property">context</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;/auth&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/api&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:3000&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token keyword">public</span><span class="token operator">:</span><span class="token string">&quot;myapp.test:80&quot;</span><span class="token punctuation">,</span><span class="token comment">//当启用内联模式时（inline：true），内联的客户端脚本所在的目录。</span>
            <span class="token keyword">public</span>：<span class="token string">&quot;/assets/&quot;</span><span class="token punctuation">,</span><span class="token comment">//此路径下的打包文件可在浏览器中访问.http://localhost:8080/assets/bundle.js可以范围打包后的bundle.js文件。  </span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">//source map配置</span>
        <span class="token literal-property property">devtool</span><span class="token operator">:</span><span class="token string">&quot;cheap-source-map&quot;</span><span class="token punctuation">,</span> <span class="token comment">//转换过的代码（仅限行)</span>
        <span class="token literal-property property">devtool</span><span class="token operator">:</span><span class="token string">&quot;cheap-source-map&quot;</span><span class="token punctuation">,</span><span class="token comment">//原始源代码</span>
        <span class="token comment">//开发环境的配置</span>
        <span class="token literal-property property">devtool</span><span class="token operator">:</span><span class="token string">&quot;eval&quot;</span><span class="token punctuation">,</span><span class="token comment">//生成后的代码 ,每个模块相互分离，并用模块名称进行注释。</span>
        <span class="token literal-property property">devtool</span><span class="token operator">:</span><span class="token string">&quot;eval-source-map&quot;</span><span class="token punctuation">,</span><span class="token comment">//原始源代码</span>
        <span class="token literal-property property">devtool</span><span class="token operator">:</span><span class="token string">&quot;cheap-eval-source-map&quot;</span><span class="token punctuation">,</span><span class="token comment">//转换过的代码（仅限行），它会忽略源自 loader 的 source map，并且仅显示转译后的代码</span>
        <span class="token literal-property property">devtool</span><span class="token operator">:</span><span class="token string">&quot;cheap-module-eval-source-map&quot;</span><span class="token punctuation">,</span><span class="token comment">//原始源代码（仅限行），源自 loader 的 source map 会得到更好的处理结果</span>
        <span class="token comment">//生产环境的配置</span>
        <span class="token literal-property property">devtool</span><span class="token operator">:</span><span class="token punctuation">(</span>none<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//省略该项配置 //打包后的代码,所有生成的代码视为一大块代码。你看不到相互分离的模块。</span>
        <span class="token literal-property property">devtool</span><span class="token operator">:</span><span class="token string">&quot;source-map&quot;</span><span class="token punctuation">,</span> <span class="token comment">//原始源代码，便于调试。它为 bundle 添加了一个引用注释，以便开发工具知道在哪里可以找到它。</span>
        <span class="token literal-property property">devtool</span><span class="token operator">:</span><span class="token string">&quot;hidden-source-map&quot;</span><span class="token punctuation">,</span><span class="token comment">//与 source-map 相同，但不会为 bundle 添加引用注释。如果你只想 source map 映射那些源自错误报告的错误堆栈跟踪信息，但不想为浏览器开发工具暴露你的 source map，这个选项会很有用。</span>
        <span class="token literal-property property">devtool</span><span class="token operator">:</span><span class="token string">&quot;nosources-source-map&quot;</span><span class="token punctuation">,</span><span class="token comment">//创建的 source map 不包含 sourcesContent(源代码内容)。它可以用来映射客户端上的堆栈跟踪，而无须暴露所有的源代码。</span>
        <span class="token literal-property property">externals</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 使用来自 JavaScript 运行环境提供的全局变量</span>
            <span class="token comment">//string类型</span>
            <span class="token literal-property property">$</span><span class="token operator">:</span> <span class="token string">'jQuery'</span><span class="token punctuation">,</span>
            <span class="token comment">//Array类型</span>
            <span class="token literal-property property">subtract</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'./math'</span><span class="token punctuation">,</span> <span class="token string">'subtract'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//表示的是。用subtract去代替./math/subtract方法。</span>
            <span class="token comment">//Object类型</span>
            <span class="token literal-property property">lodash</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">commonjs</span><span class="token operator">:</span> <span class="token string">&quot;lodash&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">amd</span><span class="token operator">:</span> <span class="token string">&quot;lodash&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token string">&quot;_&quot;</span> <span class="token comment">// 指向全局变量</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 配置输出代码的运行环境</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'web'</span><span class="token punctuation">,</span> <span class="token comment">// 浏览器，默认</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'webworker'</span><span class="token punctuation">,</span> <span class="token comment">// WebWorker</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'node'</span><span class="token punctuation">,</span> <span class="token comment">// Node.js，使用 `require` 语句加载 Chunk 代码</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'async-node'</span><span class="token punctuation">,</span> <span class="token comment">// Node.js，异步加载 Chunk 代码</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'node-webkit'</span><span class="token punctuation">,</span> <span class="token comment">// nw.js</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'electron-main'</span><span class="token punctuation">,</span> <span class="token comment">// electron, 主线程</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'electron-renderer'</span><span class="token punctuation">,</span> <span class="token comment">// electron, 渲染线程</span>
        <span class="token comment">//开启监听模式</span>
        <span class="token literal-property property">watch</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//在使用 DevServer 时，监听模式默认是开启的。</span>
        <span class="token comment">//在watch配置为true时，下面的配置项才会生效。</span>
        watchOptions：<span class="token punctuation">{</span>
            <span class="token literal-property property">ignored</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><span class="token comment">//不监听的文件夹</span>
            aggregateTimeout：<span class="token number">300</span><span class="token punctuation">,</span><span class="token comment">//监听到变化发生后会等300ms再去执行动作，防止文件更新太快导致重新编译频率太高</span>
            poll：<span class="token number">1000</span><span class="token punctuation">,</span><span class="token comment">//多久轮询一次</span>
        <span class="token punctuation">}</span>
        <span class="token literal-property property">stats</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 控制台输出日志控制,webpack构建时的统计信息。</span>
            <span class="token literal-property property">assets</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//添加资源信息</span>
            <span class="token literal-property property">colors</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">// `webpack --colors` 等同于</span>
            <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//输出错误信息</span>
            <span class="token literal-property property">errorDetails</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//// 添加错误的详细信息（就像解析日志一样）</span>
            <span class="token literal-property property">hash</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//添加 compilation 的哈希值</span>
            <span class="token literal-property property">version</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//添加尾巴爬虫库版本信息</span>
            <span class="token literal-property property">performance</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">// 当文件大小超过 `performance.maxAssetSize` 时显示性能提示</span>
            <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">// 添加构建模块信息,</span>
            <span class="token comment">// 添加时间信息</span>
            <span class="token literal-property property">timings</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 输出文件性能检查配置,这些选项可以控制 webpack 如何通知「资源(asset)和入口起点超过指定文件限制」。</span>
        <span class="token literal-property property">performance</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token literal-property property">maxEntrypointSize</span><span class="token operator">:</span> <span class="token number">400000</span><span class="token punctuation">,</span><span class="token comment">//默认值是：250000 (bytes)。入口起点文件的最大体积。控制 webpack 何时生成性能提示.</span>
            maxAssetSize：<span class="token number">100000</span><span class="token punctuation">,</span><span class="token comment">//资源(asset)是从 webpack 生成的任何文件,控制 webpack 何时生成性能提示。默认值是：250000 (bytes)。</span>
            <span class="token literal-property property">hints</span><span class="token operator">:</span><span class="token boolean">false</span> <span class="token operator">|</span> <span class="token string">&quot;error&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;warning&quot;</span><span class="token punctuation">,</span><span class="token comment">//打开或关闭提示。此属性默认设置为 &quot;warning&quot;。可以以提醒或错误的方式提醒你文件大小是否超过你设置的大小。</span>
            <span class="token comment">//对提示文件进行一个过滤。</span>
            <span class="token function-variable function">assetFilter</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">assetFilename</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> assetFilename<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>  
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        
        <span class="token comment">//配置是否 polyfill 或 mock 某些 Node.js 全局变量和模块。这可以使最初为 Node.js 环境编写的代码，在其他环境（如浏览器）中运行。此功能由 webpack 内部的 NodeStuffPlugin 插件提供。</span>
        <span class="token literal-property property">node</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token literal-property property">console</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">// 什么都不提供。预期获取此对象的代码，可能会因为获取不到此对象，触发 ReferenceError 而崩溃</span>
            <span class="token literal-property property">global</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//为true时表示提供 polyfill。</span>
            <span class="token literal-property property">process</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token literal-property property">__filename</span><span class="token operator">:</span> <span class="token string">&quot;mock&quot;</span><span class="token punctuation">,</span><span class="token comment">//提供 mock 实现预期接口，但功能很少或没有。</span>
            <span class="token literal-property property">__dirname</span><span class="token operator">:</span> <span class="token string">&quot;mock&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">Buffer</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token literal-property property">setImmediate</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
      
    <span class="token punctuation">}</span>
</code></pre></div><p><strong>3.9 多种配置类型</strong></p> <p>  配置文件除了以Object的形式输出以外，还可以以function或者promise的形式输出,同时还可以导出多个配置对象。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>    <span class="token comment">//以对象的形式,需要写多个配置文件以适应&quot;开发和生产&quot;模式</span>
    module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
        <span class="token literal-property property">entry</span><span class="token operator">:</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span>
            
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token operator">...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//导出多个配置对象</span>
    module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
          <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist-amd.js'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">libraryTarget</span><span class="token operator">:</span> <span class="token string">'amd'</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./app.js'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'./dist-commonjs.js'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">libraryTarget</span><span class="token operator">:</span> <span class="token string">'commonjs'</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./app.js'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token comment">//以function的形式,采用导出一个 Function 的方式，能通过 JavaScript 灵活的控制配置，做到只用写一个配置文件就能完成以上要求。</span>
    module<span class="token punctuation">.</span><span class="token function-variable function">exports</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">env<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> isProduction<span class="token operator">=</span>env<span class="token punctuation">[</span><span class="token string">&quot;production&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> plugins<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">//返回的还是那些配置文件</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">plugins</span><span class="token operator">:</span> plugins<span class="token punctuation">,</span>
            <span class="token comment">// 在生成环境不输出 Source Map</span>
            <span class="token literal-property property">devtool</span><span class="token operator">:</span> isProduction <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> <span class="token string">'source-map'</span><span class="token punctuation">,</span>
         <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//以promise的形式导出</span>
    module<span class="token punctuation">.</span><span class="token function-variable function">exports</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">env<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span>reject<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./app.js'</span><span class="token punctuation">,</span>
                <span class="token comment">/* ... */</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
</code></pre></div><p>以函数的形式导出配置文件时。</p> <ul><li>env：当前运行时的 Webpack <strong>专属环境变量</strong>，env 是一个 Object。设置它需要在启动 Webpack 时带上参数。例如启动命令是 webpack --env.production --env.bao=foo时，则 env 的值是 {&quot;production&quot;:&quot;true&quot;,&quot;bao&quot;:&quot;foo&quot;}。</li> <li>args：代表在启动 Webpack 时所有通过命令行传入的参数。例如 --config、--env、--devtool、--progress、---watch，可以通过 webpack -h 列出所有 Webpack 支持的命令行参数。</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/24/2024, 6:06:00 PM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/articles/webpack/webpack工作流程总结.html">
        webpack工作流程总结
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b8d577b5.js" defer></script><script src="/assets/js/2.918eef7d.js" defer></script><script src="/assets/js/1.dd66940c.js" defer></script><script src="/assets/js/102.85fec55c.js" defer></script>
  </body>
</html>
