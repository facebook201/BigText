<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>jquer3.5.1源码 | 前端WebGL</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="">
    
    <link rel="preload" href="WebGLbolg/assets/css/0.styles.9f8eccee.css" as="style"><link rel="preload" href="WebGLbolg/assets/js/app.017f919e.js" as="script"><link rel="preload" href="WebGLbolg/assets/js/2.918eef7d.js" as="script"><link rel="preload" href="WebGLbolg/assets/js/1.dd66940c.js" as="script"><link rel="preload" href="WebGLbolg/assets/js/177.6f02b54d.js" as="script"><link rel="prefetch" href="WebGLbolg/assets/js/10.64c82640.js"><link rel="prefetch" href="WebGLbolg/assets/js/100.e56f3d4b.js"><link rel="prefetch" href="WebGLbolg/assets/js/101.07ada23c.js"><link rel="prefetch" href="WebGLbolg/assets/js/102.85fec55c.js"><link rel="prefetch" href="WebGLbolg/assets/js/103.c0e3c532.js"><link rel="prefetch" href="WebGLbolg/assets/js/104.3deb87ae.js"><link rel="prefetch" href="WebGLbolg/assets/js/105.9bfe352e.js"><link rel="prefetch" href="WebGLbolg/assets/js/106.5601a757.js"><link rel="prefetch" href="WebGLbolg/assets/js/107.9628605d.js"><link rel="prefetch" href="WebGLbolg/assets/js/108.b193a4ac.js"><link rel="prefetch" href="WebGLbolg/assets/js/109.e8f93b20.js"><link rel="prefetch" href="WebGLbolg/assets/js/11.65ca7706.js"><link rel="prefetch" href="WebGLbolg/assets/js/110.6da15bb3.js"><link rel="prefetch" href="WebGLbolg/assets/js/111.5569e4f1.js"><link rel="prefetch" href="WebGLbolg/assets/js/112.57e4b5b3.js"><link rel="prefetch" href="WebGLbolg/assets/js/113.b5aecbf7.js"><link rel="prefetch" href="WebGLbolg/assets/js/114.93bad6a3.js"><link rel="prefetch" href="WebGLbolg/assets/js/115.4ddc7541.js"><link rel="prefetch" href="WebGLbolg/assets/js/116.868351ce.js"><link rel="prefetch" href="WebGLbolg/assets/js/117.6943341d.js"><link rel="prefetch" href="WebGLbolg/assets/js/118.7e05a5f7.js"><link rel="prefetch" href="WebGLbolg/assets/js/119.3630b0f1.js"><link rel="prefetch" href="WebGLbolg/assets/js/12.5892dabf.js"><link rel="prefetch" href="WebGLbolg/assets/js/120.91c31cb1.js"><link rel="prefetch" href="WebGLbolg/assets/js/121.aabb64fb.js"><link rel="prefetch" href="WebGLbolg/assets/js/122.e6d658e0.js"><link rel="prefetch" href="WebGLbolg/assets/js/123.b91bc9d1.js"><link rel="prefetch" href="WebGLbolg/assets/js/124.9b854ede.js"><link rel="prefetch" href="WebGLbolg/assets/js/125.9096ebf4.js"><link rel="prefetch" href="WebGLbolg/assets/js/126.f657a72f.js"><link rel="prefetch" href="WebGLbolg/assets/js/127.50ee3e01.js"><link rel="prefetch" href="WebGLbolg/assets/js/128.48e5ae05.js"><link rel="prefetch" href="WebGLbolg/assets/js/129.ace967e4.js"><link rel="prefetch" href="WebGLbolg/assets/js/13.e0daf978.js"><link rel="prefetch" href="WebGLbolg/assets/js/130.ff2881bf.js"><link rel="prefetch" href="WebGLbolg/assets/js/131.f4b49d23.js"><link rel="prefetch" href="WebGLbolg/assets/js/132.b6091d30.js"><link rel="prefetch" href="WebGLbolg/assets/js/133.e1745eb4.js"><link rel="prefetch" href="WebGLbolg/assets/js/134.641f862f.js"><link rel="prefetch" href="WebGLbolg/assets/js/135.9a5e4f48.js"><link rel="prefetch" href="WebGLbolg/assets/js/136.e470005f.js"><link rel="prefetch" href="WebGLbolg/assets/js/137.07423eea.js"><link rel="prefetch" href="WebGLbolg/assets/js/138.0572083b.js"><link rel="prefetch" href="WebGLbolg/assets/js/139.4f20c255.js"><link rel="prefetch" href="WebGLbolg/assets/js/14.f4c0f1e2.js"><link rel="prefetch" href="WebGLbolg/assets/js/140.6108cede.js"><link rel="prefetch" href="WebGLbolg/assets/js/141.4b9d2aee.js"><link rel="prefetch" href="WebGLbolg/assets/js/142.a2539e36.js"><link rel="prefetch" href="WebGLbolg/assets/js/143.cce2facb.js"><link rel="prefetch" href="WebGLbolg/assets/js/144.499084a9.js"><link rel="prefetch" href="WebGLbolg/assets/js/145.d78d73b3.js"><link rel="prefetch" href="WebGLbolg/assets/js/146.1bd86ed8.js"><link rel="prefetch" href="WebGLbolg/assets/js/147.a40db09a.js"><link rel="prefetch" href="WebGLbolg/assets/js/148.0bee9963.js"><link rel="prefetch" href="WebGLbolg/assets/js/149.36cae260.js"><link rel="prefetch" href="WebGLbolg/assets/js/15.0382753a.js"><link rel="prefetch" href="WebGLbolg/assets/js/150.0a5f2e96.js"><link rel="prefetch" href="WebGLbolg/assets/js/151.08e84f5a.js"><link rel="prefetch" href="WebGLbolg/assets/js/152.bcaba334.js"><link rel="prefetch" href="WebGLbolg/assets/js/153.e56b4c5e.js"><link rel="prefetch" href="WebGLbolg/assets/js/154.7f2fe97e.js"><link rel="prefetch" href="WebGLbolg/assets/js/155.b75d1ad5.js"><link rel="prefetch" href="WebGLbolg/assets/js/156.bbb01774.js"><link rel="prefetch" href="WebGLbolg/assets/js/157.5e924c4d.js"><link rel="prefetch" href="WebGLbolg/assets/js/158.3b35883a.js"><link rel="prefetch" href="WebGLbolg/assets/js/159.de288906.js"><link rel="prefetch" href="WebGLbolg/assets/js/16.4069cf12.js"><link rel="prefetch" href="WebGLbolg/assets/js/160.e7f234cc.js"><link rel="prefetch" href="WebGLbolg/assets/js/161.bca72816.js"><link rel="prefetch" href="WebGLbolg/assets/js/162.d8d3eed1.js"><link rel="prefetch" href="WebGLbolg/assets/js/163.a1bca143.js"><link rel="prefetch" href="WebGLbolg/assets/js/164.423ea1c6.js"><link rel="prefetch" href="WebGLbolg/assets/js/165.2537016f.js"><link rel="prefetch" href="WebGLbolg/assets/js/166.f38989c5.js"><link rel="prefetch" href="WebGLbolg/assets/js/167.cd80c500.js"><link rel="prefetch" href="WebGLbolg/assets/js/168.8ed73642.js"><link rel="prefetch" href="WebGLbolg/assets/js/169.3a42811c.js"><link rel="prefetch" href="WebGLbolg/assets/js/17.79bd023c.js"><link rel="prefetch" href="WebGLbolg/assets/js/170.08cf1ef4.js"><link rel="prefetch" href="WebGLbolg/assets/js/171.63c3135c.js"><link rel="prefetch" href="WebGLbolg/assets/js/172.82b1bce8.js"><link rel="prefetch" href="WebGLbolg/assets/js/173.5e7e83bf.js"><link rel="prefetch" href="WebGLbolg/assets/js/174.b9ea578c.js"><link rel="prefetch" href="WebGLbolg/assets/js/175.370c4bd0.js"><link rel="prefetch" href="WebGLbolg/assets/js/176.6ce8c380.js"><link rel="prefetch" href="WebGLbolg/assets/js/178.d0b442c0.js"><link rel="prefetch" href="WebGLbolg/assets/js/179.9b8c1733.js"><link rel="prefetch" href="WebGLbolg/assets/js/18.019a7c67.js"><link rel="prefetch" href="WebGLbolg/assets/js/180.5ad3ad4f.js"><link rel="prefetch" href="WebGLbolg/assets/js/181.24361fce.js"><link rel="prefetch" href="WebGLbolg/assets/js/182.6e24dda0.js"><link rel="prefetch" href="WebGLbolg/assets/js/183.0994f96e.js"><link rel="prefetch" href="WebGLbolg/assets/js/184.bae10e54.js"><link rel="prefetch" href="WebGLbolg/assets/js/185.012ad4e4.js"><link rel="prefetch" href="WebGLbolg/assets/js/186.9f341504.js"><link rel="prefetch" href="WebGLbolg/assets/js/187.7290a92e.js"><link rel="prefetch" href="WebGLbolg/assets/js/188.9070597d.js"><link rel="prefetch" href="WebGLbolg/assets/js/189.fe92e468.js"><link rel="prefetch" href="WebGLbolg/assets/js/19.7c15232c.js"><link rel="prefetch" href="WebGLbolg/assets/js/190.088479e7.js"><link rel="prefetch" href="WebGLbolg/assets/js/191.ac957c90.js"><link rel="prefetch" href="WebGLbolg/assets/js/192.47fbb56f.js"><link rel="prefetch" href="WebGLbolg/assets/js/193.b57cf720.js"><link rel="prefetch" href="WebGLbolg/assets/js/194.6779ef2c.js"><link rel="prefetch" href="WebGLbolg/assets/js/195.11d74bd3.js"><link rel="prefetch" href="WebGLbolg/assets/js/196.f5e4fc88.js"><link rel="prefetch" href="WebGLbolg/assets/js/197.57bddc32.js"><link rel="prefetch" href="WebGLbolg/assets/js/198.59857f4c.js"><link rel="prefetch" href="WebGLbolg/assets/js/199.ac008a0e.js"><link rel="prefetch" href="WebGLbolg/assets/js/20.becddea5.js"><link rel="prefetch" href="WebGLbolg/assets/js/200.9d554b13.js"><link rel="prefetch" href="WebGLbolg/assets/js/201.d61967a9.js"><link rel="prefetch" href="WebGLbolg/assets/js/202.ef56e8b8.js"><link rel="prefetch" href="WebGLbolg/assets/js/203.b4ddf305.js"><link rel="prefetch" href="WebGLbolg/assets/js/204.521014d1.js"><link rel="prefetch" href="WebGLbolg/assets/js/205.e3c43a24.js"><link rel="prefetch" href="WebGLbolg/assets/js/206.d1adb00d.js"><link rel="prefetch" href="WebGLbolg/assets/js/207.af06f702.js"><link rel="prefetch" href="WebGLbolg/assets/js/208.60bac301.js"><link rel="prefetch" href="WebGLbolg/assets/js/209.5a0e2a72.js"><link rel="prefetch" href="WebGLbolg/assets/js/21.2abc4662.js"><link rel="prefetch" href="WebGLbolg/assets/js/210.aade8a85.js"><link rel="prefetch" href="WebGLbolg/assets/js/211.36d99177.js"><link rel="prefetch" href="WebGLbolg/assets/js/212.0f06d8ea.js"><link rel="prefetch" href="WebGLbolg/assets/js/213.d441e126.js"><link rel="prefetch" href="WebGLbolg/assets/js/214.55b691d3.js"><link rel="prefetch" href="WebGLbolg/assets/js/215.7b28b2ae.js"><link rel="prefetch" href="WebGLbolg/assets/js/216.010cc2c4.js"><link rel="prefetch" href="WebGLbolg/assets/js/217.41f3b35f.js"><link rel="prefetch" href="WebGLbolg/assets/js/218.5e1ebe7d.js"><link rel="prefetch" href="WebGLbolg/assets/js/219.ebeae641.js"><link rel="prefetch" href="WebGLbolg/assets/js/22.888a21ed.js"><link rel="prefetch" href="WebGLbolg/assets/js/220.ebcde46f.js"><link rel="prefetch" href="WebGLbolg/assets/js/221.b0cc7eba.js"><link rel="prefetch" href="WebGLbolg/assets/js/222.e2084f0f.js"><link rel="prefetch" href="WebGLbolg/assets/js/223.e286d530.js"><link rel="prefetch" href="WebGLbolg/assets/js/224.402e47ee.js"><link rel="prefetch" href="WebGLbolg/assets/js/225.7de33b3e.js"><link rel="prefetch" href="WebGLbolg/assets/js/226.6bc2603d.js"><link rel="prefetch" href="WebGLbolg/assets/js/227.5e025d99.js"><link rel="prefetch" href="WebGLbolg/assets/js/228.86e4cea6.js"><link rel="prefetch" href="WebGLbolg/assets/js/229.e6da2321.js"><link rel="prefetch" href="WebGLbolg/assets/js/23.e2e7f6b9.js"><link rel="prefetch" href="WebGLbolg/assets/js/230.4146a7bb.js"><link rel="prefetch" href="WebGLbolg/assets/js/231.7f1a1546.js"><link rel="prefetch" href="WebGLbolg/assets/js/232.f1fd4f32.js"><link rel="prefetch" href="WebGLbolg/assets/js/233.3742c18e.js"><link rel="prefetch" href="WebGLbolg/assets/js/234.342f195e.js"><link rel="prefetch" href="WebGLbolg/assets/js/235.879bddf3.js"><link rel="prefetch" href="WebGLbolg/assets/js/236.a4ce09cd.js"><link rel="prefetch" href="WebGLbolg/assets/js/237.4f2eb491.js"><link rel="prefetch" href="WebGLbolg/assets/js/238.54b208ce.js"><link rel="prefetch" href="WebGLbolg/assets/js/239.3950628d.js"><link rel="prefetch" href="WebGLbolg/assets/js/24.33be9616.js"><link rel="prefetch" href="WebGLbolg/assets/js/240.08f3a81e.js"><link rel="prefetch" href="WebGLbolg/assets/js/241.b73ee63d.js"><link rel="prefetch" href="WebGLbolg/assets/js/242.ba1a5db1.js"><link rel="prefetch" href="WebGLbolg/assets/js/243.6ceb7603.js"><link rel="prefetch" href="WebGLbolg/assets/js/244.424d9a31.js"><link rel="prefetch" href="WebGLbolg/assets/js/245.41713f58.js"><link rel="prefetch" href="WebGLbolg/assets/js/246.5406372b.js"><link rel="prefetch" href="WebGLbolg/assets/js/247.75457cb2.js"><link rel="prefetch" href="WebGLbolg/assets/js/248.8704a9bc.js"><link rel="prefetch" href="WebGLbolg/assets/js/249.69874bf9.js"><link rel="prefetch" href="WebGLbolg/assets/js/25.c077a88d.js"><link rel="prefetch" href="WebGLbolg/assets/js/250.499b6d2b.js"><link rel="prefetch" href="WebGLbolg/assets/js/251.d6cdcca1.js"><link rel="prefetch" href="WebGLbolg/assets/js/252.b234b9dd.js"><link rel="prefetch" href="WebGLbolg/assets/js/253.b23a1938.js"><link rel="prefetch" href="WebGLbolg/assets/js/254.f7592fe8.js"><link rel="prefetch" href="WebGLbolg/assets/js/255.be58fcee.js"><link rel="prefetch" href="WebGLbolg/assets/js/256.d9d53f5a.js"><link rel="prefetch" href="WebGLbolg/assets/js/257.9f97bfde.js"><link rel="prefetch" href="WebGLbolg/assets/js/258.a39b58dc.js"><link rel="prefetch" href="WebGLbolg/assets/js/259.eb5ed507.js"><link rel="prefetch" href="WebGLbolg/assets/js/26.2e1b99d4.js"><link rel="prefetch" href="WebGLbolg/assets/js/260.2769ec1a.js"><link rel="prefetch" href="WebGLbolg/assets/js/261.2af3b275.js"><link rel="prefetch" href="WebGLbolg/assets/js/262.81139fd9.js"><link rel="prefetch" href="WebGLbolg/assets/js/263.f792f2a8.js"><link rel="prefetch" href="WebGLbolg/assets/js/264.90f61fc7.js"><link rel="prefetch" href="WebGLbolg/assets/js/265.26abe523.js"><link rel="prefetch" href="WebGLbolg/assets/js/266.036618ad.js"><link rel="prefetch" href="WebGLbolg/assets/js/267.bb19f83d.js"><link rel="prefetch" href="WebGLbolg/assets/js/268.e159824d.js"><link rel="prefetch" href="WebGLbolg/assets/js/269.58119514.js"><link rel="prefetch" href="WebGLbolg/assets/js/27.7cf8264e.js"><link rel="prefetch" href="WebGLbolg/assets/js/270.24c850fe.js"><link rel="prefetch" href="WebGLbolg/assets/js/271.1b461fdc.js"><link rel="prefetch" href="WebGLbolg/assets/js/272.00397400.js"><link rel="prefetch" href="WebGLbolg/assets/js/273.cd2068c9.js"><link rel="prefetch" href="WebGLbolg/assets/js/274.d4185a0b.js"><link rel="prefetch" href="WebGLbolg/assets/js/275.3d279435.js"><link rel="prefetch" href="WebGLbolg/assets/js/276.3f3ddaa2.js"><link rel="prefetch" href="WebGLbolg/assets/js/277.3ca57a7d.js"><link rel="prefetch" href="WebGLbolg/assets/js/28.3fe8a3b1.js"><link rel="prefetch" href="WebGLbolg/assets/js/29.9c0c3029.js"><link rel="prefetch" href="WebGLbolg/assets/js/3.078209c2.js"><link rel="prefetch" href="WebGLbolg/assets/js/30.159abf4f.js"><link rel="prefetch" href="WebGLbolg/assets/js/31.d922fcf9.js"><link rel="prefetch" href="WebGLbolg/assets/js/32.41647894.js"><link rel="prefetch" href="WebGLbolg/assets/js/33.6d0118b9.js"><link rel="prefetch" href="WebGLbolg/assets/js/34.4b60c991.js"><link rel="prefetch" href="WebGLbolg/assets/js/35.3d71e8a4.js"><link rel="prefetch" href="WebGLbolg/assets/js/36.debe7217.js"><link rel="prefetch" href="WebGLbolg/assets/js/37.963fbc32.js"><link rel="prefetch" href="WebGLbolg/assets/js/38.8afeb2de.js"><link rel="prefetch" href="WebGLbolg/assets/js/39.970a46f8.js"><link rel="prefetch" href="WebGLbolg/assets/js/4.8fe7a186.js"><link rel="prefetch" href="WebGLbolg/assets/js/40.ba9dfbc6.js"><link rel="prefetch" href="WebGLbolg/assets/js/41.026be98c.js"><link rel="prefetch" href="WebGLbolg/assets/js/42.186776a1.js"><link rel="prefetch" href="WebGLbolg/assets/js/43.5acacb46.js"><link rel="prefetch" href="WebGLbolg/assets/js/44.da0929d6.js"><link rel="prefetch" href="WebGLbolg/assets/js/45.318b164c.js"><link rel="prefetch" href="WebGLbolg/assets/js/46.a90ddf9f.js"><link rel="prefetch" href="WebGLbolg/assets/js/47.5d759830.js"><link rel="prefetch" href="WebGLbolg/assets/js/48.3ecc3af7.js"><link rel="prefetch" href="WebGLbolg/assets/js/49.96a3c8bc.js"><link rel="prefetch" href="WebGLbolg/assets/js/5.5967bee8.js"><link rel="prefetch" href="WebGLbolg/assets/js/50.f288fa25.js"><link rel="prefetch" href="WebGLbolg/assets/js/51.da90b3f8.js"><link rel="prefetch" href="WebGLbolg/assets/js/52.5882479e.js"><link rel="prefetch" href="WebGLbolg/assets/js/53.3713556c.js"><link rel="prefetch" href="WebGLbolg/assets/js/54.101160d6.js"><link rel="prefetch" href="WebGLbolg/assets/js/55.06c8a824.js"><link rel="prefetch" href="WebGLbolg/assets/js/56.30e0671f.js"><link rel="prefetch" href="WebGLbolg/assets/js/57.f00790f5.js"><link rel="prefetch" href="WebGLbolg/assets/js/58.c033cc7f.js"><link rel="prefetch" href="WebGLbolg/assets/js/59.b7daeca5.js"><link rel="prefetch" href="WebGLbolg/assets/js/6.17dcb484.js"><link rel="prefetch" href="WebGLbolg/assets/js/60.7d7340f4.js"><link rel="prefetch" href="WebGLbolg/assets/js/61.01cba0d1.js"><link rel="prefetch" href="WebGLbolg/assets/js/62.72424675.js"><link rel="prefetch" href="WebGLbolg/assets/js/63.6b8731e8.js"><link rel="prefetch" href="WebGLbolg/assets/js/64.748ddae2.js"><link rel="prefetch" href="WebGLbolg/assets/js/65.db782f19.js"><link rel="prefetch" href="WebGLbolg/assets/js/66.34a29664.js"><link rel="prefetch" href="WebGLbolg/assets/js/67.30f4b13b.js"><link rel="prefetch" href="WebGLbolg/assets/js/68.5123e6bb.js"><link rel="prefetch" href="WebGLbolg/assets/js/69.5e64e3f0.js"><link rel="prefetch" href="WebGLbolg/assets/js/7.28c1da78.js"><link rel="prefetch" href="WebGLbolg/assets/js/70.1879d3dd.js"><link rel="prefetch" href="WebGLbolg/assets/js/71.650c0862.js"><link rel="prefetch" href="WebGLbolg/assets/js/72.37939565.js"><link rel="prefetch" href="WebGLbolg/assets/js/73.c4026d64.js"><link rel="prefetch" href="WebGLbolg/assets/js/74.bf1943d7.js"><link rel="prefetch" href="WebGLbolg/assets/js/75.0aa32d0e.js"><link rel="prefetch" href="WebGLbolg/assets/js/76.41e912e9.js"><link rel="prefetch" href="WebGLbolg/assets/js/77.85cc78f2.js"><link rel="prefetch" href="WebGLbolg/assets/js/78.90fe047a.js"><link rel="prefetch" href="WebGLbolg/assets/js/79.870e06b7.js"><link rel="prefetch" href="WebGLbolg/assets/js/80.9468958e.js"><link rel="prefetch" href="WebGLbolg/assets/js/81.1a65f94b.js"><link rel="prefetch" href="WebGLbolg/assets/js/82.b0eb7a5c.js"><link rel="prefetch" href="WebGLbolg/assets/js/83.e5767780.js"><link rel="prefetch" href="WebGLbolg/assets/js/84.ee6ee7af.js"><link rel="prefetch" href="WebGLbolg/assets/js/85.29fb0518.js"><link rel="prefetch" href="WebGLbolg/assets/js/86.4b309168.js"><link rel="prefetch" href="WebGLbolg/assets/js/87.ff3adcc3.js"><link rel="prefetch" href="WebGLbolg/assets/js/88.5b80cf55.js"><link rel="prefetch" href="WebGLbolg/assets/js/89.e2293c0e.js"><link rel="prefetch" href="WebGLbolg/assets/js/90.8316a17d.js"><link rel="prefetch" href="WebGLbolg/assets/js/91.6fe7dbf0.js"><link rel="prefetch" href="WebGLbolg/assets/js/92.eff0c275.js"><link rel="prefetch" href="WebGLbolg/assets/js/93.5fec432e.js"><link rel="prefetch" href="WebGLbolg/assets/js/94.9e546d6c.js"><link rel="prefetch" href="WebGLbolg/assets/js/95.67b45751.js"><link rel="prefetch" href="WebGLbolg/assets/js/96.2d228a70.js"><link rel="prefetch" href="WebGLbolg/assets/js/97.b91b5b60.js"><link rel="prefetch" href="WebGLbolg/assets/js/98.c69ee606.js"><link rel="prefetch" href="WebGLbolg/assets/js/99.235adf16.js"><link rel="prefetch" href="WebGLbolg/assets/js/vendors~docsearch.34249538.js">
    <link rel="stylesheet" href="WebGLbolg/assets/css/0.styles.9f8eccee.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/WebGLbolg/" class="home-link router-link-active"><!----> <span class="site-name">前端WebGL</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/WebGLbolg/articles/webgl/" class="nav-link">
  图形学
</a></div><div class="nav-item"><a href="/WebGLbolg/articles/threejs/" class="nav-link">
  threejs
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/WebGLbolg/articles/webgl/" class="nav-link">
  图形学
</a></div><div class="nav-item"><a href="/WebGLbolg/articles/threejs/" class="nav-link">
  threejs
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/WebGLbolg/articles/jquery-source-analysis/jquery-3.5.1.js.html" aria-current="page" class="active sidebar-link">jquer3.5.1源码</a></li><li><a href="/WebGLbolg/articles/jquery-source-analysis/jquery之工具函数总结.html" class="sidebar-link">jquery之工具函数总结</a></li><li><a href="/WebGLbolg/articles/jquery-source-analysis/jquery之数组相关方法总结.html" class="sidebar-link">jquery之数组循环方法总结</a></li><li><a href="/WebGLbolg/articles/jquery-source-analysis/jquery之样式获取兼容总结.html" class="sidebar-link">jquery之样式获取兼容总结</a></li><li><a href="/WebGLbolg/articles/jquery-source-analysis/jquery之正则表达式详解.html" class="sidebar-link">jquery之正则表达式详解</a></li><li><a href="/WebGLbolg/articles/jquery-source-analysis/jquery之队列.html" class="sidebar-link">jquery之队列</a></li><li><a href="/WebGLbolg/articles/jquery-source-analysis/jquery回调对象总结.html" class="sidebar-link">jquery回调对象总结</a></li><li><a href="/WebGLbolg/articles/jquery-source-analysis/jquery的缓存处理机制.html" class="sidebar-link">jquery的缓存处理机制</a></li><li><a href="/WebGLbolg/articles/jquery-source-analysis/jquery获取元素宽高的兼容性处理.html" class="sidebar-link">jquery获取窗口大小的兼容性处理</a></li><li><a href="/WebGLbolg/articles/jquery-source-analysis/READEME.html" class="sidebar-link">jquery整体封装设计总结</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/*!
 * jQuery JavaScript Library v3.5.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2020-05-04T22:49Z
 */</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">global<span class="token punctuation">,</span> factory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> module <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> module<span class="token punctuation">.</span>exports <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token comment">// For CommonJS and CommonJS-like environments where a proper `window`</span>
		<span class="token comment">// is present, execute the factory and get jQuery.</span>
		<span class="token comment">// For environments that do not have a `window` with a `document`</span>
		<span class="token comment">// (such as Node.js), expose a factory as module.exports.</span>
		<span class="token comment">// This accentuates the need for the creation of a real `window`.</span>
		<span class="token comment">// e.g. var jQuery = require(&quot;jquery&quot;)(window);</span>
		<span class="token comment">// See ticket #14549 for more info.</span>
		module<span class="token punctuation">.</span>exports <span class="token operator">=</span> global<span class="token punctuation">.</span>document <span class="token operator">?</span>
			<span class="token function">factory</span><span class="token punctuation">(</span>global<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">:</span>
			<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">w</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>w<span class="token punctuation">.</span>document<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;jQuery requires a window with a document&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">return</span> <span class="token function">factory</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token function">factory</span><span class="token punctuation">(</span>global<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Pass this if window is not defined yet</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> window <span class="token operator">!==</span> <span class="token string">&quot;undefined&quot;</span> <span class="token operator">?</span> window <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">window<span class="token punctuation">,</span> noGlobal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// Edge &lt;= 12 - 13+, Firefox &lt;=18 - 45+, IE 10 - 11, Safari 5.1 - 9+, iOS 6 - 9.1</span>
	<span class="token comment">// throw exceptions when non-strict code (e.g., ASP.NET 4.5) accesses strict mode</span>
	<span class="token comment">// arguments.callee.caller (trac-13335). But as of jQuery 3.0 (2016), strict mode should be common</span>
	<span class="token comment">// enough that all such attempts are guarded in a try block.</span>
	<span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>

	<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

	<span class="token keyword">var</span> getProto <span class="token operator">=</span> Object<span class="token punctuation">.</span>getPrototypeOf<span class="token punctuation">;</span>

	<span class="token keyword">var</span> slice <span class="token operator">=</span> arr<span class="token punctuation">.</span>slice<span class="token punctuation">;</span>

	<span class="token keyword">var</span> flat <span class="token operator">=</span> arr<span class="token punctuation">.</span>flat <span class="token operator">?</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> array<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>


	<span class="token keyword">var</span> push <span class="token operator">=</span> arr<span class="token punctuation">.</span>push<span class="token punctuation">;</span>

	<span class="token keyword">var</span> indexOf <span class="token operator">=</span> arr<span class="token punctuation">.</span>indexOf<span class="token punctuation">;</span>

	<span class="token keyword">var</span> class2type <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token keyword">var</span> toString <span class="token operator">=</span> class2type<span class="token punctuation">.</span>toString<span class="token punctuation">;</span>

	<span class="token keyword">var</span> hasOwn <span class="token operator">=</span> class2type<span class="token punctuation">.</span>hasOwnProperty<span class="token punctuation">;</span>

	<span class="token keyword">var</span> fnToString <span class="token operator">=</span> hasOwn<span class="token punctuation">.</span>toString<span class="token punctuation">;</span>

	<span class="token keyword">var</span> ObjectFunctionString <span class="token operator">=</span> <span class="token function">fnToString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>Object<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">var</span> support <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token keyword">var</span> <span class="token function-variable function">isFunction</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">isFunction</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token comment">// Support: Chrome &lt;=57, Firefox &lt;=52</span>
		<span class="token comment">// In some browsers, typeof returns &quot;function&quot; for HTML &lt;object&gt; elements</span>
		<span class="token comment">// (i.e., `typeof document.createElement( &quot;object&quot; ) === &quot;function&quot;`).</span>
		<span class="token comment">// We don't want to classify *any* DOM node as a function.</span>
		<span class="token keyword">return</span> <span class="token keyword">typeof</span> obj <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> obj<span class="token punctuation">.</span>nodeType <span class="token operator">!==</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>


	<span class="token keyword">var</span> <span class="token function-variable function">isWindow</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">isWindow</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> obj <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> obj <span class="token operator">===</span> obj<span class="token punctuation">.</span>window<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>


	<span class="token keyword">var</span> document <span class="token operator">=</span> window<span class="token punctuation">.</span>document<span class="token punctuation">;</span>
	<span class="token keyword">var</span> preservedScriptAttributes <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">nonce</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">noModule</span><span class="token operator">:</span> <span class="token boolean">true</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">//在head部分插入需要执行的脚本，改脚本会立即执行，然后从head部分移除，从而保持页面额整洁</span>
	<span class="token keyword">function</span> <span class="token function">DOMEval</span> <span class="token punctuation">(</span><span class="token parameter">code<span class="token punctuation">,</span> node<span class="token punctuation">,</span> doc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		doc <span class="token operator">=</span> doc <span class="token operator">||</span> document<span class="token punctuation">;</span>

		<span class="token keyword">var</span> i<span class="token punctuation">,</span> val<span class="token punctuation">,</span>
			script <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;script&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		script<span class="token punctuation">.</span>text <span class="token operator">=</span> code<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> preservedScriptAttributes<span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Support: Firefox 64+, Edge 18+</span>
				<span class="token comment">// Some browsers don't support the &quot;nonce&quot; property on scripts.</span>
				<span class="token comment">// On the other hand, just using `getAttribute` is not enough as</span>
				<span class="token comment">// the `nonce` attribute is reset to an empty string whenever it</span>
				<span class="token comment">// becomes browsing-context connected.</span>
				<span class="token comment">// See https://github.com/whatwg/html/issues/2369</span>
				<span class="token comment">// See https://html.spec.whatwg.org/#nonce-attributes</span>
				<span class="token comment">// The `node.getAttribute` check was added for the sake of</span>
				<span class="token comment">// `jQuery.globalEval` so that it can fake a nonce-containing node</span>
				<span class="token comment">// via an object.</span>
				val <span class="token operator">=</span> node<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">||</span> node<span class="token punctuation">.</span>getAttribute <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					script<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		doc<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>


	<span class="token keyword">function</span> <span class="token function">toType</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> obj <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Support: Android &lt;=2.3 only (functionish RegExp)</span>
		<span class="token keyword">return</span> <span class="token keyword">typeof</span> obj <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> obj <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span> <span class="token operator">?</span>
			class2type<span class="token punctuation">[</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">:</span>
			<span class="token keyword">typeof</span> obj<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">/* global Symbol */</span>
	<span class="token comment">// Defining this global in .eslintrc.json would create a danger of using the global</span>
	<span class="token comment">// unguarded in another place, it seems safer to define global only for this module</span>



	<span class="token keyword">var</span>
		version <span class="token operator">=</span> <span class="token string">&quot;3.5.1&quot;</span><span class="token punctuation">,</span>

		<span class="token comment">// Define a local copy of jQuery</span>
		<span class="token function-variable function">jQuery</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">selector<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// The jQuery object is actually just the init constructor 'enhanced'</span>
			<span class="token comment">// Need init if jQuery is called (just allow error to be thrown if not included)</span>
			<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span>init</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>

	jQuery<span class="token punctuation">.</span>fn <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>

		<span class="token comment">// The current version of jQuery being used</span>
		<span class="token literal-property property">jquery</span><span class="token operator">:</span> version<span class="token punctuation">,</span>

		<span class="token literal-property property">constructor</span><span class="token operator">:</span> jQuery<span class="token punctuation">,</span>

		<span class="token comment">// The default length of a jQuery object is 0</span>
		<span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>

		<span class="token function-variable function">toArray</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">// Get the Nth element in the matched element set OR</span>
		<span class="token comment">// Get the whole matched element set as a clean array</span>
		<span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// Return all the elements in a clean array</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Return just the one element from the set</span>
			<span class="token keyword">return</span> num <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">[</span>num <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">[</span>num<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">// Take an array of elements and push it onto the stack</span>
		<span class="token comment">// (returning the new matched element set)</span>
		<span class="token function-variable function">pushStack</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elems</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// Build a new jQuery matched element set</span>
			<span class="token comment">//返回一个新的数组</span>
			<span class="token keyword">var</span> ret <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> elems<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Add the old object onto the stack (as a reference)</span>
			<span class="token comment">//prevObject指向它的实例</span>
			ret<span class="token punctuation">.</span>prevObject <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

			<span class="token comment">// Return the newly-formed element set</span>
			<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">// Execute a callback for every element in the matched set.</span>
		<span class="token function-variable function">each</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">map</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> i<span class="token punctuation">,</span> elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">slice</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">first</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">last</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">even</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">grep</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_elem<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">odd</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">grep</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_elem<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> i <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">eq</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> len <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span>
				j <span class="token operator">=</span> <span class="token operator">+</span>i <span class="token operator">+</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> len <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span>j <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> j <span class="token operator">&lt;</span> len <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">//返回实例</span>
		<span class="token function-variable function">end</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prevObject <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">// For internal use only.</span>
		<span class="token comment">// Behaves like an Array's method, not like a jQuery method.</span>
		<span class="token literal-property property">push</span><span class="token operator">:</span> push<span class="token punctuation">,</span>
		<span class="token literal-property property">sort</span><span class="token operator">:</span> arr<span class="token punctuation">.</span>sort<span class="token punctuation">,</span>
		<span class="token literal-property property">splice</span><span class="token operator">:</span> arr<span class="token punctuation">.</span>splice
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	jQuery<span class="token punctuation">.</span>extend <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">extend</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> options<span class="token punctuation">,</span> name<span class="token punctuation">,</span> src<span class="token punctuation">,</span> copy<span class="token punctuation">,</span> copyIsArray<span class="token punctuation">,</span> clone<span class="token punctuation">,</span>
			target <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
			length <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
			deep <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

		<span class="token comment">// Handle a deep copy situation</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> target <span class="token operator">===</span> <span class="token string">&quot;boolean&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			deep <span class="token operator">=</span> target<span class="token punctuation">;</span>

			<span class="token comment">// Skip the boolean and the target</span>
			target <span class="token operator">=</span> arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
			i<span class="token operator">++</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Handle case when target is a string or something (possible in deep copy)</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> target <span class="token operator">!==</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">isFunction</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			target <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Extend jQuery itself if only one argument is passed</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">===</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			target <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
			i<span class="token operator">--</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// Only deal with non-null/undefined values</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>options <span class="token operator">=</span> arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Extend the base object</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span>name <span class="token keyword">in</span> options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					copy <span class="token operator">=</span> options<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>

					<span class="token comment">// Prevent Object.prototype pollution</span>
					<span class="token comment">// Prevent never-ending loop</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">&quot;__proto__&quot;</span> <span class="token operator">||</span> target <span class="token operator">===</span> copy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">continue</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// Recurse if we're merging plain objects or arrays</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>deep <span class="token operator">&amp;&amp;</span> copy <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>copy<span class="token punctuation">)</span> <span class="token operator">||</span>
						<span class="token punctuation">(</span>copyIsArray <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>copy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						src <span class="token operator">=</span> target<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>

						<span class="token comment">// Ensure proper type for the source value</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>copyIsArray <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							clone <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>copyIsArray <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							clone <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
							clone <span class="token operator">=</span> src<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						copyIsArray <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

						<span class="token comment">// Never move original objects, clone them</span>
						target<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>deep<span class="token punctuation">,</span> clone<span class="token punctuation">,</span> copy<span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token comment">// Don't bring in undefined values</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>copy <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						target<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> copy<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Return the modified object</span>
		<span class="token keyword">return</span> target<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token comment">//给jQuery添加唯一值</span>
		<span class="token comment">// Unique for each copy of jQuery on the page</span>
		<span class="token literal-property property">expando</span><span class="token operator">:</span> <span class="token string">&quot;jQuery&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>version <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\D</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

		<span class="token comment">// Assume jQuery is ready without the ready module</span>
		<span class="token literal-property property">isReady</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

		<span class="token function-variable function">error</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">noop</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">isPlainObject</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> proto<span class="token punctuation">,</span> Ctor<span class="token punctuation">;</span>

			<span class="token comment">// Detect obvious negatives</span>
			<span class="token comment">// Use toString instead of jQuery.type to catch host objects</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>obj <span class="token operator">||</span> <span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">&quot;[object Object]&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			proto <span class="token operator">=</span> <span class="token function">getProto</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Objects with no prototype (e.g., `Object.create( null )`) are plain</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>proto<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Objects with prototype are plain iff they were constructed by a global Object function</span>
			Ctor <span class="token operator">=</span> <span class="token function">hasOwn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>proto<span class="token punctuation">,</span> <span class="token string">&quot;constructor&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> proto<span class="token punctuation">.</span>constructor<span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token keyword">typeof</span> Ctor <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token function">fnToString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>Ctor<span class="token punctuation">)</span> <span class="token operator">===</span> ObjectFunctionString<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">isEmptyObject</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> name<span class="token punctuation">;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span>name <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">// Evaluates a script in a provided context; falls back to the global one</span>
		<span class="token comment">// if not specified.</span>
		<span class="token function-variable function">globalEval</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">code<span class="token punctuation">,</span> options<span class="token punctuation">,</span> doc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">DOMEval</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">nonce</span><span class="token operator">:</span> options <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span>nonce <span class="token punctuation">}</span><span class="token punctuation">,</span> doc<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">each</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> length<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isArrayLike</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				length <span class="token operator">=</span> obj<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> obj<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">break</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> obj<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">break</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> obj<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">// results is for internal usage only</span>
		<span class="token function-variable function">makeArray</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> results</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> ret <span class="token operator">=</span> results <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>arr <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isArrayLike</span><span class="token punctuation">(</span><span class="token function">Object</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					jQuery<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>ret<span class="token punctuation">,</span>
						<span class="token keyword">typeof</span> arr <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span> <span class="token operator">?</span>
							<span class="token punctuation">[</span>arr<span class="token punctuation">]</span> <span class="token operator">:</span> arr
					<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					<span class="token function">push</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>ret<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">inArray</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> arr<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> arr <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> <span class="token function">indexOf</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> elem<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">// Support: Android &lt;=4.0 only, PhantomJS 1 only</span>
		<span class="token comment">// push.apply(_, arraylike) throws on ancient WebKit</span>
		<span class="token function-variable function">merge</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">first<span class="token punctuation">,</span> second</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> len <span class="token operator">=</span> <span class="token operator">+</span>second<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
				j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
				i <span class="token operator">=</span> first<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				first<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> second<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			first<span class="token punctuation">.</span>length <span class="token operator">=</span> i<span class="token punctuation">;</span>

			<span class="token keyword">return</span> first<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">//过滤 </span>
		<span class="token function-variable function">grep</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elems<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> invert</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> callbackInverse<span class="token punctuation">,</span>
				matches <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
				i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
				length <span class="token operator">=</span> elems<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
				callbackExpect <span class="token operator">=</span> <span class="token operator">!</span>invert<span class="token punctuation">;</span>

			<span class="token comment">// Go through the array, only saving the items</span>
			<span class="token comment">// that pass the validator function</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				callbackInverse <span class="token operator">=</span> <span class="token operator">!</span><span class="token function">callback</span><span class="token punctuation">(</span>elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>callbackInverse <span class="token operator">!==</span> callbackExpect<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					matches<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> matches<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">// arg is for internal usage only</span>
		<span class="token function-variable function">map</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elems<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> length<span class="token punctuation">,</span> value<span class="token punctuation">,</span>
				i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
				ret <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token comment">// Go through the array, translating each of the items to their new values</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isArrayLike</span><span class="token punctuation">(</span>elems<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				length <span class="token operator">=</span> elems<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					value <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">(</span>elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> arg<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						ret<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Go through every key on the object,</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> elems<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					value <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">(</span>elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> arg<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						ret<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Flatten any nested arrays</span>
			<span class="token keyword">return</span> <span class="token function">flat</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">// A global GUID counter for objects</span>
		<span class="token literal-property property">guid</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>

		<span class="token comment">// jQuery.support is not used in Core but other projects attach their</span>
		<span class="token comment">// properties to it so it needs to exist.</span>
		<span class="token literal-property property">support</span><span class="token operator">:</span> support
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> Symbol <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Populate the class2type map</span>
	jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token string">&quot;Boolean Number String Function Array Date RegExp Object Error Symbol&quot;</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_i<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			class2type<span class="token punctuation">[</span><span class="token string">&quot;[object &quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">function</span> <span class="token function">isArrayLike</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token comment">// Support: real iOS 8.2 only (not reproducible in simulator)</span>
		<span class="token comment">// `in` check used to prevent JIT error (gh-2145)</span>
		<span class="token comment">// hasOwn isn't used here due to false negatives</span>
		<span class="token comment">// regarding Nodelist length in IE</span>
		<span class="token keyword">var</span> length <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>obj <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;length&quot;</span> <span class="token keyword">in</span> obj <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
			type <span class="token operator">=</span> <span class="token function">toType</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFunction</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">isWindow</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> type <span class="token operator">===</span> <span class="token string">&quot;array&quot;</span> <span class="token operator">||</span> length <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">||</span>
			<span class="token keyword">typeof</span> length <span class="token operator">===</span> <span class="token string">&quot;number&quot;</span> <span class="token operator">&amp;&amp;</span> length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">in</span> obj<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">var</span> Sizzle <span class="token operator">=</span>
		<span class="token comment">/*!
		 * Sizzle CSS Selector Engine v2.3.5
		 * https://sizzlejs.com/
		 *
		 * Copyright JS Foundation and other contributors
		 * Released under the MIT license
		 * https://js.foundation/
		 *
		 * Date: 2020-03-14
		 */</span>
		<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">window</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> i<span class="token punctuation">,</span>
				support<span class="token punctuation">,</span>
				Expr<span class="token punctuation">,</span>
				getText<span class="token punctuation">,</span>
				isXML<span class="token punctuation">,</span>
				tokenize<span class="token punctuation">,</span>
				compile<span class="token punctuation">,</span>
				select<span class="token punctuation">,</span>
				outermostContext<span class="token punctuation">,</span>
				sortInput<span class="token punctuation">,</span>
				hasDuplicate<span class="token punctuation">,</span>

				<span class="token comment">// Local document vars</span>
				setDocument<span class="token punctuation">,</span>
				document<span class="token punctuation">,</span>
				docElem<span class="token punctuation">,</span>
				documentIsHTML<span class="token punctuation">,</span>
				rbuggyQSA<span class="token punctuation">,</span>
				rbuggyMatches<span class="token punctuation">,</span>
				matches<span class="token punctuation">,</span>
				contains<span class="token punctuation">,</span>

				<span class="token comment">// Instance-specific data</span>
				expando <span class="token operator">=</span> <span class="token string">&quot;sizzle&quot;</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">*</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				preferredDoc <span class="token operator">=</span> window<span class="token punctuation">.</span>document<span class="token punctuation">,</span>
				dirruns <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
				done <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
				classCache <span class="token operator">=</span> <span class="token function">createCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				tokenCache <span class="token operator">=</span> <span class="token function">createCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				compilerCache <span class="token operator">=</span> <span class="token function">createCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				nonnativeSelectorCache <span class="token operator">=</span> <span class="token function">createCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token function-variable function">sortOrder</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">===</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						hasDuplicate <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>

				<span class="token comment">// Instance methods</span>
				hasOwn <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>hasOwnProperty<span class="token punctuation">,</span>
				arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
				pop <span class="token operator">=</span> arr<span class="token punctuation">.</span>pop<span class="token punctuation">,</span>
				pushNative <span class="token operator">=</span> arr<span class="token punctuation">.</span>push<span class="token punctuation">,</span>
				push <span class="token operator">=</span> arr<span class="token punctuation">.</span>push<span class="token punctuation">,</span>
				slice <span class="token operator">=</span> arr<span class="token punctuation">.</span>slice<span class="token punctuation">,</span>

				<span class="token comment">// Use a stripped-down indexOf as it's faster than native</span>
				<span class="token comment">// https://jsperf.com/thor-indexof-vs-for/5</span>
				<span class="token function-variable function">indexOf</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">list<span class="token punctuation">,</span> elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
						len <span class="token operator">=</span> list<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> elem<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">return</span> i<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>

				booleans <span class="token operator">=</span> <span class="token string">&quot;checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|&quot;</span> <span class="token operator">+</span>
					<span class="token string">&quot;ismap|loop|multiple|open|readonly|required|scoped&quot;</span><span class="token punctuation">,</span>

				<span class="token comment">// Regular expressions</span>
				<span class="token comment">//空白字符</span>
				<span class="token comment">// http://www.w3.org/TR/css3-selectors/#whitespace</span>
				whitespace <span class="token operator">=</span> <span class="token string">&quot;[\\x20\\t\\r\\n\\f]&quot;</span><span class="token punctuation">,</span>

				<span class="token comment">// https://www.w3.org/TR/css-syntax-3/#ident-token-diagram</span>
				identifier <span class="token operator">=</span> <span class="token string">&quot;(?:\\\\[\\da-fA-F]{1,6}&quot;</span> <span class="token operator">+</span> whitespace <span class="token operator">+</span>
					<span class="token string">&quot;?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+&quot;</span><span class="token punctuation">,</span>

				<span class="token comment">// Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors</span>
				attributes <span class="token operator">=</span> <span class="token string">&quot;\\[&quot;</span> <span class="token operator">+</span> whitespace <span class="token operator">+</span> <span class="token string">&quot;*(&quot;</span> <span class="token operator">+</span> identifier <span class="token operator">+</span> <span class="token string">&quot;)(?:&quot;</span> <span class="token operator">+</span> whitespace <span class="token operator">+</span>

					<span class="token comment">// Operator (capture 2)</span>
					<span class="token string">&quot;*([*^$|!~]?=)&quot;</span> <span class="token operator">+</span> whitespace <span class="token operator">+</span>

					<span class="token comment">// &quot;Attribute values must be CSS identifiers [capture 5]</span>
					<span class="token comment">// or strings [capture 3 or capture 4]&quot;</span>
					<span class="token string">&quot;*(?:'((?:\\\\.|[^\\\\'])*)'|\&quot;((?:\\\\.|[^\\\\\&quot;])*)\&quot;|(&quot;</span> <span class="token operator">+</span> identifier <span class="token operator">+</span> <span class="token string">&quot;))|)&quot;</span> <span class="token operator">+</span>
					whitespace <span class="token operator">+</span> <span class="token string">&quot;*\\]&quot;</span><span class="token punctuation">,</span>

				pseudos <span class="token operator">=</span> <span class="token string">&quot;:(&quot;</span> <span class="token operator">+</span> identifier <span class="token operator">+</span> <span class="token string">&quot;)(?:\\((&quot;</span> <span class="token operator">+</span>

					<span class="token comment">// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:</span>
					<span class="token comment">// 1. quoted (capture 3; capture 4 or capture 5)</span>
					<span class="token string">&quot;('((?:\\\\.|[^\\\\'])*)'|\&quot;((?:\\\\.|[^\\\\\&quot;])*)\&quot;)|&quot;</span> <span class="token operator">+</span>

					<span class="token comment">// 2. simple (capture 6)</span>
					<span class="token string">&quot;((?:\\\\.|[^\\\\()[\\]]|&quot;</span> <span class="token operator">+</span> attributes <span class="token operator">+</span> <span class="token string">&quot;)*)|&quot;</span> <span class="token operator">+</span>

					<span class="token comment">// 3. anything else (capture 2)</span>
					<span class="token string">&quot;.*&quot;</span> <span class="token operator">+</span>
					<span class="token string">&quot;)\\)|)&quot;</span><span class="token punctuation">,</span>

				<span class="token comment">// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter</span>
				<span class="token comment">//多个空白字符</span>
				rwhitespace <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>whitespace <span class="token operator">+</span> <span class="token string">&quot;+&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				rtrim <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;^&quot;</span> <span class="token operator">+</span> whitespace <span class="token operator">+</span> <span class="token string">&quot;+|((?:^|[^\\\\])(?:\\\\.)*)&quot;</span> <span class="token operator">+</span>
					whitespace <span class="token operator">+</span> <span class="token string">&quot;+$&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

				rcomma <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;^&quot;</span> <span class="token operator">+</span> whitespace <span class="token operator">+</span> <span class="token string">&quot;*,&quot;</span> <span class="token operator">+</span> whitespace <span class="token operator">+</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				rcombinators <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;^&quot;</span> <span class="token operator">+</span> whitespace <span class="token operator">+</span> <span class="token string">&quot;*([&gt;+~]|&quot;</span> <span class="token operator">+</span> whitespace <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span> <span class="token operator">+</span> whitespace <span class="token operator">+</span>
					<span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				rdescend <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>whitespace <span class="token operator">+</span> <span class="token string">&quot;|&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

				rpseudo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>pseudos<span class="token punctuation">)</span><span class="token punctuation">,</span>
				ridentifier <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;^&quot;</span> <span class="token operator">+</span> identifier <span class="token operator">+</span> <span class="token string">&quot;$&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

				matchExpr <span class="token operator">=</span> <span class="token punctuation">{</span>
					<span class="token string-property property">&quot;ID&quot;</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;^#(&quot;</span> <span class="token operator">+</span> identifier <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					<span class="token string-property property">&quot;CLASS&quot;</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;^\\.(&quot;</span> <span class="token operator">+</span> identifier <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					<span class="token string-property property">&quot;TAG&quot;</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;^(&quot;</span> <span class="token operator">+</span> identifier <span class="token operator">+</span> <span class="token string">&quot;|[*])&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					<span class="token string-property property">&quot;ATTR&quot;</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;^&quot;</span> <span class="token operator">+</span> attributes<span class="token punctuation">)</span><span class="token punctuation">,</span>
					<span class="token string-property property">&quot;PSEUDO&quot;</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;^&quot;</span> <span class="token operator">+</span> pseudos<span class="token punctuation">)</span><span class="token punctuation">,</span>
					<span class="token string-property property">&quot;CHILD&quot;</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(&quot;</span> <span class="token operator">+</span>
						whitespace <span class="token operator">+</span> <span class="token string">&quot;*(even|odd|(([+-]|)(\\d*)n|)&quot;</span> <span class="token operator">+</span> whitespace <span class="token operator">+</span> <span class="token string">&quot;*(?:([+-]|)&quot;</span> <span class="token operator">+</span>
						whitespace <span class="token operator">+</span> <span class="token string">&quot;*(\\d+)|))&quot;</span> <span class="token operator">+</span> whitespace <span class="token operator">+</span> <span class="token string">&quot;*\\)|)&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;i&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					<span class="token string-property property">&quot;bool&quot;</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;^(?:&quot;</span> <span class="token operator">+</span> booleans <span class="token operator">+</span> <span class="token string">&quot;)$&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;i&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

					<span class="token comment">// For use in libraries implementing .is()</span>
					<span class="token comment">// We use this for POS matching in `select`</span>
					<span class="token string-property property">&quot;needsContext&quot;</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;^&quot;</span> <span class="token operator">+</span> whitespace <span class="token operator">+</span>
						<span class="token string">&quot;*[&gt;+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(&quot;</span> <span class="token operator">+</span> whitespace <span class="token operator">+</span>
						<span class="token string">&quot;*((?:-\\d)?\\d*)&quot;</span> <span class="token operator">+</span> whitespace <span class="token operator">+</span> <span class="token string">&quot;*\\)|)(?=[^-]|$)&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;i&quot;</span><span class="token punctuation">)</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>

				rhtml <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">HTML$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
				rinputs <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:input|select|textarea|button)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
				rheader <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^h\d$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>

				rnative <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[^{]+\{\s*\[native \w</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>

				<span class="token comment">// Easily-parseable/retrievable ID or TAG or CLASS selectors</span>
				rquickExpr <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:#([\w-]+)|(\w+)|\.([\w-]+))$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>

				rsibling <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[+~]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>

				<span class="token comment">// CSS escapes</span>
				<span class="token comment">// http://www.w3.org/TR/CSS21/syndata.html#escaped-characters</span>
				runescape <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;\\\\[\\da-fA-F]{1,6}&quot;</span> <span class="token operator">+</span> whitespace <span class="token operator">+</span> <span class="token string">&quot;?|\\\\([^\\r\\n\\f])&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token function-variable function">funescape</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">escape<span class="token punctuation">,</span> nonHex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">//0x10000=&gt;Math.pow(2,16)</span>
					<span class="token keyword">var</span> high <span class="token operator">=</span> <span class="token string">&quot;0x&quot;</span> <span class="token operator">+</span> escape<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0x10000</span><span class="token punctuation">;</span>

					<span class="token keyword">return</span> nonHex <span class="token operator">?</span>

						<span class="token comment">// Strip the backslash prefix from a non-hex escape sequence</span>
						<span class="token literal-property property">nonHex</span> <span class="token operator">:</span>

						<span class="token comment">// Replace a hexadecimal escape sequence with the encoded Unicode code point</span>
						<span class="token comment">// Support: IE &lt;=11+</span>
						<span class="token comment">// For values outside the Basic Multilingual Plane (BMP), manually construct a</span>
						<span class="token comment">// surrogate pair</span>
						high <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span>
							String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>high <span class="token operator">+</span> <span class="token number">0x10000</span><span class="token punctuation">)</span> <span class="token operator">:</span>
							String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>high <span class="token operator">&gt;&gt;</span> <span class="token number">10</span> <span class="token operator">|</span> <span class="token number">0xD800</span><span class="token punctuation">,</span> high <span class="token operator">&amp;</span> <span class="token number">0x3FF</span> <span class="token operator">|</span> <span class="token number">0xDC00</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>

				<span class="token comment">// CSS string/identifier serialization</span>
				<span class="token comment">// https://drafts.csswg.org/cssom/#common-serializing-idioms</span>
				rcssescape <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span>
				<span class="token function-variable function">fcssescape</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ch<span class="token punctuation">,</span> asCodePoint</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>asCodePoint<span class="token punctuation">)</span> <span class="token punctuation">{</span>

						<span class="token comment">// U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>ch <span class="token operator">===</span> <span class="token string">&quot;\0&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">return</span> <span class="token string">&quot;\uFFFD&quot;</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// Control characters and (dependent upon position) numbers get escaped as code points</span>
						<span class="token keyword">return</span> ch<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\\&quot;</span> <span class="token operator">+</span>
							ch<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>ch<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// Other potentially-special ASCII characters get backslash-escaped</span>
					<span class="token keyword">return</span> <span class="token string">&quot;\\&quot;</span> <span class="token operator">+</span> ch<span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>

				<span class="token comment">// Used for iframes</span>
				<span class="token comment">// See setDocument()</span>
				<span class="token comment">// Removing the function wrapper causes a &quot;Permission Denied&quot;</span>
				<span class="token comment">// error in IE</span>
				<span class="token function-variable function">unloadHandler</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">setDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>

				inDisabledFieldset <span class="token operator">=</span> <span class="token function">addCombinator</span><span class="token punctuation">(</span>
					<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> elem<span class="token punctuation">.</span>disabled <span class="token operator">===</span> <span class="token boolean">true</span> <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;fieldset&quot;</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
					<span class="token punctuation">{</span> <span class="token literal-property property">dir</span><span class="token operator">:</span> <span class="token string">&quot;parentNode&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">next</span><span class="token operator">:</span> <span class="token string">&quot;legend&quot;</span> <span class="token punctuation">}</span>
				<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Optimize for push.apply( _, NodeList )</span>
			<span class="token keyword">try</span> <span class="token punctuation">{</span>
				<span class="token function">push</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>
					<span class="token punctuation">(</span>arr <span class="token operator">=</span> <span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>preferredDoc<span class="token punctuation">.</span>childNodes<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					preferredDoc<span class="token punctuation">.</span>childNodes
				<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Support: Android&lt;4.0</span>
				<span class="token comment">// Detect silently failing push.apply</span>
				<span class="token comment">// eslint-disable-next-line no-unused-expressions</span>
				arr<span class="token punctuation">[</span>preferredDoc<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">.</span>nodeType<span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				push <span class="token operator">=</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">apply</span><span class="token operator">:</span> arr<span class="token punctuation">.</span>length <span class="token operator">?</span>

						<span class="token comment">// Leverage slice if possible</span>
						<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> els</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token function">pushNative</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>els<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span> <span class="token operator">:</span>

						<span class="token comment">// Support: IE&lt;9</span>
						<span class="token comment">// Otherwise append directly</span>
						<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> els</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">var</span> j <span class="token operator">=</span> target<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
								i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

							<span class="token comment">// Can't trust NodeList.length</span>
							<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> els<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
							target<span class="token punctuation">.</span>length <span class="token operator">=</span> j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">function</span> <span class="token function">Sizzle</span> <span class="token punctuation">(</span><span class="token parameter">selector<span class="token punctuation">,</span> context<span class="token punctuation">,</span> results<span class="token punctuation">,</span> seed</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> m<span class="token punctuation">,</span> i<span class="token punctuation">,</span> elem<span class="token punctuation">,</span> nid<span class="token punctuation">,</span> match<span class="token punctuation">,</span> groups<span class="token punctuation">,</span> newSelector<span class="token punctuation">,</span>
					newContext <span class="token operator">=</span> context <span class="token operator">&amp;&amp;</span> context<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">,</span>

					<span class="token comment">// nodeType defaults to 9, since context defaults to document</span>
					nodeType <span class="token operator">=</span> context <span class="token operator">?</span> context<span class="token punctuation">.</span>nodeType <span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">;</span>

				results <span class="token operator">=</span> results <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token comment">// Return early from calls with invalid selector or context</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> selector <span class="token operator">!==</span> <span class="token string">&quot;string&quot;</span> <span class="token operator">||</span> <span class="token operator">!</span>selector <span class="token operator">||</span>
					nodeType <span class="token operator">!==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> nodeType <span class="token operator">!==</span> <span class="token number">9</span> <span class="token operator">&amp;&amp;</span> nodeType <span class="token operator">!==</span> <span class="token number">11</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token keyword">return</span> results<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Try to shortcut find operations (as opposed to filters) in HTML documents</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>seed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">setDocument</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
					context <span class="token operator">=</span> context <span class="token operator">||</span> document<span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span>documentIsHTML<span class="token punctuation">)</span> <span class="token punctuation">{</span>

						<span class="token comment">// If the selector is sufficiently simple, try using a &quot;get*By*&quot; DOM method</span>
						<span class="token comment">// (excepting DocumentFragment context, where the methods don't exist)</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>nodeType <span class="token operator">!==</span> <span class="token number">11</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>match <span class="token operator">=</span> rquickExpr<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

							<span class="token comment">// ID selector</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>m <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

								<span class="token comment">// Document context</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span>nodeType <span class="token operator">===</span> <span class="token number">9</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>elem <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

										<span class="token comment">// Support: IE, Opera, Webkit</span>
										<span class="token comment">// TODO: identify versions</span>
										<span class="token comment">// getElementById can match elements by name instead of ID</span>
										<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>id <span class="token operator">===</span> m<span class="token punctuation">)</span> <span class="token punctuation">{</span>
											results<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
											<span class="token keyword">return</span> results<span class="token punctuation">;</span>
										<span class="token punctuation">}</span>
									<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
										<span class="token keyword">return</span> results<span class="token punctuation">;</span>
									<span class="token punctuation">}</span>

									<span class="token comment">// Element context</span>
								<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

									<span class="token comment">// Support: IE, Opera, Webkit</span>
									<span class="token comment">// TODO: identify versions</span>
									<span class="token comment">// getElementById can match elements by name instead of ID</span>
									<span class="token keyword">if</span> <span class="token punctuation">(</span>newContext <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>elem <span class="token operator">=</span> newContext<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
										<span class="token function">contains</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> elem<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
										elem<span class="token punctuation">.</span>id <span class="token operator">===</span> m<span class="token punctuation">)</span> <span class="token punctuation">{</span>

										results<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
										<span class="token keyword">return</span> results<span class="token punctuation">;</span>
									<span class="token punctuation">}</span>
								<span class="token punctuation">}</span>

								<span class="token comment">// Type selector</span>
							<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token function">push</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>results<span class="token punctuation">,</span> context<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token keyword">return</span> results<span class="token punctuation">;</span>

								<span class="token comment">// Class selector</span>
							<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>m <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> support<span class="token punctuation">.</span>getElementsByClassName <span class="token operator">&amp;&amp;</span>
								context<span class="token punctuation">.</span>getElementsByClassName<span class="token punctuation">)</span> <span class="token punctuation">{</span>

								<span class="token function">push</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>results<span class="token punctuation">,</span> context<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token keyword">return</span> results<span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// Take advantage of querySelectorAll</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>support<span class="token punctuation">.</span>qsa <span class="token operator">&amp;&amp;</span>
							<span class="token operator">!</span>nonnativeSelectorCache<span class="token punctuation">[</span>selector <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span>
							<span class="token punctuation">(</span><span class="token operator">!</span>rbuggyQSA <span class="token operator">||</span> <span class="token operator">!</span>rbuggyQSA<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>

							<span class="token comment">// Support: IE 8 only</span>
							<span class="token comment">// Exclude object elements</span>
							<span class="token punctuation">(</span>nodeType <span class="token operator">!==</span> <span class="token number">1</span> <span class="token operator">||</span> context<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

							newSelector <span class="token operator">=</span> selector<span class="token punctuation">;</span>
							newContext <span class="token operator">=</span> context<span class="token punctuation">;</span>

							<span class="token comment">// qSA considers elements outside a scoping root when evaluating child or</span>
							<span class="token comment">// descendant combinators, which is not what we want.</span>
							<span class="token comment">// In such cases, we work around the behavior by prefixing every selector in the</span>
							<span class="token comment">// list with an ID selector referencing the scope context.</span>
							<span class="token comment">// The technique has to be used as well when a leading combinator is used</span>
							<span class="token comment">// as such selectors are not recognized by querySelectorAll.</span>
							<span class="token comment">// Thanks to Andrew Dupont for this technique.</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span>
								<span class="token punctuation">(</span>rdescend<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span> <span class="token operator">||</span> rcombinators<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

								<span class="token comment">// Expand context for sibling selectors</span>
								newContext <span class="token operator">=</span> rsibling<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">testContext</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span> <span class="token operator">||</span>
									context<span class="token punctuation">;</span>

								<span class="token comment">// We can use :scope instead of the ID hack if the browser</span>
								<span class="token comment">// supports it &amp; if we're not changing the context.</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span>newContext <span class="token operator">!==</span> context <span class="token operator">||</span> <span class="token operator">!</span>support<span class="token punctuation">.</span>scope<span class="token punctuation">)</span> <span class="token punctuation">{</span>

									<span class="token comment">// Capture the context ID, setting it first if necessary</span>
									<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>nid <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
										nid <span class="token operator">=</span> nid<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rcssescape<span class="token punctuation">,</span> fcssescape<span class="token punctuation">)</span><span class="token punctuation">;</span>
									<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
										context<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>nid <span class="token operator">=</span> expando<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
									<span class="token punctuation">}</span>
								<span class="token punctuation">}</span>

								<span class="token comment">// Prefix every selector in the list</span>
								groups <span class="token operator">=</span> <span class="token function">tokenize</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
								i <span class="token operator">=</span> groups<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
								<span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
									groups<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>nid <span class="token operator">?</span> <span class="token string">&quot;#&quot;</span> <span class="token operator">+</span> nid <span class="token operator">:</span> <span class="token string">&quot;:scope&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span>
										<span class="token function">toSelector</span><span class="token punctuation">(</span>groups<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
								newSelector <span class="token operator">=</span> groups<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>

							<span class="token keyword">try</span> <span class="token punctuation">{</span>
								<span class="token function">push</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>results<span class="token punctuation">,</span>
									newContext<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span>newSelector<span class="token punctuation">)</span>
								<span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token keyword">return</span> results<span class="token punctuation">;</span>
							<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>qsaError<span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token function">nonnativeSelectorCache</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span>nid <span class="token operator">===</span> expando<span class="token punctuation">)</span> <span class="token punctuation">{</span>
									context<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// All others //尾调用</span>
				<span class="token keyword">return</span> <span class="token function">select</span><span class="token punctuation">(</span>selector<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rtrim<span class="token punctuation">,</span> <span class="token string">&quot;$1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> context<span class="token punctuation">,</span> results<span class="token punctuation">,</span> seed<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">/**
			 * Create key-value caches of limited size
			 * @returns {function(string, object)} Returns the Object data after storing it on itself with
			 *	property name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)
			 *	deleting the oldest entry
			 */</span>
			<span class="token keyword">function</span> <span class="token function">createCache</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> keys <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token keyword">function</span> <span class="token function">cache</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Use (key + &quot; &quot;) to avoid collision with native prototype properties (see Issue #157)</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>keys<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> Expr<span class="token punctuation">.</span>cacheLength<span class="token punctuation">)</span> <span class="token punctuation">{</span>

						<span class="token comment">// Only keep the most recent entries</span>
						<span class="token keyword">delete</span> cache<span class="token punctuation">[</span>keys<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">return</span> <span class="token punctuation">(</span>cache<span class="token punctuation">[</span>key <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">/**
			 * Mark a function for special use by Sizzle
			 * @param {Function} fn The function to mark
			 */</span>
			<span class="token keyword">function</span> <span class="token function">markFunction</span> <span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">//给fn添加唯一值</span>
				fn<span class="token punctuation">[</span>expando<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> fn<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">/**
			 * Support testing using an element
			 * @param {Function} fn Passed the created element and returns a boolean result
			 */</span>
			<span class="token keyword">function</span> <span class="token function">assert</span> <span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;fieldset&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">try</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token function">fn</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>

					<span class="token comment">// Remove from its parent by default</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						el<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// release memory in IE</span>
					el <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">/**
			 * Adds the same handler for all of the specified attrs
			 * @param {String} attrs Pipe-separated list of attributes
			 * @param {Function} handler The method that will be applied
			 */</span>
			<span class="token keyword">function</span> <span class="token function">addHandle</span> <span class="token punctuation">(</span><span class="token parameter">attrs<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> arr <span class="token operator">=</span> attrs<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;|&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					i <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

				<span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					Expr<span class="token punctuation">.</span>attrHandle<span class="token punctuation">[</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> handler<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">/**
			 * Checks document order of two siblings
			 * @param {Element} a
			 * @param {Element} b
			 * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b
			 */</span>
			<span class="token keyword">function</span> <span class="token function">siblingCheck</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> cur <span class="token operator">=</span> b <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">,</span>
					diff <span class="token operator">=</span> cur <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> b<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span>
						a<span class="token punctuation">.</span>sourceIndex <span class="token operator">-</span> b<span class="token punctuation">.</span>sourceIndex<span class="token punctuation">;</span>

				<span class="token comment">// Use IE sourceIndex if available on both nodes</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>diff<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> diff<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Check if b follows a</span>
				<span class="token comment">//如果cur存在,则a和b都存在，则有cur=a;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>nextSibling<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>cur <span class="token operator">===</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">return</span> a <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">/**
			 * Returns a function to use in pseudos for input types
			 * @param {String} type
			 */</span>
			<span class="token keyword">function</span> <span class="token function">createInputPseudo</span> <span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> name <span class="token operator">=</span> elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">return</span> name <span class="token operator">===</span> <span class="token string">&quot;input&quot;</span> <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>type <span class="token operator">===</span> type<span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">/**
			 * Returns a function to use in pseudos for buttons
			 * @param {String} type
			 */</span>
			<span class="token keyword">function</span> <span class="token function">createButtonPseudo</span> <span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> name <span class="token operator">=</span> elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">return</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">&quot;input&quot;</span> <span class="token operator">||</span> name <span class="token operator">===</span> <span class="token string">&quot;button&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>type <span class="token operator">===</span> type<span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">/**
			 * Returns a function to use in pseudos for :enabled/:disabled
			 * @param {Boolean} disabled true for :disabled; false for :enabled
			 */</span>
			<span class="token keyword">function</span> <span class="token function">createDisabledPseudo</span> <span class="token punctuation">(</span><span class="token parameter">disabled</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Known :disabled false positives: fieldset[disabled] &gt; legend:nth-of-type(n+2) :can-disable</span>
				<span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Only certain elements can match :enabled or :disabled</span>
					<span class="token comment">// https://html.spec.whatwg.org/multipage/scripting.html#selector-enabled</span>
					<span class="token comment">// https://html.spec.whatwg.org/multipage/scripting.html#selector-disabled</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;form&quot;</span> <span class="token keyword">in</span> elem<span class="token punctuation">)</span> <span class="token punctuation">{</span>

						<span class="token comment">// Check for inherited disabledness on relevant non-disabled elements:</span>
						<span class="token comment">// * listed form-associated elements in a disabled fieldset</span>
						<span class="token comment">//   https://html.spec.whatwg.org/multipage/forms.html#category-listed</span>
						<span class="token comment">//   https://html.spec.whatwg.org/multipage/forms.html#concept-fe-disabled</span>
						<span class="token comment">// * option elements in a disabled optgroup</span>
						<span class="token comment">//   https://html.spec.whatwg.org/multipage/forms.html#concept-option-disabled</span>
						<span class="token comment">// All such elements have a &quot;form&quot; property.</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>parentNode <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>disabled <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

							<span class="token comment">// Option elements defer to a parent optgroup if present</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;label&quot;</span> <span class="token keyword">in</span> elem<span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;label&quot;</span> <span class="token keyword">in</span> elem<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token keyword">return</span> elem<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>disabled <span class="token operator">===</span> disabled<span class="token punctuation">;</span>
								<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
									<span class="token keyword">return</span> elem<span class="token punctuation">.</span>disabled <span class="token operator">===</span> disabled<span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span>

							<span class="token comment">// Support: IE 6 - 11</span>
							<span class="token comment">// Use the isDisabled shortcut property to check for disabled fieldset ancestors</span>
							<span class="token keyword">return</span> elem<span class="token punctuation">.</span>isDisabled <span class="token operator">===</span> disabled <span class="token operator">||</span>

								<span class="token comment">// Where there is no isDisabled, check manually</span>
								<span class="token comment">/* jshint -W018 */</span>
								elem<span class="token punctuation">.</span>isDisabled <span class="token operator">!==</span> <span class="token operator">!</span>disabled <span class="token operator">&amp;&amp;</span>
								<span class="token function">inDisabledFieldset</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span> <span class="token operator">===</span> disabled<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token keyword">return</span> elem<span class="token punctuation">.</span>disabled <span class="token operator">===</span> disabled<span class="token punctuation">;</span>

						<span class="token comment">// Try to winnow out elements that can't be disabled before trusting the disabled property.</span>
						<span class="token comment">// Some victims get caught in our net (label, legend, menu, track), but it shouldn't</span>
						<span class="token comment">// even exist on them, let alone have a boolean value.</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;label&quot;</span> <span class="token keyword">in</span> elem<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> elem<span class="token punctuation">.</span>disabled <span class="token operator">===</span> disabled<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// Remaining elements are neither :enabled nor :disabled</span>
					<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">/**
			 * Returns a function to use in pseudos for positionals
			 * @param {Function} fn
			 */</span>
			<span class="token keyword">function</span> <span class="token function">createPositionalPseudo</span> <span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token function">markFunction</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">argument</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					argument <span class="token operator">=</span> <span class="token operator">+</span>argument<span class="token punctuation">;</span>
					<span class="token keyword">return</span> <span class="token function">markFunction</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">seed<span class="token punctuation">,</span> matches</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> j<span class="token punctuation">,</span>
							matchIndexes <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> seed<span class="token punctuation">.</span>length<span class="token punctuation">,</span> argument<span class="token punctuation">)</span><span class="token punctuation">,</span>
							i <span class="token operator">=</span> matchIndexes<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

						<span class="token comment">// Match elements found at the specified indexes</span>
						<span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>seed<span class="token punctuation">[</span><span class="token punctuation">(</span>j <span class="token operator">=</span> matchIndexes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								seed<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">!</span><span class="token punctuation">(</span>matches<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> seed<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">/**
			 * Checks a node for validity as a Sizzle context
			 * @param {Element|Object=} context
			 * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value
			 */</span>
			<span class="token keyword">function</span> <span class="token function">testContext</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> context <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> context<span class="token punctuation">.</span>getElementsByTagName <span class="token operator">!==</span> <span class="token string">&quot;undefined&quot;</span> <span class="token operator">&amp;&amp;</span> context<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Expose support vars for convenience</span>
			support <span class="token operator">=</span> Sizzle<span class="token punctuation">.</span>support <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token comment">/**
			 * Detects XML nodes
			 * @param {Element|Object} elem An element or a document
			 * @returns {Boolean} True iff elem is a non-HTML XML node
			 */</span>
			isXML <span class="token operator">=</span> Sizzle<span class="token punctuation">.</span><span class="token function-variable function">isXML</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> namespace <span class="token operator">=</span> elem<span class="token punctuation">.</span>namespaceURI<span class="token punctuation">,</span>
					docElem <span class="token operator">=</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>ownerDocument <span class="token operator">||</span> elem<span class="token punctuation">)</span><span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>

				<span class="token comment">// Support: IE &lt;=8</span>
				<span class="token comment">// Assume HTML when documentElement doesn't yet exist, such as inside loading iframes</span>
				<span class="token comment">// https://bugs.jquery.com/ticket/4833</span>
				<span class="token comment">//rhtml=&gt;/HTML$/i</span>
				<span class="token keyword">return</span> <span class="token operator">!</span>rhtml<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>namespace <span class="token operator">||</span> docElem <span class="token operator">&amp;&amp;</span> docElem<span class="token punctuation">.</span>nodeName <span class="token operator">||</span> <span class="token string">&quot;HTML&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token comment">/**
			 * Sets document-related variables once based on the current document
			 * @param {Element|Object} [doc] An element or document object to use to set the document
			 * @returns {Object} Returns the current document
			 */</span>
			setDocument <span class="token operator">=</span> Sizzle<span class="token punctuation">.</span><span class="token function-variable function">setDocument</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">//preferredDoc=&gt;window.document</span>
				<span class="token comment">//doc=&gt;window.documnet</span>
				<span class="token keyword">var</span> hasCompare<span class="token punctuation">,</span> subWindow<span class="token punctuation">,</span>
					doc <span class="token operator">=</span> node <span class="token operator">?</span> node<span class="token punctuation">.</span>ownerDocument <span class="token operator">||</span> node <span class="token operator">:</span> preferredDoc<span class="token punctuation">;</span>

				<span class="token comment">// Return early if doc is invalid or already selected</span>
				<span class="token comment">// Support: IE 11+, Edge 17 - 18+</span>
				<span class="token comment">// IE/Edge sometimes throw a &quot;Permission denied&quot; error when strict-comparing</span>
				<span class="token comment">// two documents; shallow comparisons work.</span>
				<span class="token comment">// eslint-disable-next-line eqeqeq</span>
				<span class="token comment">//9代表文档类型</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>doc <span class="token operator">==</span> document <span class="token operator">||</span> doc<span class="token punctuation">.</span>nodeType <span class="token operator">!==</span> <span class="token number">9</span> <span class="token operator">||</span> <span class="token operator">!</span>doc<span class="token punctuation">.</span>documentElement<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> document<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Update global variables</span>
				<span class="token comment">//更新全局变量的值</span>
				document <span class="token operator">=</span> doc<span class="token punctuation">;</span>
				docElem <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>
				documentIsHTML <span class="token operator">=</span> <span class="token operator">!</span><span class="token function">isXML</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Support: IE 9 - 11+, Edge 12 - 18+</span>
				<span class="token comment">// Accessing iframe documents after unload throws &quot;permission denied&quot; errors (jQuery #13936)</span>
				<span class="token comment">// Support: IE 11+, Edge 17 - 18+</span>
				<span class="token comment">// IE/Edge sometimes throw a &quot;Permission denied&quot; error when strict-comparing</span>
				<span class="token comment">// two documents; shallow comparisons work.</span>
				<span class="token comment">// eslint-disable-next-line eqeqeq</span>
				<span class="token comment">//考虑不同iframe的情况</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>preferredDoc <span class="token operator">!=</span> document <span class="token operator">&amp;&amp;</span>
					<span class="token punctuation">(</span>subWindow <span class="token operator">=</span> document<span class="token punctuation">.</span>defaultView<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> subWindow<span class="token punctuation">.</span>top <span class="token operator">!==</span> subWindow<span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Support: IE 11, Edge</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>subWindow<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">//卸载页面</span>
						subWindow<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;unload&quot;</span><span class="token punctuation">,</span> unloadHandler<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token comment">// Support: IE 9 - 10 only</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>subWindow<span class="token punctuation">.</span>attachEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						subWindow<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">&quot;onunload&quot;</span><span class="token punctuation">,</span> unloadHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Support: IE 8 - 11+, Edge 12 - 18+, Chrome &lt;=16 - 25 only, Firefox &lt;=3.6 - 31 only,</span>
				<span class="token comment">// Safari 4 - 5 only, Opera &lt;=11.6 - 12.x only</span>
				<span class="token comment">// IE/Edge &amp; older browsers don't support the :scope pseudo-class.</span>
				<span class="token comment">// Support: Safari 6.0 only</span>
				<span class="token comment">// Safari 6.0 supports :scope but it's an alias of :root there.</span>
				support<span class="token punctuation">.</span>scope <span class="token operator">=</span> <span class="token function">assert</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					docElem<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">return</span> <span class="token keyword">typeof</span> el<span class="token punctuation">.</span>querySelectorAll <span class="token operator">!==</span> <span class="token string">&quot;undefined&quot;</span> <span class="token operator">&amp;&amp;</span>
						<span class="token operator">!</span>el<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;:scope fieldset div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">/* Attributes
				---------------------------------------------------------------------- */</span>

				<span class="token comment">// Support: IE&lt;8</span>
				<span class="token comment">// Verify that getAttribute really returns attributes and not properties</span>
				<span class="token comment">// (excepting IE8 booleans)</span>
				support<span class="token punctuation">.</span>attributes <span class="token operator">=</span> <span class="token function">assert</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					el<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">&quot;i&quot;</span><span class="token punctuation">;</span>
					<span class="token keyword">return</span> <span class="token operator">!</span>el<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;className&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">/* getElement(s)By*
				---------------------------------------------------------------------- */</span>

				<span class="token comment">// Check if getElementsByTagName(&quot;*&quot;) returns only elements</span>
				support<span class="token punctuation">.</span>getElementsByTagName <span class="token operator">=</span> <span class="token function">assert</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					el<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createComment</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">return</span> <span class="token operator">!</span>el<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Support: IE&lt;9</span>
				support<span class="token punctuation">.</span>getElementsByClassName <span class="token operator">=</span> rnative<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>getElementsByClassName<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Support: IE&lt;10</span>
				<span class="token comment">// Check if getElementById returns elements by name</span>
				<span class="token comment">// The broken getElementById methods don't pick up programmatically-set names,</span>
				<span class="token comment">// so use a roundabout getElementsByName test</span>
				support<span class="token punctuation">.</span>getById <span class="token operator">=</span> <span class="token function">assert</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					docElem<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">.</span>id <span class="token operator">=</span> expando<span class="token punctuation">;</span>
					<span class="token keyword">return</span> <span class="token operator">!</span>document<span class="token punctuation">.</span>getElementsByName <span class="token operator">||</span> <span class="token operator">!</span>document<span class="token punctuation">.</span><span class="token function">getElementsByName</span><span class="token punctuation">(</span>expando<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// ID filter and find</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>support<span class="token punctuation">.</span>getById<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					Expr<span class="token punctuation">.</span>filter<span class="token punctuation">[</span><span class="token string">&quot;ID&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> attrId <span class="token operator">=</span> id<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>runescape<span class="token punctuation">,</span> funescape<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">return</span> elem<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> attrId<span class="token punctuation">;</span>
						<span class="token punctuation">}</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">;</span>
					Expr<span class="token punctuation">.</span>find<span class="token punctuation">[</span><span class="token string">&quot;ID&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> context<span class="token punctuation">.</span>getElementById <span class="token operator">!==</span> <span class="token string">&quot;undefined&quot;</span> <span class="token operator">&amp;&amp;</span> documentIsHTML<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">var</span> elem <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token keyword">return</span> elem <span class="token operator">?</span> <span class="token punctuation">[</span>elem<span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					Expr<span class="token punctuation">.</span>filter<span class="token punctuation">[</span><span class="token string">&quot;ID&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> attrId <span class="token operator">=</span> id<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>runescape<span class="token punctuation">,</span> funescape<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">var</span> node <span class="token operator">=</span> <span class="token keyword">typeof</span> elem<span class="token punctuation">.</span>getAttributeNode <span class="token operator">!==</span> <span class="token string">&quot;undefined&quot;</span> <span class="token operator">&amp;&amp;</span>
								elem<span class="token punctuation">.</span><span class="token function">getAttributeNode</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token keyword">return</span> node <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>value <span class="token operator">===</span> attrId<span class="token punctuation">;</span>
						<span class="token punctuation">}</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">;</span>

					<span class="token comment">// Support: IE 6 - 7 only</span>
					<span class="token comment">// getElementById is not reliable as a find shortcut</span>
					Expr<span class="token punctuation">.</span>find<span class="token punctuation">[</span><span class="token string">&quot;ID&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> context<span class="token punctuation">.</span>getElementById <span class="token operator">!==</span> <span class="token string">&quot;undefined&quot;</span> <span class="token operator">&amp;&amp;</span> documentIsHTML<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">var</span> node<span class="token punctuation">,</span> i<span class="token punctuation">,</span> elems<span class="token punctuation">,</span>
								elem <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

							<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">)</span> <span class="token punctuation">{</span>

								<span class="token comment">// Verify the id attribute</span>
								node <span class="token operator">=</span> elem<span class="token punctuation">.</span><span class="token function">getAttributeNode</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>value <span class="token operator">===</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token keyword">return</span> <span class="token punctuation">[</span>elem<span class="token punctuation">]</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>

								<span class="token comment">// Fall back on getElementsByName</span>
								elems <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getElementsByName</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
								i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
								<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>elem <span class="token operator">=</span> elems<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
									node <span class="token operator">=</span> elem<span class="token punctuation">.</span><span class="token function">getAttributeNode</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
									<span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>value <span class="token operator">===</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
										<span class="token keyword">return</span> <span class="token punctuation">[</span>elem<span class="token punctuation">]</span><span class="token punctuation">;</span>
									<span class="token punctuation">}</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span>

							<span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Tag</span>
				Expr<span class="token punctuation">.</span>find<span class="token punctuation">[</span><span class="token string">&quot;TAG&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> support<span class="token punctuation">.</span>getElementsByTagName <span class="token operator">?</span>
					<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">tag<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> context<span class="token punctuation">.</span>getElementsByTagName <span class="token operator">!==</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">return</span> context<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">;</span>

							<span class="token comment">// DocumentFragment nodes don't have gEBTN</span>
						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>support<span class="token punctuation">.</span>qsa<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">return</span> context<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span> <span class="token operator">:</span>

					<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">tag<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> elem<span class="token punctuation">,</span>
							tmp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
							i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>

							<span class="token comment">// By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too</span>
							results <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token comment">// Filter out possible comments</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>tag <span class="token operator">===</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>elem <span class="token operator">=</span> results<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
									tmp<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span>

							<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						<span class="token keyword">return</span> results<span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">;</span>

				<span class="token comment">// Class</span>
				Expr<span class="token punctuation">.</span>find<span class="token punctuation">[</span><span class="token string">&quot;CLASS&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> support<span class="token punctuation">.</span>getElementsByClassName <span class="token operator">&amp;&amp;</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">className<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> context<span class="token punctuation">.</span>getElementsByClassName <span class="token operator">!==</span> <span class="token string">&quot;undefined&quot;</span> <span class="token operator">&amp;&amp;</span> documentIsHTML<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> context<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">;</span>

				<span class="token comment">/* QSA/matchesSelector
				---------------------------------------------------------------------- */</span>

				<span class="token comment">// QSA and matchesSelector support</span>

				<span class="token comment">// matchesSelector(:active) reports false when true (IE9/Opera 11.5)</span>
				rbuggyMatches <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token comment">// qSa(:focus) reports false when true (Chrome 21)</span>
				<span class="token comment">// We allow this because of a bug in IE8/9 that throws an error</span>
				<span class="token comment">// whenever `document.activeElement` is accessed on an iframe</span>
				<span class="token comment">// So, we allow :focus to pass through QSA all the time to avoid the IE error</span>
				<span class="token comment">// See https://bugs.jquery.com/ticket/13378</span>
				rbuggyQSA <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>support<span class="token punctuation">.</span>qsa <span class="token operator">=</span> rnative<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>querySelectorAll<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Build QSA regex</span>
					<span class="token comment">// Regex strategy adopted from Diego Perini</span>
					<span class="token function">assert</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

						<span class="token keyword">var</span> input<span class="token punctuation">;</span>

						<span class="token comment">// Select is set to empty string on purpose</span>
						<span class="token comment">// This is to test IE's treatment of not explicitly</span>
						<span class="token comment">// setting a boolean content attribute,</span>
						<span class="token comment">// since its presence should be enough</span>
						<span class="token comment">// https://bugs.jquery.com/ticket/12359</span>
						docElem<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;&lt;a id='&quot;</span> <span class="token operator">+</span> expando <span class="token operator">+</span> <span class="token string">&quot;'&gt;&lt;/a&gt;&quot;</span> <span class="token operator">+</span>
							<span class="token string">&quot;&lt;select id='&quot;</span> <span class="token operator">+</span> expando <span class="token operator">+</span> <span class="token string">&quot;-\r\\' msallowcapture=''&gt;&quot;</span> <span class="token operator">+</span>
							<span class="token string">&quot;&lt;option selected=''&gt;&lt;/option&gt;&lt;/select&gt;&quot;</span><span class="token punctuation">;</span>

						<span class="token comment">// Support: IE8, Opera 11-12.16</span>
						<span class="token comment">// Nothing should be selected when empty strings follow ^= or $= or *=</span>
						<span class="token comment">// The test attribute must be unknown in Opera but &quot;safe&quot; for WinRT</span>
						<span class="token comment">// https://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;[msallowcapture^='']&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							rbuggyQSA<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;[*^$]=&quot;</span> <span class="token operator">+</span> whitespace <span class="token operator">+</span> <span class="token string">&quot;*(?:''|\&quot;\&quot;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// Support: IE8</span>
						<span class="token comment">// Boolean attributes and &quot;value&quot; are not treated correctly</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>el<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;[selected]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							rbuggyQSA<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;\\[&quot;</span> <span class="token operator">+</span> whitespace <span class="token operator">+</span> <span class="token string">&quot;*(?:value|&quot;</span> <span class="token operator">+</span> booleans <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// Support: Chrome&lt;29, Android&lt;4.4, Safari&lt;7.0+, iOS&lt;7.0+, PhantomJS&lt;1.9.8+</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>el<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;[id~=&quot;</span> <span class="token operator">+</span> expando <span class="token operator">+</span> <span class="token string">&quot;-]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							rbuggyQSA<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;~=&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// Support: IE 11+, Edge 15 - 18+</span>
						<span class="token comment">// IE 11/Edge don't find elements on a `[name='']` query in some cases.</span>
						<span class="token comment">// Adding a temporary attribute to the document before the selection works</span>
						<span class="token comment">// around the issue.</span>
						<span class="token comment">// Interestingly, IE 10 &amp; older don't seem to have the issue.</span>
						input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;input&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						input<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						el<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>el<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;[name='']&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							rbuggyQSA<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;\\[&quot;</span> <span class="token operator">+</span> whitespace <span class="token operator">+</span> <span class="token string">&quot;*name&quot;</span> <span class="token operator">+</span> whitespace <span class="token operator">+</span> <span class="token string">&quot;*=&quot;</span> <span class="token operator">+</span>
								whitespace <span class="token operator">+</span> <span class="token string">&quot;*(?:''|\&quot;\&quot;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// Webkit/Opera - :checked should return selected option elements</span>
						<span class="token comment">// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked</span>
						<span class="token comment">// IE8 throws error here and will not see later tests</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>el<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;:checked&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							rbuggyQSA<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;:checked&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// Support: Safari 8+, iOS 8+</span>
						<span class="token comment">// https://bugs.webkit.org/show_bug.cgi?id=136851</span>
						<span class="token comment">// In-page `selector#id sibling-combinator selector` fails</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>el<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;a#&quot;</span> <span class="token operator">+</span> expando <span class="token operator">+</span> <span class="token string">&quot;+*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							rbuggyQSA<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;.#.+[+~]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// Support: Firefox &lt;=3.6 - 5 only</span>
						<span class="token comment">// Old Firefox doesn't throw on a badly-escaped identifier.</span>
						el<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;\\\f&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						rbuggyQSA<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;[\\r\\n\\f]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token function">assert</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						el<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;&lt;a href='' disabled='disabled'&gt;&lt;/a&gt;&quot;</span> <span class="token operator">+</span>
							<span class="token string">&quot;&lt;select disabled='disabled'&gt;&lt;option/&gt;&lt;/select&gt;&quot;</span><span class="token punctuation">;</span>

						<span class="token comment">// Support: Windows 8 Native Apps</span>
						<span class="token comment">// The type and name attributes are restricted during .innerHTML assignment</span>
						<span class="token keyword">var</span> input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;input&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						input<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;hidden&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						el<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;D&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token comment">// Support: IE8</span>
						<span class="token comment">// Enforce case-sensitivity of name attribute</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;[name=d]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							rbuggyQSA<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span> <span class="token operator">+</span> whitespace <span class="token operator">+</span> <span class="token string">&quot;*[*^$|!~]?=&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)</span>
						<span class="token comment">// IE8 throws error here and will not see later tests</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;:enabled&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							rbuggyQSA<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;:enabled&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;:disabled&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// Support: IE9-11+</span>
						<span class="token comment">// IE's :disabled selector does not pick up the children of disabled fieldsets</span>
						docElem<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;:disabled&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							rbuggyQSA<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;:enabled&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;:disabled&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// Support: Opera 10 - 11 only</span>
						<span class="token comment">// Opera 10-11 does not throw on post-comma invalid pseudos</span>
						el<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;*,:x&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						rbuggyQSA<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;,.*:&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>support<span class="token punctuation">.</span>matchesSelector <span class="token operator">=</span> rnative<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">(</span>matches <span class="token operator">=</span> docElem<span class="token punctuation">.</span>matches <span class="token operator">||</span>
					docElem<span class="token punctuation">.</span>webkitMatchesSelector <span class="token operator">||</span>
					docElem<span class="token punctuation">.</span>mozMatchesSelector <span class="token operator">||</span>
					docElem<span class="token punctuation">.</span>oMatchesSelector <span class="token operator">||</span>
					docElem<span class="token punctuation">.</span>msMatchesSelector<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token function">assert</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

						<span class="token comment">// Check to see if it's possible to do matchesSelector</span>
						<span class="token comment">// on a disconnected node (IE 9)</span>
						support<span class="token punctuation">.</span>disconnectedMatch <span class="token operator">=</span> <span class="token function">matches</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token comment">// This should fail with an exception</span>
						<span class="token comment">// Gecko does not error, returns false instead</span>
						<span class="token function">matches</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token string">&quot;[s!='']:x&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						rbuggyMatches<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;!=&quot;</span><span class="token punctuation">,</span> pseudos<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				rbuggyQSA <span class="token operator">=</span> rbuggyQSA<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>rbuggyQSA<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;|&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				rbuggyMatches <span class="token operator">=</span> rbuggyMatches<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>rbuggyMatches<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;|&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">/* Contains
				---------------------------------------------------------------------- */</span>
				hasCompare <span class="token operator">=</span> rnative<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>docElem<span class="token punctuation">.</span>compareDocumentPosition<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Element contains another</span>
				<span class="token comment">// Purposefully self-exclusive</span>
				<span class="token comment">// As in, an element does not contain itself</span>
				contains <span class="token operator">=</span> hasCompare <span class="token operator">||</span> rnative<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>docElem<span class="token punctuation">.</span>contains<span class="token punctuation">)</span> <span class="token operator">?</span>
					<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> adown <span class="token operator">=</span> a<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">9</span> <span class="token operator">?</span> a<span class="token punctuation">.</span>documentElement <span class="token operator">:</span> a<span class="token punctuation">,</span>
							bup <span class="token operator">=</span> b <span class="token operator">&amp;&amp;</span> b<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>
						<span class="token keyword">return</span> a <span class="token operator">===</span> bup <span class="token operator">||</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span>bup <span class="token operator">&amp;&amp;</span> bup<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
							adown<span class="token punctuation">.</span>contains <span class="token operator">?</span>
								adown<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>bup<span class="token punctuation">)</span> <span class="token operator">:</span>
								a<span class="token punctuation">.</span>compareDocumentPosition <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">.</span><span class="token function">compareDocumentPosition</span><span class="token punctuation">(</span>bup<span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">16</span>
						<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token operator">:</span>
					<span class="token comment">//判断b是否是a的子节点</span>
					<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>b <span class="token operator">=</span> b<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">===</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>
						<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">;</span>

				<span class="token comment">/* Sorting
				---------------------------------------------------------------------- */</span>

				<span class="token comment">// Document order sorting</span>
				sortOrder <span class="token operator">=</span> hasCompare <span class="token operator">?</span>
					<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

						<span class="token comment">// Flag for duplicate removal</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">===</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							hasDuplicate <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
							<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// Sort on method existence if only one input has compareDocumentPosition</span>
						<span class="token keyword">var</span> compare <span class="token operator">=</span> <span class="token operator">!</span>a<span class="token punctuation">.</span>compareDocumentPosition <span class="token operator">-</span> <span class="token operator">!</span>b<span class="token punctuation">.</span>compareDocumentPosition<span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>compare<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">return</span> compare<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// Calculate position if both inputs belong to the same document</span>
						<span class="token comment">// Support: IE 11+, Edge 17 - 18+</span>
						<span class="token comment">// IE/Edge sometimes throw a &quot;Permission denied&quot; error when strict-comparing</span>
						<span class="token comment">// two documents; shallow comparisons work.</span>
						<span class="token comment">// eslint-disable-next-line eqeqeq</span>
						compare <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>ownerDocument <span class="token operator">||</span> a<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token punctuation">(</span>b<span class="token punctuation">.</span>ownerDocument <span class="token operator">||</span> b<span class="token punctuation">)</span> <span class="token operator">?</span>
							a<span class="token punctuation">.</span><span class="token function">compareDocumentPosition</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token operator">:</span>

							<span class="token comment">// Otherwise we know they are disconnected</span>
							<span class="token number">1</span><span class="token punctuation">;</span>

						<span class="token comment">// Disconnected nodes</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>compare <span class="token operator">&amp;</span> <span class="token number">1</span> <span class="token operator">||</span>
							<span class="token punctuation">(</span><span class="token operator">!</span>support<span class="token punctuation">.</span>sortDetached <span class="token operator">&amp;&amp;</span> b<span class="token punctuation">.</span><span class="token function">compareDocumentPosition</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">===</span> compare<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

							<span class="token comment">// Choose the first element that is related to our preferred document</span>
							<span class="token comment">// Support: IE 11+, Edge 17 - 18+</span>
							<span class="token comment">// IE/Edge sometimes throw a &quot;Permission denied&quot; error when strict-comparing</span>
							<span class="token comment">// two documents; shallow comparisons work.</span>
							<span class="token comment">// eslint-disable-next-line eqeqeq</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> document <span class="token operator">||</span> a<span class="token punctuation">.</span>ownerDocument <span class="token operator">==</span> preferredDoc <span class="token operator">&amp;&amp;</span>
								<span class="token function">contains</span><span class="token punctuation">(</span>preferredDoc<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>

							<span class="token comment">// Support: IE 11+, Edge 17 - 18+</span>
							<span class="token comment">// IE/Edge sometimes throw a &quot;Permission denied&quot; error when strict-comparing</span>
							<span class="token comment">// two documents; shallow comparisons work.</span>
							<span class="token comment">// eslint-disable-next-line eqeqeq</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">==</span> document <span class="token operator">||</span> b<span class="token punctuation">.</span>ownerDocument <span class="token operator">==</span> preferredDoc <span class="token operator">&amp;&amp;</span>
								<span class="token function">contains</span><span class="token punctuation">(</span>preferredDoc<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>

							<span class="token comment">// Maintain original order</span>
							<span class="token keyword">return</span> sortInput <span class="token operator">?</span>
								<span class="token punctuation">(</span><span class="token function">indexOf</span><span class="token punctuation">(</span>sortInput<span class="token punctuation">,</span> a<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">indexOf</span><span class="token punctuation">(</span>sortInput<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span>
								<span class="token number">0</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token keyword">return</span> compare <span class="token operator">&amp;</span> <span class="token number">4</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token operator">:</span>
					<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

						<span class="token comment">// Exit early if the nodes are identical</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">===</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							hasDuplicate <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
							<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token keyword">var</span> cur<span class="token punctuation">,</span>
							i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
							aup <span class="token operator">=</span> a<span class="token punctuation">.</span>parentNode<span class="token punctuation">,</span>
							bup <span class="token operator">=</span> b<span class="token punctuation">.</span>parentNode<span class="token punctuation">,</span>
							ap <span class="token operator">=</span> <span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">,</span>
							bp <span class="token operator">=</span> <span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">;</span>

						<span class="token comment">// Parentless nodes are either documents or disconnected</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>aup <span class="token operator">||</span> <span class="token operator">!</span>bup<span class="token punctuation">)</span> <span class="token punctuation">{</span>

							<span class="token comment">// Support: IE 11+, Edge 17 - 18+</span>
							<span class="token comment">// IE/Edge sometimes throw a &quot;Permission denied&quot; error when strict-comparing</span>
							<span class="token comment">// two documents; shallow comparisons work.</span>
							<span class="token comment">/* eslint-disable eqeqeq */</span>
							<span class="token keyword">return</span> a <span class="token operator">==</span> document <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span>
								b <span class="token operator">==</span> document <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span>
									<span class="token comment">/* eslint-enable eqeqeq */</span>
									aup <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span>
										bup <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span>
											sortInput <span class="token operator">?</span>
												<span class="token punctuation">(</span><span class="token function">indexOf</span><span class="token punctuation">(</span>sortInput<span class="token punctuation">,</span> a<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">indexOf</span><span class="token punctuation">(</span>sortInput<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span>
												<span class="token number">0</span><span class="token punctuation">;</span>

							<span class="token comment">// If the nodes are siblings, we can do a quick check</span>
						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>aup <span class="token operator">===</span> bup<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">return</span> <span class="token function">siblingCheck</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// Otherwise we need full lists of their ancestors for comparison</span>
						cur <span class="token operator">=</span> a<span class="token punctuation">;</span>
						<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							ap<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						cur <span class="token operator">=</span> b<span class="token punctuation">;</span>
						<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							bp<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// Walk down the tree looking for a discrepancy</span>
						<span class="token keyword">while</span> <span class="token punctuation">(</span>ap<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> bp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							i<span class="token operator">++</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token keyword">return</span> i <span class="token operator">?</span>

							<span class="token comment">// Do a sibling check if the nodes have a common ancestor</span>
							<span class="token function">siblingCheck</span><span class="token punctuation">(</span>ap<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> bp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span>

							<span class="token comment">// Otherwise nodes in our document sort first</span>
							<span class="token comment">// Support: IE 11+, Edge 17 - 18+</span>
							<span class="token comment">// IE/Edge sometimes throw a &quot;Permission denied&quot; error when strict-comparing</span>
							<span class="token comment">// two documents; shallow comparisons work.</span>
							<span class="token comment">/* eslint-disable eqeqeq */</span>
							ap<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> preferredDoc <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span>
								bp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> preferredDoc <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span>
									<span class="token comment">/* eslint-enable eqeqeq */</span>
									<span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">;</span>

				<span class="token keyword">return</span> document<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>

			Sizzle<span class="token punctuation">.</span><span class="token function-variable function">matches</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">expr<span class="token punctuation">,</span> elements</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token function">Sizzle</span><span class="token punctuation">(</span>expr<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> elements<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>

			Sizzle<span class="token punctuation">.</span><span class="token function-variable function">matchesSelector</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> expr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">setDocument</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span>support<span class="token punctuation">.</span>matchesSelector <span class="token operator">&amp;&amp;</span> documentIsHTML <span class="token operator">&amp;&amp;</span>
					<span class="token operator">!</span>nonnativeSelectorCache<span class="token punctuation">[</span>expr <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span>
					<span class="token punctuation">(</span><span class="token operator">!</span>rbuggyMatches <span class="token operator">||</span> <span class="token operator">!</span>rbuggyMatches<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>expr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
					<span class="token punctuation">(</span><span class="token operator">!</span>rbuggyQSA <span class="token operator">||</span> <span class="token operator">!</span>rbuggyQSA<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>expr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token keyword">try</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token function">matches</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> expr<span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token comment">// IE 9's matchesSelector returns false on disconnected nodes</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>ret <span class="token operator">||</span> support<span class="token punctuation">.</span>disconnectedMatch <span class="token operator">||</span>

							<span class="token comment">// As well, disconnected nodes are said to be in a document</span>
							<span class="token comment">// fragment in IE 9</span>
							elem<span class="token punctuation">.</span>document <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>document<span class="token punctuation">.</span>nodeType <span class="token operator">!==</span> <span class="token number">11</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token function">nonnativeSelectorCache</span><span class="token punctuation">(</span>expr<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">return</span> <span class="token function">Sizzle</span><span class="token punctuation">(</span>expr<span class="token punctuation">,</span> document<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>elem<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>

			Sizzle<span class="token punctuation">.</span><span class="token function-variable function">contains</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Set document vars if needed</span>
				<span class="token comment">// Support: IE 11+, Edge 17 - 18+</span>
				<span class="token comment">// IE/Edge sometimes throw a &quot;Permission denied&quot; error when strict-comparing</span>
				<span class="token comment">// two documents; shallow comparisons work.</span>
				<span class="token comment">// eslint-disable-next-line eqeqeq</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>ownerDocument <span class="token operator">||</span> context<span class="token punctuation">)</span> <span class="token operator">!=</span> document<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">setDocument</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">return</span> <span class="token function">contains</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>

			Sizzle<span class="token punctuation">.</span><span class="token function-variable function">attr</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Set document vars if needed</span>
				<span class="token comment">// Support: IE 11+, Edge 17 - 18+</span>
				<span class="token comment">// IE/Edge sometimes throw a &quot;Permission denied&quot; error when strict-comparing</span>
				<span class="token comment">// two documents; shallow comparisons work.</span>
				<span class="token comment">// eslint-disable-next-line eqeqeq</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>elem<span class="token punctuation">.</span>ownerDocument <span class="token operator">||</span> elem<span class="token punctuation">)</span> <span class="token operator">!=</span> document<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">setDocument</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">var</span> fn <span class="token operator">=</span> Expr<span class="token punctuation">.</span>attrHandle<span class="token punctuation">[</span>name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

					<span class="token comment">// Don't get fooled by Object.prototype properties (jQuery #13807)</span>
					val <span class="token operator">=</span> fn <span class="token operator">&amp;&amp;</span> <span class="token function">hasOwn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>Expr<span class="token punctuation">.</span>attrHandle<span class="token punctuation">,</span> name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span>
						<span class="token function">fn</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token operator">!</span>documentIsHTML<span class="token punctuation">)</span> <span class="token operator">:</span>
						<span class="token keyword">undefined</span><span class="token punctuation">;</span>

				<span class="token keyword">return</span> val <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">?</span>
					<span class="token literal-property property">val</span> <span class="token operator">:</span>
					support<span class="token punctuation">.</span>attributes <span class="token operator">||</span> <span class="token operator">!</span>documentIsHTML <span class="token operator">?</span>
						elem<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">:</span>
						<span class="token punctuation">(</span>val <span class="token operator">=</span> elem<span class="token punctuation">.</span><span class="token function">getAttributeNode</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> val<span class="token punctuation">.</span>specified <span class="token operator">?</span>
							val<span class="token punctuation">.</span>value <span class="token operator">:</span>
							<span class="token keyword">null</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>

			Sizzle<span class="token punctuation">.</span><span class="token function-variable function">escape</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">sel</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token punctuation">(</span>sel <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rcssescape<span class="token punctuation">,</span> fcssescape<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>

			Sizzle<span class="token punctuation">.</span><span class="token function-variable function">error</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Syntax error, unrecognized expression: &quot;</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token comment">/**
			 * Document sorting and removing duplicates
			 * @param {ArrayLike} results
			 */</span>
			Sizzle<span class="token punctuation">.</span><span class="token function-variable function">uniqueSort</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">results</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> elem<span class="token punctuation">,</span>
					duplicates <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
					j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
					i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

				<span class="token comment">// Unless we *know* we can detect duplicates, assume their presence</span>
				hasDuplicate <span class="token operator">=</span> <span class="token operator">!</span>support<span class="token punctuation">.</span>detectDuplicates<span class="token punctuation">;</span>
				sortInput <span class="token operator">=</span> <span class="token operator">!</span>support<span class="token punctuation">.</span>sortStable <span class="token operator">&amp;&amp;</span> results<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">//排序</span>
				results<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>sortOrder<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">//去重</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>hasDuplicate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>elem <span class="token operator">=</span> results<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>elem <span class="token operator">===</span> results<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							j <span class="token operator">=</span> duplicates<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">while</span> <span class="token punctuation">(</span>j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						results<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>duplicates<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Clear input after sorting to release objects</span>
				<span class="token comment">// See https://github.com/jquery/sizzle/pull/225</span>
				sortInput <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

				<span class="token keyword">return</span> results<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token comment">/**
			 * Utility function for retrieving the text value of an array of DOM nodes
			 * @param {Array|Element} elem
			 */</span>
			getText <span class="token operator">=</span> Sizzle<span class="token punctuation">.</span><span class="token function-variable function">getText</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> node<span class="token punctuation">,</span>
					ret <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
					i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
					nodeType <span class="token operator">=</span> elem<span class="token punctuation">.</span>nodeType<span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>nodeType<span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// If no nodeType, this is expected to be an array</span>
					<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>node <span class="token operator">=</span> elem<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

						<span class="token comment">// Do not traverse comment nodes</span>
						ret <span class="token operator">+=</span> <span class="token function">getText</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">||</span> nodeType <span class="token operator">===</span> <span class="token number">9</span> <span class="token operator">||</span> nodeType <span class="token operator">===</span> <span class="token number">11</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Use textContent for elements</span>
					<span class="token comment">// innerText usage removed for consistency of new lines (jQuery #11153)</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> elem<span class="token punctuation">.</span>textContent <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> elem<span class="token punctuation">.</span>textContent<span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

						<span class="token comment">// Traverse its children</span>
						<span class="token keyword">for</span> <span class="token punctuation">(</span>elem <span class="token operator">=</span> elem<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span> elem<span class="token punctuation">;</span> elem <span class="token operator">=</span> elem<span class="token punctuation">.</span>nextSibling<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							ret <span class="token operator">+=</span> <span class="token function">getText</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>nodeType <span class="token operator">===</span> <span class="token number">3</span> <span class="token operator">||</span> nodeType <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> elem<span class="token punctuation">.</span>nodeValue<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Do not include comment or processing instruction nodes</span>

				<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>

			Expr <span class="token operator">=</span> Sizzle<span class="token punctuation">.</span>selectors <span class="token operator">=</span> <span class="token punctuation">{</span>

				<span class="token comment">// Can be adjusted by the user</span>
				<span class="token literal-property property">cacheLength</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>

				<span class="token literal-property property">createPseudo</span><span class="token operator">:</span> markFunction<span class="token punctuation">,</span>

				<span class="token literal-property property">match</span><span class="token operator">:</span> matchExpr<span class="token punctuation">,</span>

				<span class="token literal-property property">attrHandle</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

				<span class="token literal-property property">find</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

				<span class="token literal-property property">relative</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token string-property property">&quot;&gt;&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">dir</span><span class="token operator">:</span> <span class="token string">&quot;parentNode&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">first</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
					<span class="token string-property property">&quot; &quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">dir</span><span class="token operator">:</span> <span class="token string">&quot;parentNode&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
					<span class="token string-property property">&quot;+&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">dir</span><span class="token operator">:</span> <span class="token string">&quot;previousSibling&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">first</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
					<span class="token string-property property">&quot;~&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">dir</span><span class="token operator">:</span> <span class="token string">&quot;previousSibling&quot;</span> <span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>

				<span class="token literal-property property">preFilter</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token string-property property">&quot;ATTR&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">match</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>runescape<span class="token punctuation">,</span> funescape<span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token comment">// Move the given value to match[3] whether quoted or unquoted</span>
						match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">||</span> match<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">||</span>
							match<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>runescape<span class="token punctuation">,</span> funescape<span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token keyword">if</span> <span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;~=&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token keyword">return</span> match<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>

					<span class="token string-property property">&quot;CHILD&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">match</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

						<span class="token comment">/* matches from matchExpr[&quot;CHILD&quot;]
							1 type (only|nth|...)
							2 what (child|of-type)
							3 argument (even|odd|\d*|\d*n([+-]\d+)?|...)
							4 xn-component of xn+y argument ([+-]?\d*n|)
							5 sign of xn-component
							6 x of xn-component
							7 sign of y-component
							8 y of y-component
						*/</span>
						match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token keyword">if</span> <span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;nth&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

							<span class="token comment">// nth-* requires argument</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								Sizzle<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>

							<span class="token comment">// numeric x and y parameters for Expr.filter.CHILD</span>
							<span class="token comment">// remember that false/true cast respectively to 0/1</span>
							match<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">+</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">?</span>
								match<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">:</span>
								<span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;even&quot;</span> <span class="token operator">||</span> match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;odd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							match<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">+</span><span class="token punctuation">(</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">+</span> match<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span> match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;odd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

							<span class="token comment">// other types prohibit arguments</span>
						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							Sizzle<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token keyword">return</span> match<span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>

					<span class="token string-property property">&quot;PSEUDO&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">match</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> excess<span class="token punctuation">,</span>
							unquoted <span class="token operator">=</span> <span class="token operator">!</span>match<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

						<span class="token keyword">if</span> <span class="token punctuation">(</span>matchExpr<span class="token punctuation">[</span><span class="token string">&quot;CHILD&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// Accept quoted arguments as-is</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">||</span> match<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

							<span class="token comment">// Strip excess characters from unquoted arguments</span>
						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>unquoted <span class="token operator">&amp;&amp;</span> rpseudo<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>unquoted<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>

							<span class="token comment">// Get excess from tokenize (recursively)</span>
							<span class="token punctuation">(</span>excess <span class="token operator">=</span> <span class="token function">tokenize</span><span class="token punctuation">(</span>unquoted<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>

							<span class="token comment">// advance to the next closing parenthesis</span>
							<span class="token punctuation">(</span>excess <span class="token operator">=</span> unquoted<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;)&quot;</span><span class="token punctuation">,</span> unquoted<span class="token punctuation">.</span>length <span class="token operator">-</span> excess<span class="token punctuation">)</span> <span class="token operator">-</span> unquoted<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

							<span class="token comment">// excess is a negative index</span>
							match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> excess<span class="token punctuation">)</span><span class="token punctuation">;</span>
							match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> unquoted<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> excess<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// Return only captures needed by the pseudo filter method (type and argument)</span>
						<span class="token keyword">return</span> match<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>

				<span class="token literal-property property">filter</span><span class="token operator">:</span> <span class="token punctuation">{</span>

					<span class="token string-property property">&quot;TAG&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">nodeNameSelector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> nodeName <span class="token operator">=</span> nodeNameSelector<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>runescape<span class="token punctuation">,</span> funescape<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">return</span> nodeNameSelector <span class="token operator">===</span> <span class="token string">&quot;*&quot;</span> <span class="token operator">?</span>
							<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span> <span class="token operator">:</span>
							<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">return</span> elem<span class="token punctuation">.</span>nodeName <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> nodeName<span class="token punctuation">;</span>
							<span class="token punctuation">}</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>

					<span class="token string-property property">&quot;CLASS&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">className</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> pattern <span class="token operator">=</span> classCache<span class="token punctuation">[</span>className <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

						<span class="token keyword">return</span> pattern <span class="token operator">||</span>
							<span class="token punctuation">(</span>pattern <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;(^|&quot;</span> <span class="token operator">+</span> whitespace <span class="token operator">+</span>
								<span class="token string">&quot;)&quot;</span> <span class="token operator">+</span> className <span class="token operator">+</span> <span class="token string">&quot;(&quot;</span> <span class="token operator">+</span> whitespace <span class="token operator">+</span> <span class="token string">&quot;|$)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">classCache</span><span class="token punctuation">(</span>
									className<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
										<span class="token keyword">return</span> pattern<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>
											<span class="token keyword">typeof</span> elem<span class="token punctuation">.</span>className <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span> <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>className <span class="token operator">||</span>
											<span class="token keyword">typeof</span> elem<span class="token punctuation">.</span>getAttribute <span class="token operator">!==</span> <span class="token string">&quot;undefined&quot;</span> <span class="token operator">&amp;&amp;</span>
											elem<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span>
											<span class="token string">&quot;&quot;</span>
										<span class="token punctuation">)</span><span class="token punctuation">;</span>
									<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>

					<span class="token string-property property">&quot;ATTR&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> operator<span class="token punctuation">,</span> check</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">var</span> result <span class="token operator">=</span> Sizzle<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>

							<span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">return</span> operator <span class="token operator">===</span> <span class="token string">&quot;!=&quot;</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>operator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>

							result <span class="token operator">+=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

							<span class="token comment">/* eslint-disable max-len */</span>

							<span class="token keyword">return</span> operator <span class="token operator">===</span> <span class="token string">&quot;=&quot;</span> <span class="token operator">?</span> result <span class="token operator">===</span> check <span class="token operator">:</span>
								operator <span class="token operator">===</span> <span class="token string">&quot;!=&quot;</span> <span class="token operator">?</span> result <span class="token operator">!==</span> check <span class="token operator">:</span>
									operator <span class="token operator">===</span> <span class="token string">&quot;^=&quot;</span> <span class="token operator">?</span> check <span class="token operator">&amp;&amp;</span> result<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>check<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">:</span>
										operator <span class="token operator">===</span> <span class="token string">&quot;*=&quot;</span> <span class="token operator">?</span> check <span class="token operator">&amp;&amp;</span> result<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>check<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span>
											operator <span class="token operator">===</span> <span class="token string">&quot;$=&quot;</span> <span class="token operator">?</span> check <span class="token operator">&amp;&amp;</span> result<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span>check<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">===</span> check <span class="token operator">:</span>
												operator <span class="token operator">===</span> <span class="token string">&quot;~=&quot;</span> <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token string">&quot; &quot;</span> <span class="token operator">+</span> result<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rwhitespace<span class="token punctuation">,</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>check<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span>
													operator <span class="token operator">===</span> <span class="token string">&quot;|=&quot;</span> <span class="token operator">?</span> result <span class="token operator">===</span> check <span class="token operator">||</span> result<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> check<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">===</span> check <span class="token operator">+</span> <span class="token string">&quot;-&quot;</span> <span class="token operator">:</span>
														<span class="token boolean">false</span><span class="token punctuation">;</span>
							<span class="token comment">/* eslint-enable max-len */</span>

						<span class="token punctuation">}</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>

					<span class="token string-property property">&quot;CHILD&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> what<span class="token punctuation">,</span> _argument<span class="token punctuation">,</span> first<span class="token punctuation">,</span> last</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> simple <span class="token operator">=</span> type<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">&quot;nth&quot;</span><span class="token punctuation">,</span>
							forward <span class="token operator">=</span> type<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">&quot;last&quot;</span><span class="token punctuation">,</span>
							ofType <span class="token operator">=</span> what <span class="token operator">===</span> <span class="token string">&quot;of-type&quot;</span><span class="token punctuation">;</span>

						<span class="token keyword">return</span> first <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> last <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span>

							<span class="token comment">// Shortcut for :nth-*(n)</span>
							<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span>elem<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>
							<span class="token punctuation">}</span> <span class="token operator">:</span>

							<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> _context<span class="token punctuation">,</span> xml</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">var</span> cache<span class="token punctuation">,</span> uniqueCache<span class="token punctuation">,</span> outerCache<span class="token punctuation">,</span> node<span class="token punctuation">,</span> nodeIndex<span class="token punctuation">,</span> start<span class="token punctuation">,</span>
									dir <span class="token operator">=</span> simple <span class="token operator">!==</span> forward <span class="token operator">?</span> <span class="token string">&quot;nextSibling&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;previousSibling&quot;</span><span class="token punctuation">,</span>
									parent <span class="token operator">=</span> elem<span class="token punctuation">.</span>parentNode<span class="token punctuation">,</span>
									name <span class="token operator">=</span> ofType <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
									useCache <span class="token operator">=</span> <span class="token operator">!</span>xml <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>ofType<span class="token punctuation">,</span>
									diff <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

								<span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>

									<span class="token comment">// :(first|last|only)-(child|of-type)</span>
									<span class="token keyword">if</span> <span class="token punctuation">(</span>simple<span class="token punctuation">)</span> <span class="token punctuation">{</span>
										<span class="token keyword">while</span> <span class="token punctuation">(</span>dir<span class="token punctuation">)</span> <span class="token punctuation">{</span>
											node <span class="token operator">=</span> elem<span class="token punctuation">;</span>
											<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>node <span class="token operator">=</span> node<span class="token punctuation">[</span>dir<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
												<span class="token keyword">if</span> <span class="token punctuation">(</span>ofType <span class="token operator">?</span>
													node<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> name <span class="token operator">:</span>
													node<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

													<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
												<span class="token punctuation">}</span>
											<span class="token punctuation">}</span>

											<span class="token comment">// Reverse direction for :only-* (if we haven't yet done so)</span>
											start <span class="token operator">=</span> dir <span class="token operator">=</span> type <span class="token operator">===</span> <span class="token string">&quot;only&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>start <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;nextSibling&quot;</span><span class="token punctuation">;</span>
										<span class="token punctuation">}</span>
										<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
									<span class="token punctuation">}</span>

									start <span class="token operator">=</span> <span class="token punctuation">[</span>forward <span class="token operator">?</span> parent<span class="token punctuation">.</span>firstChild <span class="token operator">:</span> parent<span class="token punctuation">.</span>lastChild<span class="token punctuation">]</span><span class="token punctuation">;</span>

									<span class="token comment">// non-xml :nth-child(...) stores cache data on `parent`</span>
									<span class="token keyword">if</span> <span class="token punctuation">(</span>forward <span class="token operator">&amp;&amp;</span> useCache<span class="token punctuation">)</span> <span class="token punctuation">{</span>

										<span class="token comment">// Seek `elem` from a previously-cached index</span>

										<span class="token comment">// ...in a gzip-friendly way</span>
										node <span class="token operator">=</span> parent<span class="token punctuation">;</span>
										outerCache <span class="token operator">=</span> node<span class="token punctuation">[</span>expando<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">(</span>node<span class="token punctuation">[</span>expando<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

										<span class="token comment">// Support: IE &lt;9 only</span>
										<span class="token comment">// Defend against cloned attroperties (jQuery gh-1709)</span>
										uniqueCache <span class="token operator">=</span> outerCache<span class="token punctuation">[</span>node<span class="token punctuation">.</span>uniqueID<span class="token punctuation">]</span> <span class="token operator">||</span>
											<span class="token punctuation">(</span>outerCache<span class="token punctuation">[</span>node<span class="token punctuation">.</span>uniqueID<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

										cache <span class="token operator">=</span> uniqueCache<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
										nodeIndex <span class="token operator">=</span> cache<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> dirruns <span class="token operator">&amp;&amp;</span> cache<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
										diff <span class="token operator">=</span> nodeIndex <span class="token operator">&amp;&amp;</span> cache<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
										node <span class="token operator">=</span> nodeIndex <span class="token operator">&amp;&amp;</span> parent<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span>nodeIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>

										<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>node <span class="token operator">=</span> <span class="token operator">++</span>nodeIndex <span class="token operator">&amp;&amp;</span> node <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">[</span>dir<span class="token punctuation">]</span> <span class="token operator">||</span>

											<span class="token comment">// Fallback to seeking `elem` from the start</span>
											<span class="token punctuation">(</span>diff <span class="token operator">=</span> nodeIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">||</span> start<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

											<span class="token comment">// When found, cache indexes on `parent` and break</span>
											<span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">++</span>diff <span class="token operator">&amp;&amp;</span> node <span class="token operator">===</span> elem<span class="token punctuation">)</span> <span class="token punctuation">{</span>
												uniqueCache<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>dirruns<span class="token punctuation">,</span> nodeIndex<span class="token punctuation">,</span> diff<span class="token punctuation">]</span><span class="token punctuation">;</span>
												<span class="token keyword">break</span><span class="token punctuation">;</span>
											<span class="token punctuation">}</span>
										<span class="token punctuation">}</span>

									<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

										<span class="token comment">// Use previously-cached element index if available</span>
										<span class="token keyword">if</span> <span class="token punctuation">(</span>useCache<span class="token punctuation">)</span> <span class="token punctuation">{</span>

											<span class="token comment">// ...in a gzip-friendly way</span>
											node <span class="token operator">=</span> elem<span class="token punctuation">;</span>
											outerCache <span class="token operator">=</span> node<span class="token punctuation">[</span>expando<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">(</span>node<span class="token punctuation">[</span>expando<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

											<span class="token comment">// Support: IE &lt;9 only</span>
											<span class="token comment">// Defend against cloned attroperties (jQuery gh-1709)</span>
											uniqueCache <span class="token operator">=</span> outerCache<span class="token punctuation">[</span>node<span class="token punctuation">.</span>uniqueID<span class="token punctuation">]</span> <span class="token operator">||</span>
												<span class="token punctuation">(</span>outerCache<span class="token punctuation">[</span>node<span class="token punctuation">.</span>uniqueID<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

											cache <span class="token operator">=</span> uniqueCache<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
											nodeIndex <span class="token operator">=</span> cache<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> dirruns <span class="token operator">&amp;&amp;</span> cache<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
											diff <span class="token operator">=</span> nodeIndex<span class="token punctuation">;</span>
										<span class="token punctuation">}</span>

										<span class="token comment">// xml :nth-child(...)</span>
										<span class="token comment">// or :nth-last-child(...) or :nth(-last)?-of-type(...)</span>
										<span class="token keyword">if</span> <span class="token punctuation">(</span>diff <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

											<span class="token comment">// Use the same loop as above to seek `elem` from the start</span>
											<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>node <span class="token operator">=</span> <span class="token operator">++</span>nodeIndex <span class="token operator">&amp;&amp;</span> node <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">[</span>dir<span class="token punctuation">]</span> <span class="token operator">||</span>
												<span class="token punctuation">(</span>diff <span class="token operator">=</span> nodeIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">||</span> start<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

												<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>ofType <span class="token operator">?</span>
													node<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> name <span class="token operator">:</span>
													node<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
													<span class="token operator">++</span>diff<span class="token punctuation">)</span> <span class="token punctuation">{</span>

													<span class="token comment">// Cache the index of each encountered element</span>
													<span class="token keyword">if</span> <span class="token punctuation">(</span>useCache<span class="token punctuation">)</span> <span class="token punctuation">{</span>
														outerCache <span class="token operator">=</span> node<span class="token punctuation">[</span>expando<span class="token punctuation">]</span> <span class="token operator">||</span>
															<span class="token punctuation">(</span>node<span class="token punctuation">[</span>expando<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

														<span class="token comment">// Support: IE &lt;9 only</span>
														<span class="token comment">// Defend against cloned attroperties (jQuery gh-1709)</span>
														uniqueCache <span class="token operator">=</span> outerCache<span class="token punctuation">[</span>node<span class="token punctuation">.</span>uniqueID<span class="token punctuation">]</span> <span class="token operator">||</span>
															<span class="token punctuation">(</span>outerCache<span class="token punctuation">[</span>node<span class="token punctuation">.</span>uniqueID<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

														uniqueCache<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>dirruns<span class="token punctuation">,</span> diff<span class="token punctuation">]</span><span class="token punctuation">;</span>
													<span class="token punctuation">}</span>

													<span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">===</span> elem<span class="token punctuation">)</span> <span class="token punctuation">{</span>
														<span class="token keyword">break</span><span class="token punctuation">;</span>
													<span class="token punctuation">}</span>
												<span class="token punctuation">}</span>
											<span class="token punctuation">}</span>
										<span class="token punctuation">}</span>
									<span class="token punctuation">}</span>

									<span class="token comment">// Incorporate the offset, then check against cycle size</span>
									diff <span class="token operator">-=</span> last<span class="token punctuation">;</span>
									<span class="token keyword">return</span> diff <span class="token operator">===</span> first <span class="token operator">||</span> <span class="token punctuation">(</span>diff <span class="token operator">%</span> first <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> diff <span class="token operator">/</span> first <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>

					<span class="token string-property property">&quot;PSEUDO&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">pseudo<span class="token punctuation">,</span> argument</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

						<span class="token comment">// pseudo-class names are case-insensitive</span>
						<span class="token comment">// http://www.w3.org/TR/selectors/#pseudo-classes</span>
						<span class="token comment">// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters</span>
						<span class="token comment">// Remember that setFilters inherits from pseudos</span>
						<span class="token keyword">var</span> args<span class="token punctuation">,</span>
							fn <span class="token operator">=</span> Expr<span class="token punctuation">.</span>pseudos<span class="token punctuation">[</span>pseudo<span class="token punctuation">]</span> <span class="token operator">||</span> Expr<span class="token punctuation">.</span>setFilters<span class="token punctuation">[</span>pseudo<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">||</span>
								Sizzle<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;unsupported pseudo: &quot;</span> <span class="token operator">+</span> pseudo<span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token comment">// The user may use createPseudo to indicate that</span>
						<span class="token comment">// arguments are needed to create the filter function</span>
						<span class="token comment">// just as Sizzle does</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>fn<span class="token punctuation">[</span>expando<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">(</span>argument<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// But maintain support for old signatures</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>fn<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							args <span class="token operator">=</span> <span class="token punctuation">[</span>pseudo<span class="token punctuation">,</span> pseudo<span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> argument<span class="token punctuation">]</span><span class="token punctuation">;</span>
							<span class="token keyword">return</span> Expr<span class="token punctuation">.</span>setFilters<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>pseudo<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span>
								<span class="token function">markFunction</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">seed<span class="token punctuation">,</span> matches</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token keyword">var</span> idx<span class="token punctuation">,</span>
										matched <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span>seed<span class="token punctuation">,</span> argument<span class="token punctuation">)</span><span class="token punctuation">,</span>
										i <span class="token operator">=</span> matched<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
									<span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
										idx <span class="token operator">=</span> <span class="token function">indexOf</span><span class="token punctuation">(</span>seed<span class="token punctuation">,</span> matched<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
										seed<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">!</span><span class="token punctuation">(</span>matches<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> matched<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
									<span class="token punctuation">}</span>
								<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">:</span>
								<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token keyword">return</span> fn<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>

				<span class="token literal-property property">pseudos</span><span class="token operator">:</span> <span class="token punctuation">{</span>

					<span class="token comment">// Potentially complex pseudos</span>
					<span class="token string-property property">&quot;not&quot;</span><span class="token operator">:</span> <span class="token function">markFunction</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

						<span class="token comment">// Trim the selector passed to compile</span>
						<span class="token comment">// to avoid treating leading and trailing</span>
						<span class="token comment">// spaces as combinators</span>
						<span class="token keyword">var</span> input <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
							results <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
							matcher <span class="token operator">=</span> <span class="token function">compile</span><span class="token punctuation">(</span>selector<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rtrim<span class="token punctuation">,</span> <span class="token string">&quot;$1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token keyword">return</span> matcher<span class="token punctuation">[</span>expando<span class="token punctuation">]</span> <span class="token operator">?</span>
							<span class="token function">markFunction</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">seed<span class="token punctuation">,</span> matches<span class="token punctuation">,</span> _context<span class="token punctuation">,</span> xml</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">var</span> elem<span class="token punctuation">,</span>
									unmatched <span class="token operator">=</span> <span class="token function">matcher</span><span class="token punctuation">(</span>seed<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> xml<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
									i <span class="token operator">=</span> seed<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

								<span class="token comment">// Match elements unmatched by `matcher`</span>
								<span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>elem <span class="token operator">=</span> unmatched<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
										seed<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">!</span><span class="token punctuation">(</span>matches<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
									<span class="token punctuation">}</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">:</span>
							<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> _context<span class="token punctuation">,</span> xml</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								input<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> elem<span class="token punctuation">;</span>
								<span class="token function">matcher</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> xml<span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>

								<span class="token comment">// Don't keep the element (issue #299)</span>
								input<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
								<span class="token keyword">return</span> <span class="token operator">!</span>results<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

					<span class="token string-property property">&quot;has&quot;</span><span class="token operator">:</span> <span class="token function">markFunction</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">return</span> <span class="token function">Sizzle</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span> elem<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

					<span class="token string-property property">&quot;contains&quot;</span><span class="token operator">:</span> <span class="token function">markFunction</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						text <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>runescape<span class="token punctuation">,</span> funescape<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">return</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>textContent <span class="token operator">||</span> <span class="token function">getText</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

					<span class="token comment">// &quot;Whether an element is represented by a :lang() selector</span>
					<span class="token comment">// is based solely on the element's language value</span>
					<span class="token comment">// being equal to the identifier C,</span>
					<span class="token comment">// or beginning with the identifier C immediately followed by &quot;-&quot;.</span>
					<span class="token comment">// The matching of C against the element's language value is performed case-insensitively.</span>
					<span class="token comment">// The identifier C does not have to be a valid language name.&quot;</span>
					<span class="token comment">// http://www.w3.org/TR/selectors/#lang-pseudo</span>
					<span class="token string-property property">&quot;lang&quot;</span><span class="token operator">:</span> <span class="token function">markFunction</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">lang</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

						<span class="token comment">// lang value must be a valid identifier</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ridentifier<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>lang <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							Sizzle<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;unsupported lang: &quot;</span> <span class="token operator">+</span> lang<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						lang <span class="token operator">=</span> lang<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>runescape<span class="token punctuation">,</span> funescape<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">var</span> elemLang<span class="token punctuation">;</span>
							<span class="token keyword">do</span> <span class="token punctuation">{</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>elemLang <span class="token operator">=</span> documentIsHTML <span class="token operator">?</span>
									elem<span class="token punctuation">.</span>lang <span class="token operator">:</span>
									elem<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;xml:lang&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> elem<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;lang&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

									elemLang <span class="token operator">=</span> elemLang<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
									<span class="token keyword">return</span> elemLang <span class="token operator">===</span> lang <span class="token operator">||</span> elemLang<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>lang <span class="token operator">+</span> <span class="token string">&quot;-&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>elem <span class="token operator">=</span> elem<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

					<span class="token comment">// Miscellaneous</span>
					<span class="token string-property property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> hash <span class="token operator">=</span> window<span class="token punctuation">.</span>location <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>hash<span class="token punctuation">;</span>
						<span class="token keyword">return</span> hash <span class="token operator">&amp;&amp;</span> hash<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">===</span> elem<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>

					<span class="token string-property property">&quot;root&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> elem <span class="token operator">===</span> docElem<span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>

					<span class="token string-property property">&quot;focus&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> elem <span class="token operator">===</span> document<span class="token punctuation">.</span>activeElement <span class="token operator">&amp;&amp;</span>
							<span class="token punctuation">(</span><span class="token operator">!</span>document<span class="token punctuation">.</span>hasFocus <span class="token operator">||</span> document<span class="token punctuation">.</span><span class="token function">hasFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
							<span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span>elem<span class="token punctuation">.</span>type <span class="token operator">||</span> elem<span class="token punctuation">.</span>href <span class="token operator">||</span> <span class="token operator">~</span>elem<span class="token punctuation">.</span>tabIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>

					<span class="token comment">// Boolean properties</span>
					<span class="token string-property property">&quot;enabled&quot;</span><span class="token operator">:</span> <span class="token function">createDisabledPseudo</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					<span class="token string-property property">&quot;disabled&quot;</span><span class="token operator">:</span> <span class="token function">createDisabledPseudo</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

					<span class="token string-property property">&quot;checked&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

						<span class="token comment">// In CSS3, :checked should return both checked and selected elements</span>
						<span class="token comment">// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked</span>
						<span class="token keyword">var</span> nodeName <span class="token operator">=</span> elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">return</span> <span class="token punctuation">(</span>nodeName <span class="token operator">===</span> <span class="token string">&quot;input&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token operator">!</span>elem<span class="token punctuation">.</span>checked<span class="token punctuation">)</span> <span class="token operator">||</span>
							<span class="token punctuation">(</span>nodeName <span class="token operator">===</span> <span class="token string">&quot;option&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token operator">!</span>elem<span class="token punctuation">.</span>selected<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>

					<span class="token string-property property">&quot;selected&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

						<span class="token comment">// Accessing this property makes selected-by-default</span>
						<span class="token comment">// options in Safari work properly</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token comment">// eslint-disable-next-line no-unused-expressions</span>
							elem<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>selectedIndex<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token keyword">return</span> elem<span class="token punctuation">.</span>selected <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>

					<span class="token comment">// Contents</span>
					<span class="token string-property property">&quot;empty&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

						<span class="token comment">// http://www.w3.org/TR/selectors/#empty-pseudo</span>
						<span class="token comment">// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),</span>
						<span class="token comment">//   but not by others (comment: 8; processing instruction: 7; etc.)</span>
						<span class="token comment">// nodeType &lt; 6 works because attributes (2) do not appear as children</span>
						<span class="token keyword">for</span> <span class="token punctuation">(</span>elem <span class="token operator">=</span> elem<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span> elem<span class="token punctuation">;</span> elem <span class="token operator">=</span> elem<span class="token punctuation">.</span>nextSibling<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>nodeType <span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>
						<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>

					<span class="token string-property property">&quot;parent&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> <span class="token operator">!</span>Expr<span class="token punctuation">.</span>pseudos<span class="token punctuation">[</span><span class="token string">&quot;empty&quot;</span><span class="token punctuation">]</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>

					<span class="token comment">// Element/input types</span>
					<span class="token string-property property">&quot;header&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> rheader<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>

					<span class="token string-property property">&quot;input&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> rinputs<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>

					<span class="token string-property property">&quot;button&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> name <span class="token operator">=</span> elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">return</span> name <span class="token operator">===</span> <span class="token string">&quot;input&quot;</span> <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&quot;button&quot;</span> <span class="token operator">||</span> name <span class="token operator">===</span> <span class="token string">&quot;button&quot;</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>

					<span class="token string-property property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> attr<span class="token punctuation">;</span>
						<span class="token keyword">return</span> elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;input&quot;</span> <span class="token operator">&amp;&amp;</span>
							elem<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&quot;text&quot;</span> <span class="token operator">&amp;&amp;</span>

							<span class="token comment">// Support: IE&lt;8</span>
							<span class="token comment">// New HTML5 attribute values (e.g., &quot;search&quot;) appear with elem.type === &quot;text&quot;</span>
							<span class="token punctuation">(</span><span class="token punctuation">(</span>attr <span class="token operator">=</span> elem<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span>
								attr<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>

					<span class="token comment">// Position-in-collection</span>
					<span class="token string-property property">&quot;first&quot;</span><span class="token operator">:</span> <span class="token function">createPositionalPseudo</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

					<span class="token string-property property">&quot;last&quot;</span><span class="token operator">:</span> <span class="token function">createPositionalPseudo</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_matchIndexes<span class="token punctuation">,</span> length</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> <span class="token punctuation">[</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

					<span class="token string-property property">&quot;eq&quot;</span><span class="token operator">:</span> <span class="token function">createPositionalPseudo</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_matchIndexes<span class="token punctuation">,</span> length<span class="token punctuation">,</span> argument</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> <span class="token punctuation">[</span>argument <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> argument <span class="token operator">+</span> length <span class="token operator">:</span> argument<span class="token punctuation">]</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

					<span class="token string-property property">&quot;even&quot;</span><span class="token operator">:</span> <span class="token function">createPositionalPseudo</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">matchIndexes<span class="token punctuation">,</span> length</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
						<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							matchIndexes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						<span class="token keyword">return</span> matchIndexes<span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

					<span class="token string-property property">&quot;odd&quot;</span><span class="token operator">:</span> <span class="token function">createPositionalPseudo</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">matchIndexes<span class="token punctuation">,</span> length</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
						<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							matchIndexes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						<span class="token keyword">return</span> matchIndexes<span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

					<span class="token string-property property">&quot;lt&quot;</span><span class="token operator">:</span> <span class="token function">createPositionalPseudo</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">matchIndexes<span class="token punctuation">,</span> length<span class="token punctuation">,</span> argument</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> i <span class="token operator">=</span> argument <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span>
							argument <span class="token operator">+</span> length <span class="token operator">:</span>
							argument <span class="token operator">&gt;</span> length <span class="token operator">?</span>
								<span class="token literal-property property">length</span> <span class="token operator">:</span>
								argument<span class="token punctuation">;</span>
						<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> <span class="token operator">--</span>i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							matchIndexes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						<span class="token keyword">return</span> matchIndexes<span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

					<span class="token string-property property">&quot;gt&quot;</span><span class="token operator">:</span> <span class="token function">createPositionalPseudo</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">matchIndexes<span class="token punctuation">,</span> length<span class="token punctuation">,</span> argument</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> i <span class="token operator">=</span> argument <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> argument <span class="token operator">+</span> length <span class="token operator">:</span> argument<span class="token punctuation">;</span>
						<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> <span class="token operator">++</span>i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							matchIndexes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						<span class="token keyword">return</span> matchIndexes<span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>

			Expr<span class="token punctuation">.</span>pseudos<span class="token punctuation">[</span><span class="token string">&quot;nth&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> Expr<span class="token punctuation">.</span>pseudos<span class="token punctuation">[</span><span class="token string">&quot;eq&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token comment">// Add button/input type pseudos</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> <span class="token punctuation">{</span> <span class="token literal-property property">radio</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">checkbox</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">file</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">image</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				Expr<span class="token punctuation">.</span>pseudos<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">createInputPseudo</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> <span class="token punctuation">{</span> <span class="token literal-property property">submit</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">reset</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				Expr<span class="token punctuation">.</span>pseudos<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">createButtonPseudo</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Easy API for creating new setFilters</span>
			<span class="token keyword">function</span> <span class="token function">setFilters</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
			setFilters<span class="token punctuation">.</span>prototype <span class="token operator">=</span> Expr<span class="token punctuation">.</span>filters <span class="token operator">=</span> Expr<span class="token punctuation">.</span>pseudos<span class="token punctuation">;</span>
			Expr<span class="token punctuation">.</span>setFilters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">setFilters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			tokenize <span class="token operator">=</span> Sizzle<span class="token punctuation">.</span><span class="token function-variable function">tokenize</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">selector<span class="token punctuation">,</span> parseOnly</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> matched<span class="token punctuation">,</span> match<span class="token punctuation">,</span> tokens<span class="token punctuation">,</span> type<span class="token punctuation">,</span>
					soFar<span class="token punctuation">,</span> groups<span class="token punctuation">,</span> preFilters<span class="token punctuation">,</span>
					cached <span class="token operator">=</span> tokenCache<span class="token punctuation">[</span>selector <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span>cached<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> parseOnly <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> cached<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				soFar <span class="token operator">=</span> selector<span class="token punctuation">;</span>
				groups <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				preFilters <span class="token operator">=</span> Expr<span class="token punctuation">.</span>preFilter<span class="token punctuation">;</span>

				<span class="token keyword">while</span> <span class="token punctuation">(</span>soFar<span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Comma and first run</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>matched <span class="token operator">||</span> <span class="token punctuation">(</span>match <span class="token operator">=</span> rcomma<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>soFar<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>match<span class="token punctuation">)</span> <span class="token punctuation">{</span>

							<span class="token comment">// Don't consume trailing commas as valid</span>
							soFar <span class="token operator">=</span> soFar<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">||</span> soFar<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						groups<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span>tokens <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					matched <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

					<span class="token comment">// Combinators</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>match <span class="token operator">=</span> rcombinators<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>soFar<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						matched <span class="token operator">=</span> match<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						tokens<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
							<span class="token literal-property property">value</span><span class="token operator">:</span> matched<span class="token punctuation">,</span>

							<span class="token comment">// Cast descendant combinators to space</span>
							<span class="token literal-property property">type</span><span class="token operator">:</span> match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rtrim<span class="token punctuation">,</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
						<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						soFar <span class="token operator">=</span> soFar<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>matched<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// Filters</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span>type <span class="token keyword">in</span> Expr<span class="token punctuation">.</span>filter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>match <span class="token operator">=</span> matchExpr<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>soFar<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span>preFilters<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">||</span>
							<span class="token punctuation">(</span>match <span class="token operator">=</span> preFilters<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">(</span>match<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							matched <span class="token operator">=</span> match<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							tokens<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
								<span class="token literal-property property">value</span><span class="token operator">:</span> matched<span class="token punctuation">,</span>
								<span class="token literal-property property">type</span><span class="token operator">:</span> type<span class="token punctuation">,</span>
								<span class="token literal-property property">matches</span><span class="token operator">:</span> match
							<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							soFar <span class="token operator">=</span> soFar<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>matched<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>matched<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">break</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Return the length of the invalid excess</span>
				<span class="token comment">// if we're just parsing</span>
				<span class="token comment">// Otherwise, throw an error or return tokens</span>
				<span class="token keyword">return</span> parseOnly <span class="token operator">?</span>
					soFar<span class="token punctuation">.</span>length <span class="token operator">:</span>
					soFar <span class="token operator">?</span>
						Sizzle<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span> <span class="token operator">:</span>

						<span class="token comment">// Cache the tokens</span>
						<span class="token function">tokenCache</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span> groups<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token keyword">function</span> <span class="token function">toSelector</span> <span class="token punctuation">(</span><span class="token parameter">tokens</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
					len <span class="token operator">=</span> tokens<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
					selector <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					selector <span class="token operator">+=</span> tokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">return</span> selector<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">function</span> <span class="token function">addCombinator</span> <span class="token punctuation">(</span><span class="token parameter">matcher<span class="token punctuation">,</span> combinator<span class="token punctuation">,</span> base</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> dir <span class="token operator">=</span> combinator<span class="token punctuation">.</span>dir<span class="token punctuation">,</span>
					skip <span class="token operator">=</span> combinator<span class="token punctuation">.</span>next<span class="token punctuation">,</span>
					key <span class="token operator">=</span> skip <span class="token operator">||</span> dir<span class="token punctuation">,</span>
					checkNonElements <span class="token operator">=</span> base <span class="token operator">&amp;&amp;</span> key <span class="token operator">===</span> <span class="token string">&quot;parentNode&quot;</span><span class="token punctuation">,</span>
					doneName <span class="token operator">=</span> done<span class="token operator">++</span><span class="token punctuation">;</span>

				<span class="token keyword">return</span> combinator<span class="token punctuation">.</span>first <span class="token operator">?</span>

					<span class="token comment">// Check against closest ancestor/preceding element</span>
					<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> context<span class="token punctuation">,</span> xml</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>elem <span class="token operator">=</span> elem<span class="token punctuation">[</span>dir<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">||</span> checkNonElements<span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">return</span> <span class="token function">matcher</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> context<span class="token punctuation">,</span> xml<span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>
						<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token operator">:</span>

					<span class="token comment">// Check against all ancestor/preceding elements</span>
					<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> context<span class="token punctuation">,</span> xml</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> oldCache<span class="token punctuation">,</span> uniqueCache<span class="token punctuation">,</span> outerCache<span class="token punctuation">,</span>
							newCache <span class="token operator">=</span> <span class="token punctuation">[</span>dirruns<span class="token punctuation">,</span> doneName<span class="token punctuation">]</span><span class="token punctuation">;</span>

						<span class="token comment">// We can't set arbitrary data on XML nodes, so they don't benefit from combinator caching</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>xml<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>elem <span class="token operator">=</span> elem<span class="token punctuation">[</span>dir<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">||</span> checkNonElements<span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">matcher</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> context<span class="token punctuation">,</span> xml<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
										<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
									<span class="token punctuation">}</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
							<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>elem <span class="token operator">=</span> elem<span class="token punctuation">[</span>dir<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">||</span> checkNonElements<span class="token punctuation">)</span> <span class="token punctuation">{</span>
									outerCache <span class="token operator">=</span> elem<span class="token punctuation">[</span>expando<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">(</span>elem<span class="token punctuation">[</span>expando<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

									<span class="token comment">// Support: IE &lt;9 only</span>
									<span class="token comment">// Defend against cloned attroperties (jQuery gh-1709)</span>
									uniqueCache <span class="token operator">=</span> outerCache<span class="token punctuation">[</span>elem<span class="token punctuation">.</span>uniqueID<span class="token punctuation">]</span> <span class="token operator">||</span>
										<span class="token punctuation">(</span>outerCache<span class="token punctuation">[</span>elem<span class="token punctuation">.</span>uniqueID<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

									<span class="token keyword">if</span> <span class="token punctuation">(</span>skip <span class="token operator">&amp;&amp;</span> skip <span class="token operator">===</span> elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
										elem <span class="token operator">=</span> elem<span class="token punctuation">[</span>dir<span class="token punctuation">]</span> <span class="token operator">||</span> elem<span class="token punctuation">;</span>
									<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>oldCache <span class="token operator">=</span> uniqueCache<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
										oldCache<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> dirruns <span class="token operator">&amp;&amp;</span> oldCache<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> doneName<span class="token punctuation">)</span> <span class="token punctuation">{</span>

										<span class="token comment">// Assign to newCache so results back-propagate to previous elements</span>
										<span class="token keyword">return</span> <span class="token punctuation">(</span>newCache<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> oldCache<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
									<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

										<span class="token comment">// Reuse newcache so results back-propagate to previous elements</span>
										uniqueCache<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> newCache<span class="token punctuation">;</span>

										<span class="token comment">// A match means we're done; a fail means we have to keep checking</span>
										<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>newCache<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">matcher</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> context<span class="token punctuation">,</span> xml<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
											<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
										<span class="token punctuation">}</span>
									<span class="token punctuation">}</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>
						<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">function</span> <span class="token function">elementMatcher</span> <span class="token punctuation">(</span><span class="token parameter">matchers</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> matchers<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">?</span>
					<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> context<span class="token punctuation">,</span> xml</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> i <span class="token operator">=</span> matchers<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
						<span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>matchers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> context<span class="token punctuation">,</span> xml<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>
						<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token operator">:</span>
					matchers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">function</span> <span class="token function">multipleContexts</span> <span class="token punctuation">(</span><span class="token parameter">selector<span class="token punctuation">,</span> contexts<span class="token punctuation">,</span> results</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
					len <span class="token operator">=</span> contexts<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">Sizzle</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span> contexts<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">return</span> results<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">function</span> <span class="token function">condense</span> <span class="token punctuation">(</span><span class="token parameter">unmatched<span class="token punctuation">,</span> map<span class="token punctuation">,</span> filter<span class="token punctuation">,</span> context<span class="token punctuation">,</span> xml</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> elem<span class="token punctuation">,</span>
					newUnmatched <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
					i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
					len <span class="token operator">=</span> unmatched<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
					mapped <span class="token operator">=</span> map <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>elem <span class="token operator">=</span> unmatched<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>filter <span class="token operator">||</span> <span class="token function">filter</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> context<span class="token punctuation">,</span> xml<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							newUnmatched<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>mapped<span class="token punctuation">)</span> <span class="token punctuation">{</span>
								map<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">return</span> newUnmatched<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">function</span> <span class="token function">setMatcher</span> <span class="token punctuation">(</span><span class="token parameter">preFilter<span class="token punctuation">,</span> selector<span class="token punctuation">,</span> matcher<span class="token punctuation">,</span> postFilter<span class="token punctuation">,</span> postFinder<span class="token punctuation">,</span> postSelector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>postFilter <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>postFilter<span class="token punctuation">[</span>expando<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					postFilter <span class="token operator">=</span> <span class="token function">setMatcher</span><span class="token punctuation">(</span>postFilter<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>postFinder <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>postFinder<span class="token punctuation">[</span>expando<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					postFinder <span class="token operator">=</span> <span class="token function">setMatcher</span><span class="token punctuation">(</span>postFinder<span class="token punctuation">,</span> postSelector<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">return</span> <span class="token function">markFunction</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">seed<span class="token punctuation">,</span> results<span class="token punctuation">,</span> context<span class="token punctuation">,</span> xml</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> temp<span class="token punctuation">,</span> i<span class="token punctuation">,</span> elem<span class="token punctuation">,</span>
						preMap <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						postMap <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						preexisting <span class="token operator">=</span> results<span class="token punctuation">.</span>length<span class="token punctuation">,</span>

						<span class="token comment">// Get initial elements from seed or context</span>
						elems <span class="token operator">=</span> seed <span class="token operator">||</span> <span class="token function">multipleContexts</span><span class="token punctuation">(</span>
							selector <span class="token operator">||</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span>
							context<span class="token punctuation">.</span>nodeType <span class="token operator">?</span> <span class="token punctuation">[</span>context<span class="token punctuation">]</span> <span class="token operator">:</span> context<span class="token punctuation">,</span>
							<span class="token punctuation">[</span><span class="token punctuation">]</span>
						<span class="token punctuation">)</span><span class="token punctuation">,</span>

						<span class="token comment">// Prefilter to get matcher input, preserving a map for seed-results synchronization</span>
						matcherIn <span class="token operator">=</span> preFilter <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>seed <span class="token operator">||</span> <span class="token operator">!</span>selector<span class="token punctuation">)</span> <span class="token operator">?</span>
							<span class="token function">condense</span><span class="token punctuation">(</span>elems<span class="token punctuation">,</span> preMap<span class="token punctuation">,</span> preFilter<span class="token punctuation">,</span> context<span class="token punctuation">,</span> xml<span class="token punctuation">)</span> <span class="token operator">:</span>
							elems<span class="token punctuation">,</span>

						matcherOut <span class="token operator">=</span> matcher <span class="token operator">?</span>

							<span class="token comment">// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,</span>
							postFinder <span class="token operator">||</span> <span class="token punctuation">(</span>seed <span class="token operator">?</span> preFilter <span class="token operator">:</span> preexisting <span class="token operator">||</span> postFilter<span class="token punctuation">)</span> <span class="token operator">?</span>

								<span class="token comment">// ...intermediate processing is necessary</span>
								<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span>

								<span class="token comment">// ...otherwise use results directly</span>
								<span class="token literal-property property">results</span> <span class="token operator">:</span>
							matcherIn<span class="token punctuation">;</span>

					<span class="token comment">// Find primary matches</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>matcher<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token function">matcher</span><span class="token punctuation">(</span>matcherIn<span class="token punctuation">,</span> matcherOut<span class="token punctuation">,</span> context<span class="token punctuation">,</span> xml<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// Apply postFilter</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>postFilter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						temp <span class="token operator">=</span> <span class="token function">condense</span><span class="token punctuation">(</span>matcherOut<span class="token punctuation">,</span> postMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token function">postFilter</span><span class="token punctuation">(</span>temp<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> context<span class="token punctuation">,</span> xml<span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token comment">// Un-match failing elements by moving them back to matcherIn</span>
						i <span class="token operator">=</span> temp<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
						<span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>elem <span class="token operator">=</span> temp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								matcherOut<span class="token punctuation">[</span>postMap<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">!</span><span class="token punctuation">(</span>matcherIn<span class="token punctuation">[</span>postMap<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span>seed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>postFinder <span class="token operator">||</span> preFilter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>postFinder<span class="token punctuation">)</span> <span class="token punctuation">{</span>

								<span class="token comment">// Get the final matcherOut by condensing this intermediate into postFinder contexts</span>
								temp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
								i <span class="token operator">=</span> matcherOut<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
								<span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>elem <span class="token operator">=</span> matcherOut<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

										<span class="token comment">// Restore matcherIn since elem is not yet a final match</span>
										temp<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span>matcherIn<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> elem<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
									<span class="token punctuation">}</span>
								<span class="token punctuation">}</span>
								<span class="token function">postFinder</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>matcherOut <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> temp<span class="token punctuation">,</span> xml<span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>

							<span class="token comment">// Move matched elements from seed to results to keep them synchronized</span>
							i <span class="token operator">=</span> matcherOut<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
							<span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>elem <span class="token operator">=</span> matcherOut<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
									<span class="token punctuation">(</span>temp <span class="token operator">=</span> postFinder <span class="token operator">?</span> <span class="token function">indexOf</span><span class="token punctuation">(</span>seed<span class="token punctuation">,</span> elem<span class="token punctuation">)</span> <span class="token operator">:</span> preMap<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

									seed<span class="token punctuation">[</span>temp<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">!</span><span class="token punctuation">(</span>results<span class="token punctuation">[</span>temp<span class="token punctuation">]</span> <span class="token operator">=</span> elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// Add elements to results, through postFinder if defined</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						matcherOut <span class="token operator">=</span> <span class="token function">condense</span><span class="token punctuation">(</span>
							matcherOut <span class="token operator">===</span> results <span class="token operator">?</span>
								matcherOut<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>preexisting<span class="token punctuation">,</span> matcherOut<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">:</span>
								matcherOut
						<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>postFinder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token function">postFinder</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> results<span class="token punctuation">,</span> matcherOut<span class="token punctuation">,</span> xml<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
							<span class="token function">push</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>results<span class="token punctuation">,</span> matcherOut<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">function</span> <span class="token function">matcherFromTokens</span> <span class="token punctuation">(</span><span class="token parameter">tokens</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> checkContext<span class="token punctuation">,</span> matcher<span class="token punctuation">,</span> j<span class="token punctuation">,</span>
					len <span class="token operator">=</span> tokens<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
					leadingRelative <span class="token operator">=</span> Expr<span class="token punctuation">.</span>relative<span class="token punctuation">[</span>tokens<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>type<span class="token punctuation">]</span><span class="token punctuation">,</span>
					implicitRelative <span class="token operator">=</span> leadingRelative <span class="token operator">||</span> Expr<span class="token punctuation">.</span>relative<span class="token punctuation">[</span><span class="token string">&quot; &quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
					i <span class="token operator">=</span> leadingRelative <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>

					<span class="token comment">// The foundational matcher ensures that elements are reachable from top-level context(s)</span>
					matchContext <span class="token operator">=</span> <span class="token function">addCombinator</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> elem <span class="token operator">===</span> checkContext<span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span> implicitRelative<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					matchAnyContext <span class="token operator">=</span> <span class="token function">addCombinator</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> <span class="token function">indexOf</span><span class="token punctuation">(</span>checkContext<span class="token punctuation">,</span> elem<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span> implicitRelative<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					matchers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> context<span class="token punctuation">,</span> xml</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">!</span>leadingRelative <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>xml <span class="token operator">||</span> context <span class="token operator">!==</span> outermostContext<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>
							<span class="token punctuation">(</span>checkContext <span class="token operator">=</span> context<span class="token punctuation">)</span><span class="token punctuation">.</span>nodeType <span class="token operator">?</span>
								<span class="token function">matchContext</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> context<span class="token punctuation">,</span> xml<span class="token punctuation">)</span> <span class="token operator">:</span>
								<span class="token function">matchAnyContext</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> context<span class="token punctuation">,</span> xml<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token comment">// Avoid hanging onto element (issue #299)</span>
						checkContext <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
						<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>matcher <span class="token operator">=</span> Expr<span class="token punctuation">.</span>relative<span class="token punctuation">[</span>tokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						matchers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token function">addCombinator</span><span class="token punctuation">(</span><span class="token function">elementMatcher</span><span class="token punctuation">(</span>matchers<span class="token punctuation">)</span><span class="token punctuation">,</span> matcher<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						matcher <span class="token operator">=</span> Expr<span class="token punctuation">.</span>filter<span class="token punctuation">[</span>tokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> tokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>matches<span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token comment">// Return special upon seeing a positional matcher</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>matcher<span class="token punctuation">[</span>expando<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

							<span class="token comment">// Find the next relative operator (if any) for proper handling</span>
							j <span class="token operator">=</span> <span class="token operator">++</span>i<span class="token punctuation">;</span>
							<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span>Expr<span class="token punctuation">.</span>relative<span class="token punctuation">[</span>tokens<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token keyword">break</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span>
							<span class="token keyword">return</span> <span class="token function">setMatcher</span><span class="token punctuation">(</span>
								i <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token function">elementMatcher</span><span class="token punctuation">(</span>matchers<span class="token punctuation">)</span><span class="token punctuation">,</span>
								i <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token function">toSelector</span><span class="token punctuation">(</span>

									<span class="token comment">// If the preceding token was a descendant combinator, insert an implicit any-element `*`</span>
									tokens
										<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
										<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> tokens<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&quot; &quot;</span> <span class="token operator">?</span> <span class="token string">&quot;*&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
								<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rtrim<span class="token punctuation">,</span> <span class="token string">&quot;$1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
								matcher<span class="token punctuation">,</span>
								i <span class="token operator">&lt;</span> j <span class="token operator">&amp;&amp;</span> <span class="token function">matcherFromTokens</span><span class="token punctuation">(</span>tokens<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
								j <span class="token operator">&lt;</span> len <span class="token operator">&amp;&amp;</span> <span class="token function">matcherFromTokens</span><span class="token punctuation">(</span><span class="token punctuation">(</span>tokens <span class="token operator">=</span> tokens<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
								j <span class="token operator">&lt;</span> len <span class="token operator">&amp;&amp;</span> <span class="token function">toSelector</span><span class="token punctuation">(</span>tokens<span class="token punctuation">)</span>
							<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						matchers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>matcher<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">return</span> <span class="token function">elementMatcher</span><span class="token punctuation">(</span>matchers<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">function</span> <span class="token function">matcherFromGroupMatchers</span> <span class="token punctuation">(</span><span class="token parameter">elementMatchers<span class="token punctuation">,</span> setMatchers</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> bySet <span class="token operator">=</span> setMatchers<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">,</span>
					byElement <span class="token operator">=</span> elementMatchers<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">,</span>
					<span class="token function-variable function">superMatcher</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">seed<span class="token punctuation">,</span> context<span class="token punctuation">,</span> xml<span class="token punctuation">,</span> results<span class="token punctuation">,</span> outermost</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> elem<span class="token punctuation">,</span> j<span class="token punctuation">,</span> matcher<span class="token punctuation">,</span>
							matchedCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
							i <span class="token operator">=</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
							unmatched <span class="token operator">=</span> seed <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
							setMatched <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
							contextBackup <span class="token operator">=</span> outermostContext<span class="token punctuation">,</span>

							<span class="token comment">// We must always have either seed elements or outermost context</span>
							elems <span class="token operator">=</span> seed <span class="token operator">||</span> byElement <span class="token operator">&amp;&amp;</span> Expr<span class="token punctuation">.</span>find<span class="token punctuation">[</span><span class="token string">&quot;TAG&quot;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span> outermost<span class="token punctuation">)</span><span class="token punctuation">,</span>

							<span class="token comment">// Use integer dirruns iff this is the outermost matcher</span>
							dirrunsUnique <span class="token operator">=</span> <span class="token punctuation">(</span>dirruns <span class="token operator">+=</span> contextBackup <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
							len <span class="token operator">=</span> elems<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

						<span class="token keyword">if</span> <span class="token punctuation">(</span>outermost<span class="token punctuation">)</span> <span class="token punctuation">{</span>

							<span class="token comment">// Support: IE 11+, Edge 17 - 18+</span>
							<span class="token comment">// IE/Edge sometimes throw a &quot;Permission denied&quot; error when strict-comparing</span>
							<span class="token comment">// two documents; shallow comparisons work.</span>
							<span class="token comment">// eslint-disable-next-line eqeqeq</span>
							outermostContext <span class="token operator">=</span> context <span class="token operator">==</span> document <span class="token operator">||</span> context <span class="token operator">||</span> outermost<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// Add elements passing elementMatchers directly to results</span>
						<span class="token comment">// Support: IE&lt;9, Safari</span>
						<span class="token comment">// Tolerate NodeList properties (IE: &quot;length&quot;; Safari: &lt;number&gt;) matching elements by id</span>
						<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">!==</span> len <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>elem <span class="token operator">=</span> elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>byElement <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">)</span> <span class="token punctuation">{</span>
								j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

								<span class="token comment">// Support: IE 11+, Edge 17 - 18+</span>
								<span class="token comment">// IE/Edge sometimes throw a &quot;Permission denied&quot; error when strict-comparing</span>
								<span class="token comment">// two documents; shallow comparisons work.</span>
								<span class="token comment">// eslint-disable-next-line eqeqeq</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>context <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>ownerDocument <span class="token operator">!=</span> document<span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token function">setDocument</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
									xml <span class="token operator">=</span> <span class="token operator">!</span>documentIsHTML<span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
								<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>matcher <span class="token operator">=</span> elementMatchers<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">matcher</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> context <span class="token operator">||</span> document<span class="token punctuation">,</span> xml<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
										results<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
										<span class="token keyword">break</span><span class="token punctuation">;</span>
									<span class="token punctuation">}</span>
								<span class="token punctuation">}</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span>outermost<span class="token punctuation">)</span> <span class="token punctuation">{</span>
									dirruns <span class="token operator">=</span> dirrunsUnique<span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span>

							<span class="token comment">// Track unmatched elements for set filters</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>bySet<span class="token punctuation">)</span> <span class="token punctuation">{</span>

								<span class="token comment">// They will have gone through all possible matchers</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>elem <span class="token operator">=</span> <span class="token operator">!</span>matcher <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
									matchedCount<span class="token operator">--</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>

								<span class="token comment">// Lengthen the array for every element, matched or not</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span>seed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
									unmatched<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// `i` is now the count of elements visited above, and adding it to `matchedCount`</span>
						<span class="token comment">// makes the latter nonnegative.</span>
						matchedCount <span class="token operator">+=</span> i<span class="token punctuation">;</span>

						<span class="token comment">// Apply set filters to unmatched elements</span>
						<span class="token comment">// NOTE: This can be skipped if there are no unmatched elements (i.e., `matchedCount`</span>
						<span class="token comment">// equals `i`), unless we didn't visit _any_ elements in the above loop because we have</span>
						<span class="token comment">// no element matchers and no seed.</span>
						<span class="token comment">// Incrementing an initially-string &quot;0&quot; `i` allows `i` to remain a string only in that</span>
						<span class="token comment">// case, which will result in a &quot;00&quot; `matchedCount` that differs from `i` but is also</span>
						<span class="token comment">// numerically zero.</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>bySet <span class="token operator">&amp;&amp;</span> i <span class="token operator">!==</span> matchedCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
							<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>matcher <span class="token operator">=</span> setMatchers<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token function">matcher</span><span class="token punctuation">(</span>unmatched<span class="token punctuation">,</span> setMatched<span class="token punctuation">,</span> context<span class="token punctuation">,</span> xml<span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>

							<span class="token keyword">if</span> <span class="token punctuation">(</span>seed<span class="token punctuation">)</span> <span class="token punctuation">{</span>

								<span class="token comment">// Reintegrate element matches to eliminate the need for sorting</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span>matchedCount <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
										<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>unmatched<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">||</span> setMatched<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
											setMatched<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">pop</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>
										<span class="token punctuation">}</span>
									<span class="token punctuation">}</span>
								<span class="token punctuation">}</span>

								<span class="token comment">// Discard index placeholder values to get only actual matches</span>
								setMatched <span class="token operator">=</span> <span class="token function">condense</span><span class="token punctuation">(</span>setMatched<span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>

							<span class="token comment">// Add matches to results</span>
							<span class="token function">push</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>results<span class="token punctuation">,</span> setMatched<span class="token punctuation">)</span><span class="token punctuation">;</span>

							<span class="token comment">// Seedless set matches succeeding multiple successful matchers stipulate sorting</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>outermost <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>seed <span class="token operator">&amp;&amp;</span> setMatched<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span>
								<span class="token punctuation">(</span>matchedCount <span class="token operator">+</span> setMatchers<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

								Sizzle<span class="token punctuation">.</span><span class="token function">uniqueSort</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// Override manipulation of globals by nested matchers</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>outermost<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							dirruns <span class="token operator">=</span> dirrunsUnique<span class="token punctuation">;</span>
							outermostContext <span class="token operator">=</span> contextBackup<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token keyword">return</span> unmatched<span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">;</span>

				<span class="token keyword">return</span> bySet <span class="token operator">?</span>
					<span class="token function">markFunction</span><span class="token punctuation">(</span>superMatcher<span class="token punctuation">)</span> <span class="token operator">:</span>
					superMatcher<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			compile <span class="token operator">=</span> Sizzle<span class="token punctuation">.</span><span class="token function-variable function">compile</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>selector<span class="token punctuation">,</span> match <span class="token comment">/* Internal Use Only */</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> i<span class="token punctuation">,</span>
					setMatchers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
					elementMatchers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
					cached <span class="token operator">=</span> compilerCache<span class="token punctuation">[</span>selector <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>cached<span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Generate a function of recursive functions that can be used to check each element</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>match<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						match <span class="token operator">=</span> <span class="token function">tokenize</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					i <span class="token operator">=</span> match<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
					<span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						cached <span class="token operator">=</span> <span class="token function">matcherFromTokens</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>cached<span class="token punctuation">[</span>expando<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							setMatchers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cached<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
							elementMatchers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cached<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// Cache the compiled function</span>
					cached <span class="token operator">=</span> <span class="token function">compilerCache</span><span class="token punctuation">(</span>
						selector<span class="token punctuation">,</span>
						<span class="token function">matcherFromGroupMatchers</span><span class="token punctuation">(</span>elementMatchers<span class="token punctuation">,</span> setMatchers<span class="token punctuation">)</span>
					<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// Save selector and tokenization</span>
					cached<span class="token punctuation">.</span>selector <span class="token operator">=</span> selector<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">return</span> cached<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token comment">/**
			 * A low-level selection function that works with Sizzle's compiled
			 *  selector functions
			 * @param {String|Function} selector A selector or a pre-compiled
			 *  selector function built with Sizzle.compile
			 * @param {Element} context
			 * @param {Array} [results]
			 * @param {Array} [seed] A set of elements to match against
			 */</span>
			select <span class="token operator">=</span> Sizzle<span class="token punctuation">.</span><span class="token function-variable function">select</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">selector<span class="token punctuation">,</span> context<span class="token punctuation">,</span> results<span class="token punctuation">,</span> seed</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> i<span class="token punctuation">,</span> tokens<span class="token punctuation">,</span> token<span class="token punctuation">,</span> type<span class="token punctuation">,</span> find<span class="token punctuation">,</span>
					compiled <span class="token operator">=</span> <span class="token keyword">typeof</span> selector <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span> <span class="token operator">&amp;&amp;</span> selector<span class="token punctuation">,</span>
					match <span class="token operator">=</span> <span class="token operator">!</span>seed <span class="token operator">&amp;&amp;</span> <span class="token function">tokenize</span><span class="token punctuation">(</span><span class="token punctuation">(</span>selector <span class="token operator">=</span> compiled<span class="token punctuation">.</span>selector <span class="token operator">||</span> selector<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				results <span class="token operator">=</span> results <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token comment">// Try to minimize operations if there is only one selector in the list and no seed</span>
				<span class="token comment">// (the latter of which guarantees us context)</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>match<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Reduce context if the leading compound selector is an ID</span>
					tokens <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>tokens<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>token <span class="token operator">=</span> tokens<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&quot;ID&quot;</span> <span class="token operator">&amp;&amp;</span>
						context<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">9</span> <span class="token operator">&amp;&amp;</span> documentIsHTML <span class="token operator">&amp;&amp;</span> Expr<span class="token punctuation">.</span>relative<span class="token punctuation">[</span>tokens<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

						context <span class="token operator">=</span> <span class="token punctuation">(</span>Expr<span class="token punctuation">.</span>find<span class="token punctuation">[</span><span class="token string">&quot;ID&quot;</span><span class="token punctuation">]</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span>matches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
							<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>runescape<span class="token punctuation">,</span> funescape<span class="token punctuation">)</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">return</span> results<span class="token punctuation">;</span>

							<span class="token comment">// Precompiled matchers will still verify ancestry, so step up a level</span>
						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>compiled<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							context <span class="token operator">=</span> context<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						selector <span class="token operator">=</span> selector<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>tokens<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// Fetch a seed set for right-to-left matching</span>
					i <span class="token operator">=</span> matchExpr<span class="token punctuation">[</span><span class="token string">&quot;needsContext&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> tokens<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
					<span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						token <span class="token operator">=</span> tokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>

						<span class="token comment">// Abort if we hit a combinator</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>Expr<span class="token punctuation">.</span>relative<span class="token punctuation">[</span><span class="token punctuation">(</span>type <span class="token operator">=</span> token<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">break</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>find <span class="token operator">=</span> Expr<span class="token punctuation">.</span>find<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

							<span class="token comment">// Search, expanding context for leading sibling combinators</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>seed <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>
								token<span class="token punctuation">.</span>matches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>runescape<span class="token punctuation">,</span> funescape<span class="token punctuation">)</span><span class="token punctuation">,</span>
								rsibling<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>tokens<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">testContext</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span> <span class="token operator">||</span>
								context
							<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

								<span class="token comment">// If seed is empty or no tokens remain, we can return early</span>
								tokens<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
								selector <span class="token operator">=</span> seed<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token function">toSelector</span><span class="token punctuation">(</span>tokens<span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>selector<span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token function">push</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>results<span class="token punctuation">,</span> seed<span class="token punctuation">)</span><span class="token punctuation">;</span>
									<span class="token keyword">return</span> results<span class="token punctuation">;</span>
								<span class="token punctuation">}</span>

								<span class="token keyword">break</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Compile and execute a filtering function if one is not provided</span>
				<span class="token comment">// Provide `match` to avoid retokenization if we modified the selector above</span>
				<span class="token punctuation">(</span>compiled <span class="token operator">||</span> <span class="token function">compile</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span> match<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span>
					seed<span class="token punctuation">,</span>
					context<span class="token punctuation">,</span>
					<span class="token operator">!</span>documentIsHTML<span class="token punctuation">,</span>
					results<span class="token punctuation">,</span>
					<span class="token operator">!</span>context <span class="token operator">||</span> rsibling<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">testContext</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span> <span class="token operator">||</span> context
				<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> results<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token comment">// One-time assignments</span>

			<span class="token comment">// Sort stability</span>
			support<span class="token punctuation">.</span>sortStable <span class="token operator">=</span> expando<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>sortOrder<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> expando<span class="token punctuation">;</span>

			<span class="token comment">// Support: Chrome 14-35+</span>
			<span class="token comment">// Always assume duplicates if they aren't passed to the comparison function</span>
			support<span class="token punctuation">.</span>detectDuplicates <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>hasDuplicate<span class="token punctuation">;</span>

			<span class="token comment">// Initialize against the default document</span>
			<span class="token function">setDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Support: Webkit&lt;537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)</span>
			<span class="token comment">// Detached nodes confoundingly follow *each other*</span>
			support<span class="token punctuation">.</span>sortDetached <span class="token operator">=</span> <span class="token function">assert</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Should return 1, but returns 4 (following)</span>
				<span class="token keyword">return</span> el<span class="token punctuation">.</span><span class="token function">compareDocumentPosition</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;fieldset&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Support: IE&lt;8</span>
			<span class="token comment">// Prevent attribute/property &quot;interpolation&quot;</span>
			<span class="token comment">// https://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">assert</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				el<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;&lt;a href='#'&gt;&lt;/a&gt;&quot;</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> el<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;href&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;#&quot;</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">addHandle</span><span class="token punctuation">(</span><span class="token string">&quot;type|href|height|width&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> isXML</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isXML<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> elem<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;type&quot;</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Support: IE&lt;9</span>
			<span class="token comment">// Use defaultValue in place of getAttribute(&quot;value&quot;)</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>support<span class="token punctuation">.</span>attributes <span class="token operator">||</span> <span class="token operator">!</span><span class="token function">assert</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				el<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;&lt;input/&gt;&quot;</span><span class="token punctuation">;</span>
				el<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> el<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">addHandle</span><span class="token punctuation">(</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> _name<span class="token punctuation">,</span> isXML</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isXML <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;input&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> elem<span class="token punctuation">.</span>defaultValue<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Support: IE&lt;9</span>
			<span class="token comment">// Use getAttributeNode to fetch booleans when getAttribute lies</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">assert</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> el<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;disabled&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">addHandle</span><span class="token punctuation">(</span>booleans<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> isXML</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> val<span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isXML<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> elem<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token boolean">true</span> <span class="token operator">?</span> name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span>
							<span class="token punctuation">(</span>val <span class="token operator">=</span> elem<span class="token punctuation">.</span><span class="token function">getAttributeNode</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> val<span class="token punctuation">.</span>specified <span class="token operator">?</span>
								val<span class="token punctuation">.</span>value <span class="token operator">:</span>
								<span class="token keyword">null</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> Sizzle<span class="token punctuation">;</span>

		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">;</span>



	jQuery<span class="token punctuation">.</span>find <span class="token operator">=</span> Sizzle<span class="token punctuation">;</span>
	jQuery<span class="token punctuation">.</span>expr <span class="token operator">=</span> Sizzle<span class="token punctuation">.</span>selectors<span class="token punctuation">;</span>

	<span class="token comment">// Deprecated</span>
	jQuery<span class="token punctuation">.</span>expr<span class="token punctuation">[</span><span class="token string">&quot;:&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>pseudos<span class="token punctuation">;</span>
	jQuery<span class="token punctuation">.</span>uniqueSort <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>unique <span class="token operator">=</span> Sizzle<span class="token punctuation">.</span>uniqueSort<span class="token punctuation">;</span>
	jQuery<span class="token punctuation">.</span>text <span class="token operator">=</span> Sizzle<span class="token punctuation">.</span>getText<span class="token punctuation">;</span>
	jQuery<span class="token punctuation">.</span>isXMLDoc <span class="token operator">=</span> Sizzle<span class="token punctuation">.</span>isXML<span class="token punctuation">;</span>
	jQuery<span class="token punctuation">.</span>contains <span class="token operator">=</span> Sizzle<span class="token punctuation">.</span>contains<span class="token punctuation">;</span>
	jQuery<span class="token punctuation">.</span>escapeSelector <span class="token operator">=</span> Sizzle<span class="token punctuation">.</span>escape<span class="token punctuation">;</span>




	<span class="token keyword">var</span> <span class="token function-variable function">dir</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> dir<span class="token punctuation">,</span> until</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> matched <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			truncate <span class="token operator">=</span> until <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>

		<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>elem <span class="token operator">=</span> elem<span class="token punctuation">[</span>dir<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">!==</span> <span class="token number">9</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>truncate <span class="token operator">&amp;&amp;</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>until<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">break</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				matched<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> matched<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>


	<span class="token keyword">var</span> <span class="token function-variable function">siblings</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> matched <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> n<span class="token punctuation">;</span> n <span class="token operator">=</span> n<span class="token punctuation">.</span>nextSibling<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>n<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> n <span class="token operator">!==</span> elem<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				matched<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> matched<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>


	<span class="token keyword">var</span> rneedsContext <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>match<span class="token punctuation">.</span>needsContext<span class="token punctuation">;</span>



	<span class="token keyword">function</span> <span class="token function">nodeName</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token keyword">return</span> elem<span class="token punctuation">.</span>nodeName <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> rsingleTag <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^&lt;([a-z][^\/\0&gt;:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?&gt;(?:&lt;\/\1&gt;|)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>



	<span class="token comment">// Implement the identical functionality for filter and not</span>
	<span class="token keyword">function</span> <span class="token function">winnow</span> <span class="token punctuation">(</span><span class="token parameter">elements<span class="token punctuation">,</span> qualifier<span class="token punctuation">,</span> not</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFunction</span><span class="token punctuation">(</span>qualifier<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">grep</span><span class="token punctuation">(</span>elements<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token function">qualifier</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> i<span class="token punctuation">,</span> elem<span class="token punctuation">)</span> <span class="token operator">!==</span> not<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Single element</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>qualifier<span class="token punctuation">.</span>nodeType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">grep</span><span class="token punctuation">(</span>elements<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token punctuation">(</span>elem <span class="token operator">===</span> qualifier<span class="token punctuation">)</span> <span class="token operator">!==</span> not<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Arraylike of elements (jQuery, arguments, Array)</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> qualifier <span class="token operator">!==</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">grep</span><span class="token punctuation">(</span>elements<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token function">indexOf</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>qualifier<span class="token punctuation">,</span> elem<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">!==</span> not<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Filtered directly for both simple and complex selectors</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>qualifier<span class="token punctuation">,</span> elements<span class="token punctuation">,</span> not<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	jQuery<span class="token punctuation">.</span><span class="token function-variable function">filter</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">expr<span class="token punctuation">,</span> elems<span class="token punctuation">,</span> not</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> elem <span class="token operator">=</span> elems<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>not<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			expr <span class="token operator">=</span> <span class="token string">&quot;:not(&quot;</span> <span class="token operator">+</span> expr <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>elems<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span>find<span class="token punctuation">.</span><span class="token function">matchesSelector</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> expr<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span>elem<span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span>find<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span>expr<span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span><span class="token function">grep</span><span class="token punctuation">(</span>elems<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token comment">//dom相关 find filter not is</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token function-variable function">find</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> i<span class="token punctuation">,</span> ret<span class="token punctuation">,</span>
				len <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span>
				self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> selector <span class="token operator">!==</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span><span class="token function">jQuery</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>self<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">//使得preveObject指向this实例</span>
			ret <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span> self<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> ret<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> len <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">?</span> jQuery<span class="token punctuation">.</span><span class="token function">uniqueSort</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span> <span class="token operator">:</span> ret<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">filter</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span><span class="token function">winnow</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> selector <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">not</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span><span class="token function">winnow</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> selector <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">is</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token function">winnow</span><span class="token punctuation">(</span>
				<span class="token keyword">this</span><span class="token punctuation">,</span>

				<span class="token comment">// If this is a positional/relative selector, check membership in the returned set</span>
				<span class="token comment">// so $(&quot;p:first&quot;).is(&quot;p:last&quot;) won't return true for a doc with two &quot;p&quot;.</span>
				<span class="token keyword">typeof</span> selector <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span> <span class="token operator">&amp;&amp;</span> rneedsContext<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span> <span class="token operator">?</span>
					<span class="token function">jQuery</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span> <span class="token operator">:</span>
					selector <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
				<span class="token boolean">false</span>
			<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// Initialize a jQuery object</span>
	<span class="token comment">// A central reference to the root jQuery(document)</span>
	<span class="token keyword">var</span> rootjQuery<span class="token punctuation">,</span>
		<span class="token comment">// A simple way to check for HTML strings</span>
		<span class="token comment">// Prioritize #id over &lt;tag&gt; to avoid XSS via location.hash (#9521)</span>
		<span class="token comment">// Strict HTML recognition (#11290: must start with &lt;)</span>
		<span class="token comment">// Shortcut simple #id case for speed</span>
		rquickExpr <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:\s*(&lt;[\w\W]+&gt;)[^&gt;]*|#([\w-]+))$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		init <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">init</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">selector<span class="token punctuation">,</span> context<span class="token punctuation">,</span> root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> match<span class="token punctuation">,</span> elem<span class="token punctuation">;</span>
			<span class="token comment">//情况1 $(&quot;&quot;), $(null), $(undefined), $(false)</span>
			<span class="token comment">// HANDLE: $(&quot;&quot;), $(null), $(undefined), $(false)</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>selector<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">// Method init() accepts an alternate rootjQuery</span>
			<span class="token comment">// so migrate can support jQuery.sub (gh-2101)</span>
			root <span class="token operator">=</span> root <span class="token operator">||</span> rootjQuery<span class="token punctuation">;</span>
			<span class="token comment">// Handle HTML strings 处理是html字符串的情况</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> selector <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">//&lt;div&gt;&lt;/div&gt;的情况</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>selector<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;&lt;&quot;</span> <span class="token operator">&amp;&amp;</span>
					selector<span class="token punctuation">[</span>selector<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;&gt;&quot;</span> <span class="token operator">&amp;&amp;</span>
					selector<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// Assume that strings that start and end with &lt;&gt; are HTML and skip the regex check</span>
					match <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">null</span><span class="token punctuation">,</span> selector<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					<span class="token comment">//判断是不是标准的html标签</span>
					match <span class="token operator">=</span> rquickExpr<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token comment">//没有上下文</span>
				<span class="token comment">// Match html or make sure no context is specified for #id</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>match <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token operator">!</span>context<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">//情况2 $(html)</span>
					<span class="token comment">// HANDLE: $(html) -&gt; $(array)</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						context <span class="token operator">=</span> context <span class="token keyword">instanceof</span> <span class="token class-name">jQuery</span> <span class="token operator">?</span> context<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">:</span> context<span class="token punctuation">;</span>
						<span class="token comment">//context.ownerDocument =&gt;document</span>
						<span class="token comment">// Option to run scripts is true for back-compat</span>
						<span class="token comment">// Intentionally let the error be thrown if parseHTML is not present</span>
						jQuery<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span><span class="token function">parseHTML</span><span class="token punctuation">(</span>
							match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
							context <span class="token operator">&amp;&amp;</span> context<span class="token punctuation">.</span>nodeType <span class="token operator">?</span> context<span class="token punctuation">.</span>ownerDocument <span class="token operator">||</span> context <span class="token operator">:</span> document<span class="token punctuation">,</span>
							<span class="token boolean">true</span>
						<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token comment">//情况 3  $(html, props)</span>
						<span class="token comment">// HANDLE: $(html, props) //处理html标签，并且带有属性</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>rsingleTag<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">for</span> <span class="token punctuation">(</span>match <span class="token keyword">in</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token comment">// Properties of context are called as methods if possible</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFunction</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>match<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token keyword">this</span><span class="token punctuation">[</span>match<span class="token punctuation">]</span><span class="token punctuation">(</span>context<span class="token punctuation">[</span>match<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
									<span class="token comment">// ...and otherwise set as attributes</span>
									<span class="token comment">//为元素节点设置属性</span>
								<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
									<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span>match<span class="token punctuation">,</span> context<span class="token punctuation">[</span>match<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>
						<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
						<span class="token comment">//情况 4 $(#id) </span>
						<span class="token comment">// HANDLE: $(#id) 处理 $(&quot;#id&quot;)的情况</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						elem <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">)</span> <span class="token punctuation">{</span>

							<span class="token comment">// Inject the element directly into the jQuery object</span>
							<span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> elem<span class="token punctuation">;</span>
							<span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token comment">//情况5 $(expr, $(...)) context是jQuery实例</span>
					<span class="token comment">// HANDLE: $(expr, $(...))</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>context <span class="token operator">||</span> context<span class="token punctuation">.</span>jquery<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">//查找</span>
					<span class="token keyword">return</span> <span class="token punctuation">(</span>context <span class="token operator">||</span> root<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">//情况6 $(expr, context)</span>
					<span class="token comment">// HANDLE: $(expr, context)</span>
					<span class="token comment">// (which is just equivalent to: $(context).find(expr)</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">constructor</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token comment">//处理dom元素的情况 document.getElementById(&quot;#id&quot;);</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>selector<span class="token punctuation">.</span>nodeType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> selector<span class="token punctuation">;</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
				<span class="token comment">//情况 7 $(function)</span>
				<span class="token comment">// HANDLE: $(function)</span>
				<span class="token comment">// Shortcut for document ready</span>
				<span class="token comment">//处理函数的情况</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFunction</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> root<span class="token punctuation">.</span>ready <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">?</span>
					root<span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span> <span class="token operator">:</span>

					<span class="token comment">// Execute immediately if ready is not present</span>
					<span class="token function">selector</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token comment">// Give the init function the jQuery prototype for later instantiation</span>
	init<span class="token punctuation">.</span>prototype <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">;</span>

	<span class="token comment">// Initialize central reference //将document构造成jquery对象</span>
	rootjQuery <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">;</span>


	<span class="token keyword">var</span> rparentsprev <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:parents|prev(?:Until|All))</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>

		<span class="token comment">// Methods guaranteed to produce a unique set when starting from a unique set</span>
		guaranteedUnique <span class="token operator">=</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token literal-property property">contents</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token literal-property property">next</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token literal-property property">prev</span><span class="token operator">:</span> <span class="token boolean">true</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>

	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token function-variable function">has</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> targets <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				l <span class="token operator">=</span> targets<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> targets<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">closest</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">selectors<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> cur<span class="token punctuation">,</span>
				i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
				l <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span>
				matched <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
				targets <span class="token operator">=</span> <span class="token keyword">typeof</span> selectors <span class="token operator">!==</span> <span class="token string">&quot;string&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>selectors<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Positional selectors never match, since there's no _selection_ context</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>rneedsContext<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>selectors<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span>cur <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> cur <span class="token operator">&amp;&amp;</span> cur <span class="token operator">!==</span> context<span class="token punctuation">;</span> cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>

						<span class="token comment">// Always skip document fragments</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token punctuation">.</span>nodeType <span class="token operator">&lt;</span> <span class="token number">11</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>targets <span class="token operator">?</span>
							targets<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span>

							<span class="token comment">// Don't pass non-elements to Sizzle</span>
							cur<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span>
							jQuery<span class="token punctuation">.</span>find<span class="token punctuation">.</span><span class="token function">matchesSelector</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span> selectors<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

							matched<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token keyword">break</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span>matched<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">?</span> jQuery<span class="token punctuation">.</span><span class="token function">uniqueSort</span><span class="token punctuation">(</span>matched<span class="token punctuation">)</span> <span class="token operator">:</span> matched<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">// Determine the position of an element within the set</span>
		<span class="token function-variable function">index</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// No argument, return index in parent</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>elem<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prevAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Index in selector</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> elem <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token function">indexOf</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token function">jQuery</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Locate the position of the desired element</span>
			<span class="token keyword">return</span> <span class="token function">indexOf</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>

				<span class="token comment">// If it receives a jQuery object, the first element is used</span>
				elem<span class="token punctuation">.</span>jquery <span class="token operator">?</span> elem<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">:</span> elem
			<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">selector<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span>
				jQuery<span class="token punctuation">.</span><span class="token function">uniqueSort</span><span class="token punctuation">(</span>
					jQuery<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token punctuation">)</span>
			<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">addBack</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>selector <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>prevObject <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prevObject<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span>
			<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">function</span> <span class="token function">sibling</span> <span class="token punctuation">(</span><span class="token parameter">cur<span class="token punctuation">,</span> dir</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>cur <span class="token operator">=</span> cur<span class="token punctuation">[</span>dir<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> cur<span class="token punctuation">.</span>nodeType <span class="token operator">!==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
		<span class="token keyword">return</span> cur<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token function-variable function">parent</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> parent <span class="token operator">=</span> elem<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>
			<span class="token keyword">return</span> parent <span class="token operator">&amp;&amp;</span> parent<span class="token punctuation">.</span>nodeType <span class="token operator">!==</span> <span class="token number">11</span> <span class="token operator">?</span> parent <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">parents</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">dir</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;parentNode&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">parentsUntil</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> _i<span class="token punctuation">,</span> until</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">dir</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;parentNode&quot;</span><span class="token punctuation">,</span> until<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">next</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">sibling</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;nextSibling&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">prev</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">sibling</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;previousSibling&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">nextAll</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">dir</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;nextSibling&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">prevAll</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">dir</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;previousSibling&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">nextUntil</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> _i<span class="token punctuation">,</span> until</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">dir</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;nextSibling&quot;</span><span class="token punctuation">,</span> until<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">prevUntil</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> _i<span class="token punctuation">,</span> until</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">dir</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;previousSibling&quot;</span><span class="token punctuation">,</span> until<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">siblings</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">siblings</span><span class="token punctuation">(</span><span class="token punctuation">(</span>elem<span class="token punctuation">.</span>parentNode <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>firstChild<span class="token punctuation">,</span> elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">children</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">siblings</span><span class="token punctuation">(</span>elem<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">contents</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>contentDocument <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span>

				<span class="token comment">// Support: IE 11+</span>
				<span class="token comment">// &lt;object&gt; elements with no `data` attribute has an object</span>
				<span class="token comment">// `contentDocument` with a `null` prototype.</span>
				<span class="token function">getProto</span><span class="token punctuation">(</span>elem<span class="token punctuation">.</span>contentDocument<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token keyword">return</span> elem<span class="token punctuation">.</span>contentDocument<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Support: IE 9 - 11 only, iOS 7 only, Android Browser &lt;=4.3 only</span>
			<span class="token comment">// Treat the template element as a regular one in browsers that</span>
			<span class="token comment">// don't support it.</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">nodeName</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;template&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				elem <span class="token operator">=</span> elem<span class="token punctuation">.</span>content <span class="token operator">||</span> elem<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> elem<span class="token punctuation">.</span>childNodes<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">until<span class="token punctuation">,</span> selector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> matched <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> fn<span class="token punctuation">,</span> until<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">&quot;Until&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				selector <span class="token operator">=</span> until<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>selector <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> selector <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				matched <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span> matched<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Remove duplicates</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>guaranteedUnique<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					jQuery<span class="token punctuation">.</span><span class="token function">uniqueSort</span><span class="token punctuation">(</span>matched<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Reverse order for parents* and prev-derivatives</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>rparentsprev<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					matched<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span>matched<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> rnothtmlwhite <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[^\x20\t\r\n\f]+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// Convert String-formatted options into Object-formatted ones</span>
	<span class="token keyword">function</span> <span class="token function">createOptions</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> object <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
		jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>rnothtmlwhite<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> flag</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			object<span class="token punctuation">[</span>flag<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> object<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">/*
	 * Create a callback list using the following parameters:
	 *
	 *	options: an optional list of space-separated options that will change how
	 *			the callback list behaves or a more traditional option object
	 *
	 * By default a callback list will act like an event callback list and can be
	 * &quot;fired&quot; multiple times.
	 *
	 * Possible options:
	 *  表示回调只被触发一次
	 *	once:			will ensure the callback list can only be fired once (like a Deferred) 
	 *	表示是否缓存上一次fire时传递的实参
	 *	memory:			will keep track of previous values and will call any callback added
	 *					after the list has been fired right away with the latest &quot;memorized&quot;
	 *					values (like a Deferred) 
	 *	表示回调函数不能重复添加
	 *	unique:			will ensure a callback can only be added once (no duplicate in the list) 
	 *	是否在清空回调时终止
	 *	stopOnFalse:	interrupt callings when a callback returns false 
	 *
	 */</span>
	jQuery<span class="token punctuation">.</span><span class="token function-variable function">Callbacks</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token comment">// Convert options from String-formatted to Object-formatted if needed</span>
		<span class="token comment">// (we check in cache first)</span>
		options <span class="token operator">=</span> <span class="token keyword">typeof</span> options <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span> <span class="token operator">?</span>
			<span class="token function">createOptions</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token operator">:</span>
			jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">var</span> <span class="token comment">// Flag to know if list is currently firing</span>
			firing<span class="token punctuation">,</span> <span class="token comment">//列表中的函数是否正在回调中</span>
			<span class="token comment">// Last fire value for non-forgettable lists</span>
			memory<span class="token punctuation">,</span><span class="token comment">//最后一次回调触发时传的参数</span>

			<span class="token comment">// Flag to know if list was already fired</span>
			fired<span class="token punctuation">,</span><span class="token comment">//列表中的函数是否已经回调至少一次</span>

			<span class="token comment">// Flag to prevent firing</span>
			locked<span class="token punctuation">,</span>

			<span class="token comment">// Actual callback list 实际回调列表</span>
			list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token comment">//存放的是执行参数</span>
			<span class="token comment">// Queue of execution data for repeatable lists</span>
			queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token comment">//当前正在执行的回调的索引</span>
			<span class="token comment">// Index of currently firing callback (modified by add/remove as needed)</span>
			firingIndex <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
			<span class="token comment">//触发回调</span>
			<span class="token comment">// Fire callbacks</span>
			<span class="token function-variable function">fire</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">//只触发一次</span>
				<span class="token comment">// Enforce single-firing</span>
				locked <span class="token operator">=</span> locked <span class="token operator">||</span> options<span class="token punctuation">.</span>once<span class="token punctuation">;</span>

				<span class="token comment">// Execute callbacks for all pending executions,</span>
				<span class="token comment">// respecting firingIndex overrides and runtime changes</span>
				<span class="token comment">//触发了</span>
				fired <span class="token operator">=</span> firing <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
				<span class="token comment">//循环实参列表</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> queue<span class="token punctuation">.</span>length<span class="token punctuation">;</span> firingIndex <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">//从队列中取出实参</span>
					memory <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">++</span>firingIndex <span class="token operator">&lt;</span> list<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">//执行回调 查看回调是否提前结束</span>
						<span class="token comment">//当回调返回一个false同时在调用$.Callbacks(&quot;stopOnfalse&quot;)时会中断回调的执行</span>
						<span class="token comment">//memory[0]是执行上下文 this</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>list<span class="token punctuation">[</span>firingIndex<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>memory<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> memory<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">&amp;&amp;</span>
							options<span class="token punctuation">.</span>stopOnFalse<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token comment">// Jump to end and forget the data so .add doesn't re-fire</span>
							firingIndex <span class="token operator">=</span> list<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
							memory <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Forget the data if we're done with it</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>options<span class="token punctuation">.</span>memory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					memory <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				firing <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

				<span class="token comment">// 判断是否被锁住</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>locked<span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Keep an empty list if we have data for future add calls</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>memory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

						<span class="token comment">// Otherwise, this object is spent</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						list <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">// Actual Callbacks object</span>
			self <span class="token operator">=</span> <span class="token punctuation">{</span>

				<span class="token comment">// Add a callback or a collection of callbacks to the list</span>
				<span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">//如果有过去执行回调函数的参数，那么应该在添加后马上执行回调</span>
						<span class="token comment">// If we have memory from a past run, we should fire after adding</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>memory <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>firing<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							firingIndex <span class="token operator">=</span> list<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
							queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>memory<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						<span class="token comment">//args可能是多个回调函数,所以这里用到了循环</span>
						<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">add</span> <span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFunction</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>options<span class="token punctuation">.</span>unique <span class="token operator">||</span> <span class="token operator">!</span>self<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
										list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
									<span class="token punctuation">}</span>
									<span class="token comment">//参数可能是数组或者类数组</span>
								<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>arg <span class="token operator">&amp;&amp;</span> arg<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token function">toType</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token comment">//循环调用</span>
									<span class="token function">add</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token keyword">if</span> <span class="token punctuation">(</span>memory <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>firing<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token function">fire</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>

				<span class="token comment">// 从回调列表中删除回调</span>
				<span class="token function-variable function">remove</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">let</span> index<span class="token punctuation">;</span>
					<span class="token comment">//arguments是类数组</span>
					jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">//判断要删除的回调是否在回调列表中，参数可能是多个回调，所以使用循环</span>
						<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>index <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span>arg<span class="token punctuation">,</span> list<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token comment">//存在则删除</span>
							list<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token comment">// Handle firing indexes</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;=</span> firingIndex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
								firingIndex<span class="token operator">--</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token comment">//判断回调是否已经存在列表中了</span>
				<span class="token comment">// Check if a given callback is in the list.</span>
				<span class="token comment">// If no argument is given, return whether or not list has callbacks attached.</span>
				<span class="token function-variable function">has</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> fn <span class="token operator">?</span>
						jQuery<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> list<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span>
						list<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token comment">//清空回调列表</span>
				<span class="token function-variable function">empty</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token comment">//不能触发回调，也不能添加回调</span>
				<span class="token comment">// Disable .fire and .add</span>
				<span class="token comment">// Abort any current/pending executions</span>
				<span class="token comment">// Clear all callbacks and values</span>
				<span class="token function-variable function">disable</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					locked <span class="token operator">=</span> queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
					list <span class="token operator">=</span> memory <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token comment">//判断列表是否已经被禁用</span>
				<span class="token function-variable function">disabled</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token operator">!</span>list<span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>

				<span class="token comment">// Disable .fire</span>
				<span class="token comment">// Also disable .add unless we have memory (since it would have no effect)</span>
				<span class="token comment">// Abort any pending executions</span>
				<span class="token function-variable function">lock</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">//清空参数队列</span>
					locked <span class="token operator">=</span> queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
					<span class="token comment">//判断是否有缓存</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>memory <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>firing<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						list <span class="token operator">=</span> memory <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token comment">//判断列表是否已经被锁定</span>
				<span class="token function-variable function">locked</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span>locked<span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token comment">//触发回调</span>
				<span class="token comment">// Call all callbacks with the given context and arguments</span>
				<span class="token function-variable function">fireWith</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>locked<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						args <span class="token operator">=</span> args <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
						args <span class="token operator">=</span> <span class="token punctuation">[</span>context<span class="token punctuation">,</span> args<span class="token punctuation">.</span>slice <span class="token operator">?</span> args<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> args<span class="token punctuation">]</span><span class="token punctuation">;</span>
						<span class="token comment">//将实参存放到队列中</span>
						queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token comment">//如果还没触发则触发</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>firing<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token function">fire</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>

				<span class="token comment">// Call all the callbacks with the given arguments</span>
				<span class="token function-variable function">fire</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					self<span class="token punctuation">.</span><span class="token function">fireWith</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token comment">//判断回调列表是否已经被调用了</span>
				<span class="token comment">// To know if the callbacks have already been called at least once</span>
				<span class="token function-variable function">fired</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span>fired<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> self<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>


	<span class="token keyword">function</span> <span class="token function">Identity</span> <span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> v<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">function</span> <span class="token function">Thrower</span> <span class="token punctuation">(</span><span class="token parameter">ex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">throw</span> ex<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">function</span> <span class="token function">adoptValue</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> resolve<span class="token punctuation">,</span> reject<span class="token punctuation">,</span> noValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> method<span class="token punctuation">;</span>

		<span class="token keyword">try</span> <span class="token punctuation">{</span>

			<span class="token comment">// Check for promise aspect first to privilege synchronous behavior</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">&amp;&amp;</span> <span class="token function">isFunction</span><span class="token punctuation">(</span><span class="token punctuation">(</span>method <span class="token operator">=</span> value<span class="token punctuation">.</span>promise<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">method</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span>reject<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Other thenables</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">&amp;&amp;</span> <span class="token function">isFunction</span><span class="token punctuation">(</span><span class="token punctuation">(</span>method <span class="token operator">=</span> value<span class="token punctuation">.</span>then<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">method</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Other non-thenables</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

				<span class="token comment">// Control `resolve` arguments by letting Array#slice cast boolean `noValue` to integer:</span>
				<span class="token comment">// * false: [ value ].slice( 0 ) =&gt; resolve( value )</span>
				<span class="token comment">// * true: [ value ].slice( 1 ) =&gt; resolve()</span>
				<span class="token function">resolve</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>value<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>noValue<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// For Promises/A+, convert exceptions into rejections</span>
			<span class="token comment">// Since jQuery.when doesn't unwrap thenables, we can skip the extra checks appearing in</span>
			<span class="token comment">// Deferred#then to conditionally suppress rejection.</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// Support: Android 4.0 only</span>
			<span class="token comment">// Strict mode functions invoked without .call/.apply get global-object context</span>
			<span class="token function">reject</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>value<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//promise的实现 本质上利用了闭包</span>
	<span class="token comment">//jQuery.Deferred()返回了一个对象，被该函数上下文以外的上下文占用，就会形成不会释放的函数上下文，从而形成闭包</span>
	jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token comment">//</span>
		<span class="token function-variable function">Deferred</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">func</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> tuples <span class="token operator">=</span> <span class="token punctuation">[</span>
				<span class="token comment">// [0][2] [0][3] [1][2],[1][3],[2][2],[2][3]</span>
				<span class="token comment">// action, add listener, callbacks,</span>
				<span class="token comment">// ... .then handlers, argument index, [final state]</span>
				<span class="token punctuation">[</span><span class="token string">&quot;notify&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;progress&quot;</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span><span class="token function">Callbacks</span><span class="token punctuation">(</span><span class="token string">&quot;memory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					jQuery<span class="token punctuation">.</span><span class="token function">Callbacks</span><span class="token punctuation">(</span><span class="token string">&quot;memory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
				<span class="token punctuation">[</span><span class="token string">&quot;resolve&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;done&quot;</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span><span class="token function">Callbacks</span><span class="token punctuation">(</span><span class="token string">&quot;once memory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					jQuery<span class="token punctuation">.</span><span class="token function">Callbacks</span><span class="token punctuation">(</span><span class="token string">&quot;once memory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;resolved&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
				<span class="token punctuation">[</span><span class="token string">&quot;reject&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;fail&quot;</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span><span class="token function">Callbacks</span><span class="token punctuation">(</span><span class="token string">&quot;once memory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					jQuery<span class="token punctuation">.</span><span class="token function">Callbacks</span><span class="token punctuation">(</span><span class="token string">&quot;once memory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;rejected&quot;</span><span class="token punctuation">]</span>
			<span class="token punctuation">]</span><span class="token punctuation">,</span>
				<span class="token comment">//一开始是等待态</span>
				state <span class="token operator">=</span> <span class="token string">&quot;pending&quot;</span><span class="token punctuation">,</span>
				promise <span class="token operator">=</span> <span class="token punctuation">{</span>
					<span class="token comment">//状态</span>
					<span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> state<span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
					<span class="token function-variable function">always</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">//成功函数和失败函数</span>
						deferred<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
					<span class="token comment">//跟promise的catch的功能一样</span>
					<span class="token string-property property">&quot;catch&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>

					<span class="token comment">// Keep pipe for back-compat</span>
					<span class="token function-variable function">pipe</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span> <span class="token comment">/* fnDone, fnFail, fnProgress */</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> fns <span class="token operator">=</span> arguments<span class="token punctuation">;</span>

						<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">Deferred</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">newDefer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>tuples<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_i<span class="token punctuation">,</span> tuple</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

								<span class="token comment">// Map tuples (progress, done, fail) to arguments (done, fail, progress)</span>
								<span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token function">isFunction</span><span class="token punctuation">(</span>fns<span class="token punctuation">[</span>tuple<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> fns<span class="token punctuation">[</span>tuple<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

								<span class="token comment">// deferred.progress(function() { bind to newDefer or newDefer.notify })</span>
								<span class="token comment">// deferred.done(function() { bind to newDefer or newDefer.resolve })</span>
								<span class="token comment">// deferred.fail(function() { bind to newDefer or newDefer.reject })</span>
								deferred<span class="token punctuation">[</span>tuple<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token keyword">var</span> returned <span class="token operator">=</span> fn <span class="token operator">&amp;&amp;</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
									<span class="token keyword">if</span> <span class="token punctuation">(</span>returned <span class="token operator">&amp;&amp;</span> <span class="token function">isFunction</span><span class="token punctuation">(</span>returned<span class="token punctuation">.</span>promise<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
										returned<span class="token punctuation">.</span><span class="token function">promise</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
											<span class="token punctuation">.</span><span class="token function">progress</span><span class="token punctuation">(</span>newDefer<span class="token punctuation">.</span>notify<span class="token punctuation">)</span>
											<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span>newDefer<span class="token punctuation">.</span>resolve<span class="token punctuation">)</span>
											<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span>newDefer<span class="token punctuation">.</span>reject<span class="token punctuation">)</span><span class="token punctuation">;</span>
									<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
										newDefer<span class="token punctuation">[</span>tuple<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot;With&quot;</span><span class="token punctuation">]</span><span class="token punctuation">(</span>
											<span class="token keyword">this</span><span class="token punctuation">,</span>
											fn <span class="token operator">?</span> <span class="token punctuation">[</span>returned<span class="token punctuation">]</span> <span class="token operator">:</span> arguments
										<span class="token punctuation">)</span><span class="token punctuation">;</span>
									<span class="token punctuation">}</span>
								<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							fns <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">promise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
					<span class="token function-variable function">then</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">onFulfilled<span class="token punctuation">,</span> onRejected<span class="token punctuation">,</span> onProgress</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> maxDepth <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
						<span class="token comment">//跟promise的resolvePromise一样</span>
						<span class="token keyword">function</span> <span class="token function">resolve</span> <span class="token punctuation">(</span><span class="token parameter">depth<span class="token punctuation">,</span> deferred<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> special</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span>
									args <span class="token operator">=</span> arguments<span class="token punctuation">,</span>
									<span class="token function-variable function">mightThrow</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
										<span class="token keyword">var</span> returned<span class="token punctuation">,</span> then<span class="token punctuation">;</span>

										<span class="token comment">// Support: Promises/A+ section 2.3.3.3.3</span>
										<span class="token comment">// https://promisesaplus.com/#point-59</span>
										<span class="token comment">// Ignore double-resolution attempts</span>
										<span class="token keyword">if</span> <span class="token punctuation">(</span>depth <span class="token operator">&lt;</span> maxDepth<span class="token punctuation">)</span> <span class="token punctuation">{</span>
											<span class="token keyword">return</span><span class="token punctuation">;</span>
										<span class="token punctuation">}</span>

										returned <span class="token operator">=</span> <span class="token function">handler</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>that<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>

										<span class="token comment">// Support: Promises/A+ section 2.3.1</span>
										<span class="token comment">// https://promisesaplus.com/#point-48</span>
										<span class="token keyword">if</span> <span class="token punctuation">(</span>returned <span class="token operator">===</span> deferred<span class="token punctuation">.</span><span class="token function">promise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
											<span class="token comment">//引用自身</span>
											<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">&quot;Thenable self-resolution&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
										<span class="token punctuation">}</span>

										<span class="token comment">// Support: Promises/A+ sections 2.3.3.1, 3.5</span>
										<span class="token comment">// https://promisesaplus.com/#point-54</span>
										<span class="token comment">// https://promisesaplus.com/#point-75</span>
										<span class="token comment">// Retrieve `then` only once</span>
										<span class="token comment">//获取then方法</span>
										then <span class="token operator">=</span> returned <span class="token operator">&amp;&amp;</span>

											<span class="token comment">// Support: Promises/A+ section 2.3.4</span>
											<span class="token comment">// https://promisesaplus.com/#point-64</span>
											<span class="token comment">// Only check objects and functions for thenability</span>
											<span class="token punctuation">(</span><span class="token keyword">typeof</span> returned <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">||</span>
												<span class="token keyword">typeof</span> returned <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
											returned<span class="token punctuation">.</span>then<span class="token punctuation">;</span>
										<span class="token comment">//判断then是否是一个函数</span>
										<span class="token comment">// Handle a returned thenable</span>
										<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFunction</span><span class="token punctuation">(</span>then<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
											<span class="token comment">//returned相当于this</span>
											<span class="token comment">// Special processors (notify) just wait for resolution</span>
											<span class="token keyword">if</span> <span class="token punctuation">(</span>special<span class="token punctuation">)</span> <span class="token punctuation">{</span>
												<span class="token function">then</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>
													returned<span class="token punctuation">,</span>
													<span class="token function">resolve</span><span class="token punctuation">(</span>maxDepth<span class="token punctuation">,</span> deferred<span class="token punctuation">,</span> Identity<span class="token punctuation">,</span> special<span class="token punctuation">)</span><span class="token punctuation">,</span>
													<span class="token function">resolve</span><span class="token punctuation">(</span>maxDepth<span class="token punctuation">,</span> deferred<span class="token punctuation">,</span> Thrower<span class="token punctuation">,</span> special<span class="token punctuation">)</span>
												<span class="token punctuation">)</span><span class="token punctuation">;</span>

												<span class="token comment">// Normal processors (resolve) also hook into progress</span>
											<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

												<span class="token comment">// ...and disregard older resolution values</span>
												maxDepth<span class="token operator">++</span><span class="token punctuation">;</span>

												<span class="token function">then</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>
													returned<span class="token punctuation">,</span>
													<span class="token function">resolve</span><span class="token punctuation">(</span>maxDepth<span class="token punctuation">,</span> deferred<span class="token punctuation">,</span> Identity<span class="token punctuation">,</span> special<span class="token punctuation">)</span><span class="token punctuation">,</span>
													<span class="token function">resolve</span><span class="token punctuation">(</span>maxDepth<span class="token punctuation">,</span> deferred<span class="token punctuation">,</span> Thrower<span class="token punctuation">,</span> special<span class="token punctuation">)</span><span class="token punctuation">,</span>
													<span class="token function">resolve</span><span class="token punctuation">(</span>maxDepth<span class="token punctuation">,</span> deferred<span class="token punctuation">,</span> Identity<span class="token punctuation">,</span>
														deferred<span class="token punctuation">.</span>notifyWith<span class="token punctuation">)</span>
												<span class="token punctuation">)</span><span class="token punctuation">;</span>
											<span class="token punctuation">}</span>

											<span class="token comment">// Handle all other returned values</span>
										<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

											<span class="token comment">// Only substitute handlers pass on context</span>
											<span class="token comment">// and multiple values (non-spec behavior)</span>
											<span class="token keyword">if</span> <span class="token punctuation">(</span>handler <span class="token operator">!==</span> Identity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
												that <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
												args <span class="token operator">=</span> <span class="token punctuation">[</span>returned<span class="token punctuation">]</span><span class="token punctuation">;</span>
											<span class="token punctuation">}</span>
											<span class="token comment">//如果不是函数，则执行执行resolveWith</span>
											<span class="token comment">// Process the value(s)</span>
											<span class="token comment">// Default process is resolve</span>
											<span class="token punctuation">(</span>special <span class="token operator">||</span> deferred<span class="token punctuation">.</span>resolveWith<span class="token punctuation">)</span><span class="token punctuation">(</span>that<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
										<span class="token punctuation">}</span>
									<span class="token punctuation">}</span><span class="token punctuation">,</span>
									<span class="token comment">//本质上都是执行mightThrow</span>
									<span class="token comment">// Only normal processors (resolve) catch and reject exceptions</span>
									process <span class="token operator">=</span> special <span class="token operator">?</span>
										<span class="token function-variable function">mightThrow</span> <span class="token operator">:</span>
										<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
											<span class="token keyword">try</span> <span class="token punctuation">{</span>
												<span class="token function">mightThrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
											<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>

												<span class="token keyword">if</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>Deferred<span class="token punctuation">.</span>exceptionHook<span class="token punctuation">)</span> <span class="token punctuation">{</span>
													jQuery<span class="token punctuation">.</span>Deferred<span class="token punctuation">.</span><span class="token function">exceptionHook</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span>
														process<span class="token punctuation">.</span>stackTrace<span class="token punctuation">)</span><span class="token punctuation">;</span>
												<span class="token punctuation">}</span>

												<span class="token comment">// Support: Promises/A+ section 2.3.3.3.4.1</span>
												<span class="token comment">// https://promisesaplus.com/#point-61</span>
												<span class="token comment">// Ignore post-resolution exceptions</span>
												<span class="token keyword">if</span> <span class="token punctuation">(</span>depth <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&gt;=</span> maxDepth<span class="token punctuation">)</span> <span class="token punctuation">{</span>

													<span class="token comment">// Only substitute handlers pass on context</span>
													<span class="token comment">// and multiple values (non-spec behavior)</span>
													<span class="token keyword">if</span> <span class="token punctuation">(</span>handler <span class="token operator">!==</span> Thrower<span class="token punctuation">)</span> <span class="token punctuation">{</span>
														that <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
														args <span class="token operator">=</span> <span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">;</span>
													<span class="token punctuation">}</span>

													deferred<span class="token punctuation">.</span><span class="token function">rejectWith</span><span class="token punctuation">(</span>that<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
												<span class="token punctuation">}</span>
											<span class="token punctuation">}</span>
										<span class="token punctuation">}</span><span class="token punctuation">;</span>

								<span class="token comment">// Support: Promises/A+ section 2.3.3.3.1</span>
								<span class="token comment">// https://promisesaplus.com/#point-57</span>
								<span class="token comment">// Re-resolve promises immediately to dodge false rejection from</span>
								<span class="token comment">// subsequent errors</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span>depth<span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token function">process</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

									<span class="token comment">// Call an optional hook to record the stack, in case of exception</span>
									<span class="token comment">// since it's otherwise lost when execution goes async</span>
									<span class="token keyword">if</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>Deferred<span class="token punctuation">.</span>getStackHook<span class="token punctuation">)</span> <span class="token punctuation">{</span>
										process<span class="token punctuation">.</span>stackTrace <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>Deferred<span class="token punctuation">.</span><span class="token function">getStackHook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
									<span class="token punctuation">}</span>
									window<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span>process<span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						<span class="token comment">//最终返回一个deffered对象</span>
						<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">Deferred</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">newDefer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token comment">//往list添加回调函数</span>
							<span class="token comment">// progress_handlers.add( ... )</span>
							tuples<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
								<span class="token function">resolve</span><span class="token punctuation">(</span>
									<span class="token number">0</span><span class="token punctuation">,</span>
									newDefer<span class="token punctuation">,</span>
									<span class="token function">isFunction</span><span class="token punctuation">(</span>onProgress<span class="token punctuation">)</span> <span class="token operator">?</span>
										<span class="token literal-property property">onProgress</span> <span class="token operator">:</span>
										Identity<span class="token punctuation">,</span>
									newDefer<span class="token punctuation">.</span>notifyWith
								<span class="token punctuation">)</span>
							<span class="token punctuation">)</span><span class="token punctuation">;</span>

							<span class="token comment">// fulfilled_handlers.add( ... )</span>
							tuples<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
								<span class="token function">resolve</span><span class="token punctuation">(</span>
									<span class="token number">0</span><span class="token punctuation">,</span>
									newDefer<span class="token punctuation">,</span>
									<span class="token function">isFunction</span><span class="token punctuation">(</span>onFulfilled<span class="token punctuation">)</span> <span class="token operator">?</span>
										<span class="token literal-property property">onFulfilled</span> <span class="token operator">:</span>
										Identity
								<span class="token punctuation">)</span>
							<span class="token punctuation">)</span><span class="token punctuation">;</span>

							<span class="token comment">// rejected_handlers.add( ... )</span>
							tuples<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
								<span class="token function">resolve</span><span class="token punctuation">(</span>
									<span class="token number">0</span><span class="token punctuation">,</span>
									newDefer<span class="token punctuation">,</span>
									<span class="token function">isFunction</span><span class="token punctuation">(</span>onRejected<span class="token punctuation">)</span> <span class="token operator">?</span>
										<span class="token literal-property property">onRejected</span> <span class="token operator">:</span>
										Thrower
								<span class="token punctuation">)</span>
							<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">promise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>

					<span class="token comment">// Get a promise for this deferred</span>
					<span class="token comment">// If obj is provided, the promise aspect is added to the object</span>
					<span class="token function-variable function">promise</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> obj <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> promise<span class="token punctuation">)</span> <span class="token operator">:</span> promise<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				deferred <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token comment">// Add list-specific methods</span>
			jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>tuples<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i<span class="token punctuation">,</span> tuple</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">//list是JQuery.CallBacks()的返回值</span>
				<span class="token keyword">var</span> list <span class="token operator">=</span> tuple<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
					<span class="token comment">//表示promise的状态</span>
					stateString <span class="token operator">=</span> tuple<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token comment">//给promise对象添加方法</span>
				<span class="token comment">// promise.progress = list.add</span>
				<span class="token comment">// promise.done = list.add</span>
				<span class="token comment">// promise.fail = list.add</span>
				promise<span class="token punctuation">[</span>tuple<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> list<span class="token punctuation">.</span>add<span class="token punctuation">;</span>
				<span class="token comment">//tateString的值为 resolve或者rejected</span>
				<span class="token comment">// Handle states</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>stateString<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">//往回调队列里添加回调函数</span>
					list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
						<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token comment">//修改promise的状态将0改成 1 或者 2</span>
							<span class="token comment">// state = &quot;resolved&quot; (i.e., fulfilled)</span>
							<span class="token comment">// state = &quot;rejected&quot;</span>
							state <span class="token operator">=</span> stateString<span class="token punctuation">;</span>
						<span class="token punctuation">}</span><span class="token punctuation">,</span>
						<span class="token comment">//成功或失败的回调的disable方法</span>
						<span class="token comment">// rejected_callbacks.disable</span>
						<span class="token comment">// fulfilled_callbacks.disable</span>
						tuples<span class="token punctuation">[</span><span class="token number">3</span> <span class="token operator">-</span> i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>disable<span class="token punctuation">,</span>

						<span class="token comment">// rejected_handlers.disable</span>
						<span class="token comment">// fulfilled_handlers.disable</span>
						tuples<span class="token punctuation">[</span><span class="token number">3</span> <span class="token operator">-</span> i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>disable<span class="token punctuation">,</span>

						<span class="token comment">// progress_callbacks.lock</span>
						tuples<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>lock<span class="token punctuation">,</span>

						<span class="token comment">// progress_handlers.lock</span>
						tuples<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>lock
					<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token comment">//添加触发函数</span>
				<span class="token comment">// progress_handlers.fire</span>
				<span class="token comment">// fulfilled_handlers.fire</span>
				<span class="token comment">// rejected_handlers.fire</span>
				list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>tuple<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>fire<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">//给deffered对象添加方法 本质上是调用fire方法，清空list队列</span>
				<span class="token comment">// deferred.notify = function() { deferred.notifyWith(...) }</span>
				<span class="token comment">// deferred.resolve = function() { deferred.resolveWith(...) }</span>
				<span class="token comment">// deferred.reject = function() { deferred.rejectWith(...) }</span>
				deferred<span class="token punctuation">[</span>tuple<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					deferred<span class="token punctuation">[</span>tuple<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot;With&quot;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">===</span> deferred <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">;</span>
				<span class="token comment">//给deferred对象赋值</span>
				<span class="token comment">// deferred.notifyWith = list.fireWith</span>
				<span class="token comment">// deferred.resolveWith = list.fireWith</span>
				<span class="token comment">// deferred.rejectWith = list.fireWith</span>
				deferred<span class="token punctuation">[</span>tuple<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot;With&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> list<span class="token punctuation">.</span>fireWith<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//给deffereddui对象添加promise对象上的属性</span>
			<span class="token comment">// Make the deferred a promise</span>
			promise<span class="token punctuation">.</span><span class="token function">promise</span><span class="token punctuation">(</span>deferred<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//执行给的func</span>
			<span class="token comment">// Call given func if any</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>func<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">func</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>deferred<span class="token punctuation">,</span> deferred<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">//最终返回deffered对象</span>
			<span class="token comment">// All done!</span>
			<span class="token keyword">return</span> deferred<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">// Deferred helper</span>
		<span class="token function-variable function">when</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">singleValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span>

				<span class="token comment">// count of uncompleted subordinates</span>
				remaining <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
				<span class="token comment">//未处理的参数的个数</span>
				<span class="token comment">// count of unprocessed arguments</span>
				i <span class="token operator">=</span> remaining<span class="token punctuation">,</span>
				<span class="token comment">//构造一个数组</span>
				<span class="token comment">// subordinate fulfillment data</span>
				resolveContexts <span class="token operator">=</span> <span class="token function">Array</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token comment">//拷贝参数</span>
				resolveValues <span class="token operator">=</span> <span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">,</span>

				<span class="token comment">// the master Deferred 实例化一个deffered对象</span>
				master <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">Deferred</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

				<span class="token comment">// subordinate callback factory</span>
				<span class="token function-variable function">updateFunc</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						resolveContexts<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
						resolveValues<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span> <span class="token operator">:</span> value<span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">--</span>remaining<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							master<span class="token punctuation">.</span><span class="token function">resolveWith</span><span class="token punctuation">(</span>resolveContexts<span class="token punctuation">,</span> resolveValues<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token comment">// Single- and empty arguments are adopted like Promise.resolve</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>remaining <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">adoptValue</span><span class="token punctuation">(</span>singleValue<span class="token punctuation">,</span> master<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token function">updateFunc</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>resolve<span class="token punctuation">,</span> master<span class="token punctuation">.</span>reject<span class="token punctuation">,</span>
					<span class="token operator">!</span>remaining<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Use .then() to unwrap secondary thenables (cf. gh-3000)</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>master<span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;pending&quot;</span> <span class="token operator">||</span>
					<span class="token function">isFunction</span><span class="token punctuation">(</span>resolveValues<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> resolveValues<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>then<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">//返回promise对象</span>
					<span class="token keyword">return</span> master<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Multiple arguments are aggregated like Promise.all array elements</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">adoptValue</span><span class="token punctuation">(</span>resolveValues<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function">updateFunc</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> master<span class="token punctuation">.</span>reject<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">//返回promise对象	</span>
			<span class="token keyword">return</span> master<span class="token punctuation">.</span><span class="token function">promise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


	<span class="token comment">// These usually indicate a programmer mistake during development,</span>
	<span class="token comment">// warn about them ASAP rather than swallowing them by default.</span>
	<span class="token keyword">var</span> rerrorNames <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
	<span class="token comment">//异常捕获钩子</span>
	jQuery<span class="token punctuation">.</span>Deferred<span class="token punctuation">.</span><span class="token function-variable function">exceptionHook</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> stack</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token comment">// Support: IE 8 - 9 only</span>
		<span class="token comment">// Console exists when dev tools are open, which can happen at any time</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>console <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>console<span class="token punctuation">.</span>warn <span class="token operator">&amp;&amp;</span> error <span class="token operator">&amp;&amp;</span> rerrorNames<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			window<span class="token punctuation">.</span>console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;jQuery.Deferred exception: &quot;</span> <span class="token operator">+</span> error<span class="token punctuation">.</span>message<span class="token punctuation">,</span> error<span class="token punctuation">.</span>stack<span class="token punctuation">,</span> stack<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>




	jQuery<span class="token punctuation">.</span><span class="token function-variable function">readyException</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		window<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> error<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>


	<span class="token comment">//用于dom ready的deffered对象</span>

	<span class="token comment">// The deferred used on DOM ready</span>
	<span class="token keyword">var</span> readyList <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">Deferred</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">ready</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		readyList
			<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>

			<span class="token comment">// Wrap jQuery.readyException in a function so that the lookup</span>
			<span class="token comment">// happens at the time of error handling instead of callback</span>
			<span class="token comment">// registration.</span>
			<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span><span class="token function">readyException</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

		<span class="token comment">// Is the DOM ready to be used? Set to true once it occurs.</span>
		<span class="token literal-property property">isReady</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

		<span class="token comment">// A counter to track how many items to wait for before</span>
		<span class="token comment">// the ready event fires. See #6781</span>
		<span class="token literal-property property">readyWait</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>

		<span class="token comment">// Handle when the DOM is ready</span>
		<span class="token function-variable function">ready</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">wait</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// Abort if there are pending holds or we're already ready</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>wait <span class="token operator">===</span> <span class="token boolean">true</span> <span class="token operator">?</span> <span class="token operator">--</span>jQuery<span class="token punctuation">.</span>readyWait <span class="token operator">:</span> jQuery<span class="token punctuation">.</span>isReady<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Remember that the DOM is ready</span>
			jQuery<span class="token punctuation">.</span>isReady <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

			<span class="token comment">// If a normal DOM Ready event fired, decrement, and wait if need be</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>wait <span class="token operator">!==</span> <span class="token boolean">true</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">--</span>jQuery<span class="token punctuation">.</span>readyWait <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// If there are functions bound, to execute</span>
			readyList<span class="token punctuation">.</span><span class="token function">resolveWith</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> <span class="token punctuation">[</span>jQuery<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	jQuery<span class="token punctuation">.</span>ready<span class="token punctuation">.</span>then <span class="token operator">=</span> readyList<span class="token punctuation">.</span>then<span class="token punctuation">;</span>

	<span class="token comment">// The ready event handler and self cleanup method</span>
	<span class="token keyword">function</span> <span class="token function">completed</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		document<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;DOMContentLoaded&quot;</span><span class="token punctuation">,</span> completed<span class="token punctuation">)</span><span class="token punctuation">;</span>
		window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;load&quot;</span><span class="token punctuation">,</span> completed<span class="token punctuation">)</span><span class="token punctuation">;</span>
		jQuery<span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Catch cases where $(document).ready() is called</span>
	<span class="token comment">// after the browser event has already occurred.</span>
	<span class="token comment">// Support: IE &lt;=9 - 10 only</span>
	<span class="token comment">// Older IE sometimes signals &quot;interactive&quot; too soon</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token string">&quot;complete&quot;</span> <span class="token operator">||</span>
		<span class="token punctuation">(</span>document<span class="token punctuation">.</span>readyState <span class="token operator">!==</span> <span class="token string">&quot;loading&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>doScroll<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token comment">// Handle it asynchronously to allow scripts the opportunity to delay ready</span>
		window<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>ready<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

		<span class="token comment">// Use the handy event callback</span>
		document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;DOMContentLoaded&quot;</span><span class="token punctuation">,</span> completed<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// A fallback to window.onload, that will always work</span>
		window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;load&quot;</span><span class="token punctuation">,</span> completed<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>




	<span class="token comment">// Multifunctional method to get and set values of a collection</span>
	<span class="token comment">// The value/s can optionally be executed if it's a function</span>
	<span class="token keyword">var</span> <span class="token function-variable function">access</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elems<span class="token punctuation">,</span> fn<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> chainable<span class="token punctuation">,</span> emptyGet<span class="token punctuation">,</span> raw</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
			len <span class="token operator">=</span> elems<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
			bulk <span class="token operator">=</span> key <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

		<span class="token comment">// Sets many values</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">toType</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			chainable <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">access</span><span class="token punctuation">(</span>elems<span class="token punctuation">,</span> fn<span class="token punctuation">,</span> i<span class="token punctuation">,</span> key<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> emptyGet<span class="token punctuation">,</span> raw<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Sets one value</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			chainable <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isFunction</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				raw <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>bulk<span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Bulk operations run against the entire set</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>raw<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>elems<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
					fn <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

					<span class="token comment">// ...except when executing function values</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					bulk <span class="token operator">=</span> fn<span class="token punctuation">;</span>
					<span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> _key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> <span class="token function">bulk</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token function">jQuery</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">fn</span><span class="token punctuation">(</span>
						elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> raw <span class="token operator">?</span>
						<span class="token literal-property property">value</span> <span class="token operator">:</span>
						<span class="token function">value</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token function">fn</span><span class="token punctuation">(</span>elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">)</span>
					<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>chainable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> elems<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Gets</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>bulk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>elems<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> len <span class="token operator">?</span> <span class="token function">fn</span><span class="token punctuation">(</span>elems<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token operator">:</span> emptyGet<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>


	<span class="token comment">// Matches dashed string for camelizing</span>
	<span class="token keyword">var</span> rmsPrefix <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^-ms-</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		rdashAlpha <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">-([a-z])</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>

	<span class="token comment">// Used by camelCase as callback to replace()</span>
	<span class="token keyword">function</span> <span class="token function">fcamelCase</span> <span class="token punctuation">(</span><span class="token parameter">_all<span class="token punctuation">,</span> letter</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> letter<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Convert dashed to camelCase; used by the css and data modules</span>
	<span class="token comment">// Support: IE &lt;=9 - 11, Edge 12 - 15</span>
	<span class="token comment">// Microsoft forgot to hump their vendor prefix (#9572)</span>
	<span class="token keyword">function</span> <span class="token function">camelCase</span> <span class="token punctuation">(</span><span class="token parameter">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> string<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rmsPrefix<span class="token punctuation">,</span> <span class="token string">&quot;ms-&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rdashAlpha<span class="token punctuation">,</span> fcamelCase<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">var</span> <span class="token function-variable function">acceptData</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">owner</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token comment">// Accepts only:</span>
		<span class="token comment">//  - Node</span>
		<span class="token comment">//    - Node.ELEMENT_NODE</span>
		<span class="token comment">//    - Node.DOCUMENT_NODE</span>
		<span class="token comment">//  - Object</span>
		<span class="token comment">//    - Any</span>
		<span class="token keyword">return</span> owner<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">||</span> owner<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">9</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">+</span>owner<span class="token punctuation">.</span>nodeType<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>


	<span class="token comment">/*******************数据缓存相关*********************** */</span>
	<span class="token comment">//数据缓存系统</span>
	<span class="token keyword">function</span> <span class="token function">Data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//设置唯一值</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>expando <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>expando <span class="token operator">+</span> Data<span class="token punctuation">.</span>uid<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	Data<span class="token punctuation">.</span>uid <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

	<span class="token class-name">Data</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token comment">//初始化缓存对象</span>
		<span class="token function-variable function">cache</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">owner</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">//判断当前对象是否已经有一个缓存了</span>
			<span class="token comment">// Check if the owner object already has a cache</span>
			<span class="token keyword">var</span> value <span class="token operator">=</span> owner<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>expando<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token comment">//owner不是一个对象时，value也是undefined</span>
			<span class="token comment">// If not, create one</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

				<span class="token comment">// We can accept data for non-element nodes in modern browsers,</span>
				<span class="token comment">// but we should not, see #8335.</span>
				<span class="token comment">// Always return an empty object.</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">acceptData</span><span class="token punctuation">(</span>owner<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">//给owner添加唯一值</span>
					<span class="token comment">//判断是否是元素节点</span>
					<span class="token comment">// If it is a node unlikely to be stringify-ed or looped over</span>
					<span class="token comment">// use plain assignment</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>owner<span class="token punctuation">.</span>nodeType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">//给元素添加唯一属性，可以避免冲突</span>
						owner<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>expando<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>

						<span class="token comment">// Otherwise secure it in a non-enumerable property</span>
						<span class="token comment">// configurable must be true to allow the property to be</span>
						<span class="token comment">// deleted when data is removed</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						<span class="token comment">//给对象定义唯一属性，同样可以避免冲突</span>
						<span class="token comment">//defineProperty定义的属性默认是不能迭代的enumerable=false</span>
						Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>owner<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>expando<span class="token punctuation">,</span> <span class="token punctuation">{</span>
							<span class="token literal-property property">value</span><span class="token operator">:</span> value<span class="token punctuation">,</span>
							<span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">//表示value是可以被修改的</span>
						<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> value<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">//设置缓存</span>
		<span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">owner<span class="token punctuation">,</span> data<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> prop<span class="token punctuation">,</span>
				cache <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cache</span><span class="token punctuation">(</span>owner<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Handle: [ owner, key, value ] args</span>
			<span class="token comment">// Always use camelCase key (gh-2257)</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> data <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">//camelCase(data)使字符串首字母大写</span>
				<span class="token comment">//键为字符串的情况 设置缓存</span>
				cache<span class="token punctuation">[</span><span class="token function">camelCase</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>

				<span class="token comment">// Handle: [ owner, { properties } ] args</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token comment">//键为对象的情况</span>
				<span class="token comment">// 当data不是字符串的情况，对象或者数组</span>
				<span class="token comment">// Copy the properties one-by-one to the cache object</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span>prop <span class="token keyword">in</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					cache<span class="token punctuation">[</span><span class="token function">camelCase</span><span class="token punctuation">(</span>prop<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> cache<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">owner<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> key <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cache</span><span class="token punctuation">(</span>owner<span class="token punctuation">)</span> <span class="token operator">:</span>
				<span class="token comment">//owner[this.expando]=&gt;获取对象自身唯一属性的值</span>
				<span class="token comment">// Always use camelCase key (gh-2257)</span>
				owner<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>expando<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> owner<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>expando<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token function">camelCase</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">access</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">owner<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// In cases where either:</span>
			<span class="token comment">//</span>
			<span class="token comment">//   1. No key was specified</span>
			<span class="token comment">//   2. A string key was specified, but no value provided</span>
			<span class="token comment">//</span>
			<span class="token comment">// Take the &quot;read&quot; path and allow the get method to determine</span>
			<span class="token comment">// which value to return, respectively either:</span>
			<span class="token comment">//</span>
			<span class="token comment">//   1. The entire cache object</span>
			<span class="token comment">//   2. The data stored at the key</span>
			<span class="token comment">//</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">||</span>
				<span class="token punctuation">(</span><span class="token punctuation">(</span>key <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> key <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> value <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">//value不存在，key不存在或者key为string的情况</span>
				<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>owner<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// When the key is not a string, or both a key and value</span>
			<span class="token comment">// are specified, set or extend (existing objects) with either:</span>
			<span class="token comment">//</span>
			<span class="token comment">//   1. An object of properties</span>
			<span class="token comment">//   2. A key and value</span>
			<span class="token comment">//</span>
			<span class="token comment">//key和value同时存在的情况</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>owner<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Since the &quot;set&quot; path can have two possible entry points</span>
			<span class="token comment">// return the expected data based on which path was taken[*]</span>
			<span class="token keyword">return</span> value <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> value <span class="token operator">:</span> key<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">remove</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">owner<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> i<span class="token punctuation">,</span>
				cache <span class="token operator">=</span> owner<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>expando<span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>cache <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Support array or space separated string of keys</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// If key is an array of keys...</span>
					<span class="token comment">// We always set camelCase keys, so remove that.</span>
					key <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>camelCase<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					key <span class="token operator">=</span> <span class="token function">camelCase</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// If a key with the spaces exists, use it.</span>
					<span class="token comment">// Otherwise, create an array by matching non-whitespace</span>
					key <span class="token operator">=</span> key <span class="token keyword">in</span> cache <span class="token operator">?</span>
						<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">:</span>
						<span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>rnothtmlwhite<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				i <span class="token operator">=</span> key<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

				<span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">delete</span> cache<span class="token punctuation">[</span>key<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Remove the expando if there's no more data</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> jQuery<span class="token punctuation">.</span><span class="token function">isEmptyObject</span><span class="token punctuation">(</span>cache<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Support: Chrome &lt;=35 - 45</span>
				<span class="token comment">// Webkit &amp; Blink performance suffers when deleting properties</span>
				<span class="token comment">// from DOM nodes, so set to undefined instead</span>
				<span class="token comment">// https://bugs.chromium.org/p/chromium/issues/detail?id=378607 (bug restricted)</span>
				<span class="token comment">//如果是节点，则释放内存</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>owner<span class="token punctuation">.</span>nodeType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					owner<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>expando<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					<span class="token comment">//删除对象属性</span>
					<span class="token keyword">delete</span> owner<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>expando<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">hasData</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">owner</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> cache <span class="token operator">=</span> owner<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>expando<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token comment">//cache不等于undefined并且cache不是一个空对象</span>
			<span class="token keyword">return</span> cache <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span><span class="token function">isEmptyObject</span><span class="token punctuation">(</span>cache<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> dataPriv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">var</span> dataUser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



	<span class="token comment">//	Implementation Summary</span>
	<span class="token comment">//</span>
	<span class="token comment">//	1. Enforce API surface and semantic compatibility with 1.9.x branch</span>
	<span class="token comment">//	2. Improve the module's maintainability by reducing the storage</span>
	<span class="token comment">//		paths to a single mechanism.</span>
	<span class="token comment">//	3. Use the same single mechanism to support &quot;private&quot; and &quot;user&quot; data.</span>
	<span class="token comment">//	4. _Never_ expose &quot;private&quot; data to user code (TODO: Drop _data, _removeData)</span>
	<span class="token comment">//	5. Avoid exposing implementation details on user objects (eg. expando properties)</span>
	<span class="token comment">//	6. Provide a clear path for implementation upgrade to WeakMap in 2014</span>

	<span class="token keyword">var</span> rbrace <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:\{[\w\W]*\}|\[[\w\W]*\])$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		rmultiDash <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[A-Z]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>

	<span class="token keyword">function</span> <span class="token function">getData</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">===</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">===</span> <span class="token string">&quot;false&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">===</span> <span class="token string">&quot;null&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Only convert to a number if it doesn't change the string</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">===</span> <span class="token operator">+</span>data <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token operator">+</span>data<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>rbrace<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> data<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">function</span> <span class="token function">dataAttr</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> key<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> name<span class="token punctuation">;</span>

		<span class="token comment">// If nothing was found internally, try to fetch any</span>
		<span class="token comment">// data from the HTML5 data-* attribute</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			name <span class="token operator">=</span> <span class="token string">&quot;data-&quot;</span> <span class="token operator">+</span> key<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rmultiDash<span class="token punctuation">,</span> <span class="token string">&quot;-$&amp;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			data <span class="token operator">=</span> elem<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> data <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">try</span> <span class="token punctuation">{</span>
					data <span class="token operator">=</span> <span class="token function">getData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

				<span class="token comment">// Make sure we set the data so it isn't changed later</span>
				dataUser<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> key<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				data <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> data<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token function-variable function">hasData</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> dataUser<span class="token punctuation">.</span><span class="token function">hasData</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span> <span class="token operator">||</span> dataPriv<span class="token punctuation">.</span><span class="token function">hasData</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> dataUser<span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">removeData</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			dataUser<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">// TODO: Now that all calls to _data and _removeData have been replaced</span>
		<span class="token comment">// with direct calls to dataPriv methods, these can be deprecated.</span>
		<span class="token function-variable function">_data</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> dataPriv<span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">_removeData</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			dataPriv<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//缓存相关</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> i<span class="token punctuation">,</span> name<span class="token punctuation">,</span> data<span class="token punctuation">,</span>
				elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
				attrs <span class="token operator">=</span> elem <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>attributes<span class="token punctuation">;</span>

			<span class="token comment">// Gets all values 获取所有的属性值</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">//获取缓存对象</span>
					data <span class="token operator">=</span> dataUser<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>dataPriv<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;hasDataAttrs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						i <span class="token operator">=</span> attrs<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
						<span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

							<span class="token comment">// Support: IE 11 only</span>
							<span class="token comment">// The attrs elements can be null (#14894)</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>attrs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								name <span class="token operator">=</span> attrs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;data-&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
									name <span class="token operator">=</span> <span class="token function">camelCase</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
									<span class="token function">dataAttr</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> data<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>
						dataPriv<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;hasDataAttrs&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">return</span> data<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">//设置值</span>
			<span class="token comment">// Sets multiple values 直接将key里面的对象设置为key value</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> key <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					dataUser<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token function">access</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> data<span class="token punctuation">;</span>

				<span class="token comment">// The calling jQuery object (element matches) is not empty</span>
				<span class="token comment">// (and therefore has an element appears at this[ 0 ]) and the</span>
				<span class="token comment">// `value` parameter was not undefined. An empty jQuery object</span>
				<span class="token comment">// will result in `undefined` for elem = this[ 0 ] which will</span>
				<span class="token comment">// throw an exception if an attempt to read a data cache is made.</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>elem <span class="token operator">&amp;&amp;</span> value <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Attempt to get data from the cache</span>
					<span class="token comment">// The key will always be camelCased in Data</span>
					data <span class="token operator">=</span> dataUser<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> data<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token comment">//获取值</span>
					<span class="token comment">// Attempt to &quot;discover&quot; the data in</span>
					<span class="token comment">// HTML5 custom data-* attrs</span>
					data <span class="token operator">=</span> <span class="token function">dataAttr</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> data<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// We tried really hard, but the data doesn't exist.</span>
					<span class="token keyword">return</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token comment">//设置值</span>
				<span class="token comment">// Set the data...</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// We always store the camelCased key</span>
					dataUser<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> value<span class="token punctuation">,</span> arguments<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">removeData</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				dataUser<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">/****************缓存相关********************** */</span>
	<span class="token comment">//入队列和出队列</span>
	jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token comment">//入队</span>
		<span class="token function-variable function">queue</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> type<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> queue<span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				type <span class="token operator">=</span> <span class="token punctuation">(</span>type <span class="token operator">||</span> <span class="token string">&quot;fx&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;queue&quot;</span><span class="token punctuation">;</span>
				<span class="token comment">//获取队里缓存</span>
				queue <span class="token operator">=</span> dataPriv<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Speed up dequeue by getting out quickly if this is just a lookup</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">//queue不存在，且data是数组的情况</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>queue <span class="token operator">||</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">//type和jQuery.makeArray(data)同时存在的情况下 acces函数会做两件事情，1、设置缓存；2、返回队列初始值(jQuery.makeArray(data))</span>
						queue <span class="token operator">=</span> dataPriv<span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> type<span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						<span class="token comment">//queue存在，且data不是数组的情况</span>
						queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">return</span> queue <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">//出队</span>
		<span class="token function-variable function">dequeue</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			type <span class="token operator">=</span> type <span class="token operator">||</span> <span class="token string">&quot;fx&quot;</span><span class="token punctuation">;</span>

			<span class="token keyword">var</span> queue <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">,</span>
				startLength <span class="token operator">=</span> queue<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
				fn <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				hooks <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">_queueHooks</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token function-variable function">next</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					jQuery<span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token comment">// If the fx queue is dequeued, always remove the progress sentinel</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>fn <span class="token operator">===</span> <span class="token string">&quot;inprogress&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				fn <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				startLength<span class="token operator">--</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// Add a progress sentinel to prevent the fx queue from being</span>
				<span class="token comment">// automatically dequeued</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&quot;fx&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">//表示该动画正在执行中 </span>
					<span class="token comment">//添加进程锁，只能保证在dequeue的时候，不被queue操作意外的破坏队列</span>
					queue<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token string">&quot;inprogress&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Clear up the last queue stop function</span>
				<span class="token keyword">delete</span> hooks<span class="token punctuation">.</span>stop<span class="token punctuation">;</span>
				<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> next<span class="token punctuation">,</span> hooks<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>startLength <span class="token operator">&amp;&amp;</span> hooks<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				hooks<span class="token punctuation">.</span>empty<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">//生成一个queueHooks对象，或者返回一个当前动画</span>
		<span class="token comment">// Not public - generate a queueHooks object, or return the current one</span>
		<span class="token function-variable function">_queueHooks</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> key <span class="token operator">=</span> type <span class="token operator">+</span> <span class="token string">&quot;queueHooks&quot;</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> dataPriv<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token operator">||</span> dataPriv<span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">empty</span><span class="token operator">:</span> jQuery<span class="token punctuation">.</span><span class="token function">Callbacks</span><span class="token punctuation">(</span><span class="token string">&quot;once memory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					dataPriv<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token punctuation">[</span>type <span class="token operator">+</span> <span class="token string">&quot;queue&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//队列基于动画的扩展接口</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token function-variable function">queue</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> setter <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
			<span class="token comment">//默认jquery的动画额type为fx，如果不是fx那就是自己的自定义动画</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> type <span class="token operator">!==</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				data <span class="token operator">=</span> type<span class="token punctuation">;</span>
				type <span class="token operator">=</span> <span class="token string">&quot;fx&quot;</span><span class="token punctuation">;</span>
				setter<span class="token operator">--</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">//只有动画的回调</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> setter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> data <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span>
				<span class="token keyword">this</span> <span class="token operator">:</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">//调用基础队列</span>
					<span class="token comment">//设置动画队列缓存</span>
					<span class="token comment">//并返回队列总数</span>
					<span class="token keyword">var</span> queue <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// Ensure a hooks for this queue</span>
					jQuery<span class="token punctuation">.</span><span class="token function">_queueHooks</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">//执行动画队列</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&quot;fx&quot;</span> <span class="token operator">&amp;&amp;</span> queue<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">&quot;inprogress&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">//如果队列没有被锁住，则移除队里第一个函数并执行它</span>
						jQuery<span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">dequeue</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">clearQueue</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span>type <span class="token operator">||</span> <span class="token string">&quot;fx&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">// Get a promise resolved when queues of a certain type</span>
		<span class="token comment">// are emptied (fx is the type by default)</span>
		<span class="token function-variable function">promise</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> tmp<span class="token punctuation">,</span>
				count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
				defer <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">Deferred</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				elements <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span>
				i <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span>
				<span class="token function-variable function">resolve</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">--</span>count<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						defer<span class="token punctuation">.</span><span class="token function">resolveWith</span><span class="token punctuation">(</span>elements<span class="token punctuation">,</span> <span class="token punctuation">[</span>elements<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> type <span class="token operator">!==</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				obj <span class="token operator">=</span> type<span class="token punctuation">;</span>
				type <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			type <span class="token operator">=</span> type <span class="token operator">||</span> <span class="token string">&quot;fx&quot;</span><span class="token punctuation">;</span>

			<span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				tmp <span class="token operator">=</span> dataPriv<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>elements<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> type <span class="token operator">+</span> <span class="token string">&quot;queueHooks&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>tmp <span class="token operator">&amp;&amp;</span> tmp<span class="token punctuation">.</span>empty<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					count<span class="token operator">++</span><span class="token punctuation">;</span>
					tmp<span class="token punctuation">.</span>empty<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			<span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> defer<span class="token punctuation">.</span><span class="token function">promise</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> pnum <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>source<span class="token punctuation">;</span>

	<span class="token keyword">var</span> rcssNum <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;^(?:([+-])=|)(&quot;</span> <span class="token operator">+</span> pnum <span class="token operator">+</span> <span class="token string">&quot;)([a-z%]*)$&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;i&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


	<span class="token keyword">var</span> cssExpand <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;Top&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Right&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Bottom&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Left&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

	<span class="token keyword">var</span> documentElement <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>



	<span class="token keyword">var</span> <span class="token function-variable function">isAttached</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>elem<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">,</span> elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
		composed <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">composed</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token comment">// Support: IE 9 - 11+, Edge 12 - 18+, iOS 10.0 - 10.2 only</span>
	<span class="token comment">// Check attachment across shadow DOM boundaries when possible (gh-3504)</span>
	<span class="token comment">// Support: iOS 10.0-10.2 only</span>
	<span class="token comment">// Early iOS 10 versions support `attachShadow` but not `getRootNode`,</span>
	<span class="token comment">// leading to errors. We need to check for `getRootNode`.</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>documentElement<span class="token punctuation">.</span>getRootNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function-variable function">isAttached</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>elem<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">,</span> elem<span class="token punctuation">)</span> <span class="token operator">||</span>
				elem<span class="token punctuation">.</span><span class="token function">getRootNode</span><span class="token punctuation">(</span>composed<span class="token punctuation">)</span> <span class="token operator">===</span> elem<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">var</span> <span class="token function-variable function">isHiddenWithinTree</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token comment">// isHiddenWithinTree might be called from jQuery#filter function;</span>
		<span class="token comment">// in that case, element will be second argument</span>
		elem <span class="token operator">=</span> el <span class="token operator">||</span> elem<span class="token punctuation">;</span>

		<span class="token comment">// Inline style trumps all</span>
		<span class="token keyword">return</span> elem<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">===</span> <span class="token string">&quot;none&quot;</span> <span class="token operator">||</span>
			elem<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">===</span> <span class="token string">&quot;&quot;</span> <span class="token operator">&amp;&amp;</span>

			<span class="token comment">// Otherwise, check computed style</span>
			<span class="token comment">// Support: Firefox &lt;=43 - 45</span>
			<span class="token comment">// Disconnected elements can have computed display: none, so first confirm that elem is</span>
			<span class="token comment">// in the document.</span>
			<span class="token function">isAttached</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>

			jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;display&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>



	<span class="token keyword">function</span> <span class="token function">adjustCSS</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> valueParts<span class="token punctuation">,</span> tween</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> adjusted<span class="token punctuation">,</span> scale<span class="token punctuation">,</span>
			maxIterations <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">,</span>
			currentValue <span class="token operator">=</span> tween <span class="token operator">?</span>
				<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> tween<span class="token punctuation">.</span><span class="token function">cur</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token operator">:</span>
				<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			initial <span class="token operator">=</span> <span class="token function">currentValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token comment">//+=10或者-=10</span>
			unit <span class="token operator">=</span> valueParts <span class="token operator">&amp;&amp;</span> valueParts<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>cssNumber<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

			<span class="token comment">// Starting value computation is required for potential unit mismatches</span>
			initialInUnit <span class="token operator">=</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">&amp;&amp;</span>
				<span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>cssNumber<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">||</span> unit <span class="token operator">!==</span> <span class="token string">&quot;px&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">+</span>initial<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
				rcssNum<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> prop<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>initialInUnit <span class="token operator">&amp;&amp;</span> initialInUnit<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">!==</span> unit<span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// Support: Firefox &lt;=54</span>
			<span class="token comment">// Halve the iteration target value to prevent interference from CSS upper bounds (gh-2144)</span>
			initial <span class="token operator">=</span> initial <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

			<span class="token comment">// Trust units reported by jQuery.css</span>
			unit <span class="token operator">=</span> unit <span class="token operator">||</span> initialInUnit<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token comment">// Iteratively approximate from a nonzero starting point</span>
			initialInUnit <span class="token operator">=</span> <span class="token operator">+</span>initial <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">;</span>

			<span class="token keyword">while</span> <span class="token punctuation">(</span>maxIterations<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Evaluate and update our best guess (doubling guesses that zero out).</span>
				<span class="token comment">// Finish if the scale equals or crosses 1 (making the old*new product non-positive).</span>
				jQuery<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> initialInUnit <span class="token operator">+</span> unit<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> scale<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> <span class="token punctuation">(</span>scale <span class="token operator">=</span> <span class="token function">currentValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> initial <span class="token operator">||</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					maxIterations <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				initialInUnit <span class="token operator">=</span> initialInUnit <span class="token operator">/</span> scale<span class="token punctuation">;</span>

			<span class="token punctuation">}</span>

			initialInUnit <span class="token operator">=</span> initialInUnit <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
			jQuery<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> initialInUnit <span class="token operator">+</span> unit<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Make sure we update the tween properties later on</span>
			valueParts <span class="token operator">=</span> valueParts <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>valueParts<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			initialInUnit <span class="token operator">=</span> <span class="token operator">+</span>initialInUnit <span class="token operator">||</span> <span class="token operator">+</span>initial <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">// Apply relative offset (+=/-=) if specified</span>
			adjusted <span class="token operator">=</span> valueParts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">?</span>
				initialInUnit <span class="token operator">+</span> <span class="token punctuation">(</span>valueParts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> valueParts<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">:</span>
				<span class="token operator">+</span>valueParts<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>tween<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				tween<span class="token punctuation">.</span>unit <span class="token operator">=</span> unit<span class="token punctuation">;</span>
				tween<span class="token punctuation">.</span>start <span class="token operator">=</span> initialInUnit<span class="token punctuation">;</span>
				tween<span class="token punctuation">.</span>end <span class="token operator">=</span> adjusted<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> adjusted<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>


	<span class="token keyword">var</span> defaultDisplayMap <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token keyword">function</span> <span class="token function">getDefaultDisplay</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> temp<span class="token punctuation">,</span>
			doc <span class="token operator">=</span> elem<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">,</span>
			nodeName <span class="token operator">=</span> elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">,</span>
			display <span class="token operator">=</span> defaultDisplayMap<span class="token punctuation">[</span>nodeName<span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>display<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> display<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		temp <span class="token operator">=</span> doc<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>nodeName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		display <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>temp<span class="token punctuation">,</span> <span class="token string">&quot;display&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		temp<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>display <span class="token operator">===</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			display <span class="token operator">=</span> <span class="token string">&quot;block&quot;</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		defaultDisplayMap<span class="token punctuation">[</span>nodeName<span class="token punctuation">]</span> <span class="token operator">=</span> display<span class="token punctuation">;</span>

		<span class="token keyword">return</span> display<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">function</span> <span class="token function">showHide</span> <span class="token punctuation">(</span><span class="token parameter">elements<span class="token punctuation">,</span> show</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> display<span class="token punctuation">,</span> elem<span class="token punctuation">,</span>
			values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
			length <span class="token operator">=</span> elements<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

		<span class="token comment">// Determine new display value for elements that need to change</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			elem <span class="token operator">=</span> elements<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>elem<span class="token punctuation">.</span>style<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">continue</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			display <span class="token operator">=</span> elem<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display<span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>show<span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Since we force visibility upon cascade-hidden elements, an immediate (and slow)</span>
				<span class="token comment">// check is required in this first loop unless we have a nonempty display value (either</span>
				<span class="token comment">// inline or about-to-be-restored)</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>display <span class="token operator">===</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					values<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> dataPriv<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;display&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>values<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						elem<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">===</span> <span class="token string">&quot;&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isHiddenWithinTree</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					values<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">getDefaultDisplay</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>display <span class="token operator">!==</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					values<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">;</span>

					<span class="token comment">// Remember what we're overwriting</span>
					dataPriv<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;display&quot;</span><span class="token punctuation">,</span> display<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Set the display of the elements in a second loop to avoid constant reflow</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>values<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				elements<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> values<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> elements<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token function-variable function">show</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">showHide</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">hide</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">showHide</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">toggle</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> state <span class="token operator">===</span> <span class="token string">&quot;boolean&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> state <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isHiddenWithinTree</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> rcheckableType <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:checkbox|radio)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">var</span> rtagName <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;([a-z][^\/\0&gt;\x20\t\r\n\f]*)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">var</span> rscriptType <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^$|^module$|\/(?:java|ecma)script</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>


	<span class="token comment">//兼容检测</span>

	<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> fragment <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			div <span class="token operator">=</span> fragment<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;input&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Support: Android 4.0 - 4.3 only</span>
		<span class="token comment">// Check state lost if the name is set (#11217)</span>
		<span class="token comment">// Support: Windows Web Apps (WWA)</span>
		<span class="token comment">// `name` and `type` must use .setAttribute for WWA (#14901)</span>
		input<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;radio&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		input<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;checked&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;checked&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		input<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		div<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Support: Android &lt;=4.1 only</span>
		<span class="token comment">// Older WebKit doesn't clone checked state correctly in fragments</span>
		support<span class="token punctuation">.</span>checkClone <span class="token operator">=</span> div<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span>lastChild<span class="token punctuation">.</span>checked<span class="token punctuation">;</span>

		<span class="token comment">// Support: IE &lt;=11 only</span>
		<span class="token comment">// Make sure textarea (and checkbox) defaultValue is properly cloned</span>
		div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;&lt;textarea&gt;x&lt;/textarea&gt;&quot;</span><span class="token punctuation">;</span>
		support<span class="token punctuation">.</span>noCloneChecked <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>div<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span>lastChild<span class="token punctuation">.</span>defaultValue<span class="token punctuation">;</span>

		<span class="token comment">// Support: IE &lt;=9 only</span>
		<span class="token comment">// IE &lt;=9 replaces &lt;option&gt; tags with their contents when inserted outside of</span>
		<span class="token comment">// the select element.</span>
		div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;&lt;option&gt;&lt;/option&gt;&quot;</span><span class="token punctuation">;</span>
		support<span class="token punctuation">.</span>option <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>div<span class="token punctuation">.</span>lastChild<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


	<span class="token comment">// We have to close these tags to support XHTML (#13200)</span>
	<span class="token keyword">var</span> wrapMap <span class="token operator">=</span> <span class="token punctuation">{</span>

		<span class="token comment">// XHTML parsers do not magically insert elements in the</span>
		<span class="token comment">// same way that tag soup parsers do. So we cannot shorten</span>
		<span class="token comment">// this by omitting &lt;tbody&gt; or other required elements.</span>
		<span class="token literal-property property">thead</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;&lt;table&gt;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&lt;/table&gt;&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token literal-property property">col</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;&lt;table&gt;&lt;colgroup&gt;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&lt;/colgroup&gt;&lt;/table&gt;&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token literal-property property">tr</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;&lt;table&gt;&lt;tbody&gt;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&lt;/tbody&gt;&lt;/table&gt;&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token literal-property property">td</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

		<span class="token literal-property property">_default</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	wrapMap<span class="token punctuation">.</span>tbody <span class="token operator">=</span> wrapMap<span class="token punctuation">.</span>tfoot <span class="token operator">=</span> wrapMap<span class="token punctuation">.</span>colgroup <span class="token operator">=</span> wrapMap<span class="token punctuation">.</span>caption <span class="token operator">=</span> wrapMap<span class="token punctuation">.</span>thead<span class="token punctuation">;</span>
	wrapMap<span class="token punctuation">.</span>th <span class="token operator">=</span> wrapMap<span class="token punctuation">.</span>td<span class="token punctuation">;</span>

	<span class="token comment">// Support: IE &lt;=9 only</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>support<span class="token punctuation">.</span>option<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		wrapMap<span class="token punctuation">.</span>optgroup <span class="token operator">=</span> wrapMap<span class="token punctuation">.</span>option <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;&lt;select multiple='multiple'&gt;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&lt;/select&gt;&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>


	<span class="token keyword">function</span> <span class="token function">getAll</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> tag</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token comment">// Support: IE &lt;=9 - 11 only</span>
		<span class="token comment">// Use typeof to avoid zero-argument method invocation on host objects (#15151)</span>
		<span class="token keyword">var</span> ret<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> context<span class="token punctuation">.</span>getElementsByTagName <span class="token operator">!==</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			ret <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span>tag <span class="token operator">||</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> context<span class="token punctuation">.</span>querySelectorAll <span class="token operator">!==</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			ret <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span>tag <span class="token operator">||</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			ret <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>tag <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> tag <span class="token operator">&amp;&amp;</span> <span class="token function">nodeName</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> tag<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">[</span>context<span class="token punctuation">]</span><span class="token punctuation">,</span> ret<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>


	<span class="token comment">// Mark scripts as having already been evaluated</span>
	<span class="token keyword">function</span> <span class="token function">setGlobalEval</span> <span class="token punctuation">(</span><span class="token parameter">elems<span class="token punctuation">,</span> refElements</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
			l <span class="token operator">=</span> elems<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			dataPriv<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>
				elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>
				<span class="token string">&quot;globalEval&quot;</span><span class="token punctuation">,</span>
				<span class="token operator">!</span>refElements <span class="token operator">||</span> dataPriv<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>refElements<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;globalEval&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>


	<span class="token keyword">var</span> rhtml <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;|&amp;#?\w+;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>

	<span class="token keyword">function</span> <span class="token function">buildFragment</span> <span class="token punctuation">(</span><span class="token parameter">elems<span class="token punctuation">,</span> context<span class="token punctuation">,</span> scripts<span class="token punctuation">,</span> selection<span class="token punctuation">,</span> ignored</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> elem<span class="token punctuation">,</span> tmp<span class="token punctuation">,</span> tag<span class="token punctuation">,</span> wrap<span class="token punctuation">,</span> attached<span class="token punctuation">,</span> j<span class="token punctuation">,</span>
			fragment <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			nodes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
			l <span class="token operator">=</span> elems<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			elem <span class="token operator">=</span> elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>elem <span class="token operator">||</span> elem <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Add nodes directly</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">toType</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Support: Android &lt;=4.0 only, PhantomJS 1 only</span>
					<span class="token comment">// push.apply(_, arraylike) throws on ancient WebKit</span>
					jQuery<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>nodes<span class="token punctuation">,</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">?</span> <span class="token punctuation">[</span>elem<span class="token punctuation">]</span> <span class="token operator">:</span> elem<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// Convert non-html into a text node</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>rhtml<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					nodes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// Convert html into DOM nodes</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					tmp <span class="token operator">=</span> tmp <span class="token operator">||</span> fragment<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// Deserialize a standard representation</span>
					tag <span class="token operator">=</span> <span class="token punctuation">(</span>rtagName<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					wrap <span class="token operator">=</span> wrapMap<span class="token punctuation">[</span>tag<span class="token punctuation">]</span> <span class="token operator">||</span> wrapMap<span class="token punctuation">.</span>_default<span class="token punctuation">;</span>
					tmp<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> wrap<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> jQuery<span class="token punctuation">.</span><span class="token function">htmlPrefilter</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span> <span class="token operator">+</span> wrap<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

					<span class="token comment">// Descend through wrappers to the right content</span>
					j <span class="token operator">=</span> wrap<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
					<span class="token keyword">while</span> <span class="token punctuation">(</span>j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						tmp <span class="token operator">=</span> tmp<span class="token punctuation">.</span>lastChild<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// Support: Android &lt;=4.0 only, PhantomJS 1 only</span>
					<span class="token comment">// push.apply(_, arraylike) throws on ancient WebKit</span>
					jQuery<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>nodes<span class="token punctuation">,</span> tmp<span class="token punctuation">.</span>childNodes<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// Remember the top-level container</span>
					tmp <span class="token operator">=</span> fragment<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span>

					<span class="token comment">// Ensure the created nodes are orphaned (#12392)</span>
					tmp<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Remove wrapper from fragment</span>
		fragment<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

		i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>elem <span class="token operator">=</span> nodes<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// Skip elements already in the context collection (trac-4087)</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>selection <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> selection<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>ignored<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					ignored<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">continue</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			attached <span class="token operator">=</span> <span class="token function">isAttached</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Append to fragment</span>
			tmp <span class="token operator">=</span> <span class="token function">getAll</span><span class="token punctuation">(</span>fragment<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;script&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Preserve script evaluation history</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>attached<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">setGlobalEval</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Capture executables</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>scripts<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>elem <span class="token operator">=</span> tmp<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>rscriptType<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>elem<span class="token punctuation">.</span>type <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						scripts<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> fragment<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>


	<span class="token keyword">var</span>
		rkeyEvent <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^key</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		rmouseEvent <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:mouse|pointer|contextmenu|drag|drop)|click</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		rtypenamespace <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^([^.]*)(?:\.(.+)|)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>

	<span class="token keyword">function</span> <span class="token function">returnTrue</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">function</span> <span class="token function">returnFalse</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Support: IE &lt;=9 - 11+</span>
	<span class="token comment">// focus() and blur() are asynchronous, except when they are no-op.</span>
	<span class="token comment">// So expect focus to be synchronous when the element is already active,</span>
	<span class="token comment">// and blur to be synchronous when the element is not already active.</span>
	<span class="token comment">// (focus and blur are always synchronous in other supported browsers,</span>
	<span class="token comment">// this just defines when we can count on it).</span>
	<span class="token keyword">function</span> <span class="token function">expectSync</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>elem <span class="token operator">===</span> <span class="token function">safeActiveElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&quot;focus&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Support: IE &lt;=9 only</span>
	<span class="token comment">// Accessing document.activeElement can throw unexpectedly</span>
	<span class="token comment">// https://bugs.jquery.com/ticket/13393</span>
	<span class="token keyword">function</span> <span class="token function">safeActiveElement</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> document<span class="token punctuation">.</span>activeElement<span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">function</span> <span class="token function">on</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> types<span class="token punctuation">,</span> selector<span class="token punctuation">,</span> data<span class="token punctuation">,</span> fn<span class="token punctuation">,</span> one</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> origFn<span class="token punctuation">,</span> type<span class="token punctuation">;</span>

		<span class="token comment">// Types can be a map of types/handlers</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> types <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// ( types-Object, selector, data )</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> selector <span class="token operator">!==</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// ( types-Object, data )</span>
				data <span class="token operator">=</span> data <span class="token operator">||</span> selector<span class="token punctuation">;</span>
				selector <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span>type <span class="token keyword">in</span> types<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">on</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> type<span class="token punctuation">,</span> selector<span class="token punctuation">,</span> data<span class="token punctuation">,</span> types<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">,</span> one<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> elem<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> fn <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// ( types, fn )</span>
			fn <span class="token operator">=</span> selector<span class="token punctuation">;</span>
			data <span class="token operator">=</span> selector <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>fn <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> selector <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// ( types, selector, fn )</span>
				fn <span class="token operator">=</span> data<span class="token punctuation">;</span>
				data <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

				<span class="token comment">// ( types, data, fn )</span>
				fn <span class="token operator">=</span> data<span class="token punctuation">;</span>
				data <span class="token operator">=</span> selector<span class="token punctuation">;</span>
				selector <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>fn <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			fn <span class="token operator">=</span> returnFalse<span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> elem<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>one <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			origFn <span class="token operator">=</span> fn<span class="token punctuation">;</span>
			<span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Can use an empty set, since event contains the info</span>
				<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> <span class="token function">origFn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token comment">// Use same guid so caller can remove using origFn</span>
			fn<span class="token punctuation">.</span>guid <span class="token operator">=</span> origFn<span class="token punctuation">.</span>guid <span class="token operator">||</span> <span class="token punctuation">(</span>origFn<span class="token punctuation">.</span>guid <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>guid<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> elem<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> types<span class="token punctuation">,</span> fn<span class="token punctuation">,</span> data<span class="token punctuation">,</span> selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">/*
	 * Helper functions for managing events -- not part of the public interface.
	 * Props to Dean Edwards' addEvent library for many of the ideas.
	 */</span>
	jQuery<span class="token punctuation">.</span>event <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token comment">//全局对象</span>
		<span class="token literal-property property">global</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">//添加事件</span>
		<span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> types<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> data<span class="token punctuation">,</span> selector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token keyword">var</span> handleObjIn<span class="token punctuation">,</span> eventHandle<span class="token punctuation">,</span> tmp<span class="token punctuation">,</span>
				events<span class="token punctuation">,</span> t<span class="token punctuation">,</span> handleObj<span class="token punctuation">,</span>
				special<span class="token punctuation">,</span> handlers<span class="token punctuation">,</span> type<span class="token punctuation">,</span> namespaces<span class="token punctuation">,</span> origType<span class="token punctuation">,</span>
				elemData <span class="token operator">=</span> dataPriv<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取缓存对象 并给elem添加expando属性</span>

			<span class="token comment">// Only attach events to objects that accept data</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">acceptData</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Caller can pass in an object of custom data in lieu of the handler</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>handler<span class="token punctuation">.</span>handler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				handleObjIn <span class="token operator">=</span> handler<span class="token punctuation">;</span>
				handler <span class="token operator">=</span> handleObjIn<span class="token punctuation">.</span>handler<span class="token punctuation">;</span>
				selector <span class="token operator">=</span> handleObjIn<span class="token punctuation">.</span>selector<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Ensure that invalid selectors throw exceptions at attach time</span>
			<span class="token comment">// Evaluate against documentElement in case elem is a non-element node (e.g., document)</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>selector<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span>find<span class="token punctuation">.</span><span class="token function">matchesSelector</span><span class="token punctuation">(</span>documentElement<span class="token punctuation">,</span> selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">//确保事件handler有一个唯一标志，用于后面的查找和移除</span>
			<span class="token comment">// Make sure that the handler has a unique ID, used to find/remove it later</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>handler<span class="token punctuation">.</span>guid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				handler<span class="token punctuation">.</span>guid <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>guid<span class="token operator">++</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">// events是jQuery内部维护的事件列队</span>
			<span class="token comment">// Init the element's event structure and main handler, if this is the first</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>events <span class="token operator">=</span> elemData<span class="token punctuation">.</span>events<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				events <span class="token operator">=</span> elemData<span class="token punctuation">.</span>events <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">//handle，是实际绑定到elem中的事件处理函数</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>eventHandle <span class="token operator">=</span> elemData<span class="token punctuation">.</span>handle<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">//事件句柄</span>
				eventHandle <span class="token operator">=</span> elemData<span class="token punctuation">.</span><span class="token function-variable function">handle</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Discard the second event of a jQuery.event.trigger() and</span>
					<span class="token comment">// when an event is called after a page has unloaded</span>
					<span class="token keyword">return</span> <span class="token keyword">typeof</span> jQuery <span class="token operator">!==</span> <span class="token string">&quot;undefined&quot;</span> <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>triggered <span class="token operator">!==</span> e<span class="token punctuation">.</span>type <span class="token operator">?</span>
						jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">//可以同时传递多个事件 &quot;click mouseover&quot;</span>
			<span class="token comment">// Handle multiple events separated by a space</span>
			types <span class="token operator">=</span> <span class="token punctuation">(</span>types <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>rnothtmlwhite<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token string">&quot;&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			t <span class="token operator">=</span> types<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// 尝试取出事件的命名空间</span>
				<span class="token comment">// 如&quot;mouseover.a.b&quot; → [&quot;mouseover.a.b&quot;, &quot;mouseover&quot;, &quot;a.b&quot;]</span>
				tmp <span class="token operator">=</span> rtypenamespace<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>types<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				type <span class="token operator">=</span> origType <span class="token operator">=</span> tmp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token comment">//取出事件命名空间，如a.b，并根据&quot;.&quot;分隔成数组</span>
				namespaces <span class="token operator">=</span> <span class="token punctuation">(</span>tmp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// There *must* be a type, no attaching namespace-only handlers</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">continue</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// If event changes its type, use the special event handlers for the changed type</span>
				special <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

				<span class="token comment">// If selector defined, determine special event api type, otherwise given type</span>
				type <span class="token operator">=</span> <span class="token punctuation">(</span>selector <span class="token operator">?</span> special<span class="token punctuation">.</span>delegateType <span class="token operator">:</span> special<span class="token punctuation">.</span>bindType<span class="token punctuation">)</span> <span class="token operator">||</span> type<span class="token punctuation">;</span>

				<span class="token comment">// Update special based on newly reset type</span>
				special <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

				<span class="token comment">// handleObj is passed to all event handlers</span>
				handleObj <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					<span class="token literal-property property">type</span><span class="token operator">:</span> type<span class="token punctuation">,</span>
					<span class="token literal-property property">origType</span><span class="token operator">:</span> origType<span class="token punctuation">,</span>
					<span class="token literal-property property">data</span><span class="token operator">:</span> data<span class="token punctuation">,</span>
					<span class="token literal-property property">handler</span><span class="token operator">:</span> handler<span class="token punctuation">,</span>
					<span class="token literal-property property">guid</span><span class="token operator">:</span> handler<span class="token punctuation">.</span>guid<span class="token punctuation">,</span>
					<span class="token literal-property property">selector</span><span class="token operator">:</span> selector<span class="token punctuation">,</span>
					<span class="token literal-property property">needsContext</span><span class="token operator">:</span> selector <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>match<span class="token punctuation">.</span>needsContext<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">,</span>
					<span class="token literal-property property">namespace</span><span class="token operator">:</span> namespaces<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span> handleObjIn<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">// 初始化事件处理列队，如果是第一次使用，将执行语句</span>
				<span class="token comment">// Init the event handler queue if we're the first</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>handlers <span class="token operator">=</span> events<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">//指向同一个内存地址</span>
					handlers <span class="token operator">=</span> events<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
					handlers<span class="token punctuation">.</span>delegateCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

					<span class="token comment">// Only use addEventListener if the special events handler returns false</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>special<span class="token punctuation">.</span>setup <span class="token operator">||</span>
						special<span class="token punctuation">.</span><span class="token function">setup</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> data<span class="token punctuation">,</span> namespaces<span class="token punctuation">,</span> eventHandle<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">// 如果获取特殊事件监听方法失败，则使用addEventListener进行添加事件</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token comment">//eventHandle=&gt;事件句柄</span>
							elem<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> eventHandle<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span>special<span class="token punctuation">.</span>add<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					special<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> handleObj<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>handleObj<span class="token punctuation">.</span>handler<span class="token punctuation">.</span>guid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						handleObj<span class="token punctuation">.</span>handler<span class="token punctuation">.</span>guid <span class="token operator">=</span> handler<span class="token punctuation">.</span>guid<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
				<span class="token comment">//冒泡标记，事件委托，事件委托添加在事件队列队首</span>
				<span class="token comment">// Add to the element's handler list, delegates in front</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>selector<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">//数组在指定位置添加元素,在数组前面添加，委托层次越深，该事件处理程序则越靠前。</span>
					handlers<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>handlers<span class="token punctuation">.</span>delegateCount<span class="token operator">++</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> handleObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					<span class="token comment">//普通事件在数组后面推入</span>
					handlers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>handleObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Keep track of which events have ever been used, for event optimization</span>
				jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>global<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">//移除</span>
		<span class="token comment">// Detach an event or set of events from an element</span>
		<span class="token function-variable function">remove</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> types<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> selector<span class="token punctuation">,</span> mappedTypes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token keyword">var</span> j<span class="token punctuation">,</span> origCount<span class="token punctuation">,</span> tmp<span class="token punctuation">,</span>
				events<span class="token punctuation">,</span> t<span class="token punctuation">,</span> handleObj<span class="token punctuation">,</span>
				special<span class="token punctuation">,</span> handlers<span class="token punctuation">,</span> type<span class="token punctuation">,</span> namespaces<span class="token punctuation">,</span> origType<span class="token punctuation">,</span>
				elemData <span class="token operator">=</span> dataPriv<span class="token punctuation">.</span><span class="token function">hasData</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> dataPriv<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>elemData <span class="token operator">||</span> <span class="token operator">!</span><span class="token punctuation">(</span>events <span class="token operator">=</span> elemData<span class="token punctuation">.</span>events<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Once for each type.namespace in types; type may be omitted</span>
			types <span class="token operator">=</span> <span class="token punctuation">(</span>types <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>rnothtmlwhite<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token string">&quot;&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			t <span class="token operator">=</span> types<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				tmp <span class="token operator">=</span> rtypenamespace<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>types<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				type <span class="token operator">=</span> origType <span class="token operator">=</span> tmp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				namespaces <span class="token operator">=</span> <span class="token punctuation">(</span>tmp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Unbind all events (on this namespace, if provided) for the element</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span>type <span class="token keyword">in</span> events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> type <span class="token operator">+</span> types<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">,</span> handler<span class="token punctuation">,</span> selector<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">continue</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				special <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
				type <span class="token operator">=</span> <span class="token punctuation">(</span>selector <span class="token operator">?</span> special<span class="token punctuation">.</span>delegateType <span class="token operator">:</span> special<span class="token punctuation">.</span>bindType<span class="token punctuation">)</span> <span class="token operator">||</span> type<span class="token punctuation">;</span>
				handlers <span class="token operator">=</span> events<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				tmp <span class="token operator">=</span> tmp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span>
					<span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;(^|\\.)&quot;</span> <span class="token operator">+</span> namespaces<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;\\.(?:.*\\.|)&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;(\\.|$)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Remove matching events</span>
				origCount <span class="token operator">=</span> j <span class="token operator">=</span> handlers<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
				<span class="token keyword">while</span> <span class="token punctuation">(</span>j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					handleObj <span class="token operator">=</span> handlers<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>mappedTypes <span class="token operator">||</span> origType <span class="token operator">===</span> handleObj<span class="token punctuation">.</span>origType<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
						<span class="token punctuation">(</span><span class="token operator">!</span>handler <span class="token operator">||</span> handler<span class="token punctuation">.</span>guid <span class="token operator">===</span> handleObj<span class="token punctuation">.</span>guid<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
						<span class="token punctuation">(</span><span class="token operator">!</span>tmp <span class="token operator">||</span> tmp<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>handleObj<span class="token punctuation">.</span>namespace<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
						<span class="token punctuation">(</span><span class="token operator">!</span>selector <span class="token operator">||</span> selector <span class="token operator">===</span> handleObj<span class="token punctuation">.</span>selector <span class="token operator">||</span>
							selector <span class="token operator">===</span> <span class="token string">&quot;**&quot;</span> <span class="token operator">&amp;&amp;</span> handleObj<span class="token punctuation">.</span>selector<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						handlers<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>j<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token keyword">if</span> <span class="token punctuation">(</span>handleObj<span class="token punctuation">.</span>selector<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							handlers<span class="token punctuation">.</span>delegateCount<span class="token operator">--</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>special<span class="token punctuation">.</span>remove<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							special<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> handleObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Remove generic event handler if we removed something and no more handlers exist</span>
				<span class="token comment">// (avoids potential for endless recursion during removal of special event handlers)</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>origCount <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>handlers<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>special<span class="token punctuation">.</span>teardown <span class="token operator">||</span>
						special<span class="token punctuation">.</span><span class="token function">teardown</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> namespaces<span class="token punctuation">,</span> elemData<span class="token punctuation">.</span>handle<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

						jQuery<span class="token punctuation">.</span><span class="token function">removeEvent</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> type<span class="token punctuation">,</span> elemData<span class="token punctuation">.</span>handle<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token keyword">delete</span> events<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Remove data and the expando if it's no longer used</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">isEmptyObject</span><span class="token punctuation">(</span>events<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				dataPriv<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;handle events&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">dispatch</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">nativeEvent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token keyword">var</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> ret<span class="token punctuation">,</span> matched<span class="token punctuation">,</span> handleObj<span class="token punctuation">,</span> handlerQueue<span class="token punctuation">,</span>
				args <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token comment">//将原生事件对象转换为可写事件对象 ，事件对象兼容</span>
				<span class="token comment">// Make a writable jQuery.Event from the native event object</span>
				event <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">fix</span><span class="token punctuation">(</span>nativeEvent<span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token comment">//事件句柄缓存获取</span>
				handlers <span class="token operator">=</span> <span class="token punctuation">(</span>
					dataPriv<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">&quot;events&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
				<span class="token punctuation">)</span><span class="token punctuation">[</span>event<span class="token punctuation">.</span>type<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
				special <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span>event<span class="token punctuation">.</span>type<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token comment">// Use the fix-ed jQuery.Event rather than the (read-only) native event</span>
			args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> event<span class="token punctuation">;</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				args<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			event<span class="token punctuation">.</span>delegateTarget <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

			<span class="token comment">// Call the preDispatch hook for the mapped type, and let it bail if desired</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>special<span class="token punctuation">.</span>preDispatch <span class="token operator">&amp;&amp;</span> special<span class="token punctuation">.</span><span class="token function">preDispatch</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Determine handlers</span>
			handlerQueue <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">handlers</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> event<span class="token punctuation">,</span> handlers<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Run delegates first; they may want to stop propagation beneath us</span>
			i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>matched <span class="token operator">=</span> handlerQueue<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>event<span class="token punctuation">.</span><span class="token function">isPropagationStopped</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">//修改event事件对象，调用event上面的方法</span>
				event<span class="token punctuation">.</span>currentTarget <span class="token operator">=</span> matched<span class="token punctuation">.</span>elem<span class="token punctuation">;</span>

				j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>handleObj <span class="token operator">=</span> matched<span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
					<span class="token operator">!</span>event<span class="token punctuation">.</span><span class="token function">isImmediatePropagationStopped</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// If the event is namespaced, then each handler is only invoked if it is</span>
					<span class="token comment">// specially universal or its namespaces are a superset of the event's.</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>event<span class="token punctuation">.</span>rnamespace <span class="token operator">||</span> handleObj<span class="token punctuation">.</span>namespace <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">||</span>
						event<span class="token punctuation">.</span>rnamespace<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>handleObj<span class="token punctuation">.</span>namespace<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

						event<span class="token punctuation">.</span>handleObj <span class="token operator">=</span> handleObj<span class="token punctuation">;</span>
						event<span class="token punctuation">.</span>data <span class="token operator">=</span> handleObj<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
						<span class="token comment">//执行事件回调函数(句柄) 在执行事件处理程序时，内部的this指向的是发出委托的元素</span>
						ret <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span>handleObj<span class="token punctuation">.</span>origType<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>handle <span class="token operator">||</span>
							handleObj<span class="token punctuation">.</span>handler<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>matched<span class="token punctuation">.</span>elem<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token keyword">if</span> <span class="token punctuation">(</span>ret <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token comment">//如果return false则停止冒泡和阻止默认事件</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>result <span class="token operator">=</span> ret<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
								event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Call the postDispatch hook for the mapped type</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>special<span class="token punctuation">.</span>postDispatch<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				special<span class="token punctuation">.</span><span class="token function">postDispatch</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> event<span class="token punctuation">.</span>result<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">handlers</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> handlers</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> i<span class="token punctuation">,</span> handleObj<span class="token punctuation">,</span> sel<span class="token punctuation">,</span> matchedHandlers<span class="token punctuation">,</span> matchedSelectors<span class="token punctuation">,</span>
				handlerQueue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
				delegateCount <span class="token operator">=</span> handlers<span class="token punctuation">.</span>delegateCount<span class="token punctuation">,</span>
				cur <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
			<span class="token comment">//判断是否有事件委托</span>
			<span class="token comment">// Find delegate handlers</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>delegateCount <span class="token operator">&amp;&amp;</span>

				<span class="token comment">// Support: IE &lt;=9</span>
				<span class="token comment">// Black-hole SVG &lt;use&gt; instance trees (trac-13180)</span>
				cur<span class="token punctuation">.</span>nodeType <span class="token operator">&amp;&amp;</span>

				<span class="token comment">// Support: Firefox &lt;=42</span>
				<span class="token comment">// Suppress spec-violating clicks indicating a non-primary pointer button (trac-3861)</span>
				<span class="token comment">// https://www.w3.org/TR/DOM-Level-3-Events/#event-type-click</span>
				<span class="token comment">// Support: IE 11 only</span>
				<span class="token comment">// ...but not arrow key &quot;clicks&quot; of radio inputs, which can have `button` -1 (gh-2343)</span>
				<span class="token operator">!</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&quot;click&quot;</span> <span class="token operator">&amp;&amp;</span> event<span class="token punctuation">.</span>button <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">//循环到目标元素结束</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> cur <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">;</span> cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>parentNode <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">//不处理元素disabled属性为false且事件类型为click的情况</span>
					<span class="token comment">// Don't check non-elements (#13208)</span>
					<span class="token comment">// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)</span>
					<span class="token comment">//火狐浏览器右键或者中键点击时，会错误地冒泡到document的click事件，并且stopPropagation也无效</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&quot;click&quot;</span> <span class="token operator">&amp;&amp;</span> cur<span class="token punctuation">.</span>disabled <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						matchedHandlers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
						matchedSelectors <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
						<span class="token comment">//委托事件的数量</span>
						<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> delegateCount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							handleObj <span class="token operator">=</span> handlers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
							<span class="token comment">//避免跟Object.prototype属性冲突</span>
							<span class="token comment">// Don't conflict with Object.prototype properties (#13203)</span>
							sel <span class="token operator">=</span> handleObj<span class="token punctuation">.</span>selector <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>

							<span class="token keyword">if</span> <span class="token punctuation">(</span>matchedSelectors<span class="token punctuation">[</span>sel<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token comment">//查看是否能找到匹配的元素</span>
								matchedSelectors<span class="token punctuation">[</span>sel<span class="token punctuation">]</span> <span class="token operator">=</span> handleObj<span class="token punctuation">.</span>needsContext <span class="token operator">?</span>
									<span class="token function">jQuery</span><span class="token punctuation">(</span>sel<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span>
									jQuery<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>sel<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>matchedSelectors<span class="token punctuation">[</span>sel<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								matchedHandlers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>handleObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>matchedHandlers<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token comment">//当前元素的委托事件队列</span>
							handlerQueue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">elem</span><span class="token operator">:</span> cur<span class="token punctuation">,</span> <span class="token literal-property property">handlers</span><span class="token operator">:</span> matchedHandlers <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			<span class="token comment">//添加自身的事件</span>
			<span class="token comment">// Add the remaining (directly-bound) handlers</span>
			cur <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>delegateCount <span class="token operator">&lt;</span> handlers<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				handlerQueue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">elem</span><span class="token operator">:</span> cur<span class="token punctuation">,</span> <span class="token literal-property property">handlers</span><span class="token operator">:</span> handlers<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>delegateCount<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> handlerQueue<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">addProp</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> hook</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token class-name">Event</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
				<span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

				<span class="token literal-property property">get</span><span class="token operator">:</span> <span class="token function">isFunction</span><span class="token punctuation">(</span>hook<span class="token punctuation">)</span> <span class="token operator">?</span>
					<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>originalEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">return</span> <span class="token function">hook</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>originalEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span> <span class="token operator">:</span>
					<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>originalEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>originalEvent<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>

				<span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token punctuation">{</span>
						<span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
						<span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
						<span class="token literal-property property">writable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
						<span class="token literal-property property">value</span><span class="token operator">:</span> value
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">//将原生的event事件对象event修正为一个可以读写event对象，并对event的属性以及方法统一接口</span>
		<span class="token function-variable function">fix</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">originalEvent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> originalEvent<span class="token punctuation">[</span>jQuery<span class="token punctuation">.</span>expando<span class="token punctuation">]</span> <span class="token operator">?</span>
				<span class="token literal-property property">originalEvent</span> <span class="token operator">:</span>
				<span class="token keyword">new</span> <span class="token class-name">jQuery<span class="token punctuation">.</span>Event</span><span class="token punctuation">(</span>originalEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token literal-property property">special</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">load</span><span class="token operator">:</span> <span class="token punctuation">{</span>

				<span class="token comment">// Prevent triggered image.load events from bubbling to window.load</span>
				<span class="token literal-property property">noBubble</span><span class="token operator">:</span> <span class="token boolean">true</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token literal-property property">click</span><span class="token operator">:</span> <span class="token punctuation">{</span>

				<span class="token comment">// Utilize native event to ensure correct state for checkable inputs</span>
				<span class="token function-variable function">setup</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// For mutual compressibility with _default, replace `this` access with a local var.</span>
					<span class="token comment">// `|| data` is dead code meant only to preserve the variable through minification.</span>
					<span class="token keyword">var</span> el <span class="token operator">=</span> <span class="token keyword">this</span> <span class="token operator">||</span> data<span class="token punctuation">;</span>

					<span class="token comment">// Claim the first handler</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>rcheckableType<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
						el<span class="token punctuation">.</span>click <span class="token operator">&amp;&amp;</span> <span class="token function">nodeName</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token string">&quot;input&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

						<span class="token comment">// dataPriv.set( el, &quot;click&quot;, ... )</span>
						<span class="token function">leverageNative</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> returnTrue<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// Return false to allow normal processing in the caller</span>
					<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token function-variable function">trigger</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// For mutual compressibility with _default, replace `this` access with a local var.</span>
					<span class="token comment">// `|| data` is dead code meant only to preserve the variable through minification.</span>
					<span class="token keyword">var</span> el <span class="token operator">=</span> <span class="token keyword">this</span> <span class="token operator">||</span> data<span class="token punctuation">;</span>

					<span class="token comment">// Force setup before triggering a click</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>rcheckableType<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
						el<span class="token punctuation">.</span>click <span class="token operator">&amp;&amp;</span> <span class="token function">nodeName</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token string">&quot;input&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

						<span class="token function">leverageNative</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token string">&quot;click&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// Return non-false to allow normal event-path propagation</span>
					<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>

				<span class="token comment">// For cross-browser consistency, suppress native .click() on links</span>
				<span class="token comment">// Also prevent it if we're currently inside a leveraged native-event stack</span>
				<span class="token function-variable function">_default</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> target <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
					<span class="token keyword">return</span> rcheckableType<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
						target<span class="token punctuation">.</span>click <span class="token operator">&amp;&amp;</span> <span class="token function">nodeName</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token string">&quot;input&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
						dataPriv<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token string">&quot;click&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span>
						<span class="token function">nodeName</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token literal-property property">beforeunload</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token function-variable function">postDispatch</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Support: Firefox 20+</span>
					<span class="token comment">// Firefox doesn't alert if the returnValue field is not set.</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>result <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> event<span class="token punctuation">.</span>originalEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						event<span class="token punctuation">.</span>originalEvent<span class="token punctuation">.</span>returnValue <span class="token operator">=</span> event<span class="token punctuation">.</span>result<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token comment">// Ensure the presence of an event listener that handles manually-triggered</span>
	<span class="token comment">// synthetic events by interrupting progress until reinvoked in response to</span>
	<span class="token comment">// *native* events that it fires directly, ensuring that state changes have</span>
	<span class="token comment">// already occurred before other listeners are invoked.</span>
	<span class="token keyword">function</span> <span class="token function">leverageNative</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> type<span class="token punctuation">,</span> expectSync</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token comment">// Missing expectSync indicates a trigger call, which must force setup through jQuery.event.add</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>expectSync<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>dataPriv<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> type<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> type<span class="token punctuation">,</span> returnTrue<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Register the controller as a special universal handler for all event namespaces</span>
		dataPriv<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">namespace</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
			<span class="token function-variable function">handler</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> notAsync<span class="token punctuation">,</span> result<span class="token punctuation">,</span>
					saved <span class="token operator">=</span> dataPriv<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>isTrigger <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Interrupt processing of the outer synthetic .trigger()ed event</span>
					<span class="token comment">// Saved data should be false in such cases, but might be a leftover capture object</span>
					<span class="token comment">// from an async native handler (gh-4350)</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>saved<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>

						<span class="token comment">// Store arguments for use when handling the inner native event</span>
						<span class="token comment">// There will always be at least one argument (an event object), so this array</span>
						<span class="token comment">// will not be confused with a leftover capture object.</span>
						saved <span class="token operator">=</span> <span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
						dataPriv<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> saved<span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token comment">// Trigger the native event and capture its result</span>
						<span class="token comment">// Support: IE &lt;=9 - 11+</span>
						<span class="token comment">// focus() and blur() are asynchronous</span>
						notAsync <span class="token operator">=</span> <span class="token function">expectSync</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">this</span><span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						result <span class="token operator">=</span> dataPriv<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>saved <span class="token operator">!==</span> result <span class="token operator">||</span> notAsync<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							dataPriv<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
							result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>saved <span class="token operator">!==</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>

							<span class="token comment">// Cancel the outer synthetic event</span>
							event<span class="token punctuation">.</span><span class="token function">stopImmediatePropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token keyword">return</span> result<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// If this is an inner synthetic event for an event with a bubbling surrogate</span>
						<span class="token comment">// (focus or blur), assume that the surrogate already propagated from triggering the</span>
						<span class="token comment">// native event and prevent that from happening again here.</span>
						<span class="token comment">// This technically gets the ordering wrong w.r.t. to `.trigger()` (in which the</span>
						<span class="token comment">// bubbling surrogate propagates *after* the non-bubbling base), but that seems</span>
						<span class="token comment">// less bad than duplication.</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>delegateType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// If this is a native event triggered above, everything is now in order</span>
					<span class="token comment">// Fire an inner synthetic event with the original arguments</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>saved<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// ...and capture the result</span>
					dataPriv<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token punctuation">{</span>
						<span class="token literal-property property">value</span><span class="token operator">:</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span>

							<span class="token comment">// Support: IE &lt;=9 - 11+</span>
							<span class="token comment">// Extend with the prototype to reset the above stopImmediatePropagation()</span>
							jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>saved<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span><span class="token class-name">Event</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">,</span>
							saved<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
							<span class="token keyword">this</span>
						<span class="token punctuation">)</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// Abort handling of the native event</span>
					event<span class="token punctuation">.</span><span class="token function">stopImmediatePropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	jQuery<span class="token punctuation">.</span><span class="token function-variable function">removeEvent</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> type<span class="token punctuation">,</span> handle</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token comment">// This &quot;if&quot; is needed for plain objects</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>removeEventListener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			elem<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> handle<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">//给事件对象添加其他属性</span>
	jQuery<span class="token punctuation">.</span><span class="token function-variable function">Event</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">src<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//如果不是new 时，在这里new 一下</span>
		<span class="token comment">// Allow instantiation without the 'new' keyword</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">jQuery<span class="token punctuation">.</span>Event</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">jQuery<span class="token punctuation">.</span>Event</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> props<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Event object</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>src <span class="token operator">&amp;&amp;</span> src<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>originalEvent <span class="token operator">=</span> src<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> src<span class="token punctuation">.</span>type<span class="token punctuation">;</span>

			<span class="token comment">// Events bubbling up the document may have been marked as prevented</span>
			<span class="token comment">// by a handler lower down the tree; reflect the correct value.</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>isDefaultPrevented <span class="token operator">=</span> src<span class="token punctuation">.</span>defaultPrevented <span class="token operator">||</span>
				src<span class="token punctuation">.</span>defaultPrevented <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span>

				<span class="token comment">// Support: Android &lt;=2.3 only</span>
				src<span class="token punctuation">.</span>returnValue <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">?</span>
				<span class="token literal-property property">returnTrue</span> <span class="token operator">:</span>
				returnFalse<span class="token punctuation">;</span>

			<span class="token comment">// Create target properties</span>
			<span class="token comment">// Support: Safari &lt;=6 - 7 only</span>
			<span class="token comment">// Target should not be a text node (#504, #13143)</span>
			<span class="token comment">//如果是文本节点，就可以获取它的父结点</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> <span class="token punctuation">(</span>src<span class="token punctuation">.</span>target <span class="token operator">&amp;&amp;</span> src<span class="token punctuation">.</span>target<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">?</span>
				src<span class="token punctuation">.</span>target<span class="token punctuation">.</span>parentNode <span class="token operator">:</span>
				src<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
			<span class="token comment">//</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>currentTarget <span class="token operator">=</span> src<span class="token punctuation">.</span>currentTarget<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>relatedTarget <span class="token operator">=</span> src<span class="token punctuation">.</span>relatedTarget<span class="token punctuation">;</span>

			<span class="token comment">// Event type</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> src<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Put explicitly provided properties onto the event object</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">//将属性扩展到this实例上</span>
			jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> props<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//添加时间戳</span>
		<span class="token comment">// Create a timestamp if incoming event doesn't have one</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>timeStamp <span class="token operator">=</span> src <span class="token operator">&amp;&amp;</span> src<span class="token punctuation">.</span>timeStamp <span class="token operator">||</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Mark it as fixed</span>
		<span class="token keyword">this</span><span class="token punctuation">[</span>jQuery<span class="token punctuation">.</span>expando<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">//对事件对象对象加强，对事件方法重写</span>
	<span class="token comment">//将原生的事件对象修正为一个可写的event对象，并对该event的属性以及方法统一接口</span>
	<span class="token comment">// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding</span>
	<span class="token comment">// https://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html</span>
	jQuery<span class="token punctuation">.</span><span class="token class-name">Event</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">constructor</span><span class="token operator">:</span> jQuery<span class="token punctuation">.</span>Event<span class="token punctuation">,</span>
		<span class="token literal-property property">isDefaultPrevented</span><span class="token operator">:</span> returnFalse<span class="token punctuation">,</span>
		<span class="token literal-property property">isPropagationStopped</span><span class="token operator">:</span> returnFalse<span class="token punctuation">,</span>
		<span class="token literal-property property">isImmediatePropagationStopped</span><span class="token operator">:</span> returnFalse<span class="token punctuation">,</span>
		<span class="token literal-property property">isSimulated</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

		<span class="token function-variable function">preventDefault</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>originalEvent<span class="token punctuation">;</span>
			<span class="token comment">//表示是否被调用过</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>isDefaultPrevented <span class="token operator">=</span> returnTrue<span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isSimulated<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">stopPropagation</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>originalEvent<span class="token punctuation">;</span>

			<span class="token keyword">this</span><span class="token punctuation">.</span>isPropagationStopped <span class="token operator">=</span> returnTrue<span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isSimulated<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">stopImmediatePropagation</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>originalEvent<span class="token punctuation">;</span>

			<span class="token keyword">this</span><span class="token punctuation">.</span>isImmediatePropagationStopped <span class="token operator">=</span> returnTrue<span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isSimulated<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				e<span class="token punctuation">.</span><span class="token function">stopImmediatePropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token comment">// Includes all common event props including KeyEvent and MouseEvent specific props</span>
	jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">altKey</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">bubbles</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">cancelable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">changedTouches</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">ctrlKey</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">detail</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">eventPhase</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">metaKey</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">pageX</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">pageY</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">shiftKey</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">view</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;char&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">charCode</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">keyCode</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">button</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">buttons</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">clientX</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">clientY</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">offsetX</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">offsetY</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">pointerId</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">pointerType</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">screenX</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">screenY</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">targetTouches</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">toElement</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">touches</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

		<span class="token function-variable function">which</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> button <span class="token operator">=</span> event<span class="token punctuation">.</span>button<span class="token punctuation">;</span>

			<span class="token comment">// Add which for key events</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>which <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> rkeyEvent<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> event<span class="token punctuation">.</span>charCode <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> event<span class="token punctuation">.</span>charCode <span class="token operator">:</span> event<span class="token punctuation">.</span>keyCode<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Add which for click: 1 === left; 2 === middle; 3 === right</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>event<span class="token punctuation">.</span>which <span class="token operator">&amp;&amp;</span> button <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> rmouseEvent<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">//位与运算符 0&amp;0=0,0&amp;1=0,1&amp;0=0,1&amp;1=1</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>button <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span>button <span class="token operator">&amp;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token number">3</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span>button <span class="token operator">&amp;</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> event<span class="token punctuation">.</span>which<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>addProp<span class="token punctuation">)</span><span class="token punctuation">;</span>

	jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">focus</span><span class="token operator">:</span> <span class="token string">&quot;focusin&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">blur</span><span class="token operator">:</span> <span class="token string">&quot;focusout&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> delegateType</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>

			<span class="token comment">// Utilize native event if possible so blur/focus sequence is correct</span>
			<span class="token function-variable function">setup</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Claim the first handler</span>
				<span class="token comment">// dataPriv.set( this, &quot;focus&quot;, ... )</span>
				<span class="token comment">// dataPriv.set( this, &quot;blur&quot;, ... )</span>
				<span class="token function">leverageNative</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> expectSync<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Return false to allow normal processing in the caller</span>
				<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">trigger</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Force setup before trigger</span>
				<span class="token function">leverageNative</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Return non-false to allow normal event-path propagation</span>
				<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token literal-property property">delegateType</span><span class="token operator">:</span> delegateType
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Create mouseenter/leave events using mouseover/out and event-time checks</span>
	<span class="token comment">// so that event delegation works in jQuery.</span>
	<span class="token comment">// Do the same for pointerenter/pointerleave and pointerover/pointerout</span>
	<span class="token comment">//</span>
	<span class="token comment">// Support: Safari 7 only</span>
	<span class="token comment">// Safari sends mouseenter too often; see:</span>
	<span class="token comment">// https://bugs.chromium.org/p/chromium/issues/detail?id=470258</span>
	<span class="token comment">// for the description of the bug (it existed in older Chrome versions as well).</span>
	jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">mouseenter</span><span class="token operator">:</span> <span class="token string">&quot;mouseover&quot;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">mouseleave</span><span class="token operator">:</span> <span class="token string">&quot;mouseout&quot;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">pointerenter</span><span class="token operator">:</span> <span class="token string">&quot;pointerover&quot;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">pointerleave</span><span class="token operator">:</span> <span class="token string">&quot;pointerout&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">orig<span class="token punctuation">,</span> fix</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span>orig<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">delegateType</span><span class="token operator">:</span> fix<span class="token punctuation">,</span>
			<span class="token literal-property property">bindType</span><span class="token operator">:</span> fix<span class="token punctuation">,</span>

			<span class="token function-variable function">handle</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> ret<span class="token punctuation">,</span>
					target <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span>
					related <span class="token operator">=</span> event<span class="token punctuation">.</span>relatedTarget<span class="token punctuation">,</span>
					handleObj <span class="token operator">=</span> event<span class="token punctuation">.</span>handleObj<span class="token punctuation">;</span>

				<span class="token comment">// For mouseenter/leave call the handler if related is outside the target.</span>
				<span class="token comment">// NB: No relatedTarget if the mouse left/entered the browser window</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>related <span class="token operator">||</span> <span class="token punctuation">(</span>related <span class="token operator">!==</span> target <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> related<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					event<span class="token punctuation">.</span>type <span class="token operator">=</span> handleObj<span class="token punctuation">.</span>origType<span class="token punctuation">;</span>
					ret <span class="token operator">=</span> handleObj<span class="token punctuation">.</span><span class="token function">handler</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
					event<span class="token punctuation">.</span>type <span class="token operator">=</span> fix<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//事件相关的方法 on one off</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token comment">//添加事件监听</span>
		<span class="token function-variable function">on</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">types<span class="token punctuation">,</span> selector<span class="token punctuation">,</span> data<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> types<span class="token punctuation">,</span> selector<span class="token punctuation">,</span> data<span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">//添加事件监听，只被监听一次</span>
		<span class="token function-variable function">one</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">types<span class="token punctuation">,</span> selector<span class="token punctuation">,</span> data<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> types<span class="token punctuation">,</span> selector<span class="token punctuation">,</span> data<span class="token punctuation">,</span> fn<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">//移除事件监听</span>
		<span class="token function-variable function">off</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">types<span class="token punctuation">,</span> selector<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> handleObj<span class="token punctuation">,</span> type<span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>types <span class="token operator">&amp;&amp;</span> types<span class="token punctuation">.</span>preventDefault <span class="token operator">&amp;&amp;</span> types<span class="token punctuation">.</span>handleObj<span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// ( event )  dispatched jQuery.Event</span>
				handleObj <span class="token operator">=</span> types<span class="token punctuation">.</span>handleObj<span class="token punctuation">;</span>
				<span class="token function">jQuery</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span>delegateTarget<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span>
					handleObj<span class="token punctuation">.</span>namespace <span class="token operator">?</span>
						handleObj<span class="token punctuation">.</span>origType <span class="token operator">+</span> <span class="token string">&quot;.&quot;</span> <span class="token operator">+</span> handleObj<span class="token punctuation">.</span>namespace <span class="token operator">:</span>
						handleObj<span class="token punctuation">.</span>origType<span class="token punctuation">,</span>
					handleObj<span class="token punctuation">.</span>selector<span class="token punctuation">,</span>
					handleObj<span class="token punctuation">.</span>handler
				<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> types <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// ( types-object [, selector] )</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span>type <span class="token keyword">in</span> types<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> selector<span class="token punctuation">,</span> types<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>selector <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> selector <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// ( types [, fn] )</span>
				fn <span class="token operator">=</span> selector<span class="token punctuation">;</span>
				selector <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>fn <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				fn <span class="token operator">=</span> returnFalse<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> types<span class="token punctuation">,</span> fn<span class="token punctuation">,</span> selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


	<span class="token keyword">var</span>

		<span class="token comment">// Support: IE &lt;=10 - 11, Edge 12 - 13 only</span>
		<span class="token comment">// In IE/Edge using regex groups here causes severe slowdowns.</span>
		<span class="token comment">// See https://connect.microsoft.com/IE/feedback/details/1736512/</span>
		rnoInnerhtml <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;script|&lt;style|&lt;link</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>

		<span class="token comment">// checked=&quot;checked&quot; or checked</span>
		rchecked <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">checked\s*(?:[^=]|=\s*.checked.)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
		rcleanScript <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\s*&lt;!(?:\[CDATA\[|--)|(?:\]\]|--)&gt;\s*$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>

	<span class="token comment">// Prefer a tbody over its parent table for containing new rows</span>
	<span class="token keyword">function</span> <span class="token function">manipulationTarget</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">nodeName</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;table&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
			<span class="token function">nodeName</span><span class="token punctuation">(</span>content<span class="token punctuation">.</span>nodeType <span class="token operator">!==</span> <span class="token number">11</span> <span class="token operator">?</span> content <span class="token operator">:</span> content<span class="token punctuation">.</span>firstChild<span class="token punctuation">,</span> <span class="token string">&quot;tr&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token keyword">return</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token string">&quot;tbody&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> elem<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> elem<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Replace/restore the type attribute of script elements for safe DOM manipulation</span>
	<span class="token keyword">function</span> <span class="token function">disableScript</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		elem<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">+</span> elem<span class="token punctuation">.</span>type<span class="token punctuation">;</span>
		<span class="token keyword">return</span> elem<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">function</span> <span class="token function">restoreScript</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>elem<span class="token punctuation">.</span>type <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;true/&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			elem<span class="token punctuation">.</span>type <span class="token operator">=</span> elem<span class="token punctuation">.</span>type<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			elem<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> elem<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">function</span> <span class="token function">cloneCopyEvent</span> <span class="token punctuation">(</span><span class="token parameter">src<span class="token punctuation">,</span> dest</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> i<span class="token punctuation">,</span> l<span class="token punctuation">,</span> type<span class="token punctuation">,</span> pdataOld<span class="token punctuation">,</span> udataOld<span class="token punctuation">,</span> udataCur<span class="token punctuation">,</span> events<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>dest<span class="token punctuation">.</span>nodeType <span class="token operator">!==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// 1. Copy private data: events, handlers, etc.</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>dataPriv<span class="token punctuation">.</span><span class="token function">hasData</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			pdataOld <span class="token operator">=</span> dataPriv<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span>
			events <span class="token operator">=</span> pdataOld<span class="token punctuation">.</span>events<span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				dataPriv<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>dest<span class="token punctuation">,</span> <span class="token string">&quot;handle events&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">for</span> <span class="token punctuation">(</span>type <span class="token keyword">in</span> events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> events<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>dest<span class="token punctuation">,</span> type<span class="token punctuation">,</span> events<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// 2. Copy user data</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>dataUser<span class="token punctuation">.</span><span class="token function">hasData</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			udataOld <span class="token operator">=</span> dataUser<span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span>
			udataCur <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> udataOld<span class="token punctuation">)</span><span class="token punctuation">;</span>

			dataUser<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>dest<span class="token punctuation">,</span> udataCur<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Fix IE bugs, see support tests</span>
	<span class="token keyword">function</span> <span class="token function">fixInput</span> <span class="token punctuation">(</span><span class="token parameter">src<span class="token punctuation">,</span> dest</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> nodeName <span class="token operator">=</span> dest<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Fails to persist the checked state of a cloned checkbox or radio button.</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>nodeName <span class="token operator">===</span> <span class="token string">&quot;input&quot;</span> <span class="token operator">&amp;&amp;</span> rcheckableType<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>src<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			dest<span class="token punctuation">.</span>checked <span class="token operator">=</span> src<span class="token punctuation">.</span>checked<span class="token punctuation">;</span>

			<span class="token comment">// Fails to return the selected option to the default selected state when cloning options</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>nodeName <span class="token operator">===</span> <span class="token string">&quot;input&quot;</span> <span class="token operator">||</span> nodeName <span class="token operator">===</span> <span class="token string">&quot;textarea&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			dest<span class="token punctuation">.</span>defaultValue <span class="token operator">=</span> src<span class="token punctuation">.</span>defaultValue<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">function</span> <span class="token function">domManip</span> <span class="token punctuation">(</span><span class="token parameter">collection<span class="token punctuation">,</span> args<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> ignored</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token comment">// Flatten any nested arrays</span>
		args <span class="token operator">=</span> <span class="token function">flat</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">var</span> fragment<span class="token punctuation">,</span> first<span class="token punctuation">,</span> scripts<span class="token punctuation">,</span> hasScripts<span class="token punctuation">,</span> node<span class="token punctuation">,</span> doc<span class="token punctuation">,</span>
			i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
			l <span class="token operator">=</span> collection<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
			iNoClone <span class="token operator">=</span> l <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span>
			value <span class="token operator">=</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			valueIsFunction <span class="token operator">=</span> <span class="token function">isFunction</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// We can't cloneNode fragments that contain checked, in WebKit</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>valueIsFunction <span class="token operator">||</span>
			<span class="token punctuation">(</span>l <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span> <span class="token operator">&amp;&amp;</span>
				<span class="token operator">!</span>support<span class="token punctuation">.</span>checkClone <span class="token operator">&amp;&amp;</span> rchecked<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> collection<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> self <span class="token operator">=</span> collection<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>valueIsFunction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">value</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> index<span class="token punctuation">,</span> self<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token function">domManip</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> args<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> ignored<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>l<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			fragment <span class="token operator">=</span> <span class="token function">buildFragment</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> collection<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ownerDocument<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> collection<span class="token punctuation">,</span> ignored<span class="token punctuation">)</span><span class="token punctuation">;</span>
			first <span class="token operator">=</span> fragment<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>fragment<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				fragment <span class="token operator">=</span> first<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Require either new content or an interest in ignored elements to invoke the callback</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>first <span class="token operator">||</span> ignored<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				scripts <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token function">getAll</span><span class="token punctuation">(</span>fragment<span class="token punctuation">,</span> <span class="token string">&quot;script&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> disableScript<span class="token punctuation">)</span><span class="token punctuation">;</span>
				hasScripts <span class="token operator">=</span> scripts<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

				<span class="token comment">// Use the original fragment for the last item</span>
				<span class="token comment">// instead of the first because it can end up</span>
				<span class="token comment">// being emptied incorrectly in certain situations (#8070).</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					node <span class="token operator">=</span> fragment<span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">!==</span> iNoClone<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						node <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token comment">// Keep references to cloned scripts for later restoration</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>hasScripts<span class="token punctuation">)</span> <span class="token punctuation">{</span>

							<span class="token comment">// Support: Android &lt;=4.0 only, PhantomJS 1 only</span>
							<span class="token comment">// push.apply(_, arraylike) throws on ancient WebKit</span>
							jQuery<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>scripts<span class="token punctuation">,</span> <span class="token function">getAll</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> <span class="token string">&quot;script&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>

					<span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>collection<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> node<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span>hasScripts<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					doc <span class="token operator">=</span> scripts<span class="token punctuation">[</span>scripts<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ownerDocument<span class="token punctuation">;</span>

					<span class="token comment">// Reenable scripts</span>
					jQuery<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>scripts<span class="token punctuation">,</span> restoreScript<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// Evaluate executable scripts on first document insertion</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> hasScripts<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						node <span class="token operator">=</span> scripts<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>rscriptType<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>type <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
							<span class="token operator">!</span>dataPriv<span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> <span class="token string">&quot;globalEval&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
							jQuery<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>doc<span class="token punctuation">,</span> node<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

							<span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>src <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>type <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

								<span class="token comment">// Optional AJAX dependency, but won't run scripts if not present</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>_evalUrl <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>node<span class="token punctuation">.</span>noModule<span class="token punctuation">)</span> <span class="token punctuation">{</span>
									jQuery<span class="token punctuation">.</span><span class="token function">_evalUrl</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>src<span class="token punctuation">,</span> <span class="token punctuation">{</span>
										<span class="token literal-property property">nonce</span><span class="token operator">:</span> node<span class="token punctuation">.</span>nonce <span class="token operator">||</span> node<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;nonce&quot;</span><span class="token punctuation">)</span>
									<span class="token punctuation">}</span><span class="token punctuation">,</span> doc<span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
								<span class="token function">DOMEval</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>textContent<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rcleanScript<span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> node<span class="token punctuation">,</span> doc<span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> collection<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">function</span> <span class="token function">remove</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> selector<span class="token punctuation">,</span> keepData</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> node<span class="token punctuation">,</span>
			nodes <span class="token operator">=</span> selector <span class="token operator">?</span> jQuery<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span> elem<span class="token punctuation">)</span> <span class="token operator">:</span> elem<span class="token punctuation">,</span>
			i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> <span class="token punctuation">(</span>node <span class="token operator">=</span> nodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>keepData <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span><span class="token function">cleanData</span><span class="token punctuation">(</span><span class="token function">getAll</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>keepData <span class="token operator">&amp;&amp;</span> <span class="token function">isAttached</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">setGlobalEval</span><span class="token punctuation">(</span><span class="token function">getAll</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> <span class="token string">&quot;script&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				node<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> elem<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token function-variable function">htmlPrefilter</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">html</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> html<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">clone</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> dataAndEvents<span class="token punctuation">,</span> deepDataAndEvents</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> i<span class="token punctuation">,</span> l<span class="token punctuation">,</span> srcElements<span class="token punctuation">,</span> destElements<span class="token punctuation">,</span>
				clone <span class="token operator">=</span> elem<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				inPage <span class="token operator">=</span> <span class="token function">isAttached</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Fix IE cloning issues</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>support<span class="token punctuation">.</span>noCloneChecked <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">||</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
				<span class="token operator">!</span>jQuery<span class="token punctuation">.</span><span class="token function">isXMLDoc</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// We eschew Sizzle here for performance reasons: https://jsperf.com/getall-vs-sizzle/2</span>
				destElements <span class="token operator">=</span> <span class="token function">getAll</span><span class="token punctuation">(</span>clone<span class="token punctuation">)</span><span class="token punctuation">;</span>
				srcElements <span class="token operator">=</span> <span class="token function">getAll</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> srcElements<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">fixInput</span><span class="token punctuation">(</span>srcElements<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> destElements<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Copy the events from the original to the clone</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>dataAndEvents<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>deepDataAndEvents<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					srcElements <span class="token operator">=</span> srcElements <span class="token operator">||</span> <span class="token function">getAll</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
					destElements <span class="token operator">=</span> destElements <span class="token operator">||</span> <span class="token function">getAll</span><span class="token punctuation">(</span>clone<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> srcElements<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token function">cloneCopyEvent</span><span class="token punctuation">(</span>srcElements<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> destElements<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					<span class="token function">cloneCopyEvent</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> clone<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Preserve script evaluation history</span>
			destElements <span class="token operator">=</span> <span class="token function">getAll</span><span class="token punctuation">(</span>clone<span class="token punctuation">,</span> <span class="token string">&quot;script&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>destElements<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">setGlobalEval</span><span class="token punctuation">(</span>destElements<span class="token punctuation">,</span> <span class="token operator">!</span>inPage <span class="token operator">&amp;&amp;</span> <span class="token function">getAll</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;script&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Return the cloned set</span>
			<span class="token keyword">return</span> clone<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">cleanData</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elems</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> data<span class="token punctuation">,</span> elem<span class="token punctuation">,</span> type<span class="token punctuation">,</span>
				special <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">,</span>
				i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> <span class="token punctuation">(</span>elem <span class="token operator">=</span> elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">acceptData</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>data <span class="token operator">=</span> elem<span class="token punctuation">[</span>dataPriv<span class="token punctuation">.</span>expando<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">for</span> <span class="token punctuation">(</span>type <span class="token keyword">in</span> data<span class="token punctuation">.</span>events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span>special<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
									jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>

									<span class="token comment">// This is a shortcut to avoid jQuery.event.remove's overhead</span>
								<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
									jQuery<span class="token punctuation">.</span><span class="token function">removeEvent</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> type<span class="token punctuation">,</span> data<span class="token punctuation">.</span>handle<span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// Support: Chrome &lt;=35 - 45+</span>
						<span class="token comment">// Assign undefined instead of using delete, see Data#remove</span>
						elem<span class="token punctuation">[</span>dataPriv<span class="token punctuation">.</span>expando<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">[</span>dataUser<span class="token punctuation">.</span>expando<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

						<span class="token comment">// Support: Chrome &lt;=35 - 45+</span>
						<span class="token comment">// Assign undefined instead of using delete, see Data#remove</span>
						elem<span class="token punctuation">[</span>dataUser<span class="token punctuation">.</span>expando<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token function-variable function">detach</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> selector<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">remove</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">text</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">access</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> value <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span>
					jQuery<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token operator">:</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">11</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">9</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">this</span><span class="token punctuation">.</span>textContent <span class="token operator">=</span> value<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> value<span class="token punctuation">,</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">append</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">domManip</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">11</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">9</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> target <span class="token operator">=</span> <span class="token function">manipulationTarget</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
					target<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">prepend</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">domManip</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">11</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">9</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> target <span class="token operator">=</span> <span class="token function">manipulationTarget</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
					target<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> target<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">before</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">domManip</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">after</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">domManip</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nextSibling<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">empty</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> elem<span class="token punctuation">,</span>
				i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> <span class="token punctuation">(</span>elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Prevent memory leaks</span>
					jQuery<span class="token punctuation">.</span><span class="token function">cleanData</span><span class="token punctuation">(</span><span class="token function">getAll</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// Remove any remaining nodes</span>
					elem<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">clone</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">dataAndEvents<span class="token punctuation">,</span> deepDataAndEvents</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			dataAndEvents <span class="token operator">=</span> dataAndEvents <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">:</span> dataAndEvents<span class="token punctuation">;</span>
			deepDataAndEvents <span class="token operator">=</span> deepDataAndEvents <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> dataAndEvents <span class="token operator">:</span> deepDataAndEvents<span class="token punctuation">;</span>

			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> dataAndEvents<span class="token punctuation">,</span> deepDataAndEvents<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">html</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">access</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
					i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
					l <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> elem<span class="token punctuation">.</span>innerHTML<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// See if we can take a shortcut and just use innerHTML</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>rnoInnerhtml<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
					<span class="token operator">!</span>wrapMap<span class="token punctuation">[</span><span class="token punctuation">(</span>rtagName<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					value <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">htmlPrefilter</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token keyword">try</span> <span class="token punctuation">{</span>
						<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

							<span class="token comment">// Remove element nodes and prevent memory leaks</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								jQuery<span class="token punctuation">.</span><span class="token function">cleanData</span><span class="token punctuation">(</span><span class="token function">getAll</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
								elem<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> value<span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>

						elem <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

						<span class="token comment">// If using innerHTML throws an exception, use the fallback method</span>
					<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> value<span class="token punctuation">,</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">replaceWith</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> ignored <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token comment">// Make the changes, replacing each non-ignored context element with the new content</span>
			<span class="token keyword">return</span> <span class="token function">domManip</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> parent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> ignored<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					jQuery<span class="token punctuation">.</span><span class="token function">cleanData</span><span class="token punctuation">(</span><span class="token function">getAll</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						parent<span class="token punctuation">.</span><span class="token function">replaceChild</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Force callback invocation</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span> ignored<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">appendTo</span><span class="token operator">:</span> <span class="token string">&quot;append&quot;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">prependTo</span><span class="token operator">:</span> <span class="token string">&quot;prepend&quot;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">insertBefore</span><span class="token operator">:</span> <span class="token string">&quot;before&quot;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">insertAfter</span><span class="token operator">:</span> <span class="token string">&quot;after&quot;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">replaceAll</span><span class="token operator">:</span> <span class="token string">&quot;replaceWith&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> original</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> elems<span class="token punctuation">,</span>
				ret <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
				insert <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">,</span>
				last <span class="token operator">=</span> insert<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span>
				i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> last<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				elems <span class="token operator">=</span> i <span class="token operator">===</span> last <span class="token operator">?</span> <span class="token keyword">this</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">jQuery</span><span class="token punctuation">(</span>insert<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span>original<span class="token punctuation">]</span><span class="token punctuation">(</span>elems<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Support: Android &lt;=4.0 only, PhantomJS 1 only</span>
				<span class="token comment">// .get() because push.apply(_, arraylike) throws on ancient WebKit</span>
				<span class="token function">push</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>ret<span class="token punctuation">,</span> elems<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> rnumnonpx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;^(&quot;</span> <span class="token operator">+</span> pnum <span class="token operator">+</span> <span class="token string">&quot;)(?!px)[a-z%]+$&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;i&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">var</span> <span class="token function-variable function">getStyles</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token comment">// Support: IE &lt;=11 only, Firefox &lt;=30 (#15098, #14150)</span>
		<span class="token comment">// IE throws on elements created in popups</span>
		<span class="token comment">// FF meanwhile throws on frame elements through &quot;defaultView.getComputedStyle&quot;</span>
		<span class="token keyword">var</span> view <span class="token operator">=</span> elem<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">.</span>defaultView<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>view <span class="token operator">||</span> <span class="token operator">!</span>view<span class="token punctuation">.</span>opener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			view <span class="token operator">=</span> window<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> view<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">//快照处理</span>
	<span class="token keyword">var</span> <span class="token function-variable function">swap</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> options<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> ret<span class="token punctuation">,</span> name<span class="token punctuation">,</span>
			old <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token comment">// Remember the old values, and insert the new ones</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>name <span class="token keyword">in</span> options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			old<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> elem<span class="token punctuation">.</span>style<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
			elem<span class="token punctuation">.</span>style<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> options<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		ret <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Revert the old values</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>name <span class="token keyword">in</span> options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			elem<span class="token punctuation">.</span>style<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> old<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>


	<span class="token keyword">var</span> rboxStyle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>cssExpand<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;|&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;i&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


	<span class="token comment">//兼容判断</span>
	<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token comment">// Executing both pixelPosition &amp; boxSizingReliable tests require only one layout</span>
		<span class="token comment">// so they're executed at the same time to save the second computation.</span>
		<span class="token comment">//计算属性测试</span>
		<span class="token keyword">function</span> <span class="token function">computeStyleTests</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// This is a singleton, we need to execute it only once</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>div<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			container<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">=</span> <span class="token string">&quot;position:absolute;left:-11111px;width:60px;&quot;</span> <span class="token operator">+</span>
				<span class="token string">&quot;margin-top:1px;padding:0;border:0&quot;</span><span class="token punctuation">;</span>
			div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">=</span>
				<span class="token string">&quot;position:relative;display:block;box-sizing:border-box;overflow:scroll;&quot;</span> <span class="token operator">+</span>
				<span class="token string">&quot;margin:auto;border:1px;padding:1px;&quot;</span> <span class="token operator">+</span>
				<span class="token string">&quot;width:60%;top:1%&quot;</span><span class="token punctuation">;</span>
			documentElement<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">var</span> divStyle <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
			pixelPositionVal <span class="token operator">=</span> divStyle<span class="token punctuation">.</span>top <span class="token operator">!==</span> <span class="token string">&quot;1%&quot;</span><span class="token punctuation">;</span>

			<span class="token comment">// Support: Android 4.0 - 4.3 only, Firefox &lt;=3 - 44</span>
			reliableMarginLeftVal <span class="token operator">=</span> <span class="token function">roundPixelMeasures</span><span class="token punctuation">(</span>divStyle<span class="token punctuation">.</span>marginLeft<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">12</span><span class="token punctuation">;</span>

			<span class="token comment">// Support: Android 4.0 - 4.3 only, Safari &lt;=9.1 - 10.1, iOS &lt;=7.0 - 9.3</span>
			<span class="token comment">// Some styles come back with percentage values, even though they shouldn't</span>
			div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token string">&quot;60%&quot;</span><span class="token punctuation">;</span>
			pixelBoxStylesVal <span class="token operator">=</span> <span class="token function">roundPixelMeasures</span><span class="token punctuation">(</span>divStyle<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">36</span><span class="token punctuation">;</span>

			<span class="token comment">// Support: IE 9 - 11 only</span>
			<span class="token comment">// Detect misreporting of content dimensions for box-sizing:border-box elements</span>
			boxSizingReliableVal <span class="token operator">=</span> <span class="token function">roundPixelMeasures</span><span class="token punctuation">(</span>divStyle<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">36</span><span class="token punctuation">;</span>

			<span class="token comment">// Support: IE 9 only</span>
			<span class="token comment">// Detect overflow:scroll screwiness (gh-3699)</span>
			<span class="token comment">// Support: Chrome &lt;=64</span>
			<span class="token comment">// Don't get tricked when zoom affects offsetWidth (gh-4029)</span>
			div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">&quot;absolute&quot;</span><span class="token punctuation">;</span>
			scrollboxSizeVal <span class="token operator">=</span> <span class="token function">roundPixelMeasures</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>offsetWidth <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">12</span><span class="token punctuation">;</span>

			documentElement<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Nullify the div so it wouldn't be stored in the memory and</span>
			<span class="token comment">// it will also be a sign that checks already performed</span>
			div <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">function</span> <span class="token function">roundPixelMeasures</span> <span class="token punctuation">(</span><span class="token parameter">measure</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>measure<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">var</span> pixelPositionVal<span class="token punctuation">,</span> boxSizingReliableVal<span class="token punctuation">,</span> scrollboxSizeVal<span class="token punctuation">,</span> pixelBoxStylesVal<span class="token punctuation">,</span>
			reliableTrDimensionsVal<span class="token punctuation">,</span> reliableMarginLeftVal<span class="token punctuation">,</span>
			container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Finish early in limited (non-browser) environments</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>div<span class="token punctuation">.</span>style<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Support: IE &lt;=9 - 11 only</span>
		<span class="token comment">// Style of cloned element affects source element cloned (#8908)</span>
		div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundClip <span class="token operator">=</span> <span class="token string">&quot;content-box&quot;</span><span class="token punctuation">;</span>
		div<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundClip <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
		support<span class="token punctuation">.</span>clearCloneStyle <span class="token operator">=</span> div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundClip <span class="token operator">===</span> <span class="token string">&quot;content-box&quot;</span><span class="token punctuation">;</span>

		jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>support<span class="token punctuation">,</span> <span class="token punctuation">{</span>
			<span class="token function-variable function">boxSizingReliable</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">computeStyleTests</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> boxSizingReliableVal<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">pixelBoxStyles</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">computeStyleTests</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> pixelBoxStylesVal<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">pixelPosition</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">computeStyleTests</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> pixelPositionVal<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">reliableMarginLeft</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">computeStyleTests</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> reliableMarginLeftVal<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">scrollboxSize</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">computeStyleTests</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> scrollboxSizeVal<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">// Support: IE 9 - 11+, Edge 15 - 18+</span>
			<span class="token comment">// IE/Edge misreport `getComputedStyle` of table rows with width/height</span>
			<span class="token comment">// set in CSS while `offset*` properties report correct values.</span>
			<span class="token comment">// Behavior in IE 9 is more subtle than in newer versions &amp; it passes</span>
			<span class="token comment">// some versions of this test; make sure not to make it pass there!</span>
			<span class="token function-variable function">reliableTrDimensions</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> table<span class="token punctuation">,</span> tr<span class="token punctuation">,</span> trChild<span class="token punctuation">,</span> trStyle<span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>reliableTrDimensionsVal <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					table <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;table&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					tr <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;tr&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					trChild <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

					table<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">=</span> <span class="token string">&quot;position:absolute;left:-11111px&quot;</span><span class="token punctuation">;</span>
					tr<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">&quot;1px&quot;</span><span class="token punctuation">;</span>
					trChild<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">&quot;9px&quot;</span><span class="token punctuation">;</span>

					documentElement
						<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span>
						<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>tr<span class="token punctuation">)</span>
						<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>trChild<span class="token punctuation">)</span><span class="token punctuation">;</span>

					trStyle <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>tr<span class="token punctuation">)</span><span class="token punctuation">;</span>
					reliableTrDimensionsVal <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>trStyle<span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">;</span>

					documentElement<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">return</span> reliableTrDimensionsVal<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


	<span class="token keyword">function</span> <span class="token function">curCSS</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> computed</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> width<span class="token punctuation">,</span> minWidth<span class="token punctuation">,</span> maxWidth<span class="token punctuation">,</span> ret<span class="token punctuation">,</span>

			<span class="token comment">// Support: Firefox 51+</span>
			<span class="token comment">// Retrieving style before computed somehow</span>
			<span class="token comment">// fixes an issue with getting wrong values</span>
			<span class="token comment">// on detached elements</span>
			style <span class="token operator">=</span> elem<span class="token punctuation">.</span>style<span class="token punctuation">;</span>

		computed <span class="token operator">=</span> computed <span class="token operator">||</span> <span class="token function">getStyles</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// getPropertyValue is needed for:</span>
		<span class="token comment">//   .css('filter') (IE 9 only, #12537)</span>
		<span class="token comment">//   .css('--customProperty) (#3144)</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>computed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			ret <span class="token operator">=</span> computed<span class="token punctuation">.</span><span class="token function">getPropertyValue</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">||</span> computed<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>ret <span class="token operator">===</span> <span class="token string">&quot;&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">isAttached</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				ret <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// A tribute to the &quot;awesome hack by Dean Edwards&quot;</span>
			<span class="token comment">// Android Browser returns percentage for some values,</span>
			<span class="token comment">// but width seems to be reliably pixels.</span>
			<span class="token comment">// This is against the CSSOM draft spec:</span>
			<span class="token comment">// https://drafts.csswg.org/cssom/#resolved-values</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>support<span class="token punctuation">.</span><span class="token function">pixelBoxStyles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> rnumnonpx<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> rboxStyle<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Remember the original values</span>
				width <span class="token operator">=</span> style<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
				minWidth <span class="token operator">=</span> style<span class="token punctuation">.</span>minWidth<span class="token punctuation">;</span>
				maxWidth <span class="token operator">=</span> style<span class="token punctuation">.</span>maxWidth<span class="token punctuation">;</span>

				<span class="token comment">// Put in the new values to get a computed value out</span>
				style<span class="token punctuation">.</span>minWidth <span class="token operator">=</span> style<span class="token punctuation">.</span>maxWidth <span class="token operator">=</span> style<span class="token punctuation">.</span>width <span class="token operator">=</span> ret<span class="token punctuation">;</span>
				ret <span class="token operator">=</span> computed<span class="token punctuation">.</span>width<span class="token punctuation">;</span>

				<span class="token comment">// Revert the changed values</span>
				style<span class="token punctuation">.</span>width <span class="token operator">=</span> width<span class="token punctuation">;</span>
				style<span class="token punctuation">.</span>minWidth <span class="token operator">=</span> minWidth<span class="token punctuation">;</span>
				style<span class="token punctuation">.</span>maxWidth <span class="token operator">=</span> maxWidth<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> ret <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">?</span>

			<span class="token comment">// Support: IE &lt;=9 - 11 only</span>
			<span class="token comment">// IE returns zIndex value as an integer.</span>
			ret <span class="token operator">+</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span>
			ret<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>


	<span class="token keyword">function</span> <span class="token function">addGetHookIf</span> <span class="token punctuation">(</span><span class="token parameter">conditionFn<span class="token punctuation">,</span> hookFn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token comment">// Define the hook, we'll check on the first run if it's really needed.</span>
		<span class="token keyword">return</span> <span class="token punctuation">{</span>
			<span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">conditionFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Hook not needed (or it's not possible to use it due</span>
					<span class="token comment">// to missing dependency), remove it.</span>
					<span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>get<span class="token punctuation">;</span>
					<span class="token keyword">return</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Hook needed; redefine it so that the support test is not executed again.</span>
				<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>get <span class="token operator">=</span> hookFn<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//css前缀</span>
	<span class="token keyword">var</span> cssPrefixes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;Webkit&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Moz&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ms&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token comment">//空样式</span>
		emptyStyle <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">,</span>
		vendorProps <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">//兼容性处理</span>
	<span class="token comment">// Return a vendor-prefixed property or undefined</span>
	<span class="token keyword">function</span> <span class="token function">vendorPropName</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Check for vendor prefixed names</span>
		<span class="token keyword">var</span> capName <span class="token operator">=</span> name<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> name<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			i <span class="token operator">=</span> cssPrefixes<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

		<span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			name <span class="token operator">=</span> cssPrefixes<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> capName<span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token keyword">in</span> emptyStyle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> name<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Return a potentially-mapped jQuery.cssProps or vendor prefixed property</span>
	<span class="token keyword">function</span> <span class="token function">finalPropName</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> final <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>cssProps<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">||</span> vendorProps<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>final<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> final<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token keyword">in</span> emptyStyle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> name<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> vendorProps<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">vendorPropName</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">||</span> name<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>


	<span class="token keyword">var</span>

		<span class="token comment">// Swappable if display is none or starts with table</span>
		<span class="token comment">// except &quot;table&quot;, &quot;table-cell&quot;, or &quot;table-caption&quot;</span>
		<span class="token comment">// See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display</span>
		<span class="token comment">//去除display为none或者 &quot;table&quot;, &quot;table-cell&quot;, or &quot;table-caption&quot;的情况</span>
		rdisplayswap <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(none|table(?!-c[ea]).+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		rcustomProp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^--</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		cssShow <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">&quot;absolute&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">visibility</span><span class="token operator">:</span> <span class="token string">&quot;hidden&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">display</span><span class="token operator">:</span> <span class="token string">&quot;block&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
		cssNormalTransform <span class="token operator">=</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">letterSpacing</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">fontWeight</span><span class="token operator">:</span> <span class="token string">&quot;400&quot;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token keyword">function</span> <span class="token function">setPositiveNumber</span> <span class="token punctuation">(</span><span class="token parameter">_elem<span class="token punctuation">,</span> value<span class="token punctuation">,</span> subtract</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token comment">// Any relative (+/-) values have already been</span>
		<span class="token comment">// normalized at this point</span>
		<span class="token keyword">var</span> matches <span class="token operator">=</span> rcssNum<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> matches <span class="token operator">?</span>

			<span class="token comment">// Guard against undefined &quot;subtract&quot;, e.g., when used as in cssHooks</span>
			Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> matches<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token punctuation">(</span>subtract <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>matches<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">)</span> <span class="token operator">:</span>
			value<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//盒模型计算width和height</span>
	<span class="token keyword">function</span> <span class="token function">boxModelAdjustment</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> dimension<span class="token punctuation">,</span> box<span class="token punctuation">,</span> isBorderBox<span class="token punctuation">,</span> styles<span class="token punctuation">,</span> computedVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> i <span class="token operator">=</span> dimension <span class="token operator">===</span> <span class="token string">&quot;width&quot;</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
			extra <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
			delta <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

		<span class="token comment">// Adjustment may not be necessary</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>box <span class="token operator">===</span> <span class="token punctuation">(</span>isBorderBox <span class="token operator">?</span> <span class="token string">&quot;border&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;content&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// Both box models exclude margin</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>box <span class="token operator">===</span> <span class="token string">&quot;margin&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				delta <span class="token operator">+=</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> box <span class="token operator">+</span> cssExpand<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> styles<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">//content-box</span>
			<span class="token comment">// If we get here with a content-box, we're seeking &quot;padding&quot; or &quot;border&quot; or &quot;margin&quot;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isBorderBox<span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Add padding</span>
				delta <span class="token operator">+=</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;padding&quot;</span> <span class="token operator">+</span> cssExpand<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> styles<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// For &quot;border&quot; or &quot;margin&quot;, add border</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>box <span class="token operator">!==</span> <span class="token string">&quot;padding&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					delta <span class="token operator">+=</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;border&quot;</span> <span class="token operator">+</span> cssExpand<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot;Width&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> styles<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// But still keep track of it otherwise</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					extra <span class="token operator">+=</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;border&quot;</span> <span class="token operator">+</span> cssExpand<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot;Width&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> styles<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// If we get here with a border-box (content + padding + border), we're seeking &quot;content&quot; or</span>
				<span class="token comment">// &quot;padding&quot; or &quot;margin&quot;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

				<span class="token comment">// For &quot;content&quot;, subtract padding</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>box <span class="token operator">===</span> <span class="token string">&quot;content&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					delta <span class="token operator">-=</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;padding&quot;</span> <span class="token operator">+</span> cssExpand<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> styles<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// For &quot;content&quot; or &quot;padding&quot;, subtract border</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>box <span class="token operator">!==</span> <span class="token string">&quot;margin&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					delta <span class="token operator">-=</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;border&quot;</span> <span class="token operator">+</span> cssExpand<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot;Width&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> styles<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Account for positive content-box scroll gutter when requested by providing computedVal</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isBorderBox <span class="token operator">&amp;&amp;</span> computedVal <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// offsetWidth/offsetHeight is a rounded sum of content, padding, scroll gutter, and border</span>
			<span class="token comment">// Assuming integer scroll gutter, subtract the rest and round down</span>
			delta <span class="token operator">+=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>
				elem<span class="token punctuation">[</span><span class="token string">&quot;offset&quot;</span> <span class="token operator">+</span> dimension<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> dimension<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">-</span>
				computedVal <span class="token operator">-</span>
				delta <span class="token operator">-</span>
				extra <span class="token operator">-</span>
				<span class="token number">0.5</span>

				<span class="token comment">// If offsetWidth/offsetHeight is unknown, then we can't determine content-box scroll gutter</span>
				<span class="token comment">// Use an explicit zero to avoid NaN (gh-3964)</span>
			<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> delta<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//获取宽度或高度</span>
	<span class="token keyword">function</span> <span class="token function">getWidthOrHeight</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> dimension<span class="token punctuation">,</span> extra</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token comment">// 获取计算属性</span>
		<span class="token keyword">var</span> styles <span class="token operator">=</span> <span class="token function">getStyles</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">,</span>

			<span class="token comment">// To avoid forcing a reflow, only fetch boxSizing if we need it (gh-4322).</span>
			<span class="token comment">// Fake content-box until we know it's needed to know the true value.</span>
			<span class="token comment">//是否需要应用了boxSizing属性</span>
			boxSizingNeeded <span class="token operator">=</span> <span class="token operator">!</span>support<span class="token punctuation">.</span><span class="token function">boxSizingReliable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> extra<span class="token punctuation">,</span>
			<span class="token comment">//判断boxSizing的属性是否是border-box</span>
			isBorderBox <span class="token operator">=</span> boxSizingNeeded <span class="token operator">&amp;&amp;</span>
				jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;boxSizing&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> styles<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;border-box&quot;</span><span class="token punctuation">,</span>
			valueIsBorderBox <span class="token operator">=</span> isBorderBox<span class="token punctuation">,</span>
			<span class="token comment">//获取属性值</span>
			val <span class="token operator">=</span> <span class="token function">curCSS</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> dimension<span class="token punctuation">,</span> styles<span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token comment">//offset属性</span>
			offsetProp <span class="token operator">=</span> <span class="token string">&quot;offset&quot;</span> <span class="token operator">+</span> dimension<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> dimension<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Support: Firefox &lt;=54</span>
		<span class="token comment">// Return a confounding non-pixel value or feign ignorance, as appropriate.</span>
		<span class="token comment">//判断属性值是否是</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>rnumnonpx<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>extra<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> val<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			val <span class="token operator">=</span> <span class="token string">&quot;auto&quot;</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>


		<span class="token comment">// Support: IE 9 - 11 only</span>
		<span class="token comment">// Use offsetWidth/offsetHeight for when box sizing is unreliable.</span>
		<span class="token comment">// In those cases, the computed value can be trusted to be border-box.</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">!</span>support<span class="token punctuation">.</span><span class="token function">boxSizingReliable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> isBorderBox <span class="token operator">||</span>

			<span class="token comment">// Support: IE 10 - 11+, Edge 15 - 18+</span>
			<span class="token comment">// IE/Edge misreport `getComputedStyle` of table rows with width/height</span>
			<span class="token comment">// set in CSS while `offset*` properties report correct values.</span>
			<span class="token comment">// Interestingly, in some cases IE 9 doesn't suffer from this issue.</span>
			<span class="token operator">!</span>support<span class="token punctuation">.</span><span class="token function">reliableTrDimensions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">nodeName</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;tr&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span>

			<span class="token comment">// Fall back to offsetWidth/offsetHeight when value is &quot;auto&quot;</span>
			<span class="token comment">// This happens for inline elements with no explicit setting (gh-3571)</span>
			val <span class="token operator">===</span> <span class="token string">&quot;auto&quot;</span> <span class="token operator">||</span>

			<span class="token comment">// Support: Android &lt;=4.1 - 4.3 only</span>
			<span class="token comment">// Also use offsetWidth/offsetHeight for misreported inline dimensions (gh-3602)</span>
			<span class="token operator">!</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;display&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> styles<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;inline&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>

			<span class="token comment">// Make sure the element is visible &amp; connected</span>
			elem<span class="token punctuation">.</span><span class="token function">getClientRects</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">//获取属性值</span>
			isBorderBox <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;boxSizing&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> styles<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;border-box&quot;</span><span class="token punctuation">;</span>

			<span class="token comment">// Where available, offsetWidth/offsetHeight approximate border box dimensions.</span>
			<span class="token comment">// Where not available (e.g., SVG), assume unreliable box-sizing and interpret the</span>
			<span class="token comment">// retrieved value as a content box dimension.</span>
			valueIsBorderBox <span class="token operator">=</span> offsetProp <span class="token keyword">in</span> elem<span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>valueIsBorderBox<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				val <span class="token operator">=</span> elem<span class="token punctuation">[</span>offsetProp<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Normalize &quot;&quot; and auto 将值转换为Number类型</span>
		val <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>

		<span class="token comment">// Adjust for the element's box model</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>val <span class="token operator">+</span>
			<span class="token function">boxModelAdjustment</span><span class="token punctuation">(</span>
				elem<span class="token punctuation">,</span>
				dimension<span class="token punctuation">,</span>
				extra <span class="token operator">||</span> <span class="token punctuation">(</span>isBorderBox <span class="token operator">?</span> <span class="token string">&quot;border&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;content&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				valueIsBorderBox<span class="token punctuation">,</span>
				styles<span class="token punctuation">,</span>

				<span class="token comment">// Provide the current computed size to request scroll gutter calculation (gh-3589)</span>
				val
			<span class="token punctuation">)</span>
		<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

		<span class="token comment">// Add in style property hooks for overriding the default</span>
		<span class="token comment">// behavior of getting and setting a style property</span>
		<span class="token literal-property property">cssHooks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token comment">//获取透明度的值</span>
			<span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> computed</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>computed<span class="token punctuation">)</span> <span class="token punctuation">{</span>

						<span class="token comment">// We should always get a number back from opacity</span>
						<span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token function">curCSS</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;opacity&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">return</span> ret <span class="token operator">===</span> <span class="token string">&quot;&quot;</span> <span class="token operator">?</span> <span class="token string">&quot;1&quot;</span> <span class="token operator">:</span> ret<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">// Don't automatically add &quot;px&quot; to these possibly-unitless properties</span>
		<span class="token literal-property property">cssNumber</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token string-property property">&quot;animationIterationCount&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token string-property property">&quot;columnCount&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token string-property property">&quot;fillOpacity&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token string-property property">&quot;flexGrow&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token string-property property">&quot;flexShrink&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token string-property property">&quot;fontWeight&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token string-property property">&quot;gridArea&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token string-property property">&quot;gridColumn&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token string-property property">&quot;gridColumnEnd&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token string-property property">&quot;gridColumnStart&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token string-property property">&quot;gridRow&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token string-property property">&quot;gridRowEnd&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token string-property property">&quot;gridRowStart&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token string-property property">&quot;lineHeight&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token string-property property">&quot;opacity&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token string-property property">&quot;order&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token string-property property">&quot;orphans&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token string-property property">&quot;widows&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token string-property property">&quot;zIndex&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token string-property property">&quot;zoom&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">// Add in properties whose names you wish to fix before</span>
		<span class="token comment">// setting or getting the value</span>
		<span class="token literal-property property">cssProps</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">// Get and set the style property on a DOM Node</span>
		<span class="token function-variable function">style</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> value<span class="token punctuation">,</span> extra</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">//文本或注释节点不考虑</span>
			<span class="token comment">// Don't set styles on text and comment nodes</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>elem <span class="token operator">||</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">3</span> <span class="token operator">||</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">8</span> <span class="token operator">||</span> <span class="token operator">!</span>elem<span class="token punctuation">.</span>style<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Make sure that we're working with the right name</span>
			<span class="token keyword">var</span> ret<span class="token punctuation">,</span> type<span class="token punctuation">,</span> hooks<span class="token punctuation">,</span>
				origName <span class="token operator">=</span> <span class="token function">camelCase</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token comment">// rcustomProp = /^--/</span>
				isCustomProp <span class="token operator">=</span> rcustomProp<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span>
				style <span class="token operator">=</span> elem<span class="token punctuation">.</span>style<span class="token punctuation">;</span>

			<span class="token comment">// Make sure that we're working with the right name. We don't</span>
			<span class="token comment">// want to query the value if it is a CSS custom property</span>
			<span class="token comment">// since they are user-defined.</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isCustomProp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				name <span class="token operator">=</span> <span class="token function">finalPropName</span><span class="token punctuation">(</span>origName<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Gets hook for the prefixed version, then unprefixed version</span>
			hooks <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>cssHooks<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">||</span> jQuery<span class="token punctuation">.</span>cssHooks<span class="token punctuation">[</span>origName<span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token comment">// Check if we're setting a value</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				type <span class="token operator">=</span> <span class="token keyword">typeof</span> value<span class="token punctuation">;</span>

				<span class="token comment">// Convert &quot;+=&quot; or &quot;-=&quot; to relative numbers (#7345)</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>ret <span class="token operator">=</span> rcssNum<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> ret<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">//调整样式 += -=</span>
					value <span class="token operator">=</span> <span class="token function">adjustCSS</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> ret<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// Fixes bug #9237</span>
					type <span class="token operator">=</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Make sure that null and NaN values aren't set (#7116)</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> value <span class="token operator">!==</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// If a number was passed in, add the unit (except for certain CSS properties)</span>
				<span class="token comment">// The isCustomProp check can be removed in jQuery 4.0 when we only auto-append</span>
				<span class="token comment">// &quot;px&quot; to a few hardcoded values.</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&quot;number&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isCustomProp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					value <span class="token operator">+=</span> ret <span class="token operator">&amp;&amp;</span> ret<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>cssNumber<span class="token punctuation">[</span>origName<span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// background-* props affect original clone's values</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>support<span class="token punctuation">.</span>clearCloneStyle <span class="token operator">&amp;&amp;</span> value <span class="token operator">===</span> <span class="token string">&quot;&quot;</span> <span class="token operator">&amp;&amp;</span> name<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;background&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					style<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;inherit&quot;</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token comment">//设置属性值</span>
				<span class="token comment">// If a hook was provided, use that value, otherwise just set the specified value</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>hooks <span class="token operator">||</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token string">&quot;set&quot;</span> <span class="token keyword">in</span> hooks<span class="token punctuation">)</span> <span class="token operator">||</span>
					<span class="token punctuation">(</span>value <span class="token operator">=</span> hooks<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> value<span class="token punctuation">,</span> extra<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span>isCustomProp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						style<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						style<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

				<span class="token comment">// If a hook was provided get the non-computed value from there</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>hooks <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;get&quot;</span> <span class="token keyword">in</span> hooks <span class="token operator">&amp;&amp;</span>
					<span class="token punctuation">(</span>ret <span class="token operator">=</span> hooks<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> extra<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Otherwise just get the value from the style object</span>
				<span class="token keyword">return</span> style<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">//获取属性值</span>
		<span class="token function-variable function">css</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> extra<span class="token punctuation">,</span> styles</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> val<span class="token punctuation">,</span> num<span class="token punctuation">,</span> hooks<span class="token punctuation">,</span>
				<span class="token comment">//转换为小驼峰命名</span>
				origName <span class="token operator">=</span> <span class="token function">camelCase</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span>
				isCustomProp <span class="token operator">=</span> rcustomProp<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Make sure that we're working with the right name. We don't</span>
			<span class="token comment">// want to modify the value if it is a CSS custom property</span>
			<span class="token comment">// since they are user-defined.</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isCustomProp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				name <span class="token operator">=</span> <span class="token function">finalPropName</span><span class="token punctuation">(</span>origName<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Try prefixed name followed by the unprefixed name</span>
			hooks <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>cssHooks<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">||</span> jQuery<span class="token punctuation">.</span>cssHooks<span class="token punctuation">[</span>origName<span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token comment">// If a hook was provided get the computed value from there</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>hooks <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;get&quot;</span> <span class="token keyword">in</span> hooks<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				val <span class="token operator">=</span> hooks<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> extra<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Otherwise, if a way to get the computed value exists, use that</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				val <span class="token operator">=</span> <span class="token function">curCSS</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> styles<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Convert &quot;normal&quot; to computed value</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">===</span> <span class="token string">&quot;normal&quot;</span> <span class="token operator">&amp;&amp;</span> name <span class="token keyword">in</span> cssNormalTransform<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				val <span class="token operator">=</span> cssNormalTransform<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Make numeric if forced or a qualifier was provided and val looks numeric</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>extra <span class="token operator">===</span> <span class="token string">&quot;&quot;</span> <span class="token operator">||</span> extra<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				num <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> extra <span class="token operator">===</span> <span class="token boolean">true</span> <span class="token operator">||</span> <span class="token function">isFinite</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token operator">?</span> num <span class="token operator">||</span> <span class="token number">0</span> <span class="token operator">:</span> val<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> val<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//给width和height添加钩子</span>
	jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;width&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_i<span class="token punctuation">,</span> dimension</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">.</span>cssHooks<span class="token punctuation">[</span>dimension<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
			<span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> computed<span class="token punctuation">,</span> extra</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>computed<span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Certain elements can have dimension info if we invisibly show them</span>
					<span class="token comment">// but it must have a current display style that would benefit</span>
					<span class="token keyword">return</span> rdisplayswap<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;display&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
						<span class="token comment">//保存elem原来的属性，在执行过程中将elem设置为绝对定位</span>
						<span class="token comment">//cssShow = { position: &quot;absolute&quot;, visibility: &quot;hidden&quot;, display: &quot;block&quot; },</span>
						<span class="token punctuation">(</span><span class="token operator">!</span>elem<span class="token punctuation">.</span><span class="token function">getClientRects</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">||</span> <span class="token operator">!</span>elem<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">?</span>
						<span class="token function">swap</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> cssShow<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">return</span> <span class="token function">getWidthOrHeight</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> dimension<span class="token punctuation">,</span> extra<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">:</span>
						<span class="token function">getWidthOrHeight</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> dimension<span class="token punctuation">,</span> extra<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> value<span class="token punctuation">,</span> extra</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> matches<span class="token punctuation">,</span>
					styles <span class="token operator">=</span> <span class="token function">getStyles</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">,</span>

					<span class="token comment">// Only read styles.position if the test has a chance to fail</span>
					<span class="token comment">// to avoid forcing a reflow.</span>
					scrollboxSizeBuggy <span class="token operator">=</span> <span class="token operator">!</span>support<span class="token punctuation">.</span><span class="token function">scrollboxSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
						styles<span class="token punctuation">.</span>position <span class="token operator">===</span> <span class="token string">&quot;absolute&quot;</span><span class="token punctuation">,</span>

					<span class="token comment">// To avoid forcing a reflow, only fetch boxSizing if we need it (gh-3991)</span>
					boxSizingNeeded <span class="token operator">=</span> scrollboxSizeBuggy <span class="token operator">||</span> extra<span class="token punctuation">,</span>
					isBorderBox <span class="token operator">=</span> boxSizingNeeded <span class="token operator">&amp;&amp;</span>
						jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;boxSizing&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> styles<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;border-box&quot;</span><span class="token punctuation">,</span>
					<span class="token comment">//计算</span>
					subtract <span class="token operator">=</span> extra <span class="token operator">?</span>
						<span class="token function">boxModelAdjustment</span><span class="token punctuation">(</span>
							elem<span class="token punctuation">,</span>
							dimension<span class="token punctuation">,</span>
							extra<span class="token punctuation">,</span>
							isBorderBox<span class="token punctuation">,</span>
							styles
						<span class="token punctuation">)</span> <span class="token operator">:</span>
						<span class="token number">0</span><span class="token punctuation">;</span>

				<span class="token comment">// Account for unreliable border-box dimensions by comparing offset* to computed and</span>
				<span class="token comment">// faking a content-box to get border and padding (gh-3699)</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>isBorderBox <span class="token operator">&amp;&amp;</span> scrollboxSizeBuggy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">//box-sizing为border-box时</span>
					subtract <span class="token operator">-=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>
						elem<span class="token punctuation">[</span><span class="token string">&quot;offset&quot;</span> <span class="token operator">+</span> dimension<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> dimension<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">-</span>
						<span class="token function">parseFloat</span><span class="token punctuation">(</span>styles<span class="token punctuation">[</span>dimension<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span>
						<span class="token function">boxModelAdjustment</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> dimension<span class="token punctuation">,</span> <span class="token string">&quot;border&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> styles<span class="token punctuation">)</span> <span class="token operator">-</span>
						<span class="token number">0.5</span>
					<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// 如果value不带px等单位时</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>subtract <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>matches <span class="token operator">=</span> rcssNum<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
					<span class="token punctuation">(</span>matches<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">//设置宽或者高</span>
					elem<span class="token punctuation">.</span>style<span class="token punctuation">[</span>dimension<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
					value <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> dimension<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token comment">//矫正value</span>
				<span class="token keyword">return</span> <span class="token function">setPositiveNumber</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> value<span class="token punctuation">,</span> subtract<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//给marginLeft添加钩子</span>
	jQuery<span class="token punctuation">.</span>cssHooks<span class="token punctuation">.</span>marginLeft <span class="token operator">=</span> <span class="token function">addGetHookIf</span><span class="token punctuation">(</span>support<span class="token punctuation">.</span>reliableMarginLeft<span class="token punctuation">,</span>
		<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> computed</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>computed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token function">curCSS</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;marginLeft&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span>
					elem<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>left <span class="token operator">-</span>
					<span class="token function">swap</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">marginLeft</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> elem<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>left<span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span>
				<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// These hooks are used by animate to expand properties</span>
	jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">margin</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">border</span><span class="token operator">:</span> <span class="token string">&quot;Width&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">prefix<span class="token punctuation">,</span> suffix</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//前后缀钩子</span>
		jQuery<span class="token punctuation">.</span>cssHooks<span class="token punctuation">[</span>prefix <span class="token operator">+</span> suffix<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
			<span class="token function-variable function">expand</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
					expanded <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

					<span class="token comment">// Assumes a single number if not a string</span>
					parts <span class="token operator">=</span> <span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span> <span class="token operator">?</span> value<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">[</span>value<span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					expanded<span class="token punctuation">[</span>prefix <span class="token operator">+</span> cssExpand<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> suffix<span class="token punctuation">]</span> <span class="token operator">=</span>
						parts<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">||</span> parts<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">||</span> parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">return</span> expanded<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>prefix <span class="token operator">!==</span> <span class="token string">&quot;margin&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span>cssHooks<span class="token punctuation">[</span>prefix <span class="token operator">+</span> suffix<span class="token punctuation">]</span><span class="token punctuation">.</span>set <span class="token operator">=</span> setPositiveNumber<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//添加css原型方法</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token function-variable function">css</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">access</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> styles<span class="token punctuation">,</span> len<span class="token punctuation">,</span>
					map <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
					i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					styles <span class="token operator">=</span> <span class="token function">getStyles</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
					len <span class="token operator">=</span> name<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

					<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						map<span class="token punctuation">[</span>name<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> name<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> styles<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token keyword">return</span> map<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">return</span> value <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">?</span>
					jQuery<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token operator">:</span>
					jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> value<span class="token punctuation">,</span> arguments<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//******************动画相关*********************************** */</span>
	<span class="token keyword">function</span> <span class="token function">Tween</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> options<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> end<span class="token punctuation">,</span> easing</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Tween<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>init</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> options<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> end<span class="token punctuation">,</span> easing<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	jQuery<span class="token punctuation">.</span>Tween <span class="token operator">=</span> Tween<span class="token punctuation">;</span>

	<span class="token class-name">Tween</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">constructor</span><span class="token operator">:</span> Tween<span class="token punctuation">,</span>
		<span class="token function-variable function">init</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> options<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> end<span class="token punctuation">,</span> easing<span class="token punctuation">,</span> unit</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>elem <span class="token operator">=</span> elem<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>prop <span class="token operator">=</span> prop<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>easing <span class="token operator">=</span> easing <span class="token operator">||</span> jQuery<span class="token punctuation">.</span>easing<span class="token punctuation">.</span>_default<span class="token punctuation">;</span><span class="token comment">//动画缓存算法</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>options <span class="token operator">=</span> options<span class="token punctuation">;</span>
			<span class="token comment">//获取动画初始值</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>start <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>now <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cur</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//动画最终值</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>end <span class="token operator">=</span> end<span class="token punctuation">;</span>
			<span class="token comment">//单位</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>unit <span class="token operator">=</span> unit <span class="token operator">||</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>cssNumber<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">cur</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> hooks <span class="token operator">=</span> Tween<span class="token punctuation">.</span>propHooks<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token keyword">return</span> hooks <span class="token operator">&amp;&amp;</span> hooks<span class="token punctuation">.</span>get <span class="token operator">?</span>
				hooks<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token operator">:</span>
				Tween<span class="token punctuation">.</span>propHooks<span class="token punctuation">.</span>_default<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">//执行动画</span>
		<span class="token function-variable function">run</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">percent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> eased<span class="token punctuation">,</span>
				hooks <span class="token operator">=</span> Tween<span class="token punctuation">.</span>propHooks<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>duration<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">//根据缓动算法改变percent</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> eased <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>easing<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>easing<span class="token punctuation">]</span><span class="token punctuation">(</span>
					percent<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>duration <span class="token operator">*</span> percent<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>duration
				<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> eased <span class="token operator">=</span> percent<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">//获取具体的改变坐标值</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>now <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>end <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>start<span class="token punctuation">)</span> <span class="token operator">*</span> eased <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>start<span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>step<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">//改变坐标</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>now<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>hooks <span class="token operator">&amp;&amp;</span> hooks<span class="token punctuation">.</span>set<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				hooks<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				Tween<span class="token punctuation">.</span>propHooks<span class="token punctuation">.</span>_default<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token class-name">Tween</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>init<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token class-name">Tween</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>

	Tween<span class="token punctuation">.</span>propHooks <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">_default</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">tween</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> result<span class="token punctuation">;</span>

				<span class="token comment">// Use a property on the element directly when it is not a DOM element,</span>
				<span class="token comment">// or when there is no matching style property that exists.</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>tween<span class="token punctuation">.</span>elem<span class="token punctuation">.</span>nodeType <span class="token operator">!==</span> <span class="token number">1</span> <span class="token operator">||</span>
					tween<span class="token punctuation">.</span>elem<span class="token punctuation">[</span>tween<span class="token punctuation">.</span>prop<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> tween<span class="token punctuation">.</span>elem<span class="token punctuation">.</span>style<span class="token punctuation">[</span>tween<span class="token punctuation">.</span>prop<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> tween<span class="token punctuation">.</span>elem<span class="token punctuation">[</span>tween<span class="token punctuation">.</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Passing an empty string as a 3rd parameter to .css will automatically</span>
				<span class="token comment">// attempt a parseFloat and fallback to a string if the parse fails.</span>
				<span class="token comment">// Simple values such as &quot;10px&quot; are parsed to Float;</span>
				<span class="token comment">// complex values such as &quot;rotate(1rad)&quot; are returned as-is.</span>
				<span class="token comment">//获取元素当前的属性的值</span>
				result <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>tween<span class="token punctuation">.</span>elem<span class="token punctuation">,</span> tween<span class="token punctuation">.</span>prop<span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Empty strings, null, undefined and &quot;auto&quot; are converted to 0.</span>
				<span class="token keyword">return</span> <span class="token operator">!</span>result <span class="token operator">||</span> result <span class="token operator">===</span> <span class="token string">&quot;auto&quot;</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> result<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">tween</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Use step hook for back compat.</span>
				<span class="token comment">// Use cssHook if its there.</span>
				<span class="token comment">// Use .style if available and use plain properties where available.</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>step<span class="token punctuation">[</span>tween<span class="token punctuation">.</span>prop<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>step<span class="token punctuation">[</span>tween<span class="token punctuation">.</span>prop<span class="token punctuation">]</span><span class="token punctuation">(</span>tween<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>tween<span class="token punctuation">.</span>elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
					jQuery<span class="token punctuation">.</span>cssHooks<span class="token punctuation">[</span>tween<span class="token punctuation">.</span>prop<span class="token punctuation">]</span> <span class="token operator">||</span>
					tween<span class="token punctuation">.</span>elem<span class="token punctuation">.</span>style<span class="token punctuation">[</span><span class="token function">finalPropName</span><span class="token punctuation">(</span>tween<span class="token punctuation">.</span>prop<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					jQuery<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span>tween<span class="token punctuation">.</span>elem<span class="token punctuation">,</span> tween<span class="token punctuation">.</span>prop<span class="token punctuation">,</span> tween<span class="token punctuation">.</span>now <span class="token operator">+</span> tween<span class="token punctuation">.</span>unit<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					tween<span class="token punctuation">.</span>elem<span class="token punctuation">[</span>tween<span class="token punctuation">.</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> tween<span class="token punctuation">.</span>now<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token comment">// Support: IE &lt;=9 only</span>
	<span class="token comment">// Panic based approach to setting things on disconnected nodes</span>
	Tween<span class="token punctuation">.</span>propHooks<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> Tween<span class="token punctuation">.</span>propHooks<span class="token punctuation">.</span>scrollLeft <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">tween</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>tween<span class="token punctuation">.</span>elem<span class="token punctuation">.</span>nodeType <span class="token operator">&amp;&amp;</span> tween<span class="token punctuation">.</span>elem<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				tween<span class="token punctuation">.</span>elem<span class="token punctuation">[</span>tween<span class="token punctuation">.</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> tween<span class="token punctuation">.</span>now<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">//动画</span>
	jQuery<span class="token punctuation">.</span>easing <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token function-variable function">linear</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">p</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> p<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">swing</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">p</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token number">0.5</span> <span class="token operator">-</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>p <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token literal-property property">_default</span><span class="token operator">:</span> <span class="token string">&quot;swing&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	jQuery<span class="token punctuation">.</span>fx <span class="token operator">=</span> <span class="token class-name">Tween</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>init<span class="token punctuation">;</span>

	<span class="token comment">// Back compat &lt;1.8 extension point</span>
	jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>step <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>




	<span class="token keyword">var</span>
		fxNow<span class="token punctuation">,</span> inProgress<span class="token punctuation">,</span>
		rfxtypes <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:toggle|show|hide)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		rrun <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">queueHooks$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
	<span class="token comment">//调度器</span>
	<span class="token keyword">function</span> <span class="token function">schedule</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//动画</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>inProgress<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>hidden <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>requestAnimationFrame<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>schedule<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				window<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span>schedule<span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>interval<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span><span class="token function">tick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//创建动画的当前时间</span>
	<span class="token comment">// Animations created synchronously will run synchronously</span>
	<span class="token keyword">function</span> <span class="token function">createFxNow</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		window<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			fxNow <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>fxNow <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//生成动画过程中需要改变的一些属性</span>
	<span class="token comment">// Generate parameters to create a standard animation</span>
	<span class="token keyword">function</span> <span class="token function">genFx</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> includeWidth</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> which<span class="token punctuation">,</span>
			i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
			attrs <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">height</span><span class="token operator">:</span> type <span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token comment">// If we include width, step value is 1 to do all cssExpand values,</span>
		<span class="token comment">// otherwise step value is 2 to skip over Left and Right</span>
		includeWidth <span class="token operator">=</span> includeWidth <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">2</span> <span class="token operator">-</span> includeWidth<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			which <span class="token operator">=</span> cssExpand<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
			attrs<span class="token punctuation">[</span><span class="token string">&quot;margin&quot;</span> <span class="token operator">+</span> which<span class="token punctuation">]</span> <span class="token operator">=</span> attrs<span class="token punctuation">[</span><span class="token string">&quot;padding&quot;</span> <span class="token operator">+</span> which<span class="token punctuation">]</span> <span class="token operator">=</span> type<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>includeWidth<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			attrs<span class="token punctuation">.</span>opacity <span class="token operator">=</span> attrs<span class="token punctuation">.</span>width <span class="token operator">=</span> type<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> attrs<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//生成对应的缓存动画</span>
	<span class="token keyword">function</span> <span class="token function">createTween</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> animation</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> tween<span class="token punctuation">,</span>
			collection <span class="token operator">=</span> <span class="token punctuation">(</span>Animation<span class="token punctuation">.</span>tweeners<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>Animation<span class="token punctuation">.</span>tweeners<span class="token punctuation">[</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
			length <span class="token operator">=</span> collection<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>tween <span class="token operator">=</span> collection<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>animation<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// We're done with this property</span>
				<span class="token keyword">return</span> tween<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">function</span> <span class="token function">defaultPrefilter</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> props<span class="token punctuation">,</span> opts</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> prop<span class="token punctuation">,</span> value<span class="token punctuation">,</span> toggle<span class="token punctuation">,</span> hooks<span class="token punctuation">,</span> oldfire<span class="token punctuation">,</span> propTween<span class="token punctuation">,</span> restoreDisplay<span class="token punctuation">,</span> display<span class="token punctuation">,</span>
			isBox <span class="token operator">=</span> <span class="token string">&quot;width&quot;</span> <span class="token keyword">in</span> props <span class="token operator">||</span> <span class="token string">&quot;height&quot;</span> <span class="token keyword">in</span> props<span class="token punctuation">,</span>
			anim <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span>
			orig <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			style <span class="token operator">=</span> elem<span class="token punctuation">.</span>style<span class="token punctuation">,</span>
			hidden <span class="token operator">=</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">&amp;&amp;</span> <span class="token function">isHiddenWithinTree</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">,</span>
			dataShow <span class="token operator">=</span> dataPriv<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;fxshow&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Queue-skipping animations hijack the fx hooks</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>opts<span class="token punctuation">.</span>queue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			hooks <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">_queueHooks</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;fx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>hooks<span class="token punctuation">.</span>unqueued <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				hooks<span class="token punctuation">.</span>unqueued <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
				oldfire <span class="token operator">=</span> hooks<span class="token punctuation">.</span>empty<span class="token punctuation">.</span>fire<span class="token punctuation">;</span>
				hooks<span class="token punctuation">.</span>empty<span class="token punctuation">.</span><span class="token function-variable function">fire</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>hooks<span class="token punctuation">.</span>unqueued<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token function">oldfire</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			hooks<span class="token punctuation">.</span>unqueued<span class="token operator">++</span><span class="token punctuation">;</span>

			anim<span class="token punctuation">.</span><span class="token function">always</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Ensure the complete handler is called before this completes</span>
				anim<span class="token punctuation">.</span><span class="token function">always</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					hooks<span class="token punctuation">.</span>unqueued<span class="token operator">--</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>jQuery<span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;fx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						hooks<span class="token punctuation">.</span>empty<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Detect show/hide animations</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>prop <span class="token keyword">in</span> props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			value <span class="token operator">=</span> props<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>rfxtypes<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">delete</span> props<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
				toggle <span class="token operator">=</span> toggle <span class="token operator">||</span> value <span class="token operator">===</span> <span class="token string">&quot;toggle&quot;</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token punctuation">(</span>hidden <span class="token operator">?</span> <span class="token string">&quot;hide&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;show&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Pretend to be hidden if this is a &quot;show&quot; and</span>
					<span class="token comment">// there is still data from a stopped show/hide</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token string">&quot;show&quot;</span> <span class="token operator">&amp;&amp;</span> dataShow <span class="token operator">&amp;&amp;</span> dataShow<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						hidden <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

						<span class="token comment">// Ignore all other no-op show/hide data</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						<span class="token keyword">continue</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
				orig<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> dataShow <span class="token operator">&amp;&amp;</span> dataShow<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">||</span> jQuery<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> prop<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Bail out if this is a no-op like .hide().hide()</span>
		propTween <span class="token operator">=</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span><span class="token function">isEmptyObject</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>propTween <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span><span class="token function">isEmptyObject</span><span class="token punctuation">(</span>orig<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Restrict &quot;overflow&quot; and &quot;display&quot; styles during box animations</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>isBox <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// Support: IE &lt;=9 - 11, Edge 12 - 15</span>
			<span class="token comment">// Record all 3 overflow attributes because IE does not infer the shorthand</span>
			<span class="token comment">// from identically-valued overflowX and overflowY and Edge just mirrors</span>
			<span class="token comment">// the overflowX value there.</span>
			opts<span class="token punctuation">.</span>overflow <span class="token operator">=</span> <span class="token punctuation">[</span>style<span class="token punctuation">.</span>overflow<span class="token punctuation">,</span> style<span class="token punctuation">.</span>overflowX<span class="token punctuation">,</span> style<span class="token punctuation">.</span>overflowY<span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token comment">// Identify a display type, preferring old show/hide data over the CSS cascade</span>
			restoreDisplay <span class="token operator">=</span> dataShow <span class="token operator">&amp;&amp;</span> dataShow<span class="token punctuation">.</span>display<span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>restoreDisplay <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				restoreDisplay <span class="token operator">=</span> dataPriv<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;display&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			display <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;display&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>display <span class="token operator">===</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>restoreDisplay<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					display <span class="token operator">=</span> restoreDisplay<span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

					<span class="token comment">// Get nonempty value(s) by temporarily forcing visibility</span>
					<span class="token function">showHide</span><span class="token punctuation">(</span><span class="token punctuation">[</span>elem<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					restoreDisplay <span class="token operator">=</span> elem<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">||</span> restoreDisplay<span class="token punctuation">;</span>
					display <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;display&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token function">showHide</span><span class="token punctuation">(</span><span class="token punctuation">[</span>elem<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Animate inline elements as inline-block</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>display <span class="token operator">===</span> <span class="token string">&quot;inline&quot;</span> <span class="token operator">||</span> display <span class="token operator">===</span> <span class="token string">&quot;inline-block&quot;</span> <span class="token operator">&amp;&amp;</span> restoreDisplay <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;float&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Restore the original display value at the end of pure show/hide animations</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>propTween<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						anim<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							style<span class="token punctuation">.</span>display <span class="token operator">=</span> restoreDisplay<span class="token punctuation">;</span>
						<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>restoreDisplay <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							display <span class="token operator">=</span> style<span class="token punctuation">.</span>display<span class="token punctuation">;</span>
							restoreDisplay <span class="token operator">=</span> display <span class="token operator">===</span> <span class="token string">&quot;none&quot;</span> <span class="token operator">?</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> display<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
					style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&quot;inline-block&quot;</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>opts<span class="token punctuation">.</span>overflow<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			style<span class="token punctuation">.</span>overflow <span class="token operator">=</span> <span class="token string">&quot;hidden&quot;</span><span class="token punctuation">;</span>
			anim<span class="token punctuation">.</span><span class="token function">always</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				style<span class="token punctuation">.</span>overflow <span class="token operator">=</span> opts<span class="token punctuation">.</span>overflow<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				style<span class="token punctuation">.</span>overflowX <span class="token operator">=</span> opts<span class="token punctuation">.</span>overflow<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				style<span class="token punctuation">.</span>overflowY <span class="token operator">=</span> opts<span class="token punctuation">.</span>overflow<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Implement show/hide animations</span>
		propTween <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>prop <span class="token keyword">in</span> orig<span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// General show/hide setup for this element animation</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>propTween<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>dataShow<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;hidden&quot;</span> <span class="token keyword">in</span> dataShow<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						hidden <span class="token operator">=</span> dataShow<span class="token punctuation">.</span>hidden<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					dataShow <span class="token operator">=</span> dataPriv<span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;fxshow&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">display</span><span class="token operator">:</span> restoreDisplay <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Store hidden/visible for toggle so `.stop().toggle()` &quot;reverses&quot;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>toggle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					dataShow<span class="token punctuation">.</span>hidden <span class="token operator">=</span> <span class="token operator">!</span>hidden<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Show elements before animating them</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>hidden<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">showHide</span><span class="token punctuation">(</span><span class="token punctuation">[</span>elem<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">/* eslint-disable no-loop-func */</span>

				anim<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">/* eslint-enable no-loop-func */</span>

					<span class="token comment">// The final step of a &quot;hide&quot; animation is actually hiding the element</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>hidden<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token function">showHide</span><span class="token punctuation">(</span><span class="token punctuation">[</span>elem<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					dataPriv<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;fxshow&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span>prop <span class="token keyword">in</span> orig<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						jQuery<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> orig<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Per-property setup</span>
			propTween <span class="token operator">=</span> <span class="token function">createTween</span><span class="token punctuation">(</span>hidden <span class="token operator">?</span> dataShow<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> prop<span class="token punctuation">,</span> anim<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>prop <span class="token keyword">in</span> dataShow<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				dataShow<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> propTween<span class="token punctuation">.</span>start<span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>hidden<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					propTween<span class="token punctuation">.</span>end <span class="token operator">=</span> propTween<span class="token punctuation">.</span>start<span class="token punctuation">;</span>
					propTween<span class="token punctuation">.</span>start <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">function</span> <span class="token function">propFilter</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> specialEasing</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> index<span class="token punctuation">,</span> name<span class="token punctuation">,</span> easing<span class="token punctuation">,</span> value<span class="token punctuation">,</span> hooks<span class="token punctuation">;</span>

		<span class="token comment">// camelCase, specialEasing and expand cssHook pass</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>index <span class="token keyword">in</span> props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			name <span class="token operator">=</span> <span class="token function">camelCase</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
			easing <span class="token operator">=</span> specialEasing<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
			value <span class="token operator">=</span> props<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				easing <span class="token operator">=</span> value<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				value <span class="token operator">=</span> props<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!==</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				props<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
				<span class="token keyword">delete</span> props<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			hooks <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>cssHooks<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>hooks <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;expand&quot;</span> <span class="token keyword">in</span> hooks<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				value <span class="token operator">=</span> hooks<span class="token punctuation">.</span><span class="token function">expand</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">delete</span> props<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token comment">// Not quite $.extend, this won't overwrite existing keys.</span>
				<span class="token comment">// Reusing 'index' because we have the correct &quot;name&quot;</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span>index <span class="token keyword">in</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>index <span class="token keyword">in</span> props<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						props<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
						specialEasing<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> easing<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				specialEasing<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> easing<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//动画类</span>
	<span class="token keyword">function</span> <span class="token function">Animation</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> properties<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> result<span class="token punctuation">,</span>
			stopped<span class="token punctuation">,</span>
			index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
			length <span class="token operator">=</span> Animation<span class="token punctuation">.</span>prefilters<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
			deferred <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">Deferred</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">always</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Don't match elem in the :animated selector</span>
				<span class="token keyword">delete</span> tick<span class="token punctuation">.</span>elem<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token function-variable function">tick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>stopped<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token comment">//当前时间</span>
				<span class="token keyword">var</span> currentTime <span class="token operator">=</span> fxNow <span class="token operator">||</span> <span class="token function">createFxNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					<span class="token comment">//动画还剩余的时间</span>
					remaining <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> animation<span class="token punctuation">.</span>startTime <span class="token operator">+</span> animation<span class="token punctuation">.</span>duration <span class="token operator">-</span> currentTime<span class="token punctuation">)</span><span class="token punctuation">,</span>

					<span class="token comment">// Support: Android 2.3 only</span>
					<span class="token comment">// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (#12497)</span>
					temp <span class="token operator">=</span> remaining <span class="token operator">/</span> animation<span class="token punctuation">.</span>duration <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">,</span>
					<span class="token comment">//此时应该运动到的百分比</span>
					percent <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">-</span> temp<span class="token punctuation">,</span>
					index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
					length <span class="token operator">=</span> animation<span class="token punctuation">.</span>tweens<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">//执行动画</span>
					animation<span class="token punctuation">.</span>tweens<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>percent<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				deferred<span class="token punctuation">.</span><span class="token function">notifyWith</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token punctuation">[</span>animation<span class="token punctuation">,</span> percent<span class="token punctuation">,</span> remaining<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// If there's more to do, yield</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>percent <span class="token operator">&lt;</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> remaining<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// If this was an empty animation, synthesize a final progress notification</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					deferred<span class="token punctuation">.</span><span class="token function">notifyWith</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token punctuation">[</span>animation<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Resolve the animation and report its conclusion</span>
				deferred<span class="token punctuation">.</span><span class="token function">resolveWith</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token punctuation">[</span>animation<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			animation <span class="token operator">=</span> deferred<span class="token punctuation">.</span><span class="token function">promise</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
				<span class="token literal-property property">elem</span><span class="token operator">:</span> elem<span class="token punctuation">,</span>
				<span class="token literal-property property">props</span><span class="token operator">:</span> jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> properties<span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token literal-property property">opts</span><span class="token operator">:</span> jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">specialEasing</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
					<span class="token literal-property property">easing</span><span class="token operator">:</span> jQuery<span class="token punctuation">.</span>easing<span class="token punctuation">.</span>_default
				<span class="token punctuation">}</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token literal-property property">originalProperties</span><span class="token operator">:</span> properties<span class="token punctuation">,</span>
				<span class="token literal-property property">originalOptions</span><span class="token operator">:</span> options<span class="token punctuation">,</span>
				<span class="token literal-property property">startTime</span><span class="token operator">:</span> fxNow <span class="token operator">||</span> <span class="token function">createFxNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token literal-property property">duration</span><span class="token operator">:</span> options<span class="token punctuation">.</span>duration<span class="token punctuation">,</span>
				<span class="token literal-property property">tweens</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
				<span class="token function-variable function">createTween</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">prop<span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">//获取tween实例</span>
					<span class="token keyword">var</span> tween <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">Tween</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> animation<span class="token punctuation">.</span>opts<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> end<span class="token punctuation">,</span>
						animation<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>specialEasing<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">||</span> animation<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>easing<span class="token punctuation">)</span><span class="token punctuation">;</span>
					animation<span class="token punctuation">.</span>tweens<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tween<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">return</span> tween<span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token function-variable function">stop</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">gotoEnd</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>

						<span class="token comment">// If we are going to the end, we want to run all the tweens</span>
						<span class="token comment">// otherwise we skip this part</span>
						length <span class="token operator">=</span> gotoEnd <span class="token operator">?</span> animation<span class="token punctuation">.</span>tweens<span class="token punctuation">.</span>length <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>stopped<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					stopped <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						animation<span class="token punctuation">.</span>tweens<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// Resolve when we played the last frame; otherwise, reject</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>gotoEnd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						deferred<span class="token punctuation">.</span><span class="token function">notifyWith</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token punctuation">[</span>animation<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						deferred<span class="token punctuation">.</span><span class="token function">resolveWith</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token punctuation">[</span>animation<span class="token punctuation">,</span> gotoEnd<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						deferred<span class="token punctuation">.</span><span class="token function">rejectWith</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token punctuation">[</span>animation<span class="token punctuation">,</span> gotoEnd<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			props <span class="token operator">=</span> animation<span class="token punctuation">.</span>props<span class="token punctuation">;</span>

		<span class="token function">propFilter</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> animation<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>specialEasing<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			result <span class="token operator">=</span> Animation<span class="token punctuation">.</span>prefilters<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>animation<span class="token punctuation">,</span> elem<span class="token punctuation">,</span> props<span class="token punctuation">,</span> animation<span class="token punctuation">.</span>opts<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFunction</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>stop<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					jQuery<span class="token punctuation">.</span><span class="token function">_queueHooks</span><span class="token punctuation">(</span>animation<span class="token punctuation">.</span>elem<span class="token punctuation">,</span> animation<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>queue<span class="token punctuation">)</span><span class="token punctuation">.</span>stop <span class="token operator">=</span>
						result<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">return</span> result<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		jQuery<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> createTween<span class="token punctuation">,</span> animation<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFunction</span><span class="token punctuation">(</span>animation<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>start<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			animation<span class="token punctuation">.</span>opts<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> animation<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Attach callbacks from options</span>
		animation
			<span class="token punctuation">.</span><span class="token function">progress</span><span class="token punctuation">(</span>animation<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>progress<span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span>animation<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>done<span class="token punctuation">,</span> animation<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>complete<span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span>animation<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>fail<span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">always</span><span class="token punctuation">(</span>animation<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>always<span class="token punctuation">)</span><span class="token punctuation">;</span>

		jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span><span class="token function">timer</span><span class="token punctuation">(</span>
			<span class="token comment">//给tick添加elem,anim和queue属性</span>
			jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>tick<span class="token punctuation">,</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">elem</span><span class="token operator">:</span> elem<span class="token punctuation">,</span>
				<span class="token literal-property property">anim</span><span class="token operator">:</span> animation<span class="token punctuation">,</span>
				<span class="token literal-property property">queue</span><span class="token operator">:</span> animation<span class="token punctuation">.</span>opts<span class="token punctuation">.</span>queue
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> animation<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	jQuery<span class="token punctuation">.</span>Animation <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>Animation<span class="token punctuation">,</span> <span class="token punctuation">{</span>

		<span class="token literal-property property">tweeners</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token string-property property">&quot;*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">prop<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> tween <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createTween</span><span class="token punctuation">(</span>prop<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">adjustCSS</span><span class="token punctuation">(</span>tween<span class="token punctuation">.</span>elem<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> rcssNum<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">,</span> tween<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> tween<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">tweener</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFunction</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				callback <span class="token operator">=</span> props<span class="token punctuation">;</span>
				props <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				props <span class="token operator">=</span> props<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>rnothtmlwhite<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">var</span> prop<span class="token punctuation">,</span>
				index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
				length <span class="token operator">=</span> props<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				prop <span class="token operator">=</span> props<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
				Animation<span class="token punctuation">.</span>tweeners<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> Animation<span class="token punctuation">.</span>tweeners<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				Animation<span class="token punctuation">.</span>tweeners<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token literal-property property">prefilters</span><span class="token operator">:</span> <span class="token punctuation">[</span>defaultPrefilter<span class="token punctuation">]</span><span class="token punctuation">,</span>

		<span class="token function-variable function">prefilter</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> prepend</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>prepend<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				Animation<span class="token punctuation">.</span>prefilters<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				Animation<span class="token punctuation">.</span>prefilters<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	jQuery<span class="token punctuation">.</span><span class="token function-variable function">speed</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">speed<span class="token punctuation">,</span> easing<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> opt <span class="token operator">=</span> speed <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> speed <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">?</span> jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> speed<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">complete</span><span class="token operator">:</span> fn <span class="token operator">||</span> <span class="token operator">!</span>fn <span class="token operator">&amp;&amp;</span> easing <span class="token operator">||</span>
				<span class="token function">isFunction</span><span class="token punctuation">(</span>speed<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> speed<span class="token punctuation">,</span>
			<span class="token literal-property property">duration</span><span class="token operator">:</span> speed<span class="token punctuation">,</span>
			<span class="token literal-property property">easing</span><span class="token operator">:</span> fn <span class="token operator">&amp;&amp;</span> easing <span class="token operator">||</span> easing <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">isFunction</span><span class="token punctuation">(</span>easing<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> easing
		<span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token comment">// Go to the end state if fx are off</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>off<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			opt<span class="token punctuation">.</span>duration <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> opt<span class="token punctuation">.</span>duration <span class="token operator">!==</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>opt<span class="token punctuation">.</span>duration <span class="token keyword">in</span> jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>speeds<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					opt<span class="token punctuation">.</span>duration <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>speeds<span class="token punctuation">[</span>opt<span class="token punctuation">.</span>duration<span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					opt<span class="token punctuation">.</span>duration <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>speeds<span class="token punctuation">.</span>_default<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Normalize opt.queue - true/undefined/null -&gt; &quot;fx&quot;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>opt<span class="token punctuation">.</span>queue <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> opt<span class="token punctuation">.</span>queue <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			opt<span class="token punctuation">.</span>queue <span class="token operator">=</span> <span class="token string">&quot;fx&quot;</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Queueing</span>
		opt<span class="token punctuation">.</span>old <span class="token operator">=</span> opt<span class="token punctuation">.</span>complete<span class="token punctuation">;</span>

		opt<span class="token punctuation">.</span><span class="token function-variable function">complete</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFunction</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>old<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				opt<span class="token punctuation">.</span><span class="token function">old</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>opt<span class="token punctuation">.</span>queue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> opt<span class="token punctuation">.</span>queue<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> opt<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">//添加fadeTo、animate、stop、finish等动画相关的原型方法</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token function-variable function">fadeTo</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">speed<span class="token punctuation">,</span> to<span class="token punctuation">,</span> easing<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// Show any hidden elements after setting opacity to 0</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>isHiddenWithinTree<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">&quot;opacity&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

				<span class="token comment">// Animate to the value specified</span>
				<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">opacity</span><span class="token operator">:</span> to <span class="token punctuation">}</span><span class="token punctuation">,</span> speed<span class="token punctuation">,</span> easing<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">animate</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">prop<span class="token punctuation">,</span> speed<span class="token punctuation">,</span> easing<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> empty <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">isEmptyObject</span><span class="token punctuation">(</span>prop<span class="token punctuation">)</span><span class="token punctuation">,</span>
				optall <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">speed</span><span class="token punctuation">(</span>speed<span class="token punctuation">,</span> easing<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token function-variable function">doAnimation</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Operate on a copy of prop so per-property easing won't be lost</span>
					<span class="token keyword">var</span> anim <span class="token operator">=</span> <span class="token function">Animation</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> prop<span class="token punctuation">)</span><span class="token punctuation">,</span> optall<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// Empty animations, or finishing resolves immediately</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>empty <span class="token operator">||</span> dataPriv<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">&quot;finish&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						anim<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">;</span>
			doAnimation<span class="token punctuation">.</span>finish <span class="token operator">=</span> doAnimation<span class="token punctuation">;</span>

			<span class="token keyword">return</span> empty <span class="token operator">||</span> optall<span class="token punctuation">.</span>queue <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">?</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>doAnimation<span class="token punctuation">)</span> <span class="token operator">:</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span>optall<span class="token punctuation">.</span>queue<span class="token punctuation">,</span> doAnimation<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">stop</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> clearQueue<span class="token punctuation">,</span> gotoEnd</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> <span class="token function-variable function">stopQueue</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">hooks</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> stop <span class="token operator">=</span> hooks<span class="token punctuation">.</span>stop<span class="token punctuation">;</span>
				<span class="token keyword">delete</span> hooks<span class="token punctuation">.</span>stop<span class="token punctuation">;</span>
				<span class="token function">stop</span><span class="token punctuation">(</span>gotoEnd<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> type <span class="token operator">!==</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				gotoEnd <span class="token operator">=</span> clearQueue<span class="token punctuation">;</span>
				clearQueue <span class="token operator">=</span> type<span class="token punctuation">;</span>
				type <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>clearQueue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span>type <span class="token operator">||</span> <span class="token string">&quot;fx&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> dequeue <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
					index <span class="token operator">=</span> type <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> type <span class="token operator">+</span> <span class="token string">&quot;queueHooks&quot;</span><span class="token punctuation">,</span>
					timers <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>timers<span class="token punctuation">,</span>
					data <span class="token operator">=</span> dataPriv<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>stop<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token function">stopQueue</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span>index <span class="token keyword">in</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>stop <span class="token operator">&amp;&amp;</span> rrun<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token function">stopQueue</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">for</span> <span class="token punctuation">(</span>index <span class="token operator">=</span> timers<span class="token punctuation">.</span>length<span class="token punctuation">;</span> index<span class="token operator">--</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>timers<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>elem <span class="token operator">===</span> <span class="token keyword">this</span> <span class="token operator">&amp;&amp;</span>
						<span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> timers<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>queue <span class="token operator">===</span> type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

						timers<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>anim<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span>gotoEnd<span class="token punctuation">)</span><span class="token punctuation">;</span>
						dequeue <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
						timers<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Start the next in the queue if the last step wasn't forced.</span>
				<span class="token comment">// Timers currently will call their complete callbacks, which</span>
				<span class="token comment">// will dequeue but only if they were gotoEnd.</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>dequeue <span class="token operator">||</span> <span class="token operator">!</span>gotoEnd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					jQuery<span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">finish</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">!==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				type <span class="token operator">=</span> type <span class="token operator">||</span> <span class="token string">&quot;fx&quot;</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> index<span class="token punctuation">,</span>
					data <span class="token operator">=</span> dataPriv<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					queue <span class="token operator">=</span> data<span class="token punctuation">[</span>type <span class="token operator">+</span> <span class="token string">&quot;queue&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
					hooks <span class="token operator">=</span> data<span class="token punctuation">[</span>type <span class="token operator">+</span> <span class="token string">&quot;queueHooks&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
					timers <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>timers<span class="token punctuation">,</span>
					length <span class="token operator">=</span> queue <span class="token operator">?</span> queue<span class="token punctuation">.</span>length <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>

				<span class="token comment">// Enable finishing flag on private data</span>
				data<span class="token punctuation">.</span>finish <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

				<span class="token comment">// Empty the queue first</span>
				jQuery<span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span>hooks <span class="token operator">&amp;&amp;</span> hooks<span class="token punctuation">.</span>stop<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					hooks<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Look for any active animations, and finish them</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span>index <span class="token operator">=</span> timers<span class="token punctuation">.</span>length<span class="token punctuation">;</span> index<span class="token operator">--</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>timers<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>elem <span class="token operator">===</span> <span class="token keyword">this</span> <span class="token operator">&amp;&amp;</span> timers<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>queue <span class="token operator">===</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						timers<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>anim<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						timers<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Look for any animations in the old queue and finish them</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span>index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>queue<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> queue<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>finish<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						queue<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">finish</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Turn off finishing flag</span>
				<span class="token keyword">delete</span> data<span class="token punctuation">.</span>finish<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//添加toggle、show、hide等原型方法</span>
	jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;toggle&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;show&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;hide&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_i<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> cssFn <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
		jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">speed<span class="token punctuation">,</span> easing<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> speed <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> speed <span class="token operator">===</span> <span class="token string">&quot;boolean&quot;</span> <span class="token operator">?</span>
				<span class="token function">cssFn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span> <span class="token operator">:</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token function">genFx</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span> speed<span class="token punctuation">,</span> easing<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//添加slide/fade等原型方法</span>
	<span class="token comment">// Generate shortcuts for custom animations</span>
	jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">slideDown</span><span class="token operator">:</span> <span class="token function">genFx</span><span class="token punctuation">(</span><span class="token string">&quot;show&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token literal-property property">slideUp</span><span class="token operator">:</span> <span class="token function">genFx</span><span class="token punctuation">(</span><span class="token string">&quot;hide&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token literal-property property">slideToggle</span><span class="token operator">:</span> <span class="token function">genFx</span><span class="token punctuation">(</span><span class="token string">&quot;toggle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token literal-property property">fadeIn</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token string">&quot;show&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token literal-property property">fadeOut</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token string">&quot;hide&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token literal-property property">fadeToggle</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token string">&quot;toggle&quot;</span> <span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">speed<span class="token punctuation">,</span> easing<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> speed<span class="token punctuation">,</span> easing<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//用于定时器调用</span>
	jQuery<span class="token punctuation">.</span>timers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span><span class="token function-variable function">tick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> timer<span class="token punctuation">,</span>
			i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
			timers <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>timers<span class="token punctuation">;</span>

		fxNow <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> timers<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			timer <span class="token operator">=</span> timers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token comment">// Run the timer and safely remove it when done (allowing for external removal)</span>
			<span class="token comment">//timer() 执行完毕会返回false,f否则返回剩下的时间</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> timers<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">//如果完成了就清除这个动画</span>
				timers<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//动画执行完毕就停止</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>timers<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		fxNow <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">//开始动画队列 timer是一个tick</span>
	jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span><span class="token function-variable function">timer</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">timer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//收集定时器</span>
		jQuery<span class="token punctuation">.</span>timers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//开始执行动画</span>
		jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">//动画间隔</span>
	jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>interval <span class="token operator">=</span> <span class="token number">13</span><span class="token punctuation">;</span>
	<span class="token comment">//动画开始</span>
	jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span><span class="token function-variable function">start</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>inProgress<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		inProgress <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token function">schedule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">//动画结束</span>
	jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span><span class="token function-variable function">stop</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		inProgress <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">//动画速度控制</span>

	jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>speeds <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">slow</span><span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span>
		<span class="token literal-property property">fast</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>

		<span class="token comment">// Default speed</span>
		<span class="token literal-property property">_default</span><span class="token operator">:</span> <span class="token number">400</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>


	<span class="token comment">// Based off of the plugin by Clint Helfers, with permission.</span>
	<span class="token comment">// https://web.archive.org/web/20100324014747/http://blindsignals.com/index.php/2009/07/jquery-delay/</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">delay</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">time<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		time <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>fx <span class="token operator">?</span> jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>speeds<span class="token punctuation">[</span>time<span class="token punctuation">]</span> <span class="token operator">||</span> time <span class="token operator">:</span> time<span class="token punctuation">;</span>
		type <span class="token operator">=</span> type <span class="token operator">||</span> <span class="token string">&quot;fx&quot;</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">next<span class="token punctuation">,</span> hooks</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">//开始动画</span>
			<span class="token keyword">var</span> timeout <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span>next<span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//清除动画</span>
			hooks<span class="token punctuation">.</span><span class="token function-variable function">stop</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				window<span class="token punctuation">.</span><span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">/**********************************动画相关***************************************** */</span>
	<span class="token comment">//兼容处理</span>
	<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;input&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			select <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;select&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			opt <span class="token operator">=</span> select<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;option&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		input<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">&quot;checkbox&quot;</span><span class="token punctuation">;</span>

		<span class="token comment">// Support: Android &lt;=4.3 only</span>
		<span class="token comment">// Default value for a checkbox should be &quot;on&quot;</span>
		support<span class="token punctuation">.</span>checkOn <span class="token operator">=</span> input<span class="token punctuation">.</span>value <span class="token operator">!==</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

		<span class="token comment">// Support: IE &lt;=11 only</span>
		<span class="token comment">// Must access selectedIndex to make default options select</span>
		support<span class="token punctuation">.</span>optSelected <span class="token operator">=</span> opt<span class="token punctuation">.</span>selected<span class="token punctuation">;</span>

		<span class="token comment">// Support: IE &lt;=11 only</span>
		<span class="token comment">// An input loses its value after becoming a radio</span>
		input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;input&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		input<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;t&quot;</span><span class="token punctuation">;</span>
		input<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">&quot;radio&quot;</span><span class="token punctuation">;</span>
		support<span class="token punctuation">.</span>radioValue <span class="token operator">=</span> input<span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token string">&quot;t&quot;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


	<span class="token keyword">var</span> boolHook<span class="token punctuation">,</span>
		attrHandle <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>attrHandle<span class="token punctuation">;</span>
	<span class="token comment">//添加attr和removeAttr等操作属性相关的方法</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token function-variable function">attr</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">access</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span>attr<span class="token punctuation">,</span> name<span class="token punctuation">,</span> value<span class="token punctuation">,</span> arguments<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">removeAttr</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span><span class="token function">removeAttr</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//添加 attr、removeAttr等静态方法</span>
	jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token function-variable function">attr</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> ret<span class="token punctuation">,</span> hooks<span class="token punctuation">,</span>
				nType <span class="token operator">=</span> elem<span class="token punctuation">.</span>nodeType<span class="token punctuation">;</span>

			<span class="token comment">// Don't get/set attributes on text, comment and attribute nodes</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>nType <span class="token operator">===</span> <span class="token number">3</span> <span class="token operator">||</span> nType <span class="token operator">===</span> <span class="token number">8</span> <span class="token operator">||</span> nType <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Fallback to prop when attributes are not supported</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> elem<span class="token punctuation">.</span>getAttribute <span class="token operator">===</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Attribute hooks are determined by the lowercase version</span>
			<span class="token comment">// Grab necessary hook if one is defined</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>nType <span class="token operator">!==</span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span><span class="token function">isXMLDoc</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				hooks <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>attrHooks<span class="token punctuation">[</span>name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">||</span>
					<span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>match<span class="token punctuation">.</span>bool<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">?</span> boolHook <span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					jQuery<span class="token punctuation">.</span><span class="token function">removeAttr</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">return</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span>hooks <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;set&quot;</span> <span class="token keyword">in</span> hooks <span class="token operator">&amp;&amp;</span>
					<span class="token punctuation">(</span>ret <span class="token operator">=</span> hooks<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> value<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				elem<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> value <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> value<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>hooks <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;get&quot;</span> <span class="token keyword">in</span> hooks <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>ret <span class="token operator">=</span> hooks<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			ret <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>find<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Non-existent attributes return null, we normalize to undefined</span>
			<span class="token keyword">return</span> ret <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> ret<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token literal-property property">attrHooks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>support<span class="token punctuation">.</span>radioValue <span class="token operator">&amp;&amp;</span> value <span class="token operator">===</span> <span class="token string">&quot;radio&quot;</span> <span class="token operator">&amp;&amp;</span>
						<span class="token function">nodeName</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;input&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> val <span class="token operator">=</span> elem<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
						elem<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							elem<span class="token punctuation">.</span>value <span class="token operator">=</span> val<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						<span class="token keyword">return</span> value<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">removeAttr</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> name<span class="token punctuation">,</span>
				i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>

				<span class="token comment">// Attribute names can contain non-HTML whitespace characters</span>
				<span class="token comment">// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2</span>
				attrNames <span class="token operator">=</span> value <span class="token operator">&amp;&amp;</span> value<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>rnothtmlwhite<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>attrNames <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>name <span class="token operator">=</span> attrNames<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					elem<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Hooks for boolean attributes</span>
	boolHook <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> value<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Remove boolean attributes when set to false</span>
				jQuery<span class="token punctuation">.</span><span class="token function">removeAttr</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				elem<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> name<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>match<span class="token punctuation">.</span>bool<span class="token punctuation">.</span>source<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\w+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_i<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> getter <span class="token operator">=</span> attrHandle<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">||</span> jQuery<span class="token punctuation">.</span>find<span class="token punctuation">.</span>attr<span class="token punctuation">;</span>

		attrHandle<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> isXML</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> ret<span class="token punctuation">,</span> handle<span class="token punctuation">,</span>
				lowercaseName <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isXML<span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Avoid an infinite loop by temporarily removing this function from the getter</span>
				handle <span class="token operator">=</span> attrHandle<span class="token punctuation">[</span>lowercaseName<span class="token punctuation">]</span><span class="token punctuation">;</span>
				attrHandle<span class="token punctuation">[</span>lowercaseName<span class="token punctuation">]</span> <span class="token operator">=</span> ret<span class="token punctuation">;</span>
				ret <span class="token operator">=</span> <span class="token function">getter</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> isXML<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span>
					<span class="token literal-property property">lowercaseName</span> <span class="token operator">:</span>
					<span class="token keyword">null</span><span class="token punctuation">;</span>
				attrHandle<span class="token punctuation">[</span>lowercaseName<span class="token punctuation">]</span> <span class="token operator">=</span> handle<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>




	<span class="token keyword">var</span> rfocusable <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:input|select|textarea|button)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
		rclickable <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:a|area)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">;</span>
	<span class="token comment">//添加 prop和removeProp等操作dom属性的方法</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token function-variable function">prop</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">access</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span>prop<span class="token punctuation">,</span> name<span class="token punctuation">,</span> value<span class="token punctuation">,</span> arguments<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">removeProp</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">[</span>jQuery<span class="token punctuation">.</span>propFix<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">||</span> name<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token function-variable function">prop</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> ret<span class="token punctuation">,</span> hooks<span class="token punctuation">,</span>
				nType <span class="token operator">=</span> elem<span class="token punctuation">.</span>nodeType<span class="token punctuation">;</span>

			<span class="token comment">// Don't get/set properties on text, comment and attribute nodes</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>nType <span class="token operator">===</span> <span class="token number">3</span> <span class="token operator">||</span> nType <span class="token operator">===</span> <span class="token number">8</span> <span class="token operator">||</span> nType <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>nType <span class="token operator">!==</span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span><span class="token function">isXMLDoc</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Fix name and attach hooks</span>
				name <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>propFix<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">||</span> name<span class="token punctuation">;</span>
				hooks <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>propHooks<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>hooks <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;set&quot;</span> <span class="token keyword">in</span> hooks <span class="token operator">&amp;&amp;</span>
					<span class="token punctuation">(</span>ret <span class="token operator">=</span> hooks<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> value<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">return</span> <span class="token punctuation">(</span>elem<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>hooks <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;get&quot;</span> <span class="token keyword">in</span> hooks <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>ret <span class="token operator">=</span> hooks<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> elem<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token literal-property property">propHooks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">tabIndex</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Support: IE &lt;=9 - 11 only</span>
					<span class="token comment">// elem.tabIndex doesn't always return the</span>
					<span class="token comment">// correct value when it hasn't been explicitly set</span>
					<span class="token comment">// https://web.archive.org/web/20141116233347/http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/</span>
					<span class="token comment">// Use proper attribute retrieval(#12072)</span>
					<span class="token keyword">var</span> tabindex <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>find<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;tabindex&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span>tabindex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>tabindex<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span>
						rfocusable<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">)</span> <span class="token operator">||</span>
						rclickable<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
						elem<span class="token punctuation">.</span>href
					<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token literal-property property">propFix</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token string-property property">&quot;for&quot;</span><span class="token operator">:</span> <span class="token string">&quot;htmlFor&quot;</span><span class="token punctuation">,</span>
			<span class="token string-property property">&quot;class&quot;</span><span class="token operator">:</span> <span class="token string">&quot;className&quot;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Support: IE &lt;=11 only</span>
	<span class="token comment">// Accessing the selectedIndex property</span>
	<span class="token comment">// forces the browser to respect setting selected</span>
	<span class="token comment">// on the option</span>
	<span class="token comment">// The getter ensures a default option is selected</span>
	<span class="token comment">// when in an optgroup</span>
	<span class="token comment">// eslint rule &quot;no-unused-expressions&quot; is disabled for this code</span>
	<span class="token comment">// since it considers such accessions noop</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>support<span class="token punctuation">.</span>optSelected<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">.</span>propHooks<span class="token punctuation">.</span>selected <span class="token operator">=</span> <span class="token punctuation">{</span>
			<span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">/* eslint no-unused-expressions: &quot;off&quot; */</span>

				<span class="token keyword">var</span> parent <span class="token operator">=</span> elem<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>parent <span class="token operator">&amp;&amp;</span> parent<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					parent<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>selectedIndex<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">/* eslint no-unused-expressions: &quot;off&quot; */</span>

				<span class="token keyword">var</span> parent <span class="token operator">=</span> elem<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					parent<span class="token punctuation">.</span>selectedIndex<span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						parent<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>selectedIndex<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
		<span class="token string">&quot;tabIndex&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;readOnly&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;maxLength&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;cellSpacing&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;cellPadding&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;rowSpan&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;colSpan&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;useMap&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;frameBorder&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;contentEditable&quot;</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">.</span>propFix<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>




	<span class="token comment">// Strip and collapse whitespace according to HTML spec</span>
	<span class="token comment">// https://infra.spec.whatwg.org/#strip-and-collapse-ascii-whitespace</span>
	<span class="token keyword">function</span> <span class="token function">stripAndCollapse</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//将值分割成数组</span>
		<span class="token keyword">var</span> tokens <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>rnothtmlwhite<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> tokens<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>


	<span class="token keyword">function</span> <span class="token function">getClass</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> elem<span class="token punctuation">.</span>getAttribute <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">function</span> <span class="token function">classesToArray</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> value<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">//将类名按照空格分割</span>
			<span class="token keyword">return</span> value<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>rnothtmlwhite<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//添加 addClass/removeClass等操作类相关的方法</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token function-variable function">addClass</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> classes<span class="token punctuation">,</span> elem<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> curValue<span class="token punctuation">,</span> clazz<span class="token punctuation">,</span> j<span class="token punctuation">,</span> finalValue<span class="token punctuation">,</span>
				i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFunction</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">j</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token function">value</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> j<span class="token punctuation">,</span> <span class="token function">getClass</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">//将字符串转换为数组 ，支持一次删除多个类名</span>
			classes <span class="token operator">=</span> <span class="token function">classesToArray</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>classes<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					curValue <span class="token operator">=</span> <span class="token function">getClass</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">//将字符串转换成&quot; class &quot;这种空格拼接起来的字符串</span>
					cur <span class="token operator">=</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token string">&quot; &quot;</span> <span class="token operator">+</span> <span class="token function">stripAndCollapse</span><span class="token punctuation">(</span>curValue<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
						<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>clazz <span class="token operator">=</span> classes<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token comment">//判断当前class中是否已经存在当前class了</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span> <span class="token operator">+</span> clazz <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token comment">//添加类名</span>
								cur <span class="token operator">+=</span> clazz <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// Only assign if different to avoid unneeded rendering.</span>
						finalValue <span class="token operator">=</span> <span class="token function">stripAndCollapse</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>curValue <span class="token operator">!==</span> finalValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							elem<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span> finalValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">removeClass</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> classes<span class="token punctuation">,</span> elem<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> curValue<span class="token punctuation">,</span> clazz<span class="token punctuation">,</span> j<span class="token punctuation">,</span> finalValue<span class="token punctuation">,</span>
				i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFunction</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">j</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token function">value</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> j<span class="token punctuation">,</span> <span class="token function">getClass</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>arguments<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			classes <span class="token operator">=</span> <span class="token function">classesToArray</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>classes<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					curValue <span class="token operator">=</span> <span class="token function">getClass</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">//cur=&gt;lclassName</span>
					<span class="token comment">// This expression is here for better compressibility (see addClass)</span>
					cur <span class="token operator">=</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token string">&quot; &quot;</span> <span class="token operator">+</span> <span class="token function">stripAndCollapse</span><span class="token punctuation">(</span>curValue<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
						<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>clazz <span class="token operator">=</span> classes<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

							<span class="token comment">// Remove *all* instances</span>
							<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span> <span class="token operator">+</span> clazz <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token comment">//删除对应的className</span>
								cur <span class="token operator">=</span> cur<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span> <span class="token operator">+</span> clazz <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">,</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// Only assign if different to avoid unneeded rendering.</span>
						finalValue <span class="token operator">=</span> <span class="token function">stripAndCollapse</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>curValue <span class="token operator">!==</span> finalValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							elem<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span> finalValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">toggleClass</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> stateVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> type <span class="token operator">=</span> <span class="token keyword">typeof</span> value<span class="token punctuation">,</span>
				isValidValue <span class="token operator">=</span> type <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span> <span class="token operator">||</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> stateVal <span class="token operator">===</span> <span class="token string">&quot;boolean&quot;</span> <span class="token operator">&amp;&amp;</span> isValidValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> stateVal <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFunction</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toggleClass</span><span class="token punctuation">(</span>
						<span class="token function">value</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token function">getClass</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> stateVal<span class="token punctuation">)</span><span class="token punctuation">,</span>
						stateVal
					<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> className<span class="token punctuation">,</span> i<span class="token punctuation">,</span> self<span class="token punctuation">,</span> classNames<span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span>isValidValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Toggle individual class names</span>
					i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
					self <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					classNames <span class="token operator">=</span> <span class="token function">classesToArray</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>className <span class="token operator">=</span> classNames<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">//有该类就删除，没有就添加</span>
						<span class="token comment">// Check each className given, space separated list</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span><span class="token function">hasClass</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							self<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
							self<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// Toggle whole class name</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> type <span class="token operator">===</span> <span class="token string">&quot;boolean&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					className <span class="token operator">=</span> <span class="token function">getClass</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>className<span class="token punctuation">)</span> <span class="token punctuation">{</span>

						<span class="token comment">// Store className if set</span>
						dataPriv<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">&quot;__className__&quot;</span><span class="token punctuation">,</span> className<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// If the element has a class name or if we're passed `false`,</span>
					<span class="token comment">// then remove the whole classname (if there was one, the above saved it).</span>
					<span class="token comment">// Otherwise bring back whatever was previously saved (if anything),</span>
					<span class="token comment">// falling back to the empty string if nothing was stored.</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>setAttribute<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span>
							className <span class="token operator">||</span> value <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">?</span>
								<span class="token string-property property">&quot;&quot;</span> <span class="token operator">:</span>
								dataPriv<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">&quot;__className__&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&quot;&quot;</span>
						<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">hasClass</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> className<span class="token punctuation">,</span> elem<span class="token punctuation">,</span>
				i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			className <span class="token operator">=</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> selector <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">//将字符串分割成数组 getClass=&gt;获取类名</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span>
					<span class="token punctuation">(</span><span class="token string">&quot; &quot;</span> <span class="token operator">+</span> <span class="token function">stripAndCollapse</span><span class="token punctuation">(</span><span class="token function">getClass</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>




	<span class="token keyword">var</span> rreturn <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\r</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
	<span class="token comment">//获取元素的值</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token function-variable function">val</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> hooks<span class="token punctuation">,</span> ret<span class="token punctuation">,</span> valueIsFunction<span class="token punctuation">,</span>
				elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>arguments<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					hooks <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>valHooks<span class="token punctuation">[</span>elem<span class="token punctuation">.</span>type<span class="token punctuation">]</span> <span class="token operator">||</span>
						jQuery<span class="token punctuation">.</span>valHooks<span class="token punctuation">[</span>elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span>hooks <span class="token operator">&amp;&amp;</span>
						<span class="token string">&quot;get&quot;</span> <span class="token keyword">in</span> hooks <span class="token operator">&amp;&amp;</span>
						<span class="token punctuation">(</span>ret <span class="token operator">=</span> hooks<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span>
					<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					ret <span class="token operator">=</span> elem<span class="token punctuation">.</span>value<span class="token punctuation">;</span>

					<span class="token comment">// Handle most common string cases</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> ret <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> ret<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rreturn<span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// Handle cases where value is null/undef or number</span>
					<span class="token keyword">return</span> ret <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> ret<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			valueIsFunction <span class="token operator">=</span> <span class="token function">isFunction</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> val<span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeType <span class="token operator">!==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span>valueIsFunction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					val <span class="token operator">=</span> <span class="token function">value</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					val <span class="token operator">=</span> value<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Treat null/undefined as &quot;&quot;; convert numbers to string</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					val <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> val <span class="token operator">===</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					val <span class="token operator">+=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					val <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> value <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> value <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				hooks <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>valHooks<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>type<span class="token punctuation">]</span> <span class="token operator">||</span> jQuery<span class="token punctuation">.</span>valHooks<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token comment">// If set returns undefined, fall back to normal setting</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>hooks <span class="token operator">||</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token string">&quot;set&quot;</span> <span class="token keyword">in</span> hooks<span class="token punctuation">)</span> <span class="token operator">||</span> hooks<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> val<span class="token punctuation">,</span> <span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> val<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//val的钩子函数</span>
	jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">valHooks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">option</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token keyword">var</span> val <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>find<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">return</span> val <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span>
						<span class="token literal-property property">val</span> <span class="token operator">:</span>

						<span class="token comment">// Support: IE &lt;=10 - 11 only</span>
						<span class="token comment">// option.text throws exceptions (#14686, #14858)</span>
						<span class="token comment">// Strip and collapse whitespace</span>
						<span class="token comment">// https://html.spec.whatwg.org/#strip-and-collapse-whitespace</span>
						<span class="token function">stripAndCollapse</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token literal-property property">select</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> value<span class="token punctuation">,</span> option<span class="token punctuation">,</span> i<span class="token punctuation">,</span>
						options <span class="token operator">=</span> elem<span class="token punctuation">.</span>options<span class="token punctuation">,</span>
						index <span class="token operator">=</span> elem<span class="token punctuation">.</span>selectedIndex<span class="token punctuation">,</span>
						one <span class="token operator">=</span> elem<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&quot;select-one&quot;</span><span class="token punctuation">,</span>
						values <span class="token operator">=</span> one <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						max <span class="token operator">=</span> one <span class="token operator">?</span> index <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">:</span> options<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						i <span class="token operator">=</span> max<span class="token punctuation">;</span>

					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						i <span class="token operator">=</span> one <span class="token operator">?</span> index <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// Loop through all the selected options</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> max<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						option <span class="token operator">=</span> options<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>

						<span class="token comment">// Support: IE &lt;=9 only</span>
						<span class="token comment">// IE8-9 doesn't update selected after form reset (#2551)</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>option<span class="token punctuation">.</span>selected <span class="token operator">||</span> i <span class="token operator">===</span> index<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>

							<span class="token comment">// Don't return options that are disabled or in a disabled optgroup</span>
							<span class="token operator">!</span>option<span class="token punctuation">.</span>disabled <span class="token operator">&amp;&amp;</span>
							<span class="token punctuation">(</span><span class="token operator">!</span>option<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>disabled <span class="token operator">||</span>
								<span class="token operator">!</span><span class="token function">nodeName</span><span class="token punctuation">(</span>option<span class="token punctuation">.</span>parentNode<span class="token punctuation">,</span> <span class="token string">&quot;optgroup&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

							<span class="token comment">// Get the specific value for the option</span>
							value <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>option<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

							<span class="token comment">// We don't need an array for one selects</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>one<span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">return</span> value<span class="token punctuation">;</span>
							<span class="token punctuation">}</span>

							<span class="token comment">// Multi-Selects return an array</span>
							values<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>

					<span class="token keyword">return</span> values<span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>

				<span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> optionSet<span class="token punctuation">,</span> option<span class="token punctuation">,</span>
						options <span class="token operator">=</span> elem<span class="token punctuation">.</span>options<span class="token punctuation">,</span>
						values <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">,</span>
						i <span class="token operator">=</span> options<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

					<span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						option <span class="token operator">=</span> options<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>

						<span class="token comment">/* eslint-disable no-cond-assign */</span>

						<span class="token keyword">if</span> <span class="token punctuation">(</span>option<span class="token punctuation">.</span>selected <span class="token operator">=</span>
							jQuery<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>valHooks<span class="token punctuation">.</span>option<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>option<span class="token punctuation">)</span><span class="token punctuation">,</span> values<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span>
						<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							optionSet <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token comment">/* eslint-enable no-cond-assign */</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// Force browsers to behave consistently when non-matching value is set</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>optionSet<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						elem<span class="token punctuation">.</span>selectedIndex <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">return</span> values<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Radios and checkboxes getter/setter</span>
	jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;radio&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;checkbox&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">.</span>valHooks<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
			<span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>checked <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span><span class="token function">jQuery</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>support<span class="token punctuation">.</span>checkOn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span>valHooks<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">get</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> elem<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token string">&quot;on&quot;</span> <span class="token operator">:</span> elem<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>




	<span class="token comment">// Return jQuery for attributes-only inclusion</span>


	support<span class="token punctuation">.</span>focusin <span class="token operator">=</span> <span class="token string">&quot;onfocusin&quot;</span> <span class="token keyword">in</span> window<span class="token punctuation">;</span>


	<span class="token keyword">var</span> rfocusMorph <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:focusinfocus|focusoutblur)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token function-variable function">stopPropagationCallback</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">//给jQuery.event对象添加trigger对象</span>
	jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>event<span class="token punctuation">,</span> <span class="token punctuation">{</span>
		<span class="token comment">//</span>
		<span class="token function-variable function">trigger</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> data<span class="token punctuation">,</span> elem<span class="token punctuation">,</span> onlyHandlers</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token keyword">var</span> i<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> tmp<span class="token punctuation">,</span> bubbleType<span class="token punctuation">,</span> ontype<span class="token punctuation">,</span> handle<span class="token punctuation">,</span> special<span class="token punctuation">,</span> lastElement<span class="token punctuation">,</span>
				eventPath <span class="token operator">=</span> <span class="token punctuation">[</span>elem <span class="token operator">||</span> document<span class="token punctuation">]</span><span class="token punctuation">,</span>
				type <span class="token operator">=</span> <span class="token function">hasOwn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> <span class="token string">&quot;type&quot;</span><span class="token punctuation">)</span> <span class="token operator">?</span> event<span class="token punctuation">.</span>type <span class="token operator">:</span> event<span class="token punctuation">,</span>
				namespaces <span class="token operator">=</span> <span class="token function">hasOwn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> <span class="token string">&quot;namespace&quot;</span><span class="token punctuation">)</span> <span class="token operator">?</span> event<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

			cur <span class="token operator">=</span> lastElement <span class="token operator">=</span> tmp <span class="token operator">=</span> elem <span class="token operator">=</span> elem <span class="token operator">||</span> document<span class="token punctuation">;</span>
			<span class="token comment">//文本和注释节点</span>
			<span class="token comment">// Don't do events on text and comment nodes</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">3</span> <span class="token operator">||</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">8</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// focus/blur morphs to focusin/out; ensure we're not firing them right now</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>rfocusMorph<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>type <span class="token operator">+</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>triggered<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Namespaced trigger; create a regexp to match event type in handle()</span>
				namespaces <span class="token operator">=</span> type<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				type <span class="token operator">=</span> namespaces<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				namespaces<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			ontype <span class="token operator">=</span> type<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;:&quot;</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;on&quot;</span> <span class="token operator">+</span> type<span class="token punctuation">;</span>

			<span class="token comment">// Caller can pass in a jQuery.Event object, Object, or just an event type string</span>
			event <span class="token operator">=</span> event<span class="token punctuation">[</span>jQuery<span class="token punctuation">.</span>expando<span class="token punctuation">]</span> <span class="token operator">?</span>
				<span class="token literal-property property">event</span> <span class="token operator">:</span>
				<span class="token keyword">new</span> <span class="token class-name">jQuery<span class="token punctuation">.</span>Event</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> <span class="token keyword">typeof</span> event <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">&amp;&amp;</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Trigger bitmask: &amp; 1 for native handlers; &amp; 2 for jQuery (always true)</span>
			event<span class="token punctuation">.</span>isTrigger <span class="token operator">=</span> onlyHandlers <span class="token operator">?</span> <span class="token number">2</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">;</span>
			event<span class="token punctuation">.</span>namespace <span class="token operator">=</span> namespaces<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			event<span class="token punctuation">.</span>rnamespace <span class="token operator">=</span> event<span class="token punctuation">.</span>namespace <span class="token operator">?</span>
				<span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;(^|\\.)&quot;</span> <span class="token operator">+</span> namespaces<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;\\.(?:.*\\.|)&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;(\\.|$)&quot;</span><span class="token punctuation">)</span> <span class="token operator">:</span>
				<span class="token keyword">null</span><span class="token punctuation">;</span>

			<span class="token comment">// Clean up the event in case it is being reused</span>
			event<span class="token punctuation">.</span>result <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>event<span class="token punctuation">.</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				event<span class="token punctuation">.</span>target <span class="token operator">=</span> elem<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Clone any incoming data and prepend the event, creating the handler arg list</span>
			data <span class="token operator">=</span> data <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span>
				<span class="token punctuation">[</span>event<span class="token punctuation">]</span> <span class="token operator">:</span>
				jQuery<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Allow special events to draw outside the lines</span>
			special <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>onlyHandlers <span class="token operator">&amp;&amp;</span> special<span class="token punctuation">.</span>trigger <span class="token operator">&amp;&amp;</span> special<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Determine event propagation path in advance, per W3C events spec (#9951)</span>
			<span class="token comment">// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>onlyHandlers <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>special<span class="token punctuation">.</span>noBubble <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">isWindow</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				bubbleType <span class="token operator">=</span> special<span class="token punctuation">.</span>delegateType <span class="token operator">||</span> type<span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>rfocusMorph<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>bubbleType <span class="token operator">+</span> type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> cur<span class="token punctuation">;</span> cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					eventPath<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>
					tmp <span class="token operator">=</span> cur<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Only add window if we got to document (e.g., not plain obj or detached DOM)</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>tmp <span class="token operator">===</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>ownerDocument <span class="token operator">||</span> document<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					eventPath<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tmp<span class="token punctuation">.</span>defaultView <span class="token operator">||</span> tmp<span class="token punctuation">.</span>parentWindow <span class="token operator">||</span> window<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Fire handlers on the event path</span>
			i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>cur <span class="token operator">=</span> eventPath<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>event<span class="token punctuation">.</span><span class="token function">isPropagationStopped</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				lastElement <span class="token operator">=</span> cur<span class="token punctuation">;</span>
				event<span class="token punctuation">.</span>type <span class="token operator">=</span> i <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">?</span>
					<span class="token literal-property property">bubbleType</span> <span class="token operator">:</span>
					special<span class="token punctuation">.</span>bindType <span class="token operator">||</span> type<span class="token punctuation">;</span>

				<span class="token comment">// jQuery handler 获取事件句柄</span>
				handle <span class="token operator">=</span> <span class="token punctuation">(</span>
					dataPriv<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span> <span class="token string">&quot;events&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
				<span class="token punctuation">)</span><span class="token punctuation">[</span>event<span class="token punctuation">.</span>type<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span>
					dataPriv<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span> <span class="token string">&quot;handle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>handle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">handle</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Native handler 原生事件句柄</span>
				handle <span class="token operator">=</span> ontype <span class="token operator">&amp;&amp;</span> cur<span class="token punctuation">[</span>ontype<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>handle <span class="token operator">&amp;&amp;</span> handle<span class="token punctuation">.</span>apply <span class="token operator">&amp;&amp;</span> <span class="token function">acceptData</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">//执行事件回调</span>
					event<span class="token punctuation">.</span>result <span class="token operator">=</span> <span class="token function">handle</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>result <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			event<span class="token punctuation">.</span>type <span class="token operator">=</span> type<span class="token punctuation">;</span>

			<span class="token comment">// If nobody prevented the default action, do it now</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>onlyHandlers <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>event<span class="token punctuation">.</span><span class="token function">isDefaultPrevented</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">!</span>special<span class="token punctuation">.</span>_default <span class="token operator">||</span>
					special<span class="token punctuation">.</span><span class="token function">_default</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>eventPath<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
					<span class="token function">acceptData</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Call a native DOM method on the target with the same name as the event.</span>
					<span class="token comment">// Don't do default actions on window, that's where global variables be (#6170)</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>ontype <span class="token operator">&amp;&amp;</span> <span class="token function">isFunction</span><span class="token punctuation">(</span>elem<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">isWindow</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

						<span class="token comment">// Don't re-trigger an onFOO event when we call its FOO() method</span>
						tmp <span class="token operator">=</span> elem<span class="token punctuation">[</span>ontype<span class="token punctuation">]</span><span class="token punctuation">;</span>

						<span class="token keyword">if</span> <span class="token punctuation">(</span>tmp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							elem<span class="token punctuation">[</span>ontype<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// Prevent re-triggering of the same event, since we already bubbled it above</span>
						jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>triggered <span class="token operator">=</span> type<span class="token punctuation">;</span>
						<span class="token comment">//如果组织冒泡，则移除事件</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">isPropagationStopped</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							lastElement<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> stopPropagationCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						elem<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">isPropagationStopped</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							lastElement<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> stopPropagationCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>triggered <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>

						<span class="token keyword">if</span> <span class="token punctuation">(</span>tmp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							elem<span class="token punctuation">[</span>ontype<span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> event<span class="token punctuation">.</span>result<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">//模拟事件 仅适用于 focuin和focusout 模拟并立即触发</span>
		<span class="token comment">// Piggyback on a donor event to simulate a different one</span>
		<span class="token comment">// Used only for `focus(in | out)` events</span>
		<span class="token function-variable function">simulate</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> elem<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">//重写事件</span>
			<span class="token keyword">var</span> e <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>
				<span class="token keyword">new</span> <span class="token class-name">jQuery<span class="token punctuation">.</span>Event</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				event<span class="token punctuation">,</span>
				<span class="token punctuation">{</span>
					<span class="token literal-property property">type</span><span class="token operator">:</span> type<span class="token punctuation">,</span>
					<span class="token literal-property property">isSimulated</span><span class="token operator">:</span> <span class="token boolean">true</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//触发事件</span>
			jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//添加原型方法  trigger和triggerHandler</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

		<span class="token function-variable function">trigger</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">triggerHandler</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> data<span class="token punctuation">,</span> elem<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


	<span class="token comment">// Support: Firefox &lt;=44</span>
	<span class="token comment">// Firefox doesn't have focus(in | out) events</span>
	<span class="token comment">// Related ticket - https://bugzilla.mozilla.org/show_bug.cgi?id=687787</span>
	<span class="token comment">//</span>
	<span class="token comment">// Support: Chrome &lt;=48 - 49, Safari &lt;=9.0 - 9.1</span>
	<span class="token comment">// focus(in | out) events fire after focus &amp; blur events,</span>
	<span class="token comment">// which is spec violation - http://www.w3.org/TR/DOM-Level-3-Events/#events-focusevent-event-order</span>
	<span class="token comment">// Related ticket - https://bugs.chromium.org/p/chromium/issues/detail?id=449857</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>support<span class="token punctuation">.</span>focusin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">focus</span><span class="token operator">:</span> <span class="token string">&quot;focusin&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">blur</span><span class="token operator">:</span> <span class="token string">&quot;focusout&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">orig<span class="token punctuation">,</span> fix</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//是 focus</span>

			<span class="token comment">// Attach a single capturing handler on the document while someone wants focusin/focusout</span>
			<span class="token keyword">var</span> <span class="token function-variable function">handler</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">//使用focus来模拟focusin事件</span>
				jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">simulate</span><span class="token punctuation">(</span>fix<span class="token punctuation">,</span> event<span class="token punctuation">.</span>target<span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">fix</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>

			jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span>fix<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
				<span class="token function-variable function">setup</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Handle: regular nodes (via `this.ownerDocument`), window</span>
					<span class="token comment">// (via `this.document`) &amp; document (via `this`).</span>
					<span class="token keyword">var</span> doc <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ownerDocument <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>document <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">,</span>
						attaches <span class="token operator">=</span> dataPriv<span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span>doc<span class="token punctuation">,</span> fix<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>attaches<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">//&quot;focus&quot; &quot;focus&quot; 在捕获阶段触发</span>
						doc<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>orig<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					dataPriv<span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span>doc<span class="token punctuation">,</span> fix<span class="token punctuation">,</span> <span class="token punctuation">(</span>attaches <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token function-variable function">teardown</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> doc <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ownerDocument <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>document <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">,</span>
						attaches <span class="token operator">=</span> dataPriv<span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span>doc<span class="token punctuation">,</span> fix<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>attaches<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						doc<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>orig<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						dataPriv<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>doc<span class="token punctuation">,</span> fix<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						dataPriv<span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span>doc<span class="token punctuation">,</span> fix<span class="token punctuation">,</span> attaches<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">var</span> location <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">;</span>

	<span class="token keyword">var</span> nonce <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">guid</span><span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token keyword">var</span> rquery <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\?</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>



	<span class="token comment">// Cross-browser xml parsing</span>
	jQuery<span class="token punctuation">.</span><span class="token function-variable function">parseXML</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> xml<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data <span class="token operator">||</span> <span class="token keyword">typeof</span> data <span class="token operator">!==</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Support: IE 9 - 11 only</span>
		<span class="token comment">// IE throws on parseFromString with invalid input.</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			xml <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">window<span class="token punctuation">.</span>DOMParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parseFromString</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token string">&quot;text/xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			xml <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>xml <span class="token operator">||</span> xml<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;parsererror&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Invalid XML: &quot;</span> <span class="token operator">+</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> xml<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>


	<span class="token keyword">var</span>
		rbracket <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\[\]$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		rCRLF <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\r?\n</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span>
		rsubmitterTypes <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:submit|button|image|reset|file)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
		rsubmittable <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:input|select|textarea|keygen)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">;</span>

	<span class="token keyword">function</span> <span class="token function">buildParams</span> <span class="token punctuation">(</span><span class="token parameter">prefix<span class="token punctuation">,</span> obj<span class="token punctuation">,</span> traditional<span class="token punctuation">,</span> add</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> name<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// Serialize array item.</span>
			jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i<span class="token punctuation">,</span> v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>traditional <span class="token operator">||</span> rbracket<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>prefix<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Treat each array item as a scalar.</span>
					<span class="token function">add</span><span class="token punctuation">(</span>prefix<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

					<span class="token comment">// Item is non-scalar (array or object), encode its numeric index.</span>
					<span class="token function">buildParams</span><span class="token punctuation">(</span>
						prefix <span class="token operator">+</span> <span class="token string">&quot;[&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> v <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">&amp;&amp;</span> v <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> i <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">,</span>
						v<span class="token punctuation">,</span>
						traditional<span class="token punctuation">,</span>
						add
					<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>traditional <span class="token operator">&amp;&amp;</span> <span class="token function">toType</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// Serialize object item.</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span>name <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">buildParams</span><span class="token punctuation">(</span>prefix <span class="token operator">+</span> <span class="token string">&quot;[&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">,</span> obj<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">,</span> traditional<span class="token punctuation">,</span> add<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

			<span class="token comment">// Serialize scalar item.</span>
			<span class="token function">add</span><span class="token punctuation">(</span>prefix<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Serialize an array of form elements or a set of</span>
	<span class="token comment">// key/values into a query string</span>
	jQuery<span class="token punctuation">.</span><span class="token function-variable function">param</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> traditional</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> prefix<span class="token punctuation">,</span>
			s <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> valueOrFunction</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// If value is a function, invoke it and use its return value</span>
				<span class="token keyword">var</span> value <span class="token operator">=</span> <span class="token function">isFunction</span><span class="token punctuation">(</span>valueOrFunction<span class="token punctuation">)</span> <span class="token operator">?</span>
					<span class="token function">valueOrFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span>
					valueOrFunction<span class="token punctuation">;</span>

				s<span class="token punctuation">[</span>s<span class="token punctuation">.</span>length<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;=&quot;</span> <span class="token operator">+</span>
					<span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// If an array was passed in, assume that it is an array of form elements.</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>jquery <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// Serialize the form elements</span>
			jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

			<span class="token comment">// If traditional, encode the &quot;old&quot; way (the way 1.3.2 or older</span>
			<span class="token comment">// did it), otherwise encode params recursively.</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span>prefix <span class="token keyword">in</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">buildParams</span><span class="token punctuation">(</span>prefix<span class="token punctuation">,</span> a<span class="token punctuation">[</span>prefix<span class="token punctuation">]</span><span class="token punctuation">,</span> traditional<span class="token punctuation">,</span> add<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Return the resulting serialization</span>
		<span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token function-variable function">serialize</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">param</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">serializeArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">serializeArray</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Can add propHook for &quot;elements&quot; to filter or add form elements</span>
				<span class="token keyword">var</span> elements <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">&quot;elements&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> elements <span class="token operator">?</span> jQuery<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span>elements<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> type <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>type<span class="token punctuation">;</span>

					<span class="token comment">// Use .is( &quot;:disabled&quot; ) so that fieldset[disabled] works</span>
					<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">&quot;:disabled&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
						rsubmittable<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeName<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>rsubmitterTypes<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
						<span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>checked <span class="token operator">||</span> <span class="token operator">!</span>rcheckableType<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_i<span class="token punctuation">,</span> elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> val <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> elem<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> val<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rCRLF<span class="token punctuation">,</span> <span class="token string">&quot;\r\n&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> elem<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> val<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rCRLF<span class="token punctuation">,</span> <span class="token string">&quot;\r\n&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/****************ajax相关********************** */</span>
	<span class="token keyword">var</span>
		r20 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">%20</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span>
		rhash <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">#.*$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		rantiCache <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">([?&amp;])_=[^&amp;]*</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token comment">// /mg表示多行全局匹配 \t制表符 \r\n换行符</span>
		rheaders <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(.*?):[ \t]*([^\r\n]*)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">mg</span></span><span class="token punctuation">,</span>

		<span class="token comment">// #7653, #8125, #8152: local protocol detection</span>
		rlocalProtocol <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:about|app|app-storage|.+-extension|file|res|widget):$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		rnoContent <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:GET|HEAD)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		rprotocol <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\/\/</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>

		<span class="token comment">/* Prefilters
		 * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)
		 * 2) These are called:
		 *    - BEFORE asking for a transport
		 *    - AFTER param serialization (s.data is a string if s.processData is true)
		 * 3) key is the dataType
		 * 4) the catchall symbol &quot;*&quot; can be used
		 * 5) execution will start with transport dataType and THEN continue down to &quot;*&quot; if needed
		 */</span>
		prefilters <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">/* Transports bindings
		 * 1) key is the dataType
		 * 2) the catchall symbol &quot;*&quot; can be used
		 * 3) selection will start with transport dataType and THEN go to &quot;*&quot; if needed
		 */</span>
		transports <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression</span>
		allTypes <span class="token operator">=</span> <span class="token string">&quot;*/&quot;</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

		<span class="token comment">// Anchor tag for parsing the document origin</span>
		originAnchor <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	originAnchor<span class="token punctuation">.</span>href <span class="token operator">=</span> location<span class="token punctuation">.</span>href<span class="token punctuation">;</span>

	<span class="token comment">// Base &quot;constructor&quot; for jQuery.ajaxPrefilter and jQuery.ajaxTransport</span>
	<span class="token keyword">function</span> <span class="token function">addToPrefiltersOrTransports</span> <span class="token punctuation">(</span><span class="token parameter">structure</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token comment">// dataTypeExpression is optional and defaults to &quot;*&quot;</span>
		<span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">dataTypeExpression<span class="token punctuation">,</span> func</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> dataTypeExpression <span class="token operator">!==</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				func <span class="token operator">=</span> dataTypeExpression<span class="token punctuation">;</span>
				dataTypeExpression <span class="token operator">=</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">//数据类型表达式</span>
			<span class="token keyword">var</span> dataType<span class="token punctuation">,</span>
				i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
				dataTypes <span class="token operator">=</span> dataTypeExpression<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>rnothtmlwhite<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFunction</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// For each dataType in the dataTypeExpression</span>
				<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>dataType <span class="token operator">=</span> dataTypes<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Prepend if requested</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>dataType<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;+&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						dataType <span class="token operator">=</span> dataType<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">;</span>
						<span class="token comment">//前置请求</span>
						<span class="token punctuation">(</span>structure<span class="token punctuation">[</span>dataType<span class="token punctuation">]</span> <span class="token operator">=</span> structure<span class="token punctuation">[</span>dataType<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token comment">// Otherwise append</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						<span class="token comment">//后续处理</span>
						<span class="token punctuation">(</span>structure<span class="token punctuation">[</span>dataType<span class="token punctuation">]</span> <span class="token operator">=</span> structure<span class="token punctuation">[</span>dataType<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Base inspection function for prefilters and transports</span>
	<span class="token keyword">function</span> <span class="token function">inspectPrefiltersOrTransports</span> <span class="token punctuation">(</span><span class="token parameter">structure<span class="token punctuation">,</span> options<span class="token punctuation">,</span> originalOptions<span class="token punctuation">,</span> jqXHR</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token keyword">var</span> inspected <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			seekingTransport <span class="token operator">=</span> <span class="token punctuation">(</span>structure <span class="token operator">===</span> transports<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">function</span> <span class="token function">inspect</span> <span class="token punctuation">(</span><span class="token parameter">dataType</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> selected<span class="token punctuation">;</span>
			inspected<span class="token punctuation">[</span>dataType<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>structure<span class="token punctuation">[</span>dataType<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> prefilterOrFactory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> dataTypeOrTransport <span class="token operator">=</span> <span class="token function">prefilterOrFactory</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> originalOptions<span class="token punctuation">,</span> jqXHR<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> dataTypeOrTransport <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span> <span class="token operator">&amp;&amp;</span>
					<span class="token operator">!</span>seekingTransport <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>inspected<span class="token punctuation">[</span>dataTypeOrTransport<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					options<span class="token punctuation">.</span>dataTypes<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>dataTypeOrTransport<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token function">inspect</span><span class="token punctuation">(</span>dataTypeOrTransport<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>seekingTransport<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span>selected <span class="token operator">=</span> dataTypeOrTransport<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> selected<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token function">inspect</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>dataTypes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span>inspected<span class="token punctuation">[</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token function">inspect</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// A special extend for ajax options</span>
	<span class="token comment">// that takes &quot;flat&quot; options (not to be deep extended)</span>
	<span class="token comment">// Fixes #9887</span>
	<span class="token keyword">function</span> <span class="token function">ajaxExtend</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> src</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> key<span class="token punctuation">,</span> deep<span class="token punctuation">,</span>
			flatOptions <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>ajaxSettings<span class="token punctuation">.</span>flatOptions <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span>key <span class="token keyword">in</span> src<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>src<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token punctuation">(</span>flatOptions<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">?</span> target <span class="token operator">:</span> <span class="token punctuation">(</span>deep <span class="token operator">||</span> <span class="token punctuation">(</span>deep <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> src<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//需要深拷贝的对象</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>deep<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> target<span class="token punctuation">,</span> deep<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> target<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">/* Handles responses to an ajax request:
	 * - finds the right dataType (mediates between content-type and expected dataType)
	 * - returns the corresponding response
	 */</span>
	<span class="token keyword">function</span> <span class="token function">ajaxHandleResponses</span> <span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">,</span> jqXHR<span class="token punctuation">,</span> responses</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token keyword">var</span> ct<span class="token punctuation">,</span> type<span class="token punctuation">,</span> finalDataType<span class="token punctuation">,</span> firstDataType<span class="token punctuation">,</span>
			contents <span class="token operator">=</span> s<span class="token punctuation">.</span>contents<span class="token punctuation">,</span>
			dataTypes <span class="token operator">=</span> s<span class="token punctuation">.</span>dataTypes<span class="token punctuation">;</span>

		<span class="token comment">// Remove auto dataType and get content-type in the process</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>dataTypes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			dataTypes<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//设置content-type</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>ct <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				ct <span class="token operator">=</span> s<span class="token punctuation">.</span>mimeType <span class="token operator">||</span> jqXHR<span class="token punctuation">.</span><span class="token function">getResponseHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//用一种移植的数据类型来处理响应的数据</span>
		<span class="token comment">// Check if we're dealing with a known content-type</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>ct<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span>type <span class="token keyword">in</span> contents<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>contents<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> contents<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>ct<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					dataTypes<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">break</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Check to see if we have a response for the expected dataType</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>dataTypes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">in</span> responses<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			finalDataType <span class="token operator">=</span> dataTypes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

			<span class="token comment">// Try convertible dataTypes</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span>type <span class="token keyword">in</span> responses<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>dataTypes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> s<span class="token punctuation">.</span>converters<span class="token punctuation">[</span>type <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> dataTypes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">//确定最终的数据类型</span>
					finalDataType <span class="token operator">=</span> type<span class="token punctuation">;</span>
					<span class="token keyword">break</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>firstDataType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					firstDataType <span class="token operator">=</span> type<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Or just use first one</span>
			finalDataType <span class="token operator">=</span> finalDataType <span class="token operator">||</span> firstDataType<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// If we found a dataType</span>
		<span class="token comment">// We add the dataType to the list if needed</span>
		<span class="token comment">// and return the corresponding response</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>finalDataType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>finalDataType <span class="token operator">!==</span> dataTypes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				dataTypes<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>finalDataType<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">//返回处理后的数据</span>
			<span class="token keyword">return</span> responses<span class="token punctuation">[</span>finalDataType<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">/* Chain conversions given the request and the original response
	 * Also sets the responseXXX fields on the jqXHR instance
	 */</span>
	<span class="token keyword">function</span> <span class="token function">ajaxConvert</span> <span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">,</span> response<span class="token punctuation">,</span> jqXHR<span class="token punctuation">,</span> isSuccess</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> conv2<span class="token punctuation">,</span> current<span class="token punctuation">,</span> conv<span class="token punctuation">,</span> tmp<span class="token punctuation">,</span> prev<span class="token punctuation">,</span>
			converters <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">// Work with a copy of dataTypes in case we need to modify it for conversion</span>
			dataTypes <span class="token operator">=</span> s<span class="token punctuation">.</span>dataTypes<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Create converters map with lowercased keys</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>dataTypes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span>conv <span class="token keyword">in</span> s<span class="token punctuation">.</span>converters<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				converters<span class="token punctuation">[</span>conv<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> s<span class="token punctuation">.</span>converters<span class="token punctuation">[</span>conv<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		current <span class="token operator">=</span> dataTypes<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//根据不同的数据类型返回不同的response 如responseText,responseJson</span>
		<span class="token comment">// Convert to each sequential dataType</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>current<span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>responseFields<span class="token punctuation">[</span>current<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jqXHR<span class="token punctuation">[</span>s<span class="token punctuation">.</span>responseFields<span class="token punctuation">[</span>current<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> response<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Apply the dataFilter if provided</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>prev <span class="token operator">&amp;&amp;</span> isSuccess <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span>dataFilter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				response <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">dataFilter</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span> s<span class="token punctuation">.</span>dataType<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			prev <span class="token operator">=</span> current<span class="token punctuation">;</span>
			current <span class="token operator">=</span> dataTypes<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>current<span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// There's only work to do if current dataType is non-auto</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">===</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					current <span class="token operator">=</span> prev<span class="token punctuation">;</span>

					<span class="token comment">// Convert response if prev dataType is non-auto and differs from current</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>prev <span class="token operator">!==</span> <span class="token string">&quot;*&quot;</span> <span class="token operator">&amp;&amp;</span> prev <span class="token operator">!==</span> current<span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Seek a direct converter</span>
					conv <span class="token operator">=</span> converters<span class="token punctuation">[</span>prev <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> current<span class="token punctuation">]</span> <span class="token operator">||</span> converters<span class="token punctuation">[</span><span class="token string">&quot;* &quot;</span> <span class="token operator">+</span> current<span class="token punctuation">]</span><span class="token punctuation">;</span>

					<span class="token comment">// If none found, seek a pair</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>conv<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">for</span> <span class="token punctuation">(</span>conv2 <span class="token keyword">in</span> converters<span class="token punctuation">)</span> <span class="token punctuation">{</span>

							<span class="token comment">// If conv2 outputs current</span>
							tmp <span class="token operator">=</span> conv2<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>tmp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> current<span class="token punctuation">)</span> <span class="token punctuation">{</span>

								<span class="token comment">// If prev can be converted to accepted input</span>
								conv <span class="token operator">=</span> converters<span class="token punctuation">[</span>prev <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> tmp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">||</span>
									converters<span class="token punctuation">[</span><span class="token string">&quot;* &quot;</span> <span class="token operator">+</span> tmp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span>conv<span class="token punctuation">)</span> <span class="token punctuation">{</span>

									<span class="token comment">// Condense equivalence converters</span>
									<span class="token keyword">if</span> <span class="token punctuation">(</span>conv <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
										conv <span class="token operator">=</span> converters<span class="token punctuation">[</span>conv2<span class="token punctuation">]</span><span class="token punctuation">;</span>

										<span class="token comment">// Otherwise, insert the intermediate dataType</span>
									<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>converters<span class="token punctuation">[</span>conv2<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
										current <span class="token operator">=</span> tmp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
										dataTypes<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>tmp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
									<span class="token punctuation">}</span>
									<span class="token keyword">break</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// Apply converter (if not an equivalence)</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>conv <span class="token operator">!==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

						<span class="token comment">// Unless errors are allowed to bubble, catch and return them</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>conv <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span>throws<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							response <span class="token operator">=</span> <span class="token function">conv</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
							<span class="token keyword">try</span> <span class="token punctuation">{</span>
								response <span class="token operator">=</span> <span class="token function">conv</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">return</span> <span class="token punctuation">{</span>
									<span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token string">&quot;parsererror&quot;</span><span class="token punctuation">,</span>
									<span class="token literal-property property">error</span><span class="token operator">:</span> conv <span class="token operator">?</span> e <span class="token operator">:</span> <span class="token string">&quot;No conversion from &quot;</span> <span class="token operator">+</span> prev <span class="token operator">+</span> <span class="token string">&quot; to &quot;</span> <span class="token operator">+</span> current
								<span class="token punctuation">}</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> response <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token comment">//用于计算活动请求的个数</span>
		<span class="token comment">// Counter for holding the number of active queries</span>
		<span class="token literal-property property">active</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>

		<span class="token comment">// Last-Modified header cache for next request</span>
		<span class="token literal-property property">lastModified</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token literal-property property">etag</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">//ajax的一些默认设置</span>
		<span class="token literal-property property">ajaxSettings</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">url</span><span class="token operator">:</span> location<span class="token punctuation">.</span>href<span class="token punctuation">,</span><span class="token comment">//请求地址</span>
			<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span><span class="token comment">//默认是get请求方式</span>
			<span class="token literal-property property">isLocal</span><span class="token operator">:</span> rlocalProtocol<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>protocol<span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token literal-property property">global</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token literal-property property">processData</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token literal-property property">async</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//异步</span>
			<span class="token literal-property property">contentType</span><span class="token operator">:</span> <span class="token string">&quot;application/x-www-form-urlencoded; charset=UTF-8&quot;</span><span class="token punctuation">,</span> <span class="token comment">//请求数据格式</span>

			<span class="token comment">/*
			timeout: 0,
			data: null,
			dataType: null,
			username: null,
			password: null,
			cache: null,
			throws: false,
			traditional: false,
			headers: {},
			*/</span>
			<span class="token comment">//接收的数据格式</span>
			<span class="token literal-property property">accepts</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token string-property property">&quot;*&quot;</span><span class="token operator">:</span> allTypes<span class="token punctuation">,</span>
				<span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;text/plain&quot;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token string">&quot;text/html&quot;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">xml</span><span class="token operator">:</span> <span class="token string">&quot;application/xml, text/xml&quot;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">json</span><span class="token operator">:</span> <span class="token string">&quot;application/json, text/javascript&quot;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token comment">//\b匹配单词边界</span>
			<span class="token literal-property property">contents</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">xml</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\bxml\b</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\bhtml</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">json</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\bjson\b</span><span class="token regex-delimiter">/</span></span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token comment">//响应字段</span>
			<span class="token literal-property property">responseFields</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">xml</span><span class="token operator">:</span> <span class="token string">&quot;responseXML&quot;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;responseText&quot;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">json</span><span class="token operator">:</span> <span class="token string">&quot;responseJSON&quot;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token comment">//数据转换</span>
			<span class="token comment">// Data converters</span>
			<span class="token comment">// Keys separate source (or catchall &quot;*&quot;) and destination types with a single space</span>
			<span class="token literal-property property">converters</span><span class="token operator">:</span> <span class="token punctuation">{</span>

				<span class="token comment">// Convert anything to text</span>
				<span class="token string-property property">&quot;* text&quot;</span><span class="token operator">:</span> String<span class="token punctuation">,</span>

				<span class="token comment">// Text to html (true = no transformation)</span>
				<span class="token string-property property">&quot;text html&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

				<span class="token comment">// Evaluate text as a json expression</span>
				<span class="token string-property property">&quot;text json&quot;</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span>parse<span class="token punctuation">,</span>

				<span class="token comment">// Parse text as xml</span>
				<span class="token string-property property">&quot;text xml&quot;</span><span class="token operator">:</span> jQuery<span class="token punctuation">.</span>parseXML
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">// For options that shouldn't be deep extended:</span>
			<span class="token comment">// you can add your own custom options here if</span>
			<span class="token comment">// and when you create one that shouldn't be</span>
			<span class="token comment">// deep extended (see ajaxExtend)</span>
			<span class="token comment">//不被省深拷贝的一些属性</span>
			<span class="token literal-property property">flatOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
				<span class="token literal-property property">context</span><span class="token operator">:</span> <span class="token boolean">true</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">// Creates a full fledged settings object into target</span>
		<span class="token comment">// with both ajaxSettings and settings fields.</span>
		<span class="token comment">// If target is omitted, writes into ajaxSettings.</span>

		<span class="token comment">//参数合并</span>
		<span class="token function-variable function">ajaxSetup</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> settings</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> settings <span class="token operator">?</span>

				<span class="token comment">// Building a settings object</span>
				<span class="token function">ajaxExtend</span><span class="token punctuation">(</span><span class="token function">ajaxExtend</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span>ajaxSettings<span class="token punctuation">)</span><span class="token punctuation">,</span> settings<span class="token punctuation">)</span> <span class="token operator">:</span>

				<span class="token comment">// Extending ajaxSettings</span>
				<span class="token function">ajaxExtend</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>ajaxSettings<span class="token punctuation">,</span> target<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">//q前置过滤器</span>
		<span class="token literal-property property">ajaxPrefilter</span><span class="token operator">:</span> <span class="token function">addToPrefiltersOrTransports</span><span class="token punctuation">(</span>prefilters<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token comment">//请求分发器</span>
		<span class="token literal-property property">ajaxTransport</span><span class="token operator">:</span> <span class="token function">addToPrefiltersOrTransports</span><span class="token punctuation">(</span>transports<span class="token punctuation">)</span><span class="token punctuation">,</span>

		<span class="token comment">// Main method ajax的主要调用方法</span>
		<span class="token function-variable function">ajax</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// If url is an object, simulate pre-1.5 signature</span>
			<span class="token comment">//如果url是一个对象,url中肯定存在url属性, $.get({url:&quot;index.js&quot;})</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> url <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				options <span class="token operator">=</span> url<span class="token punctuation">;</span>
				url <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">//options必须是一个对象</span>
			<span class="token comment">// Force options to be an object</span>
			options <span class="token operator">=</span> options <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token keyword">var</span> transport<span class="token punctuation">,</span>

				<span class="token comment">// URL without anti-cache param</span>
				cacheURL<span class="token punctuation">,</span>

				<span class="token comment">// Response headers</span>
				responseHeadersString<span class="token punctuation">,</span>
				responseHeaders<span class="token punctuation">,</span>

				<span class="token comment">// timeout handle</span>
				timeoutTimer<span class="token punctuation">,</span>

				<span class="token comment">// Url cleanup var</span>
				urlAnchor<span class="token punctuation">,</span>

				<span class="token comment">// Request state (becomes false upon send and true upon completion)</span>
				completed<span class="token punctuation">,</span>

				<span class="token comment">// To know if global events are to be dispatched</span>
				fireGlobals<span class="token punctuation">,</span>

				<span class="token comment">// Loop variable</span>
				i<span class="token punctuation">,</span>

				<span class="token comment">// uncached part of the url</span>
				uncached<span class="token punctuation">,</span>
				<span class="token comment">//合并参数</span>
				<span class="token comment">// Create the final options object</span>
				s <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">ajaxSetup</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">,</span>

				<span class="token comment">// Callbacks context</span>
				callbackContext <span class="token operator">=</span> s<span class="token punctuation">.</span>context <span class="token operator">||</span> s<span class="token punctuation">,</span>

				<span class="token comment">// Context for global events is callbackContext if it is a DOM node or jQuery collection</span>
				globalEventContext <span class="token operator">=</span> s<span class="token punctuation">.</span>context <span class="token operator">&amp;&amp;</span>
					<span class="token punctuation">(</span>callbackContext<span class="token punctuation">.</span>nodeType <span class="token operator">||</span> callbackContext<span class="token punctuation">.</span>jquery<span class="token punctuation">)</span> <span class="token operator">?</span>
					<span class="token function">jQuery</span><span class="token punctuation">(</span>callbackContext<span class="token punctuation">)</span> <span class="token operator">:</span>
					jQuery<span class="token punctuation">.</span>event<span class="token punctuation">,</span>
				<span class="token comment">//异步对象</span>
				<span class="token comment">// Deferreds</span>
				deferred <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">Deferred</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token comment">//回调函数对象</span>
				completeDeferred <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">Callbacks</span><span class="token punctuation">(</span><span class="token string">&quot;once memory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

				<span class="token comment">// Status-dependent callbacks</span>
				statusCode <span class="token operator">=</span> s<span class="token punctuation">.</span>statusCode <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

				<span class="token comment">// Headers (they are sent all at once)</span>
				requestHeaders <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
				requestHeadersNames <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

				<span class="token comment">// Default abort message</span>
				strAbort <span class="token operator">=</span> <span class="token string">&quot;canceled&quot;</span><span class="token punctuation">,</span>

				<span class="token comment">// Fake xhr</span>
				jqXHR <span class="token operator">=</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">readyState</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
					<span class="token comment">//构建响应头哈希表</span>
					<span class="token comment">// Builds headers hashtable if needed</span>
					<span class="token function-variable function">getResponseHeader</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> match<span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>completed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>responseHeaders<span class="token punctuation">)</span> <span class="token punctuation">{</span>
								responseHeaders <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
								<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>match <span class="token operator">=</span> rheaders<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>responseHeadersString<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
									responseHeaders<span class="token punctuation">[</span>match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span>
										<span class="token punctuation">(</span>responseHeaders<span class="token punctuation">[</span>match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
											<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span>
							match <span class="token operator">=</span> responseHeaders<span class="token punctuation">[</span>key<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						<span class="token keyword">return</span> match <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> match<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;, &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
					<span class="token comment">//获取所有的响应头</span>
					<span class="token comment">// Raw string</span>
					<span class="token function-variable function">getAllResponseHeaders</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> completed <span class="token operator">?</span> responseHeadersString <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>

					<span class="token comment">// Caches the header 缓存请求头</span>
					<span class="token function-variable function">setRequestHeader</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>completed <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							name <span class="token operator">=</span> requestHeadersNames<span class="token punctuation">[</span>name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span>
								requestHeadersNames<span class="token punctuation">[</span>name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">||</span> name<span class="token punctuation">;</span>
							requestHeaders<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>

					<span class="token comment">// Overrides response content-type header</span>
					<span class="token function-variable function">overrideMimeType</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>completed <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							s<span class="token punctuation">.</span>mimeType <span class="token operator">=</span> type<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
					<span class="token comment">//根据不同的status来执行相应的回调</span>
					<span class="token comment">// Status-dependent callbacks</span>
					<span class="token function-variable function">statusCode</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">map</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> code<span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>completed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token comment">//执行回调</span>
								<span class="token comment">// Execute the appropriate callbacks</span>
								jqXHR<span class="token punctuation">.</span><span class="token function">always</span><span class="token punctuation">(</span>map<span class="token punctuation">[</span>jqXHR<span class="token punctuation">.</span>status<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

								<span class="token comment">// Lazy-add the new callbacks in a way that preserves old ones</span>
								<span class="token keyword">for</span> <span class="token punctuation">(</span>code <span class="token keyword">in</span> map<span class="token punctuation">)</span> <span class="token punctuation">{</span>
									statusCode<span class="token punctuation">[</span>code<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>statusCode<span class="token punctuation">[</span>code<span class="token punctuation">]</span><span class="token punctuation">,</span> map<span class="token punctuation">[</span>code<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>
						<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>

					<span class="token comment">// Cancel the request</span>
					<span class="token function-variable function">abort</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">statusText</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> finalText <span class="token operator">=</span> statusText <span class="token operator">||</span> strAbort<span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>transport<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							transport<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span>finalText<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						<span class="token function">done</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> finalText<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token comment">// Attach deferreds 将jqXHR构造成promise对象</span>
			deferred<span class="token punctuation">.</span><span class="token function">promise</span><span class="token punctuation">(</span>jqXHR<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Add protocol if not provided (prefilters might expect it)</span>
			<span class="token comment">// Handle falsy url in the settings object (#10093: consistency with old signature)</span>
			<span class="token comment">// We also use the url parameter if available、</span>
			<span class="token comment">//处理url</span>
			s<span class="token punctuation">.</span>url <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>url <span class="token operator">||</span> s<span class="token punctuation">.</span>url <span class="token operator">||</span> location<span class="token punctuation">.</span>href<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rprotocol<span class="token punctuation">,</span> location<span class="token punctuation">.</span>protocol <span class="token operator">+</span> <span class="token string">&quot;//&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//处理 type</span>
			<span class="token comment">// Alias method option to type as per ticket #12004</span>
			s<span class="token punctuation">.</span>type <span class="token operator">=</span> options<span class="token punctuation">.</span>method <span class="token operator">||</span> options<span class="token punctuation">.</span>type <span class="token operator">||</span> s<span class="token punctuation">.</span>method <span class="token operator">||</span> s<span class="token punctuation">.</span>type<span class="token punctuation">;</span>

			<span class="token comment">// Extract dataTypes list</span>
			s<span class="token punctuation">.</span>dataTypes <span class="token operator">=</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>dataType <span class="token operator">||</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>rnothtmlwhite<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token string">&quot;&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token comment">//是否有跨域选项</span>
			<span class="token comment">// A cross-domain request is in order when the origin doesn't match the current origin.</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>crossDomain <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				urlAnchor <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Support: IE &lt;=8 - 11, Edge 12 - 15</span>
				<span class="token comment">// IE throws exception on accessing the href property if url is malformed,</span>
				<span class="token comment">// e.g. http://example.com:80x/</span>
				<span class="token keyword">try</span> <span class="token punctuation">{</span>
					urlAnchor<span class="token punctuation">.</span>href <span class="token operator">=</span> s<span class="token punctuation">.</span>url<span class="token punctuation">;</span>

					<span class="token comment">// Support: IE &lt;=8 - 11 only</span>
					<span class="token comment">// Anchor's host property isn't correctly set when s.url is relative</span>
					urlAnchor<span class="token punctuation">.</span>href <span class="token operator">=</span> urlAnchor<span class="token punctuation">.</span>href<span class="token punctuation">;</span>
					s<span class="token punctuation">.</span>crossDomain <span class="token operator">=</span> originAnchor<span class="token punctuation">.</span>protocol <span class="token operator">+</span> <span class="token string">&quot;//&quot;</span> <span class="token operator">+</span> originAnchor<span class="token punctuation">.</span>host <span class="token operator">!==</span>
						urlAnchor<span class="token punctuation">.</span>protocol <span class="token operator">+</span> <span class="token string">&quot;//&quot;</span> <span class="token operator">+</span> urlAnchor<span class="token punctuation">.</span>host<span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// If there is an error parsing the URL, assume it is crossDomain,</span>
					<span class="token comment">// it can be rejected by the transport if it is invalid</span>
					s<span class="token punctuation">.</span>crossDomain <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Convert data if not already a string</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>data <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span>processData <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> s<span class="token punctuation">.</span>data <span class="token operator">!==</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				s<span class="token punctuation">.</span>data <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">param</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>data<span class="token punctuation">,</span> s<span class="token punctuation">.</span>traditional<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Apply prefilters</span>
			<span class="token function">inspectPrefiltersOrTransports</span><span class="token punctuation">(</span>prefilters<span class="token punctuation">,</span> s<span class="token punctuation">,</span> options<span class="token punctuation">,</span> jqXHR<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// If request was aborted inside a prefilter, stop there</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>completed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> jqXHR<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// We can fire global events as of now if asked to</span>
			<span class="token comment">// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)</span>
			fireGlobals <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>event <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span>global<span class="token punctuation">;</span>

			<span class="token comment">// Watch for a new set of requests</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>fireGlobals <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span>active<span class="token operator">++</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">&quot;ajaxStart&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Uppercase the type</span>
			s<span class="token punctuation">.</span>type <span class="token operator">=</span> s<span class="token punctuation">.</span>type<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//判断是否有请求体</span>
			<span class="token comment">// Determine if request has content</span>
			s<span class="token punctuation">.</span>hasContent <span class="token operator">=</span> <span class="token operator">!</span>rnoContent<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Save the URL in case we're toying with the If-Modified-Since</span>
			<span class="token comment">// and/or If-None-Match header later on</span>
			<span class="token comment">// Remove hash to simplify url manipulation</span>
			cacheURL <span class="token operator">=</span> s<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rhash<span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// More options handling for requests with no content</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>s<span class="token punctuation">.</span>hasContent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">//获取hash值</span>
				<span class="token comment">// Remember the hash so we can put it back</span>
				uncached <span class="token operator">=</span> s<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>cacheURL<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// If data is available and should be processed, append data to url</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>data <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>processData <span class="token operator">||</span> <span class="token keyword">typeof</span> s<span class="token punctuation">.</span>data <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					cacheURL <span class="token operator">+=</span> <span class="token punctuation">(</span>rquery<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>cacheURL<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;&amp;&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;?&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> s<span class="token punctuation">.</span>data<span class="token punctuation">;</span>

					<span class="token comment">// #9682: remove data so that it's not used in an eventual retry</span>
					<span class="token keyword">delete</span> s<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Add or update anti-cache param if needed</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>cache <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					cacheURL <span class="token operator">=</span> cacheURL<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rantiCache<span class="token punctuation">,</span> <span class="token string">&quot;$1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					uncached <span class="token operator">=</span> <span class="token punctuation">(</span>rquery<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>cacheURL<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;&amp;&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;?&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;_=&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>nonce<span class="token punctuation">.</span>guid<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">+</span>
						uncached<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Put hash and anti-cache on the URL that will be requested (gh-1732)</span>
				s<span class="token punctuation">.</span>url <span class="token operator">=</span> cacheURL <span class="token operator">+</span> uncached<span class="token punctuation">;</span>

				<span class="token comment">// Change '%20' to '+' if this is encoded form body content (gh-2658)</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>data <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span>processData <span class="token operator">&amp;&amp;</span>
				<span class="token punctuation">(</span>s<span class="token punctuation">.</span>contentType <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;application/x-www-form-urlencoded&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				s<span class="token punctuation">.</span>data <span class="token operator">=</span> s<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>r20<span class="token punctuation">,</span> <span class="token string">&quot;+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>ifModified<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>lastModified<span class="token punctuation">[</span>cacheURL<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					jqXHR<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">&quot;If-Modified-Since&quot;</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span>lastModified<span class="token punctuation">[</span>cacheURL<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>etag<span class="token punctuation">[</span>cacheURL<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					jqXHR<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">&quot;If-None-Match&quot;</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span>etag<span class="token punctuation">[</span>cacheURL<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Set the correct header, if data is being sent</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>data <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span>hasContent <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span>contentType <span class="token operator">!==</span> <span class="token boolean">false</span> <span class="token operator">||</span> options<span class="token punctuation">.</span>contentType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jqXHR<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span>contentType<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Set the Accepts header for the server, depending on the dataType</span>
			jqXHR<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span>
				<span class="token string">&quot;Accept&quot;</span><span class="token punctuation">,</span>
				s<span class="token punctuation">.</span>dataTypes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span>accepts<span class="token punctuation">[</span>s<span class="token punctuation">.</span>dataTypes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">?</span>
					s<span class="token punctuation">.</span>accepts<span class="token punctuation">[</span>s<span class="token punctuation">.</span>dataTypes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span>
					<span class="token punctuation">(</span>s<span class="token punctuation">.</span>dataTypes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">&quot;*&quot;</span> <span class="token operator">?</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> allTypes <span class="token operator">+</span> <span class="token string">&quot;; q=0.01&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token operator">:</span>
					s<span class="token punctuation">.</span>accepts<span class="token punctuation">[</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">]</span>
			<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Check for headers option</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> s<span class="token punctuation">.</span>headers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jqXHR<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> s<span class="token punctuation">.</span>headers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Allow custom headers/mimetypes and early abort</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>beforeSend <span class="token operator">&amp;&amp;</span>
				<span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">beforeSend</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>callbackContext<span class="token punctuation">,</span> jqXHR<span class="token punctuation">,</span> s<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">||</span> completed<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Abort if not done already and return</span>
				<span class="token keyword">return</span> jqXHR<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Aborting is no longer a cancellation</span>
			strAbort <span class="token operator">=</span> <span class="token string">&quot;abort&quot;</span><span class="token punctuation">;</span>
			<span class="token comment">//注册回调函数</span>
			<span class="token comment">// Install callbacks on deferreds</span>
			completeDeferred<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>complete<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//done和fail都是添加回调函数</span>
			jqXHR<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>success<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//添加成功回调的函数 用户自己传入的请求成功的回调函数success</span>
			jqXHR<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Get transport // 给transport添加send和abort方法 send方法时正式发起请求的方法</span>
			transport <span class="token operator">=</span> <span class="token function">inspectPrefiltersOrTransports</span><span class="token punctuation">(</span>transports<span class="token punctuation">,</span> s<span class="token punctuation">,</span> options<span class="token punctuation">,</span> jqXHR<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// If no transport, we auto-abort</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>transport<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">done</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;No Transport&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				jqXHR<span class="token punctuation">.</span>readyState <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

				<span class="token comment">// Send global event</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>fireGlobals<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					globalEventContext<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">&quot;ajaxSend&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>jqXHR<span class="token punctuation">,</span> s<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// If request was aborted inside ajaxSend, stop there</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>completed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> jqXHR<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Timeout</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>async <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span>timeout <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					timeoutTimer <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						jqXHR<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token string">&quot;timeout&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span>timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">try</span> <span class="token punctuation">{</span>
					completed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
					<span class="token comment">//正式发起请求的地方 requestHeaders是请求体 done是回调函数</span>
					transport<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>requestHeaders<span class="token punctuation">,</span> done<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Rethrow post-completion exceptions</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>completed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">throw</span> e<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// Propagate others as results</span>
					<span class="token function">done</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			<span class="token comment">//但请求返回后的回调函数 当请求到数据了</span>
			<span class="token comment">// Callback for when everything is done</span>
			<span class="token keyword">function</span> <span class="token function">done</span> <span class="token punctuation">(</span><span class="token parameter">status<span class="token punctuation">,</span> nativeStatusText<span class="token punctuation">,</span> responses<span class="token punctuation">,</span> headers</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> isSuccess<span class="token punctuation">,</span> success<span class="token punctuation">,</span> error<span class="token punctuation">,</span> response<span class="token punctuation">,</span> modified<span class="token punctuation">,</span>
					statusText <span class="token operator">=</span> nativeStatusText<span class="token punctuation">;</span>
				<span class="token comment">//如果请求过了，就不再发起请求了</span>
				<span class="token comment">// Ignore repeat invocations</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>completed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token comment">//请求结果已经处理过了</span>
				completed <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

				<span class="token comment">// Clear timeout if it exists</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>timeoutTimer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					window<span class="token punctuation">.</span><span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeoutTimer<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token comment">//内存回收</span>
				<span class="token comment">// Dereference transport for early garbage collection</span>
				<span class="token comment">// (no matter how long the jqXHR object will be used)</span>
				transport <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
				<span class="token comment">//响应体赋值</span>
				<span class="token comment">// Cache response headers</span>
				responseHeadersString <span class="token operator">=</span> headers <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

				<span class="token comment">// Set readyState 通过status来设置readyState</span>
				jqXHR<span class="token punctuation">.</span>readyState <span class="token operator">=</span> status <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">4</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>

				<span class="token comment">// Determine if successful 判断请求是否成功</span>
				isSuccess <span class="token operator">=</span> status <span class="token operator">&gt;=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> status <span class="token operator">&lt;</span> <span class="token number">300</span> <span class="token operator">||</span> status <span class="token operator">===</span> <span class="token number">304</span><span class="token punctuation">;</span>

				<span class="token comment">// Get response data 获取响应数据</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>responses<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					response <span class="token operator">=</span> <span class="token function">ajaxHandleResponses</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> jqXHR<span class="token punctuation">,</span> responses<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Use a noop converter for missing script</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isSuccess <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span><span class="token string">&quot;script&quot;</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span>dataTypes<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					s<span class="token punctuation">.</span>converters<span class="token punctuation">[</span><span class="token string">&quot;text script&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token comment">//返回 {data: {name: &quot;james&quot;, age: &quot;21&quot;}state: &quot;success&quot;}这种数据格式</span>
				<span class="token comment">// Convert no matter what (that way responseXXX fields are always set)</span>
				response <span class="token operator">=</span> <span class="token function">ajaxConvert</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> response<span class="token punctuation">,</span> jqXHR<span class="token punctuation">,</span> isSuccess<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// If successful, handle type chaining</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>isSuccess<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">//设置Last-Modified和etag数据</span>
					<span class="token comment">// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>ifModified<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						modified <span class="token operator">=</span> jqXHR<span class="token punctuation">.</span><span class="token function">getResponseHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Last-Modified&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>modified<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							jQuery<span class="token punctuation">.</span>lastModified<span class="token punctuation">[</span>cacheURL<span class="token punctuation">]</span> <span class="token operator">=</span> modified<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						modified <span class="token operator">=</span> jqXHR<span class="token punctuation">.</span><span class="token function">getResponseHeader</span><span class="token punctuation">(</span><span class="token string">&quot;etag&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>modified<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							jQuery<span class="token punctuation">.</span>etag<span class="token punctuation">[</span>cacheURL<span class="token punctuation">]</span> <span class="token operator">=</span> modified<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// if no content 请求方法时HEAD</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">===</span> <span class="token number">204</span> <span class="token operator">||</span> s<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&quot;HEAD&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						statusText <span class="token operator">=</span> <span class="token string">&quot;nocontent&quot;</span><span class="token punctuation">;</span>

						<span class="token comment">// if not modified</span>
						<span class="token comment">//从缓存中获取数据</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">===</span> <span class="token number">304</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						statusText <span class="token operator">=</span> <span class="token string">&quot;notmodified&quot;</span><span class="token punctuation">;</span>

						<span class="token comment">// If we have data, let's convert it</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						<span class="token comment">//设置响应</span>
						statusText <span class="token operator">=</span> response<span class="token punctuation">.</span>state<span class="token punctuation">;</span>
						success <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
						error <span class="token operator">=</span> response<span class="token punctuation">.</span>error<span class="token punctuation">;</span>
						isSuccess <span class="token operator">=</span> <span class="token operator">!</span>error<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

					<span class="token comment">// Extract error from statusText and normalize for non-aborts</span>
					error <span class="token operator">=</span> statusText<span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">||</span> <span class="token operator">!</span>statusText<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						statusText <span class="token operator">=</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							status <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Set data for the fake xhr object</span>
				jqXHR<span class="token punctuation">.</span>status <span class="token operator">=</span> status<span class="token punctuation">;</span>
				jqXHR<span class="token punctuation">.</span>statusText <span class="token operator">=</span> <span class="token punctuation">(</span>nativeStatusText <span class="token operator">||</span> statusText<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
				<span class="token comment">//请求或失败的处理</span>
				<span class="token comment">// Success/Error</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>isSuccess<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					deferred<span class="token punctuation">.</span><span class="token function">resolveWith</span><span class="token punctuation">(</span>callbackContext<span class="token punctuation">,</span> <span class="token punctuation">[</span>success<span class="token punctuation">,</span> statusText<span class="token punctuation">,</span> jqXHR<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					deferred<span class="token punctuation">.</span><span class="token function">rejectWith</span><span class="token punctuation">(</span>callbackContext<span class="token punctuation">,</span> <span class="token punctuation">[</span>jqXHR<span class="token punctuation">,</span> statusText<span class="token punctuation">,</span> error<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token comment">//根据statusCode执行不同的回调</span>
				<span class="token comment">// Status-dependent callbacks</span>
				jqXHR<span class="token punctuation">.</span><span class="token function">statusCode</span><span class="token punctuation">(</span>statusCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
				statusCode <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
				<span class="token comment">//是否触发全局的</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>fireGlobals<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					globalEventContext<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span>isSuccess <span class="token operator">?</span> <span class="token string">&quot;ajaxSuccess&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ajaxError&quot;</span><span class="token punctuation">,</span>
						<span class="token punctuation">[</span>jqXHR<span class="token punctuation">,</span> s<span class="token punctuation">,</span> isSuccess <span class="token operator">?</span> success <span class="token operator">:</span> error<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Complete</span>
				completeDeferred<span class="token punctuation">.</span><span class="token function">fireWith</span><span class="token punctuation">(</span>callbackContext<span class="token punctuation">,</span> <span class="token punctuation">[</span>jqXHR<span class="token punctuation">,</span> statusText<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span>fireGlobals<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					globalEventContext<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">&quot;ajaxComplete&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>jqXHR<span class="token punctuation">,</span> s<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// Handle the global AJAX counter</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">--</span>jQuery<span class="token punctuation">.</span>active<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">&quot;ajaxStop&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> jqXHR<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">getJSON</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">getScript</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> callback<span class="token punctuation">,</span> <span class="token string">&quot;script&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//添加$.get()和$.post()请求</span>
	jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_i<span class="token punctuation">,</span> method</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">[</span>method<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// Shift arguments if data argument was omitted</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFunction</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				type <span class="token operator">=</span> type <span class="token operator">||</span> callback<span class="token punctuation">;</span>
				callback <span class="token operator">=</span> data<span class="token punctuation">;</span>
				data <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// The url can be an options object (which then must have .url)</span>
			<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
				<span class="token literal-property property">url</span><span class="token operator">:</span> url<span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> method<span class="token punctuation">,</span>
				<span class="token literal-property property">dataType</span><span class="token operator">:</span> type<span class="token punctuation">,</span>
				<span class="token literal-property property">data</span><span class="token operator">:</span> data<span class="token punctuation">,</span>
				<span class="token literal-property property">success</span><span class="token operator">:</span> callback
			<span class="token punctuation">}</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> url<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//ajax请求前置处理</span>
	jQuery<span class="token punctuation">.</span><span class="token function">ajaxPrefilter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> i<span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> s<span class="token punctuation">.</span>headers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>i<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;content-type&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				s<span class="token punctuation">.</span>contentType <span class="token operator">=</span> s<span class="token punctuation">.</span>headers<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


	jQuery<span class="token punctuation">.</span><span class="token function-variable function">_evalUrl</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> options<span class="token punctuation">,</span> doc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">url</span><span class="token operator">:</span> url<span class="token punctuation">,</span>

			<span class="token comment">// Make this explicit, since user can override this through ajaxSetup (#11264)</span>
			<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">dataType</span><span class="token operator">:</span> <span class="token string">&quot;script&quot;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token literal-property property">async</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
			<span class="token literal-property property">global</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

			<span class="token comment">// Only evaluate the response if it is successful (gh-4126)</span>
			<span class="token comment">// dataFilter is not invoked for failure responses, so using it instead</span>
			<span class="token comment">// of the default converter is kludgy but it works.</span>
			<span class="token literal-property property">converters</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token string-property property">&quot;text script&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">dataFilter</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span><span class="token function">globalEval</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span> options<span class="token punctuation">,</span> doc<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>


	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token function-variable function">wrapAll</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">html</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> wrap<span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFunction</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					html <span class="token operator">=</span> <span class="token function">html</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// The elements to wrap the target around</span>
				wrap <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>html<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ownerDocument<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					wrap<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				wrap<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

					<span class="token keyword">while</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>firstElementChild<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						elem <span class="token operator">=</span> elem<span class="token punctuation">.</span>firstElementChild<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token keyword">return</span> elem<span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">wrapInner</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">html</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFunction</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">wrapInner</span><span class="token punctuation">(</span><span class="token function">html</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					contents <span class="token operator">=</span> self<span class="token punctuation">.</span><span class="token function">contents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span>contents<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					contents<span class="token punctuation">.</span><span class="token function">wrapAll</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					self<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">wrap</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">html</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> htmlIsFunction <span class="token operator">=</span> <span class="token function">isFunction</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">wrapAll</span><span class="token punctuation">(</span>htmlIsFunction <span class="token operator">?</span> <span class="token function">html</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">:</span> html<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">unwrap</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">not</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceWith</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>childNodes<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


	jQuery<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>pseudos<span class="token punctuation">.</span><span class="token function-variable function">hidden</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>pseudos<span class="token punctuation">.</span><span class="token function">visible</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	jQuery<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>pseudos<span class="token punctuation">.</span><span class="token function-variable function">visible</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span>elem<span class="token punctuation">.</span>offsetWidth <span class="token operator">||</span> elem<span class="token punctuation">.</span>offsetHeight <span class="token operator">||</span> elem<span class="token punctuation">.</span><span class="token function">getClientRects</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>



	<span class="token comment">//新建xhr实例的地方</span>
	jQuery<span class="token punctuation">.</span>ajaxSettings<span class="token punctuation">.</span><span class="token function-variable function">xhr</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">window<span class="token punctuation">.</span>XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token keyword">var</span> xhrSuccessStatus <span class="token operator">=</span> <span class="token punctuation">{</span>

		<span class="token comment">// File protocol always yields status code 0, assume 200</span>
		<span class="token number">0</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>

		<span class="token comment">// Support: IE &lt;=9 only</span>
		<span class="token comment">// #1450: sometimes IE returns 1223 when it should be 204</span>
		<span class="token number">1223</span><span class="token operator">:</span> <span class="token number">204</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
		xhrSupported <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>ajaxSettings<span class="token punctuation">.</span><span class="token function">xhr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//是否支持跨域</span>
	support<span class="token punctuation">.</span>cors <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>xhrSupported <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token string">&quot;withCredentials&quot;</span> <span class="token keyword">in</span> xhrSupported<span class="token punctuation">)</span><span class="token punctuation">;</span>
	support<span class="token punctuation">.</span>ajax <span class="token operator">=</span> xhrSupported <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>xhrSupported<span class="token punctuation">;</span>
	<span class="token comment">//真正发起ajax请求的地方</span>
	jQuery<span class="token punctuation">.</span><span class="token function">ajaxTransport</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> callback<span class="token punctuation">,</span> errorCallback<span class="token punctuation">;</span>

		<span class="token comment">// Cross domain only allowed if supported through XMLHttpRequest</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>support<span class="token punctuation">.</span>cors <span class="token operator">||</span> xhrSupported <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>options<span class="token punctuation">.</span>crossDomain<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token punctuation">{</span>
				<span class="token comment">//发起请求</span>
				<span class="token function-variable function">send</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">headers<span class="token punctuation">,</span> complete</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> i<span class="token punctuation">,</span>
						<span class="token comment">//创建xhr实例</span>
						xhr <span class="token operator">=</span> options<span class="token punctuation">.</span><span class="token function">xhr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">//调用open方法发起请求</span>
					xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>
						options<span class="token punctuation">.</span>type<span class="token punctuation">,</span>
						options<span class="token punctuation">.</span>url<span class="token punctuation">,</span>
						options<span class="token punctuation">.</span>async<span class="token punctuation">,</span>
						options<span class="token punctuation">.</span>username<span class="token punctuation">,</span>
						options<span class="token punctuation">.</span>password
					<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// Apply custom fields if provided</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>xhrFields<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> options<span class="token punctuation">.</span>xhrFields<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							xhr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> options<span class="token punctuation">.</span>xhrFields<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// Override mime type if needed</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>mimeType <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>overrideMimeType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						xhr<span class="token punctuation">.</span><span class="token function">overrideMimeType</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>mimeType<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// X-Requested-With header</span>
					<span class="token comment">// For cross-domain requests, seeing as conditions for a preflight are</span>
					<span class="token comment">// akin to a jigsaw puzzle, we simply never set it to be sure.</span>
					<span class="token comment">// (it can always be set on a per-request basis or even using ajaxSetup)</span>
					<span class="token comment">// For same-domain requests, won't change header if already provided.</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>options<span class="token punctuation">.</span>crossDomain <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>headers<span class="token punctuation">[</span><span class="token string">&quot;X-Requested-With&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						headers<span class="token punctuation">[</span><span class="token string">&quot;X-Requested-With&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;XMLHttpRequest&quot;</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// Set headers 设置请求头</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> headers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> headers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// Callback 各种事件的回调处理 onload，onerror和ontimeout以及onabort</span>
					<span class="token function-variable function">callback</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
								callback <span class="token operator">=</span> errorCallback <span class="token operator">=</span> xhr<span class="token punctuation">.</span>onload <span class="token operator">=</span>
									xhr<span class="token punctuation">.</span>onerror <span class="token operator">=</span> xhr<span class="token punctuation">.</span>onabort <span class="token operator">=</span> xhr<span class="token punctuation">.</span>ontimeout <span class="token operator">=</span>
									xhr<span class="token punctuation">.</span>onreadystatechange <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

								<span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&quot;abort&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
									xhr<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

									<span class="token comment">// Support: IE &lt;=9 only</span>
									<span class="token comment">// On a manual native abort, IE9 throws</span>
									<span class="token comment">// errors on any property access that is not readyState</span>
									<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> xhr<span class="token punctuation">.</span>status <span class="token operator">!==</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
										<span class="token function">complete</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
									<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
										<span class="token function">complete</span><span class="token punctuation">(</span>

											<span class="token comment">// File: protocol always yields status 0; see #8605, #14207</span>
											xhr<span class="token punctuation">.</span>status<span class="token punctuation">,</span>
											xhr<span class="token punctuation">.</span>statusText
										<span class="token punctuation">)</span><span class="token punctuation">;</span>
									<span class="token punctuation">}</span>
								<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
									<span class="token comment">//没有被终止或者报错的情况下</span>
									<span class="token function">complete</span><span class="token punctuation">(</span>
										xhrSuccessStatus<span class="token punctuation">[</span>xhr<span class="token punctuation">.</span>status<span class="token punctuation">]</span> <span class="token operator">||</span> xhr<span class="token punctuation">.</span>status<span class="token punctuation">,</span>
										xhr<span class="token punctuation">.</span>statusText<span class="token punctuation">,</span>

										<span class="token comment">// Support: IE &lt;=9 only</span>
										<span class="token comment">// IE9 has no XHR2 but throws on binary (trac-11426)</span>
										<span class="token comment">// For XHR2 non-text, let the caller handle it (gh-2498)</span>
										<span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseType <span class="token operator">||</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">&quot;text&quot;</span> <span class="token operator">||</span>
											<span class="token keyword">typeof</span> xhr<span class="token punctuation">.</span>responseText <span class="token operator">!==</span> <span class="token string">&quot;string&quot;</span> <span class="token operator">?</span>
											<span class="token punctuation">{</span> <span class="token literal-property property">binary</span><span class="token operator">:</span> xhr<span class="token punctuation">.</span>response <span class="token punctuation">}</span> <span class="token operator">:</span>
											<span class="token punctuation">{</span> <span class="token literal-property property">text</span><span class="token operator">:</span> xhr<span class="token punctuation">.</span>responseText <span class="token punctuation">}</span><span class="token punctuation">,</span>
										<span class="token comment">//获取所有的请求响应头</span>
										xhr<span class="token punctuation">.</span><span class="token function">getAllResponseHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
									<span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">;</span>

					<span class="token comment">// Listen to events</span>
					xhr<span class="token punctuation">.</span>onload <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					errorCallback <span class="token operator">=</span> xhr<span class="token punctuation">.</span>onerror <span class="token operator">=</span> xhr<span class="token punctuation">.</span>ontimeout <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// Support: IE 9 only</span>
					<span class="token comment">// Use onreadystatechange to replace onabort</span>
					<span class="token comment">// to handle uncaught aborts</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>onabort <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						xhr<span class="token punctuation">.</span>onabort <span class="token operator">=</span> errorCallback<span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

							<span class="token comment">// Check readyState before timeout as it changes</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

								<span class="token comment">// Allow onerror to be called first,</span>
								<span class="token comment">// but that will not handle a native abort</span>
								<span class="token comment">// Also, save errorCallback to a variable</span>
								<span class="token comment">// as xhr.onerror cannot be accessed</span>
								window<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token keyword">if</span> <span class="token punctuation">(</span>callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
										<span class="token function">errorCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
									<span class="token punctuation">}</span>
								<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// Create the abort callback</span>
					callback <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token string">&quot;abort&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token keyword">try</span> <span class="token punctuation">{</span>
						<span class="token comment">//发起请求</span>
						<span class="token comment">// Do send the request (this may raise an exception)</span>
						xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>hasContent <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span>data <span class="token operator">||</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>

						<span class="token comment">// #14683: Only rethrow if this hasn't been notified as an error yet</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">throw</span> e<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>

				<span class="token function-variable function">abort</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>




	<span class="token comment">// Prevent auto-execution of scripts when no explicit dataType was provided (See gh-2432)</span>
	jQuery<span class="token punctuation">.</span><span class="token function">ajaxPrefilter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>crossDomain<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			s<span class="token punctuation">.</span>contents<span class="token punctuation">.</span>script <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Install script dataType</span>
	jQuery<span class="token punctuation">.</span><span class="token function">ajaxSetup</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">accepts</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">script</span><span class="token operator">:</span> <span class="token string">&quot;text/javascript, application/javascript, &quot;</span> <span class="token operator">+</span>
				<span class="token string">&quot;application/ecmascript, application/x-ecmascript&quot;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token literal-property property">contents</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">script</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\b(?:java|ecma)script\b</span><span class="token regex-delimiter">/</span></span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token literal-property property">converters</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token string-property property">&quot;text script&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span><span class="token function">globalEval</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> text<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Handle cache's special case and crossDomain</span>
	jQuery<span class="token punctuation">.</span><span class="token function">ajaxPrefilter</span><span class="token punctuation">(</span><span class="token string">&quot;script&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>cache <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			s<span class="token punctuation">.</span>cache <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>crossDomain<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			s<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">&quot;GET&quot;</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Bind script tag hack transport</span>
	jQuery<span class="token punctuation">.</span><span class="token function">ajaxTransport</span><span class="token punctuation">(</span><span class="token string">&quot;script&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token comment">// This transport only deals with cross domain or forced-by-attrs requests</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>crossDomain <span class="token operator">||</span> s<span class="token punctuation">.</span>scriptAttrs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> script<span class="token punctuation">,</span> callback<span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token punctuation">{</span>
				<span class="token function-variable function">send</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> complete</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					script <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;script&gt;&quot;</span><span class="token punctuation">)</span>
						<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>scriptAttrs <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
						<span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">charset</span><span class="token operator">:</span> s<span class="token punctuation">.</span>scriptCharset<span class="token punctuation">,</span> <span class="token literal-property property">src</span><span class="token operator">:</span> s<span class="token punctuation">.</span>url <span class="token punctuation">}</span><span class="token punctuation">)</span>
						<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;load error&quot;</span><span class="token punctuation">,</span> <span class="token function-variable function">callback</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							script<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							callback <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>evt<span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token function">complete</span><span class="token punctuation">(</span>evt<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&quot;error&quot;</span> <span class="token operator">?</span> <span class="token number">404</span> <span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> evt<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// Use native DOM manipulation to avoid our domManip AJAX trickery</span>
					document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token function-variable function">abort</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>




	<span class="token keyword">var</span> oldCallbacks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		rjsonp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(=)\?(?=&amp;|$)|\?\?</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>

	<span class="token comment">// Default jsonp settings</span>
	jQuery<span class="token punctuation">.</span><span class="token function">ajaxSetup</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">jsonp</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span>
		<span class="token function-variable function">jsonpCallback</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> callback <span class="token operator">=</span> oldCallbacks<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>expando <span class="token operator">+</span> <span class="token string">&quot;_&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>nonce<span class="token punctuation">.</span>guid<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">[</span>callback<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> callback<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Detect, normalize options and install callbacks for jsonp requests</span>
	jQuery<span class="token punctuation">.</span><span class="token function">ajaxPrefilter</span><span class="token punctuation">(</span><span class="token string">&quot;json jsonp&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">,</span> originalSettings<span class="token punctuation">,</span> jqXHR</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token keyword">var</span> callbackName<span class="token punctuation">,</span> overwritten<span class="token punctuation">,</span> responseContainer<span class="token punctuation">,</span>
			jsonProp <span class="token operator">=</span> s<span class="token punctuation">.</span>jsonp <span class="token operator">!==</span> <span class="token boolean">false</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>rjsonp<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>url<span class="token punctuation">)</span> <span class="token operator">?</span>
				<span class="token string-property property">&quot;url&quot;</span> <span class="token operator">:</span>
				<span class="token keyword">typeof</span> s<span class="token punctuation">.</span>data <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span> <span class="token operator">&amp;&amp;</span>
				<span class="token punctuation">(</span>s<span class="token punctuation">.</span>contentType <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
					<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;application/x-www-form-urlencoded&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span>
				rjsonp<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;data&quot;</span>
			<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Handle iff the expected data type is &quot;jsonp&quot; or we have a parameter to set</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>jsonProp <span class="token operator">||</span> s<span class="token punctuation">.</span>dataTypes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;jsonp&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// Get callback name, remembering preexisting value associated with it</span>
			callbackName <span class="token operator">=</span> s<span class="token punctuation">.</span>jsonpCallback <span class="token operator">=</span> <span class="token function">isFunction</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>jsonpCallback<span class="token punctuation">)</span> <span class="token operator">?</span>
				s<span class="token punctuation">.</span><span class="token function">jsonpCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span>
				s<span class="token punctuation">.</span>jsonpCallback<span class="token punctuation">;</span>

			<span class="token comment">// Insert callback into url or form data</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>jsonProp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				s<span class="token punctuation">[</span>jsonProp<span class="token punctuation">]</span> <span class="token operator">=</span> s<span class="token punctuation">[</span>jsonProp<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rjsonp<span class="token punctuation">,</span> <span class="token string">&quot;$1&quot;</span> <span class="token operator">+</span> callbackName<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>jsonp <span class="token operator">!==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				s<span class="token punctuation">.</span>url <span class="token operator">+=</span> <span class="token punctuation">(</span>rquery<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>url<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;&amp;&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;?&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> s<span class="token punctuation">.</span>jsonp <span class="token operator">+</span> <span class="token string">&quot;=&quot;</span> <span class="token operator">+</span> callbackName<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Use data converter to retrieve json after script execution</span>
			s<span class="token punctuation">.</span>converters<span class="token punctuation">[</span><span class="token string">&quot;script json&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>responseContainer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					jQuery<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>callbackName <span class="token operator">+</span> <span class="token string">&quot; was not called&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">return</span> responseContainer<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token comment">// Force json dataType</span>
			s<span class="token punctuation">.</span>dataTypes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">;</span>

			<span class="token comment">// Install callback</span>
			overwritten <span class="token operator">=</span> window<span class="token punctuation">[</span>callbackName<span class="token punctuation">]</span><span class="token punctuation">;</span>
			window<span class="token punctuation">[</span>callbackName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				responseContainer <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token comment">// Clean-up function (fires after converters)</span>
			jqXHR<span class="token punctuation">.</span><span class="token function">always</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// If previous value didn't exist - remove it</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>overwritten <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">jQuery</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeProp</span><span class="token punctuation">(</span>callbackName<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// Otherwise restore preexisting value</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					window<span class="token punctuation">[</span>callbackName<span class="token punctuation">]</span> <span class="token operator">=</span> overwritten<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Save back as free</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>callbackName<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Make sure that re-using the options doesn't screw things around</span>
					s<span class="token punctuation">.</span>jsonpCallback <span class="token operator">=</span> originalSettings<span class="token punctuation">.</span>jsonpCallback<span class="token punctuation">;</span>

					<span class="token comment">// Save the callback name for future use</span>
					oldCallbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>callbackName<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Call if it was a function and we have a response</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>responseContainer <span class="token operator">&amp;&amp;</span> <span class="token function">isFunction</span><span class="token punctuation">(</span>overwritten<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">overwritten</span><span class="token punctuation">(</span>responseContainer<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				responseContainer <span class="token operator">=</span> overwritten <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Delegate to script</span>
			<span class="token keyword">return</span> <span class="token string">&quot;script&quot;</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**************ajax相关****************** */</span>


	<span class="token comment">// Support: Safari 8 only</span>
	<span class="token comment">// In Safari 8 documents created via document.implementation.createHTMLDocument</span>
	<span class="token comment">// collapse sibling forms: the second one becomes a child of the first one.</span>
	<span class="token comment">// Because of that, this security measure has to be disabled in Safari 8.</span>
	<span class="token comment">// https://bugs.webkit.org/show_bug.cgi?id=137337</span>
	support<span class="token punctuation">.</span>createHTMLDocument <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> body <span class="token operator">=</span> document<span class="token punctuation">.</span>implementation<span class="token punctuation">.</span><span class="token function">createHTMLDocument</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>body<span class="token punctuation">;</span>
		body<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;&lt;form&gt;&lt;/form&gt;&lt;form&gt;&lt;/form&gt;&quot;</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> body<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


	<span class="token comment">// Argument &quot;data&quot; should be string of html data是html字符串</span>
	<span class="token comment">// context (optional): If specified, the fragment will be created in this context,</span>
	<span class="token comment">// defaults to document context默认是document</span>
	<span class="token comment">// keepScripts (optional): If true, will include scripts passed in the html string</span>
	jQuery<span class="token punctuation">.</span><span class="token function-variable function">parseHTML</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> context<span class="token punctuation">,</span> keepScripts</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> data <span class="token operator">!==</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> context <span class="token operator">===</span> <span class="token string">&quot;boolean&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			keepScripts <span class="token operator">=</span> context<span class="token punctuation">;</span>
			context <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">var</span> base<span class="token punctuation">,</span> parsed<span class="token punctuation">,</span> scripts<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>context<span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// Stop scripts or inline event handlers from being executed immediately</span>
			<span class="token comment">// by using document.implementation</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>support<span class="token punctuation">.</span>createHTMLDocument<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				context <span class="token operator">=</span> document<span class="token punctuation">.</span>implementation<span class="token punctuation">.</span><span class="token function">createHTMLDocument</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Set the base href for the created document</span>
				<span class="token comment">// so any parsed elements with URLs</span>
				<span class="token comment">// are based on the document's URL (gh-2965)</span>
				base <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;base&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				base<span class="token punctuation">.</span>href <span class="token operator">=</span> document<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">;</span>
				context<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>base<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				context <span class="token operator">=</span> document<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		parsed <span class="token operator">=</span> rsingleTag<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
		scripts <span class="token operator">=</span> <span class="token operator">!</span>keepScripts <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token comment">// Single tag 单个标签</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>parsed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token punctuation">[</span>context<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>parsed<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//创建文档碎片</span>
		parsed <span class="token operator">=</span> <span class="token function">buildFragment</span><span class="token punctuation">(</span><span class="token punctuation">[</span>data<span class="token punctuation">]</span><span class="token punctuation">,</span> context<span class="token punctuation">,</span> scripts<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>scripts <span class="token operator">&amp;&amp;</span> scripts<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">jQuery</span><span class="token punctuation">(</span>scripts<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> parsed<span class="token punctuation">.</span>childNodes<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>


	<span class="token comment">/**
	 * Load a url into a page
	 */</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">load</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> params<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> selector<span class="token punctuation">,</span> type<span class="token punctuation">,</span> response<span class="token punctuation">,</span>
			self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span>
			off <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>off <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			selector <span class="token operator">=</span> <span class="token function">stripAndCollapse</span><span class="token punctuation">(</span>url<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>off<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			url <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> off<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// If it's a function</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFunction</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// We assume that it's the callback</span>
			callback <span class="token operator">=</span> params<span class="token punctuation">;</span>
			params <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>

			<span class="token comment">// Otherwise, build a param string</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>params <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> params <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			type <span class="token operator">=</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// If we have elements to modify, make the request</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
				<span class="token literal-property property">url</span><span class="token operator">:</span> url<span class="token punctuation">,</span>

				<span class="token comment">// If &quot;type&quot; variable is undefined, then &quot;GET&quot; method will be used.</span>
				<span class="token comment">// Make value of this field explicit since</span>
				<span class="token comment">// user can override it through ajaxSetup method</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> type <span class="token operator">||</span> <span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">dataType</span><span class="token operator">:</span> <span class="token string">&quot;html&quot;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">data</span><span class="token operator">:</span> params
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">responseText</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Save response for use in complete callback</span>
				response <span class="token operator">=</span> arguments<span class="token punctuation">;</span>

				self<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>selector <span class="token operator">?</span>

					<span class="token comment">// If a selector was specified, locate the right elements in a dummy div</span>
					<span class="token comment">// Exclude scripts to avoid IE 'Permission Denied' errors</span>
					<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;div&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">parseHTML</span><span class="token punctuation">(</span>responseText<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span> <span class="token operator">:</span>

					<span class="token comment">// Otherwise use the full result</span>
					responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// If the request succeeds, this function gets &quot;data&quot;, &quot;status&quot;, &quot;jqXHR&quot;</span>
				<span class="token comment">// but they are ignored because response was set above.</span>
				<span class="token comment">// If it fails, this function gets &quot;jqXHR&quot;, &quot;status&quot;, &quot;error&quot;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">always</span><span class="token punctuation">(</span>callback <span class="token operator">&amp;&amp;</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">jqXHR<span class="token punctuation">,</span> status</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				self<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> response <span class="token operator">||</span> <span class="token punctuation">[</span>jqXHR<span class="token punctuation">.</span>responseText<span class="token punctuation">,</span> status<span class="token punctuation">,</span> jqXHR<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>




	jQuery<span class="token punctuation">.</span>expr<span class="token punctuation">.</span>pseudos<span class="token punctuation">.</span><span class="token function-variable function">animated</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">grep</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>timers<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> elem <span class="token operator">===</span> fn<span class="token punctuation">.</span>elem<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>




	jQuery<span class="token punctuation">.</span>offset <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token function-variable function">setOffset</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> options<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> curPosition<span class="token punctuation">,</span> curLeft<span class="token punctuation">,</span> curCSSTop<span class="token punctuation">,</span> curTop<span class="token punctuation">,</span> curOffset<span class="token punctuation">,</span> curCSSLeft<span class="token punctuation">,</span> calculatePosition<span class="token punctuation">,</span>
				position <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;position&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				curElem <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">,</span>
				props <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token comment">// Set position first, in-case top/left are set even on static elem</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">===</span> <span class="token string">&quot;static&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				elem<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">&quot;relative&quot;</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			curOffset <span class="token operator">=</span> curElem<span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			curCSSTop <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;top&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			curCSSLeft <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;left&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			calculatePosition <span class="token operator">=</span> <span class="token punctuation">(</span>position <span class="token operator">===</span> <span class="token string">&quot;absolute&quot;</span> <span class="token operator">||</span> position <span class="token operator">===</span> <span class="token string">&quot;fixed&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
				<span class="token punctuation">(</span>curCSSTop <span class="token operator">+</span> curCSSLeft<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;auto&quot;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>

			<span class="token comment">// Need to be able to calculate position if either</span>
			<span class="token comment">// top or left is auto and position is either absolute or fixed</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>calculatePosition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				curPosition <span class="token operator">=</span> curElem<span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				curTop <span class="token operator">=</span> curPosition<span class="token punctuation">.</span>top<span class="token punctuation">;</span>
				curLeft <span class="token operator">=</span> curPosition<span class="token punctuation">.</span>left<span class="token punctuation">;</span>

			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				curTop <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>curCSSTop<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
				curLeft <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>curCSSLeft<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFunction</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Use jQuery.extend here to allow modification of coordinates argument (gh-1848)</span>
				options <span class="token operator">=</span> <span class="token function">options</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> i<span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> curOffset<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>top <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				props<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>top <span class="token operator">-</span> curOffset<span class="token punctuation">.</span>top<span class="token punctuation">)</span> <span class="token operator">+</span> curTop<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>left <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				props<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>left <span class="token operator">-</span> curOffset<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">+</span> curLeft<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;using&quot;</span> <span class="token keyword">in</span> options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				options<span class="token punctuation">.</span><span class="token function">using</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> props<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> props<span class="token punctuation">.</span>top <span class="token operator">===</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					props<span class="token punctuation">.</span>top <span class="token operator">+=</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> props<span class="token punctuation">.</span>left <span class="token operator">===</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					props<span class="token punctuation">.</span>left <span class="token operator">+=</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				curElem<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

		<span class="token comment">// offset() relates an element's border box to the document origin</span>
		<span class="token function-variable function">offset</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// Preserve chaining for setter</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> options <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span>
					<span class="token keyword">this</span> <span class="token operator">:</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						jQuery<span class="token punctuation">.</span>offset<span class="token punctuation">.</span><span class="token function">setOffset</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> options<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">var</span> rect<span class="token punctuation">,</span> win<span class="token punctuation">,</span>
				elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>elem<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Return zeros for disconnected and hidden (display: none) elements (gh-2310)</span>
			<span class="token comment">// Support: IE &lt;=11 only</span>
			<span class="token comment">// Running getBoundingClientRect on a</span>
			<span class="token comment">// disconnected node in IE throws an error</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>elem<span class="token punctuation">.</span><span class="token function">getClientRects</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Get document-relative position by adding viewport scroll to viewport-relative gBCR</span>
			rect <span class="token operator">=</span> elem<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			win <span class="token operator">=</span> elem<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">.</span>defaultView<span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">top</span><span class="token operator">:</span> rect<span class="token punctuation">.</span>top <span class="token operator">+</span> win<span class="token punctuation">.</span>pageYOffset<span class="token punctuation">,</span>
				<span class="token literal-property property">left</span><span class="token operator">:</span> rect<span class="token punctuation">.</span>left <span class="token operator">+</span> win<span class="token punctuation">.</span>pageXOffset
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">// position() relates an element's margin box to its offset parent's padding box</span>
		<span class="token comment">// This corresponds to the behavior of CSS absolute positioning</span>
		<span class="token function-variable function">position</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">var</span> offsetParent<span class="token punctuation">,</span> offset<span class="token punctuation">,</span> doc<span class="token punctuation">,</span>
				elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
				parentOffset <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token comment">// position:fixed elements are offset from the viewport, which itself always has zero offset</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;position&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;fixed&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Assume position:fixed implies availability of getBoundingClientRect</span>
				offset <span class="token operator">=</span> elem<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				offset <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Account for the *real* offset parent, which can be the document or its root element</span>
				<span class="token comment">// when a statically positioned element is identified</span>
				doc <span class="token operator">=</span> elem<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">;</span>
				offsetParent <span class="token operator">=</span> elem<span class="token punctuation">.</span>offsetParent <span class="token operator">||</span> doc<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>
				<span class="token keyword">while</span> <span class="token punctuation">(</span>offsetParent <span class="token operator">&amp;&amp;</span>
					<span class="token punctuation">(</span>offsetParent <span class="token operator">===</span> doc<span class="token punctuation">.</span>body <span class="token operator">||</span> offsetParent <span class="token operator">===</span> doc<span class="token punctuation">.</span>documentElement<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
					jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>offsetParent<span class="token punctuation">,</span> <span class="token string">&quot;position&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;static&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					offsetParent <span class="token operator">=</span> offsetParent<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>offsetParent <span class="token operator">&amp;&amp;</span> offsetParent <span class="token operator">!==</span> elem <span class="token operator">&amp;&amp;</span> offsetParent<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// Incorporate borders into its offset, since they are outside its content origin</span>
					parentOffset <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>offsetParent<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					parentOffset<span class="token punctuation">.</span>top <span class="token operator">+=</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>offsetParent<span class="token punctuation">,</span> <span class="token string">&quot;borderTopWidth&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					parentOffset<span class="token punctuation">.</span>left <span class="token operator">+=</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>offsetParent<span class="token punctuation">,</span> <span class="token string">&quot;borderLeftWidth&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Subtract parent offsets and element margins</span>
			<span class="token keyword">return</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">top</span><span class="token operator">:</span> offset<span class="token punctuation">.</span>top <span class="token operator">-</span> parentOffset<span class="token punctuation">.</span>top <span class="token operator">-</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;marginTop&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token literal-property property">left</span><span class="token operator">:</span> offset<span class="token punctuation">.</span>left <span class="token operator">-</span> parentOffset<span class="token punctuation">.</span>left <span class="token operator">-</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">&quot;marginLeft&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">// This method will return documentElement in the following cases:</span>
		<span class="token comment">// 1) For the element inside the iframe without offsetParent, this method will return</span>
		<span class="token comment">//    documentElement of the parent window</span>
		<span class="token comment">// 2) For the hidden or detached element</span>
		<span class="token comment">// 3) For body or html element, i.e. in case of the html node - it will return itself</span>
		<span class="token comment">//</span>
		<span class="token comment">// but those exceptions were never presented as a real life use-cases</span>
		<span class="token comment">// and might be considered as more preferable results.</span>
		<span class="token comment">//</span>
		<span class="token comment">// This logic, however, is not guaranteed and can change at any point in the future</span>
		<span class="token function-variable function">offsetParent</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> offsetParent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span>

				<span class="token keyword">while</span> <span class="token punctuation">(</span>offsetParent <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>offsetParent<span class="token punctuation">,</span> <span class="token string">&quot;position&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;static&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					offsetParent <span class="token operator">=</span> offsetParent<span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">return</span> offsetParent <span class="token operator">||</span> documentElement<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Create scrollLeft and scrollTop methods</span>
	jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">scrollLeft</span><span class="token operator">:</span> <span class="token string">&quot;pageXOffset&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">scrollTop</span><span class="token operator">:</span> <span class="token string">&quot;pageYOffset&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">method<span class="token punctuation">,</span> prop</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> top <span class="token operator">=</span> <span class="token string">&quot;pageYOffset&quot;</span> <span class="token operator">===</span> prop<span class="token punctuation">;</span>

		jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span>method<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">access</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> method<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Coalesce documents and windows</span>
				<span class="token keyword">var</span> win<span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isWindow</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					win <span class="token operator">=</span> elem<span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">9</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					win <span class="token operator">=</span> elem<span class="token punctuation">.</span>defaultView<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> win <span class="token operator">?</span> win<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">:</span> elem<span class="token punctuation">[</span>method<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span>win<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					win<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span>
						<span class="token operator">!</span>top <span class="token operator">?</span> val <span class="token operator">:</span> win<span class="token punctuation">.</span>pageXOffset<span class="token punctuation">,</span>
						top <span class="token operator">?</span> val <span class="token operator">:</span> win<span class="token punctuation">.</span>pageYOffset
					<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					elem<span class="token punctuation">[</span>method<span class="token punctuation">]</span> <span class="token operator">=</span> val<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span> method<span class="token punctuation">,</span> val<span class="token punctuation">,</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Support: Safari &lt;=7 - 9.1, Chrome &lt;=37 - 49</span>
	<span class="token comment">// Add the top/left cssHooks using jQuery.fn.position</span>
	<span class="token comment">// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084</span>
	<span class="token comment">// Blink bug: https://bugs.chromium.org/p/chromium/issues/detail?id=589347</span>
	<span class="token comment">// getComputedStyle returns percent when specified for top/left/bottom/right;</span>
	<span class="token comment">// rather than make the css module depend on the offset module, just check for it here</span>
	jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;top&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;left&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_i<span class="token punctuation">,</span> prop</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">.</span>cssHooks<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">addGetHookIf</span><span class="token punctuation">(</span>support<span class="token punctuation">.</span>pixelPosition<span class="token punctuation">,</span>
			<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> computed</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>computed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					computed <span class="token operator">=</span> <span class="token function">curCSS</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> prop<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// If curCSS returns percentage, fallback to offset</span>
					<span class="token keyword">return</span> rnumnonpx<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>computed<span class="token punctuation">)</span> <span class="token operator">?</span>
						<span class="token function">jQuery</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span> <span class="token operator">:</span>
						computed<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//添加innerHeight, innerWidth, height, width, outerHeight and outerWidth methods</span>
	<span class="token comment">// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods</span>
	jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">Height</span><span class="token operator">:</span> <span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">Width</span><span class="token operator">:</span> <span class="token string">&quot;width&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token string">&quot;inner&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">,</span> <span class="token literal-property property">content</span><span class="token operator">:</span> type<span class="token punctuation">,</span> <span class="token string-property property">&quot;&quot;</span><span class="token operator">:</span> <span class="token string">&quot;outer&quot;</span> <span class="token operator">+</span> name <span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">defaultExtra<span class="token punctuation">,</span> funcName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// Margin is only for outerHeight, outerWidth</span>
				jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span>funcName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">margin<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> chainable <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>defaultExtra <span class="token operator">||</span> <span class="token keyword">typeof</span> margin <span class="token operator">!==</span> <span class="token string">&quot;boolean&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						extra <span class="token operator">=</span> defaultExtra <span class="token operator">||</span> <span class="token punctuation">(</span>margin <span class="token operator">===</span> <span class="token boolean">true</span> <span class="token operator">||</span> value <span class="token operator">===</span> <span class="token boolean">true</span> <span class="token operator">?</span> <span class="token string">&quot;margin&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;border&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token keyword">return</span> <span class="token function">access</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> type<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> doc<span class="token punctuation">;</span>
						<span class="token comment">//如果是window</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isWindow</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

							<span class="token comment">// $( window ).outerWidth/Height return w/h including scrollbars (gh-1729)</span>
							<span class="token keyword">return</span> funcName<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;outer&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span>
								elem<span class="token punctuation">[</span><span class="token string">&quot;inner&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">]</span> <span class="token operator">:</span>
								elem<span class="token punctuation">.</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">[</span><span class="token string">&quot;client&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">]</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						<span class="token comment">//如果是document</span>
						<span class="token comment">// Get document width or height</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">9</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							doc <span class="token operator">=</span> elem<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>
							<span class="token comment">//获取文档的宽高 兼容处理</span>
							<span class="token comment">// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],</span>
							<span class="token comment">// whichever is greatest</span>
							<span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>
								elem<span class="token punctuation">.</span>body<span class="token punctuation">[</span><span class="token string">&quot;scroll&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">]</span><span class="token punctuation">,</span> doc<span class="token punctuation">[</span><span class="token string">&quot;scroll&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">]</span><span class="token punctuation">,</span>
								elem<span class="token punctuation">.</span>body<span class="token punctuation">[</span><span class="token string">&quot;offset&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">]</span><span class="token punctuation">,</span> doc<span class="token punctuation">[</span><span class="token string">&quot;offset&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">]</span><span class="token punctuation">,</span>
								doc<span class="token punctuation">[</span><span class="token string">&quot;client&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">]</span>
							<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token keyword">return</span> value <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span>

							<span class="token comment">// Get width or height on the element, requesting but not forcing parseFloat</span>
							jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> type<span class="token punctuation">,</span> extra<span class="token punctuation">)</span> <span class="token operator">:</span>

							<span class="token comment">// Set width or height on the element</span>
							jQuery<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> type<span class="token punctuation">,</span> value<span class="token punctuation">,</span> extra<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> chainable <span class="token operator">?</span> margin <span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> chainable<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//添加 ajax相关的事件监听</span>
	jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
		<span class="token string">&quot;ajaxStart&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;ajaxStop&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;ajaxComplete&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;ajaxError&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;ajaxSuccess&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;ajaxSend&quot;</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_i<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



	<span class="token comment">//添加事件相关的方法 bind 、delegate和hover等方法</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token comment">//给元素添加事件监听</span>
		<span class="token function-variable function">bind</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">types<span class="token punctuation">,</span> data<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>types<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">//给元素添加移除监听</span>
		<span class="token function-variable function">unbind</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">types<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span>types<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">delegate</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">selector<span class="token punctuation">,</span> types<span class="token punctuation">,</span> data<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>types<span class="token punctuation">,</span> selector<span class="token punctuation">,</span> data<span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">undelegate</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">selector<span class="token punctuation">,</span> types<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// ( namespace ) or ( selector, types [, fn] )</span>
			<span class="token keyword">return</span> arguments<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span> <span class="token string">&quot;**&quot;</span><span class="token punctuation">)</span> <span class="token operator">:</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span>types<span class="token punctuation">,</span> selector <span class="token operator">||</span> <span class="token string">&quot;**&quot;</span><span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">hover</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fnOver<span class="token punctuation">,</span> fnOut</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">mouseenter</span><span class="token punctuation">(</span>fnOver<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mouseleave</span><span class="token punctuation">(</span>fnOut <span class="token operator">||</span> fnOver<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">&quot;blur focus focusin focusout resize scroll click dblclick &quot;</span> <span class="token operator">+</span>
		<span class="token string">&quot;mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave &quot;</span> <span class="token operator">+</span>
		<span class="token string">&quot;change select submit keydown keypress keyup contextmenu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_i<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// Handle event binding 对事件添加绑定</span>
			jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> arguments<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> fn<span class="token punctuation">)</span> <span class="token operator">:</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>




	<span class="token comment">// Support: Android &lt;=4.0 only</span>
	<span class="token comment">// Make sure we trim BOM and NBSP</span>
	<span class="token keyword">var</span> rtrim <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>

	<span class="token comment">// Bind a function to a context, optionally partially applying any</span>
	<span class="token comment">// arguments.</span>
	<span class="token comment">// jQuery.proxy is deprecated to promote standards (specifically Function#bind)</span>
	<span class="token comment">// However, it is not slated for removal any time soon</span>
	jQuery<span class="token punctuation">.</span><span class="token function-variable function">proxy</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> tmp<span class="token punctuation">,</span> args<span class="token punctuation">,</span> proxy<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> context <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			tmp <span class="token operator">=</span> fn<span class="token punctuation">[</span>context<span class="token punctuation">]</span><span class="token punctuation">;</span>
			context <span class="token operator">=</span> fn<span class="token punctuation">;</span>
			fn <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Quick check to determine if target is callable, in the spec</span>
		<span class="token comment">// this throws a TypeError, but we will just return undefined.</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isFunction</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Simulated bind</span>
		args <span class="token operator">=</span> <span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function-variable function">proxy</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token comment">// Set the guid of unique handler to the same of original handler, so it can be removed</span>
		proxy<span class="token punctuation">.</span>guid <span class="token operator">=</span> fn<span class="token punctuation">.</span>guid <span class="token operator">=</span> fn<span class="token punctuation">.</span>guid <span class="token operator">||</span> jQuery<span class="token punctuation">.</span>guid<span class="token operator">++</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> proxy<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	jQuery<span class="token punctuation">.</span><span class="token function-variable function">holdReady</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">hold</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>hold<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span>readyWait<span class="token operator">++</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	jQuery<span class="token punctuation">.</span>isArray <span class="token operator">=</span> Array<span class="token punctuation">.</span>isArray<span class="token punctuation">;</span>
	jQuery<span class="token punctuation">.</span>parseJSON <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span>parse<span class="token punctuation">;</span>
	jQuery<span class="token punctuation">.</span>nodeName <span class="token operator">=</span> nodeName<span class="token punctuation">;</span>
	jQuery<span class="token punctuation">.</span>isFunction <span class="token operator">=</span> isFunction<span class="token punctuation">;</span>
	jQuery<span class="token punctuation">.</span>isWindow <span class="token operator">=</span> isWindow<span class="token punctuation">;</span>
	jQuery<span class="token punctuation">.</span>camelCase <span class="token operator">=</span> camelCase<span class="token punctuation">;</span>
	jQuery<span class="token punctuation">.</span>type <span class="token operator">=</span> toType<span class="token punctuation">;</span>

	jQuery<span class="token punctuation">.</span>now <span class="token operator">=</span> Date<span class="token punctuation">.</span>now<span class="token punctuation">;</span>

	jQuery<span class="token punctuation">.</span><span class="token function-variable function">isNumeric</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token comment">// As of jQuery 3.0, isNumeric is limited to</span>
		<span class="token comment">// strings and numbers (primitives or objects)</span>
		<span class="token comment">// that can be coerced to finite numbers (gh-2662)</span>
		<span class="token keyword">var</span> type <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&quot;number&quot;</span> <span class="token operator">||</span> type <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>

			<span class="token comment">// parseFloat NaNs numeric-cast false positives (&quot;&quot;)</span>
			<span class="token comment">// ...but misinterprets leading-number strings, particularly hex literals (&quot;0x...&quot;)</span>
			<span class="token comment">// subtraction forces infinities to NaN</span>
			<span class="token operator">!</span><span class="token function">isNaN</span><span class="token punctuation">(</span>obj <span class="token operator">-</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">//trim方法的实现</span>
	jQuery<span class="token punctuation">.</span><span class="token function-variable function">trim</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> text <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span>
			<span class="token string-property property">&quot;&quot;</span> <span class="token operator">:</span>
			<span class="token punctuation">(</span>text <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>rtrim<span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>



	<span class="token comment">// Register as a named AMD module, since jQuery can be concatenated with other</span>
	<span class="token comment">// files that may use define, but not via a proper concatenation script that</span>
	<span class="token comment">// understands anonymous AMD modules. A named AMD is safest and most robust</span>
	<span class="token comment">// way to register. Lowercase jquery is used because AMD module names are</span>
	<span class="token comment">// derived from file names, and jQuery is normally delivered in a lowercase</span>
	<span class="token comment">// file name. Do this after creating the global so that if an AMD module wants</span>
	<span class="token comment">// to call noConflict to hide this version of jQuery, it will work.</span>

	<span class="token comment">// Note that for maximum portability, libraries that are not jQuery should</span>
	<span class="token comment">// declare themselves as anonymous modules, and avoid setting a global if an</span>
	<span class="token comment">// AMD loader is present. jQuery is a special case. For more information, see</span>
	<span class="token comment">// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> define <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span> <span class="token operator">&amp;&amp;</span> define<span class="token punctuation">.</span>amd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">define</span><span class="token punctuation">(</span><span class="token string">&quot;jquery&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> jQuery<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>




	<span class="token keyword">var</span>

		<span class="token comment">// Map over jQuery in case of overwrite</span>
		_jQuery <span class="token operator">=</span> window<span class="token punctuation">.</span>jQuery<span class="token punctuation">,</span>

		<span class="token comment">// Map over the $ in case of overwrite</span>
		_$ <span class="token operator">=</span> window<span class="token punctuation">.</span>$<span class="token punctuation">;</span>

	jQuery<span class="token punctuation">.</span><span class="token function-variable function">noConflict</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">deep</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>$ <span class="token operator">===</span> jQuery<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			window<span class="token punctuation">.</span>$ <span class="token operator">=</span> _$<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>deep <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>jQuery <span class="token operator">===</span> jQuery<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			window<span class="token punctuation">.</span>jQuery <span class="token operator">=</span> _jQuery<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> jQuery<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token comment">// Expose jQuery and $ identifiers, even in AMD</span>
	<span class="token comment">// (#7102#comment:10, https://github.com/jquery/jquery/pull/557)</span>
	<span class="token comment">// and CommonJS for browser emulators (#13566)</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> noGlobal <span class="token operator">===</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		window<span class="token punctuation">.</span>jQuery <span class="token operator">=</span> window<span class="token punctuation">.</span>$ <span class="token operator">=</span> jQuery<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>




	<span class="token keyword">return</span> jQuery<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/24/2024, 10:23:52 PM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/WebGLbolg/articles/jquery-source-analysis/jquery之工具函数总结.html">
        jquery之工具函数总结
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="WebGLbolg/assets/js/app.017f919e.js" defer></script><script src="WebGLbolg/assets/js/2.918eef7d.js" defer></script><script src="WebGLbolg/assets/js/1.dd66940c.js" defer></script><script src="WebGLbolg/assets/js/177.6f02b54d.js" defer></script>
  </body>
</html>
