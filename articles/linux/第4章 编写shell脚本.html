<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>shell脚本编写 | 前端WebGL</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.1a435f77.css" as="style"><link rel="preload" href="/assets/js/app.07d0c6c3.js" as="script"><link rel="preload" href="/assets/js/2.918eef7d.js" as="script"><link rel="preload" href="/assets/js/1.dd66940c.js" as="script"><link rel="preload" href="/assets/js/188.1530f52d.js" as="script"><link rel="prefetch" href="/assets/js/10.64c82640.js"><link rel="prefetch" href="/assets/js/100.e56f3d4b.js"><link rel="prefetch" href="/assets/js/101.07ada23c.js"><link rel="prefetch" href="/assets/js/102.75124bf0.js"><link rel="prefetch" href="/assets/js/103.ff02a0ae.js"><link rel="prefetch" href="/assets/js/104.35c9a5c8.js"><link rel="prefetch" href="/assets/js/105.90d79e64.js"><link rel="prefetch" href="/assets/js/106.5601a757.js"><link rel="prefetch" href="/assets/js/107.9628605d.js"><link rel="prefetch" href="/assets/js/108.b193a4ac.js"><link rel="prefetch" href="/assets/js/109.e8f93b20.js"><link rel="prefetch" href="/assets/js/11.6ef10d23.js"><link rel="prefetch" href="/assets/js/110.6da15bb3.js"><link rel="prefetch" href="/assets/js/111.5569e4f1.js"><link rel="prefetch" href="/assets/js/112.b8df0633.js"><link rel="prefetch" href="/assets/js/113.9884dd1b.js"><link rel="prefetch" href="/assets/js/114.93bad6a3.js"><link rel="prefetch" href="/assets/js/115.299e7585.js"><link rel="prefetch" href="/assets/js/116.a1ba085a.js"><link rel="prefetch" href="/assets/js/117.c48dc20b.js"><link rel="prefetch" href="/assets/js/118.56fde63f.js"><link rel="prefetch" href="/assets/js/119.a0098794.js"><link rel="prefetch" href="/assets/js/12.646cca74.js"><link rel="prefetch" href="/assets/js/120.4e0b5a4b.js"><link rel="prefetch" href="/assets/js/121.aabb64fb.js"><link rel="prefetch" href="/assets/js/122.e65fdf4b.js"><link rel="prefetch" href="/assets/js/123.b96c057a.js"><link rel="prefetch" href="/assets/js/124.9c1055f2.js"><link rel="prefetch" href="/assets/js/125.1532ec69.js"><link rel="prefetch" href="/assets/js/126.9006cbbf.js"><link rel="prefetch" href="/assets/js/127.4a5f97b4.js"><link rel="prefetch" href="/assets/js/128.dfcfa154.js"><link rel="prefetch" href="/assets/js/129.fca0868b.js"><link rel="prefetch" href="/assets/js/13.fa15e7da.js"><link rel="prefetch" href="/assets/js/130.5de6f747.js"><link rel="prefetch" href="/assets/js/131.f4b49d23.js"><link rel="prefetch" href="/assets/js/132.b6091d30.js"><link rel="prefetch" href="/assets/js/133.9f4182ca.js"><link rel="prefetch" href="/assets/js/134.ead71742.js"><link rel="prefetch" href="/assets/js/135.0b28f817.js"><link rel="prefetch" href="/assets/js/136.50170e96.js"><link rel="prefetch" href="/assets/js/137.bf3f6063.js"><link rel="prefetch" href="/assets/js/138.2ded09ab.js"><link rel="prefetch" href="/assets/js/139.4f20c255.js"><link rel="prefetch" href="/assets/js/14.f4c0f1e2.js"><link rel="prefetch" href="/assets/js/140.fc015fec.js"><link rel="prefetch" href="/assets/js/141.a92b92fa.js"><link rel="prefetch" href="/assets/js/142.dedfdf9a.js"><link rel="prefetch" href="/assets/js/143.cce2facb.js"><link rel="prefetch" href="/assets/js/144.1fdc79c2.js"><link rel="prefetch" href="/assets/js/145.1561c536.js"><link rel="prefetch" href="/assets/js/146.43548e82.js"><link rel="prefetch" href="/assets/js/147.6b5c7bf2.js"><link rel="prefetch" href="/assets/js/148.0bee9963.js"><link rel="prefetch" href="/assets/js/149.e7c1bc6f.js"><link rel="prefetch" href="/assets/js/15.0382753a.js"><link rel="prefetch" href="/assets/js/150.a580a96e.js"><link rel="prefetch" href="/assets/js/151.08e84f5a.js"><link rel="prefetch" href="/assets/js/152.26201af3.js"><link rel="prefetch" href="/assets/js/153.e56b4c5e.js"><link rel="prefetch" href="/assets/js/154.7f2fe97e.js"><link rel="prefetch" href="/assets/js/155.1df5780e.js"><link rel="prefetch" href="/assets/js/156.b09cccc6.js"><link rel="prefetch" href="/assets/js/157.2f88c2f7.js"><link rel="prefetch" href="/assets/js/158.3b35883a.js"><link rel="prefetch" href="/assets/js/159.de288906.js"><link rel="prefetch" href="/assets/js/16.41afe95f.js"><link rel="prefetch" href="/assets/js/160.e7f234cc.js"><link rel="prefetch" href="/assets/js/161.bca72816.js"><link rel="prefetch" href="/assets/js/162.d8d3eed1.js"><link rel="prefetch" href="/assets/js/163.b3a934b3.js"><link rel="prefetch" href="/assets/js/164.bac39e46.js"><link rel="prefetch" href="/assets/js/165.d3847fc8.js"><link rel="prefetch" href="/assets/js/166.f38989c5.js"><link rel="prefetch" href="/assets/js/167.a3f09db5.js"><link rel="prefetch" href="/assets/js/168.c29d9d1e.js"><link rel="prefetch" href="/assets/js/169.a3a8cc06.js"><link rel="prefetch" href="/assets/js/17.79bd023c.js"><link rel="prefetch" href="/assets/js/170.08cf1ef4.js"><link rel="prefetch" href="/assets/js/171.f233c09f.js"><link rel="prefetch" href="/assets/js/172.fcc70337.js"><link rel="prefetch" href="/assets/js/173.5e7e83bf.js"><link rel="prefetch" href="/assets/js/174.5e869fd2.js"><link rel="prefetch" href="/assets/js/175.d53eea86.js"><link rel="prefetch" href="/assets/js/176.8d38058d.js"><link rel="prefetch" href="/assets/js/177.16c84b65.js"><link rel="prefetch" href="/assets/js/178.3cdb1800.js"><link rel="prefetch" href="/assets/js/179.9b8c1733.js"><link rel="prefetch" href="/assets/js/18.8f25dce6.js"><link rel="prefetch" href="/assets/js/180.5ad3ad4f.js"><link rel="prefetch" href="/assets/js/181.24361fce.js"><link rel="prefetch" href="/assets/js/182.5b8c95b5.js"><link rel="prefetch" href="/assets/js/183.fbf20d93.js"><link rel="prefetch" href="/assets/js/184.bae10e54.js"><link rel="prefetch" href="/assets/js/185.d3dc237f.js"><link rel="prefetch" href="/assets/js/186.9f341504.js"><link rel="prefetch" href="/assets/js/187.80e71c52.js"><link rel="prefetch" href="/assets/js/189.b40b377e.js"><link rel="prefetch" href="/assets/js/19.7c15232c.js"><link rel="prefetch" href="/assets/js/190.421bce40.js"><link rel="prefetch" href="/assets/js/191.222a15a9.js"><link rel="prefetch" href="/assets/js/192.a5ff4c2b.js"><link rel="prefetch" href="/assets/js/193.b57cf720.js"><link rel="prefetch" href="/assets/js/194.5271a290.js"><link rel="prefetch" href="/assets/js/195.535cd5eb.js"><link rel="prefetch" href="/assets/js/196.f5e4fc88.js"><link rel="prefetch" href="/assets/js/197.c6674dc8.js"><link rel="prefetch" href="/assets/js/198.898105ea.js"><link rel="prefetch" href="/assets/js/199.20a695b6.js"><link rel="prefetch" href="/assets/js/20.becddea5.js"><link rel="prefetch" href="/assets/js/200.3a276c3c.js"><link rel="prefetch" href="/assets/js/201.ebe7ef57.js"><link rel="prefetch" href="/assets/js/202.ef56e8b8.js"><link rel="prefetch" href="/assets/js/203.a859f5f4.js"><link rel="prefetch" href="/assets/js/204.521014d1.js"><link rel="prefetch" href="/assets/js/205.65f93b9e.js"><link rel="prefetch" href="/assets/js/206.30550734.js"><link rel="prefetch" href="/assets/js/207.ba12be14.js"><link rel="prefetch" href="/assets/js/208.1243c097.js"><link rel="prefetch" href="/assets/js/209.af016387.js"><link rel="prefetch" href="/assets/js/21.2abc4662.js"><link rel="prefetch" href="/assets/js/210.aade8a85.js"><link rel="prefetch" href="/assets/js/211.aaf7aee8.js"><link rel="prefetch" href="/assets/js/212.ec83a667.js"><link rel="prefetch" href="/assets/js/213.7f17c24d.js"><link rel="prefetch" href="/assets/js/214.d3bbee16.js"><link rel="prefetch" href="/assets/js/215.0d3767e7.js"><link rel="prefetch" href="/assets/js/216.446b2a83.js"><link rel="prefetch" href="/assets/js/217.41f3b35f.js"><link rel="prefetch" href="/assets/js/218.5e1ebe7d.js"><link rel="prefetch" href="/assets/js/219.fdbb8ca3.js"><link rel="prefetch" href="/assets/js/22.458ede9c.js"><link rel="prefetch" href="/assets/js/220.aa5ccac9.js"><link rel="prefetch" href="/assets/js/221.be5dd3bd.js"><link rel="prefetch" href="/assets/js/222.e2084f0f.js"><link rel="prefetch" href="/assets/js/223.499c8b33.js"><link rel="prefetch" href="/assets/js/224.978e74f1.js"><link rel="prefetch" href="/assets/js/225.c3b28fef.js"><link rel="prefetch" href="/assets/js/226.131260c6.js"><link rel="prefetch" href="/assets/js/227.9c14cf2b.js"><link rel="prefetch" href="/assets/js/228.ebfd1bbd.js"><link rel="prefetch" href="/assets/js/229.794e50e0.js"><link rel="prefetch" href="/assets/js/23.e2e7f6b9.js"><link rel="prefetch" href="/assets/js/230.4146a7bb.js"><link rel="prefetch" href="/assets/js/231.cf4bd793.js"><link rel="prefetch" href="/assets/js/232.f52d2707.js"><link rel="prefetch" href="/assets/js/233.ecb7afc9.js"><link rel="prefetch" href="/assets/js/234.f6f02f99.js"><link rel="prefetch" href="/assets/js/235.e89f0dfa.js"><link rel="prefetch" href="/assets/js/236.7a243bc2.js"><link rel="prefetch" href="/assets/js/237.15243cf1.js"><link rel="prefetch" href="/assets/js/238.54b208ce.js"><link rel="prefetch" href="/assets/js/239.b753ca30.js"><link rel="prefetch" href="/assets/js/24.33be9616.js"><link rel="prefetch" href="/assets/js/240.08f3a81e.js"><link rel="prefetch" href="/assets/js/241.b73ee63d.js"><link rel="prefetch" href="/assets/js/242.abc62596.js"><link rel="prefetch" href="/assets/js/243.e5f005de.js"><link rel="prefetch" href="/assets/js/244.424d9a31.js"><link rel="prefetch" href="/assets/js/245.41713f58.js"><link rel="prefetch" href="/assets/js/246.5406372b.js"><link rel="prefetch" href="/assets/js/247.75457cb2.js"><link rel="prefetch" href="/assets/js/248.b8772139.js"><link rel="prefetch" href="/assets/js/249.ff6f5167.js"><link rel="prefetch" href="/assets/js/25.6e41a7ec.js"><link rel="prefetch" href="/assets/js/250.d52cf278.js"><link rel="prefetch" href="/assets/js/251.15860c76.js"><link rel="prefetch" href="/assets/js/252.a40dfb83.js"><link rel="prefetch" href="/assets/js/253.90b01696.js"><link rel="prefetch" href="/assets/js/254.cbca8288.js"><link rel="prefetch" href="/assets/js/255.be58fcee.js"><link rel="prefetch" href="/assets/js/256.8389afe1.js"><link rel="prefetch" href="/assets/js/257.bb3802aa.js"><link rel="prefetch" href="/assets/js/258.cd542a96.js"><link rel="prefetch" href="/assets/js/259.eb5ed507.js"><link rel="prefetch" href="/assets/js/26.0284307b.js"><link rel="prefetch" href="/assets/js/260.bb25a24c.js"><link rel="prefetch" href="/assets/js/261.2af3b275.js"><link rel="prefetch" href="/assets/js/262.070de9d2.js"><link rel="prefetch" href="/assets/js/263.f37cf1c7.js"><link rel="prefetch" href="/assets/js/264.92edb0c6.js"><link rel="prefetch" href="/assets/js/265.26a3f45c.js"><link rel="prefetch" href="/assets/js/266.2cb8c42b.js"><link rel="prefetch" href="/assets/js/267.d8dc7f66.js"><link rel="prefetch" href="/assets/js/268.643d9826.js"><link rel="prefetch" href="/assets/js/269.9a92261a.js"><link rel="prefetch" href="/assets/js/27.7cf8264e.js"><link rel="prefetch" href="/assets/js/270.ba18e697.js"><link rel="prefetch" href="/assets/js/271.cb76b71b.js"><link rel="prefetch" href="/assets/js/272.cb93feaa.js"><link rel="prefetch" href="/assets/js/273.daf8cb01.js"><link rel="prefetch" href="/assets/js/274.9a486be5.js"><link rel="prefetch" href="/assets/js/275.a31f8bcb.js"><link rel="prefetch" href="/assets/js/276.a5793408.js"><link rel="prefetch" href="/assets/js/277.573150e2.js"><link rel="prefetch" href="/assets/js/28.3fe8a3b1.js"><link rel="prefetch" href="/assets/js/29.329865dd.js"><link rel="prefetch" href="/assets/js/3.078209c2.js"><link rel="prefetch" href="/assets/js/30.159abf4f.js"><link rel="prefetch" href="/assets/js/31.d922fcf9.js"><link rel="prefetch" href="/assets/js/32.d02edc4e.js"><link rel="prefetch" href="/assets/js/33.24dfa0d7.js"><link rel="prefetch" href="/assets/js/34.ef456112.js"><link rel="prefetch" href="/assets/js/35.f7e3bb27.js"><link rel="prefetch" href="/assets/js/36.debe7217.js"><link rel="prefetch" href="/assets/js/37.963fbc32.js"><link rel="prefetch" href="/assets/js/38.8afeb2de.js"><link rel="prefetch" href="/assets/js/39.c4ce0598.js"><link rel="prefetch" href="/assets/js/4.8fe7a186.js"><link rel="prefetch" href="/assets/js/40.ba9dfbc6.js"><link rel="prefetch" href="/assets/js/41.54cd742c.js"><link rel="prefetch" href="/assets/js/42.186776a1.js"><link rel="prefetch" href="/assets/js/43.5acacb46.js"><link rel="prefetch" href="/assets/js/44.b7113dba.js"><link rel="prefetch" href="/assets/js/45.318b164c.js"><link rel="prefetch" href="/assets/js/46.a90ddf9f.js"><link rel="prefetch" href="/assets/js/47.11e3bc34.js"><link rel="prefetch" href="/assets/js/48.1076cd8f.js"><link rel="prefetch" href="/assets/js/49.96a3c8bc.js"><link rel="prefetch" href="/assets/js/5.5967bee8.js"><link rel="prefetch" href="/assets/js/50.fb7ff34c.js"><link rel="prefetch" href="/assets/js/51.b3061574.js"><link rel="prefetch" href="/assets/js/52.07e4ea2d.js"><link rel="prefetch" href="/assets/js/53.3713556c.js"><link rel="prefetch" href="/assets/js/54.101160d6.js"><link rel="prefetch" href="/assets/js/55.91defba5.js"><link rel="prefetch" href="/assets/js/56.66e80a2f.js"><link rel="prefetch" href="/assets/js/57.685fb540.js"><link rel="prefetch" href="/assets/js/58.54091307.js"><link rel="prefetch" href="/assets/js/59.b7daeca5.js"><link rel="prefetch" href="/assets/js/6.17dcb484.js"><link rel="prefetch" href="/assets/js/60.bcb1dc6e.js"><link rel="prefetch" href="/assets/js/61.01cba0d1.js"><link rel="prefetch" href="/assets/js/62.47dfde10.js"><link rel="prefetch" href="/assets/js/63.05804478.js"><link rel="prefetch" href="/assets/js/64.748ddae2.js"><link rel="prefetch" href="/assets/js/65.db782f19.js"><link rel="prefetch" href="/assets/js/66.bb039d08.js"><link rel="prefetch" href="/assets/js/67.87782a7c.js"><link rel="prefetch" href="/assets/js/68.9fbeb720.js"><link rel="prefetch" href="/assets/js/69.5e64e3f0.js"><link rel="prefetch" href="/assets/js/7.28c1da78.js"><link rel="prefetch" href="/assets/js/70.1879d3dd.js"><link rel="prefetch" href="/assets/js/71.eddb25f1.js"><link rel="prefetch" href="/assets/js/72.37939565.js"><link rel="prefetch" href="/assets/js/73.463b2eb2.js"><link rel="prefetch" href="/assets/js/74.8e848cc7.js"><link rel="prefetch" href="/assets/js/75.04505cda.js"><link rel="prefetch" href="/assets/js/76.83fd9cc3.js"><link rel="prefetch" href="/assets/js/77.85cc78f2.js"><link rel="prefetch" href="/assets/js/78.0374c2f3.js"><link rel="prefetch" href="/assets/js/79.870e06b7.js"><link rel="prefetch" href="/assets/js/80.7cb6c97c.js"><link rel="prefetch" href="/assets/js/81.d53f5631.js"><link rel="prefetch" href="/assets/js/82.b0eb7a5c.js"><link rel="prefetch" href="/assets/js/83.98170b69.js"><link rel="prefetch" href="/assets/js/84.21ce5c07.js"><link rel="prefetch" href="/assets/js/85.0268f9ca.js"><link rel="prefetch" href="/assets/js/86.00f48e60.js"><link rel="prefetch" href="/assets/js/87.ff3adcc3.js"><link rel="prefetch" href="/assets/js/88.5b80cf55.js"><link rel="prefetch" href="/assets/js/89.77ed0897.js"><link rel="prefetch" href="/assets/js/90.ef85ae84.js"><link rel="prefetch" href="/assets/js/91.c1f0345a.js"><link rel="prefetch" href="/assets/js/92.9945783e.js"><link rel="prefetch" href="/assets/js/93.b24304e8.js"><link rel="prefetch" href="/assets/js/94.2e32fceb.js"><link rel="prefetch" href="/assets/js/95.065243a3.js"><link rel="prefetch" href="/assets/js/96.2bba6499.js"><link rel="prefetch" href="/assets/js/97.b91b5b60.js"><link rel="prefetch" href="/assets/js/98.c69ee606.js"><link rel="prefetch" href="/assets/js/99.235adf16.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.34249538.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1a435f77.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">前端WebGL</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/articles/webgl/" class="nav-link">
  图形学
</a></div><div class="nav-item"><a href="/articles/threejs/" class="nav-link">
  threejs
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/articles/webgl/" class="nav-link">
  图形学
</a></div><div class="nav-item"><a href="/articles/threejs/" class="nav-link">
  threejs
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/articles/linux/" aria-current="page" class="sidebar-link">初识shell</a></li><li><a href="/articles/linux/第2章 配置shell环境.html" class="sidebar-link">shell环境​配置</a></li><li><a href="/articles/linux/第3章 常见任务和基本工具.html" class="sidebar-link">shell基本工具</a></li><li><a href="/articles/linux/第4章 编写shell脚本.html" class="active sidebar-link">shell脚本编写</a><ul class="sidebar-sub-headers"></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="_1、什么是shell脚本"><a href="#_1、什么是shell脚本" class="header-anchor">#</a> 1、什么是shell脚本？</h3> <p>​		shell脚本就是包含一系列命令行的脚本。shell读取这些脚本，执行其中的所有命令，就好像这些命令就已经直接输入到命令行中一样。它不仅是一个强大的命令行接口，也是一个脚本语言解释器。</p> <p>​		shell脚本能够运行的三个条件：</p> <ul><li>创建一个shell脚本。</li> <li>使脚本文件可执行。</li> <li>把脚本放置到shell能够找到的地方。当没有指定可执行文件明确的路径名时，shell 会自动地搜索某些目录，
来查找此可执行文件。</li></ul> <p><strong>1、脚本文件格式</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//1、在第一行设置</span>
#<span class="token operator">!</span><span class="token operator">/</span>bin<span class="token operator">/</span>bash <span class="token comment">//#!是一种特殊的结构，称为shebang，用来告诉操作系统将执行此脚本所用的解释器的名字。</span>
</code></pre></div><p><strong>2、脚本文件权限</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//2、设置可执行权限 755是每个人都能执行，700是文件所有者才能执行</span>
chmod <span class="token number">755</span> hello
</code></pre></div><p><strong>3、脚本文件位置</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>echo $<span class="token constant">PATH</span> <span class="token comment">//查看系统会自动搜索的目录，并执行其中的脚本文件，而该目录列表被存储在一个名为PATH的环境变量。第1种方法：将hello文件放置到PATH变量包含的目录中；第2种方法：将hello所在文件夹添加到PATH变量上去，或者创建一个文件夹放到PATH变量上去。PATH变量不包含hello文件所在目录时，在.bashrc文件中修改</span>
<span class="token keyword">export</span> <span class="token constant">PATH</span><span class="token operator">=</span><span class="token operator">~</span><span class="token operator">/</span>bin<span class="token operator">:</span><span class="token string">&quot;$PATH&quot;</span>
<span class="token comment">//然后重新读取这个.bashrc文件</span>
<span class="token punctuation">.</span> <span class="token punctuation">.</span>bashrc 或者 source <span class="token punctuation">.</span>bashrc
</code></pre></div><p><strong>4、脚本文件的好去处</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1</span>、系统中每个用户都可以访问
<span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>bin
<span class="token number">2</span>、系统管理员访问
<span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>sbin
<span class="token number">3</span>、大多情况下
<span class="token operator">/</span>usr<span class="token operator">/</span>local
</code></pre></div><h3 id="_2、启动一个项目"><a href="#_2、启动一个项目" class="header-anchor">#</a> 2、启动一个项目</h3> <p><strong>1、变量和常量</strong></p> <ul><li>变量名必须有字母数字和下划线组成。</li> <li>变量名的第一个字符必须是一个字母或下划线</li> <li>变量名中不许出现空格和标点符号</li></ul> <p>在赋值过程中，变量名，等号和变量值之间是没有空格的。</p> <p>可以在同一行中对多个变量进行赋值。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash </span>
<span class="token comment"># Program to output a system information page </span>
<span class="token comment"># 定义变量,并在变量中引用变量</span>
<span class="token assign-left variable">title</span><span class="token operator">=</span><span class="token string">&quot;System Information Report <span class="token environment constant">$HOSTNAME</span>&quot;</span> <span class="token assign-left variable">res</span><span class="token operator">=</span><span class="token string">&quot;this is a rsult&quot;</span>
<span class="token comment"># 定义常量</span>
<span class="token assign-left variable">TITLE</span><span class="token operator">=</span><span class="token string">&quot;this is a constant title&quot;</span>
<span class="token comment"># 在(())进行计算</span>
<span class="token assign-left variable">data</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span><span class="token number">5</span><span class="token operator">*</span><span class="token number">7</span><span class="token variable">))</span></span>
<span class="token assign-left variable">CURRENT_TIME</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span><span class="token variable">)</span></span>
<span class="token assign-left variable">catText</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> foo.txt<span class="token variable">)</span></span>
<span class="token comment"># 引用变量$title</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&lt;HTML&gt; 
		&lt;HEAD&gt; 
    		&lt;TITLE&gt;<span class="token variable">$title</span>&lt;/TITLE&gt; 
    		<span class="token variable">$TITLE</span>
		&lt;/HEAD&gt; 
		&lt;BODY&gt;
    		&lt;H1&gt;<span class="token variable">$title</span>&lt;/H1&gt; 
    		<span class="token variable">$res</span>
		&lt;/BODY&gt; 
&lt;/HTML&gt;&quot;</span>
</code></pre></div><p>​		在参数展开过程中，变量名可能被花括号&quot;{}&quot;包围。通过添加花括号，shell 不再把末尾的1解释为变量名的一部分。</p> <div class="language-js extra-class"><pre class="language-js"><code>mv $filename $<span class="token punctuation">{</span>filename<span class="token punctuation">}</span><span class="token number">1</span> <span class="token comment">//$filename表示变量名</span>
</code></pre></div><p><strong>2、Here Document</strong></p> <p>​		here document 是另外一种 I/O 重定向形式，我们在脚本文件中嵌入正文文本，然后把它发送给一个命令的标准输入。</p> <p>​		here documents 中的单引号和双引号会失去它们在 shell 中的特殊含义，把它们看作是普通的字符。</p> <p>​		可以和任意能接受标准输入的命令一块使用。</p> <p>​		它这样工作：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">command</span> <span class="token operator">&lt;&lt;</span> <span class="token string">token 
text 
token</span>
// <span class="token builtin class-name">command</span> 是一个可以接受标准输入的命令名,token 是一个用来指示嵌入文本结束的字符串,这个 token 必须在一行中单独出现，并且文本行中 没有末尾的空格。
<span class="token comment">#!/bin/bash </span>
<span class="token comment"># Program to output a system information page </span>
<span class="token comment"># 定义变量,并在变量中引用变量</span>
<span class="token assign-left variable">title</span><span class="token operator">=</span><span class="token string">&quot;System Information Report <span class="token environment constant">$HOSTNAME</span>&quot;</span> <span class="token assign-left variable">res</span><span class="token operator">=</span><span class="token string">&quot;this is a rsult&quot;</span>
<span class="token comment"># 定义常量</span>
<span class="token assign-left variable">TITLE</span><span class="token operator">=</span><span class="token string">&quot;this is a constant title&quot;</span>
<span class="token comment"># 在(())进行计算</span>
<span class="token assign-left variable">data</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span><span class="token number">5</span><span class="token operator">*</span><span class="token number">7</span><span class="token variable">))</span></span>
<span class="token assign-left variable">CURRENT_TIME</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span><span class="token variable">)</span></span>
<span class="token assign-left variable">catText</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> foo.txt<span class="token variable">)</span></span>
<span class="token comment"># 引用变量$title</span>
<span class="token function">cat</span> <span class="token operator">&lt;&lt;</span> <span class="token string">_EOF_
&lt;HTML&gt; 
		&lt;HEAD&gt; 
    		&lt;TITLE&gt;<span class="token variable">$title</span>&lt;/TITLE&gt; 
    		<span class="token variable">$TITLE</span>
		&lt;/HEAD&gt; 
		&lt;BODY&gt;
    		&lt;H1&gt;<span class="token variable">$title</span>&lt;/H1&gt; 
    		<span class="token variable">$res</span>
		&lt;/BODY&gt; 
&lt;/HTML&gt;
_EOF_</span>
</code></pre></div><h3 id="_3、自顶向下设计"><a href="#_3、自顶向下设计" class="header-anchor">#</a> 3、自顶向下设计</h3> <p>​		这种先确定上层步骤，然后再逐步细化这些步骤的过程被称为自顶向下设计。这种技巧允许我们 把庞大而复杂的任务分割为许多小而简单的任务。自顶向下设计是一种常见的程序设计方法， 尤其适合 shell 编程。</p> <p><strong>1、shell函数</strong></p> <p>​		shell函数时位于其他脚本中的&quot;微脚本&quot;，作为自主程序，shell函数有两种语法形式：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">function</span> <span class="token function-name function">name</span> <span class="token punctuation">{</span> 
	commands <span class="token builtin class-name">return</span> 
<span class="token punctuation">}</span> 
<span class="token function-name function">name</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
	commands <span class="token builtin class-name">return</span> 
<span class="token punctuation">}</span>
//name是函数名，commands是一系列包含在函数中的命令
</code></pre></div><p>​		Shell 函数的命名规则和变量一样。<strong>一个函数必须至少包含一条命令</strong>。函数定义与使用如下所示。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment">#shell function demo</span>

<span class="token keyword">function</span> <span class="token function-name function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Step2&quot;</span>
    <span class="token builtin class-name">return</span>
<span class="token punctuation">}</span>
<span class="token comment"># main program starts</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;Step1&quot;</span>
func
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Step3&quot;</span>
</code></pre></div><p><strong>2、局部变量</strong></p> <p>​		全局变量在整个程序中保持存在。 局部变量只能在定义它们的 shell 函数中使用，并且一旦 shell 函数执行完毕，它们就不存在了。</p> <p>​		拥有局部变量允许程序员使用的局部变量名，可以与已存在的变量名相同，这些变量可以是全局变量， 或者是其它 shell 函数中的局部变量，却不必担心潜在的名字冲突。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment">#global variable</span>
<span class="token assign-left variable">foo</span><span class="token operator">=</span><span class="token number">0</span>

<span class="token keyword">function</span> <span class="token function-name function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> foo //定义局部变量
    <span class="token assign-left variable">foo</span><span class="token operator">=</span><span class="token number">1</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;fun1:foo=<span class="token variable">$foo</span>&quot;</span>
    <span class="token builtin class-name">return</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function-name function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> foo
    <span class="token assign-left variable">foo</span><span class="token operator">=</span><span class="token number">2</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;fun2:foo=<span class="token variable">$foo</span>&quot;</span>
    <span class="token builtin class-name">return</span>
<span class="token punctuation">}</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;global foo=<span class="token variable">$foo</span>&quot;</span>
fun1
<span class="token builtin class-name">echo</span> <span class="token string">&quot;global foo=<span class="token variable">$foo</span>&quot;</span>
fun2
<span class="token builtin class-name">echo</span> <span class="token string">&quot;global foo=<span class="token variable">$foo</span>&quot;</span>
</code></pre></div><h3 id="_4、流程控制-if分支语句"><a href="#_4、流程控制-if分支语句" class="header-anchor">#</a> 4、流程控制——if分支语句</h3> <p><strong>1、if</strong></p> <p>​		if的语句语法如下所示</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//commands是一系列命令
<span class="token keyword">if</span> commands<span class="token punctuation">;</span> <span class="token keyword">then</span> 
commands 
<span class="token punctuation">[</span>elif commands<span class="token punctuation">;</span> <span class="token keyword">then</span> 
commands<span class="token punctuation">..</span>.<span class="token punctuation">]</span> 
<span class="token punctuation">[</span>else commands<span class="token punctuation">]</span> 
<span class="token keyword">fi</span>		
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token parameter variable">-d</span> <span class="token variable">$dir_name</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span> 
	<span class="token keyword">if</span> <span class="token builtin class-name">cd</span> <span class="token variable">$dir_name</span><span class="token punctuation">;</span> <span class="token keyword">then</span> 
		<span class="token builtin class-name">echo</span> <span class="token function">rm</span> * <span class="token comment"># TESTING</span>
    <span class="token keyword">else</span> 
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;cannot cd to '<span class="token variable">$dir_name</span>'&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span> 
        <span class="token builtin class-name">exit</span> <span class="token number">1</span> 
    <span class="token keyword">fi</span> 
<span class="token keyword">else</span> 
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;no such directory: '<span class="token variable">$dir_name</span>'&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span> 
	<span class="token builtin class-name">exit</span> <span class="token number">1</span> 
<span class="token keyword">fi</span> 
<span class="token builtin class-name">exit</span> <span class="token comment"># TESTING</span>
</code></pre></div><p>当命令执行完毕后，命令（包括我们编写的脚本和 shell 函数）会给系统发送一个值，叫做<strong>退出状态</strong>。这个值是一个0到255之间的整数，说明命令成功或者失败。零值说明成功，其他值说明失败。</p> <div class="language-js extra-class"><pre class="language-js"><code>ls <span class="token operator">-</span>d <span class="token operator">/</span>usr<span class="token operator">/</span>bin
echo $<span class="token operator">?</span> <span class="token comment">//显示上一次命令的执行状态</span>
</code></pre></div><p><strong>2、测试</strong></p> <p>​		test命令执行各种各样的检查和比较。有两种等价模式。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">test</span> expression
<span class="token punctuation">[</span> expression <span class="token punctuation">]</span>
//expression是一个表达式，执行结果是true护着false。表达式为真时，test命令返回一个0退出状态，为假时，退出状态为1。
</code></pre></div><p>以下表达式用来计算文件状态。</p> <table><thead><tr><th>表达式</th> <th>如果</th></tr></thead> <tbody><tr><td>file1 -ef file2</td> <td>file1 和 file2 拥有相同的索引号（通过硬链接两个文件名指向相同的文件）。</td></tr> <tr><td>file1 -nt file2</td> <td>file1新于 file2。</td></tr> <tr><td>file1 -ot file2</td> <td>file1早于 file2。</td></tr> <tr><td>-b file</td> <td>file 存在并且是一个块（设备）文件。</td></tr> <tr><td>-c file</td> <td>file 存在并且是一个字符（设备）文件。</td></tr> <tr><td>-d file</td> <td><strong>file 存在并且是一个目录。</strong></td></tr> <tr><td>-e file</td> <td><strong>file 存在。</strong></td></tr> <tr><td>-f file</td> <td><strong>file 存在并且是一个普通文件。</strong></td></tr> <tr><td>-g file</td> <td>file 存在并且设置了组 ID。</td></tr> <tr><td>-G file</td> <td>file 存在并且由有效组 ID 拥有。</td></tr> <tr><td>-k file</td> <td>file 存在并且设置了它的“sticky bit”。</td></tr> <tr><td>-L file</td> <td>file 存在并且是一个符号链接。</td></tr> <tr><td>-O file</td> <td>file 存在并且由有效用户 ID 拥有。</td></tr> <tr><td>-p file</td> <td>file 存在并且是一个命名管道。</td></tr> <tr><td>-r file</td> <td><strong>file 存在并且可读（有效用户有可读权限）。</strong></td></tr> <tr><td>-s file</td> <td>file 存在且其长度大于零。</td></tr> <tr><td>-S file</td> <td>file 存在且是一个网络 socket。</td></tr> <tr><td>-t fd</td> <td>fd 是一个定向到终端／从终端定向的文件描述符 。 这可以被用来决定是否重定向了标准输 入／输出错误。</td></tr> <tr><td>-u file</td> <td>file 存在并且设置了 setuid 位。</td></tr> <tr><td>-w file</td> <td><strong>file 存在并且可写（有效用户拥有可写权限）。</strong></td></tr> <tr><td>-x file</td> <td><strong>file 存在并且可执行（有效用户有执行／搜索权限）。</strong></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1</span> #<span class="token operator">!</span><span class="token operator">/</span>bin<span class="token operator">/</span>bash
<span class="token number">2</span> # test<span class="token operator">-</span>file<span class="token operator">:</span> Evaluate the status <span class="token keyword">of</span> a file
<span class="token number">3</span> <span class="token constant">FILE</span><span class="token operator">=</span><span class="token operator">~</span><span class="token operator">/</span><span class="token punctuation">.</span>bashrc
<span class="token number">4</span> <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">-</span>e <span class="token string">&quot;$FILE&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> then
<span class="token number">5</span>   <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">-</span>f <span class="token string">&quot;$FILE&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> then
<span class="token number">6</span>     echo <span class="token string">&quot;$FILE is a regular file.&quot;</span>
<span class="token number">7</span>   fi
<span class="token number">8</span>   <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">-</span>d <span class="token string">&quot;$FILE&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> then
<span class="token number">9</span>     echo <span class="token string">&quot;$FILE is a directory.&quot;</span>
<span class="token number">10</span>   fi
<span class="token number">11</span>   <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">-</span>r <span class="token string">&quot;$FILE&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> then
<span class="token number">12</span>     echo <span class="token string">&quot;$FILE is readable.&quot;</span>
<span class="token number">13</span>   fi
<span class="token number">14</span>   <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">-</span>w <span class="token string">&quot;$FILE&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> then
<span class="token number">15</span>     echo <span class="token string">&quot;$FILE is writable.&quot;</span>
<span class="token number">16</span>   fi
<span class="token number">17</span>   <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">-</span>x <span class="token string">&quot;$FILE&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> then
<span class="token number">18</span>     echo <span class="token string">&quot;$FILE is executable/searchable.&quot;</span>
<span class="token number">19</span>   fi
<span class="token number">20</span> <span class="token keyword">else</span>
<span class="token number">21</span>   echo <span class="token string">&quot;$FILE does not exist&quot;</span>
<span class="token number">22</span>   exit <span class="token number">1</span>
<span class="token number">23</span> fi
<span class="token number">24</span> exit
</code></pre></div><p><strong>字符串表达式</strong></p> <table><thead><tr><th>表达式</th> <th>含义</th></tr></thead> <tbody><tr><td>string</td> <td>string 不为 null。</td></tr> <tr><td>-n string</td> <td>字符串 string 的长度大于零</td></tr> <tr><td>-z string</td> <td>字符串 string 的长度为零。</td></tr> <tr><td>string1 =string2<br>string1 == string2</td> <td>string1 和 string2 相同. 单或双等号都可以，不过双等号更受欢迎。</td></tr> <tr><td>string1 != string2</td> <td>string1 和 string2 不相同。</td></tr> <tr><td>string1 &gt; string2</td> <td>sting1 排列在 string2 之后。这个 &gt; 和 &lt;表达式操作符必须用引号引起来（或者是用反斜杠转义）</td></tr> <tr><td>string1 &lt; string2</td> <td>string1 排列在 string2 之前。</td></tr></tbody></table> <p><strong>整型表达式</strong></p> <table><thead><tr><th>表达式</th> <th>含义</th></tr></thead> <tbody><tr><td>integer1 -eq integer2</td> <td>integer1 等于 integer2</td></tr> <tr><td>integer1 -ne integer2</td> <td>integer1 不等于 integer2.</td></tr> <tr><td>integer1 -le integer2</td> <td>integer1 小于或等于 integer2.</td></tr> <tr><td>integer1 -lt integer2</td> <td>integer1 小于 integer2.</td></tr> <tr><td>integer1 -ge integer2</td> <td>integer1 大于或等于 integer2.</td></tr> <tr><td>integer1 -gt integer2</td> <td>integer1 大于 integer2.</td></tr></tbody></table> <p>例子</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token hashbang comment">#!/bin/bash </span>
# test<span class="token operator">-</span>integer<span class="token operator">:</span> evaluate the value <span class="token keyword">of</span> an integer<span class="token punctuation">.</span> 
<span class="token constant">INT</span><span class="token operator">=</span><span class="token operator">-</span><span class="token number">5</span> 
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">-</span>z <span class="token string">&quot;$INT&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> then 
	echo <span class="token string">&quot;INT is empty.&quot;</span> <span class="token operator">&gt;</span><span class="token operator">&amp;</span><span class="token number">2</span> 
	exit <span class="token number">1</span> 
fi 
<span class="token keyword">if</span> <span class="token punctuation">[</span> $<span class="token constant">INT</span> <span class="token operator">-</span>eq <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> then 
	echo <span class="token string">&quot;INT is zero.&quot;</span> 
<span class="token keyword">else</span> 
    <span class="token keyword">if</span> <span class="token punctuation">[</span> $<span class="token constant">INT</span> <span class="token operator">-</span>lt <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> then 
		echo <span class="token string">&quot;INT is negative.&quot;</span> 
	<span class="token keyword">else</span> 
    	echo <span class="token string">&quot;INT is positive.&quot;</span> 
	fi 
	<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">INT</span> <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span>eq <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> then 
		echo <span class="token string">&quot;INT is even.&quot;</span> 
	<span class="token keyword">else</span> 
    	echo <span class="token string">&quot;INT is odd.&quot;</span> 
	fi
fi
</code></pre></div><p><code>[[expression]]</code> ，expression是1个表达式，其计算结果为真或假 。expressiom增加了一个重要的表达式——string1=~regex。regex是正则表达式。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token punctuation">[</span>string<span class="token operator">=</span><span class="token operator">~</span>rrgex<span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span>string<span class="token operator">==</span>regex<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment">//[[$FILE==foo.*]]</span>
</code></pre></div><p><strong>(())——为整数而设计</strong></p> <p>​		 (( )) 复合命名，其有利于操作整数。它支持一套 完整的算术计算。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token hashbang comment">#!/bin/bash </span>
# test<span class="token operator">-</span>integer2<span class="token operator">:</span> evaluate the value <span class="token keyword">of</span> an integer<span class="token punctuation">.</span> 
<span class="token constant">INT</span><span class="token operator">=</span><span class="token operator">-</span><span class="token number">5</span> 
<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">&quot;$INT&quot;</span> <span class="token operator">=</span><span class="token operator">~</span> <span class="token operator">^</span><span class="token operator">-</span><span class="token operator">?</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span>$ <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> then 
    <span class="token keyword">if</span> <span class="token punctuation">[</span> $<span class="token constant">INT</span> <span class="token operator">-</span>eq <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> then 
        echo <span class="token string">&quot;INT is zero.&quot;</span> 
    <span class="token keyword">else</span> 
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">INT</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token constant">INT</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> then 
        	echo <span class="token string">&quot;INT is negative.&quot;</span> 
        <span class="token keyword">if</span> <span class="token punctuation">[</span> $<span class="token constant">INT</span> <span class="token operator">-</span>lt <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> then 
            echo <span class="token string">&quot;INT is negative.&quot;</span> 
        <span class="token keyword">else</span> 
            echo <span class="token string">&quot;INT is positive.&quot;</span> 
        fi 
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">INT</span> <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span>eq <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> then 
            echo <span class="token string">&quot;INT is even.&quot;</span> 
        <span class="token keyword">else</span> 
            echo <span class="token string">&quot;INT is odd.&quot;</span> 
        fi 
    fi 
<span class="token keyword">else</span>
    echo <span class="token string">&quot;INT is not an integer.&quot;</span> <span class="token operator">&gt;</span><span class="token operator">&amp;</span><span class="token number">2</span> 
exit <span class="token number">1</span> 
fi
</code></pre></div><p><strong>结合表达式</strong></p> <p>​		通过使用逻辑操作符来结合表达式。 AND，OR，和 NOT。test 和 [[ ]] 使用不同的操作符来表示这些操作：</p> <table><thead><tr><th>操作符</th> <th>test测试</th> <th>[[]]和()()</th></tr></thead> <tbody><tr><td>AND</td> <td>-a</td> <td>&amp;&amp;</td></tr> <tr><td>OR</td> <td>-o</td> <td>||</td></tr> <tr><td>NOT</td> <td>!</td> <td>!</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token hashbang comment">#!/bin/bash </span>
# test<span class="token operator">-</span>integer3<span class="token operator">:</span> determine <span class="token keyword">if</span> an integer is within a 
# specified range <span class="token keyword">of</span> values<span class="token punctuation">.</span> 
<span class="token constant">MIN_VAL</span><span class="token operator">=</span><span class="token number">1</span> 
<span class="token constant">MAX_VAL</span><span class="token operator">=</span><span class="token number">100</span> 
<span class="token constant">INT</span><span class="token operator">=</span><span class="token number">50</span> 
<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">&quot;$INT&quot;</span> <span class="token operator">=</span><span class="token operator">~</span> <span class="token operator">^</span><span class="token operator">-</span><span class="token operator">?</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span>$ <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> then 
	# 在<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span>使用<span class="token operator">&amp;&amp;</span>
	<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token constant">INT</span> <span class="token operator">-</span>ge <span class="token constant">MIN_VAL</span> <span class="token operator">&amp;&amp;</span> <span class="token constant">INT</span> <span class="token operator">-</span>le <span class="token constant">MAX_VAL</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> then 
    	echo <span class="token string">&quot;$INT is within $MIN_VAL to $MAX_VAL.&quot;</span>
	<span class="token keyword">else</span> 
        echo <span class="token string">&quot;$INT is out of range.&quot;</span> 
	fi 
    #在<span class="token punctuation">[</span><span class="token punctuation">]</span>中使用<span class="token operator">-</span><span class="token function">a</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>需要添加转义符
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> \<span class="token punctuation">(</span> $<span class="token constant">INT</span> <span class="token operator">-</span>ge $<span class="token constant">MIN_VAL</span> <span class="token operator">-</span>a $<span class="token constant">INT</span> <span class="token operator">-</span>le $<span class="token constant">MAX_VAL</span> \<span class="token punctuation">)</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> then 
        echo <span class="token string">&quot;$INT is outside $MIN_VAL to $MAX_VAL.&quot;</span> 
    <span class="token keyword">else</span> 
        echo <span class="token string">&quot;$INT is in range.&quot;</span> 
    fi
<span class="token keyword">else</span> 
    echo <span class="token string">&quot;INT is not an integer.&quot;</span> <span class="token operator">&gt;</span><span class="token operator">&amp;</span><span class="token number">2</span> 
exit <span class="token number">1</span> 
fi
</code></pre></div><p><strong>5、控制操作符——分支的另一种方法</strong></p> <p>​		bash 支持两种可以执行分支任务的控制操作符。语法如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>command1 <span class="token operator">&amp;&amp;</span> command2
command1 <span class="token operator">||</span> command2

<span class="token comment">//创建temp文件夹，创建成功后再切换到新建的文件夹</span>
mkdir temp <span class="token operator">&amp;&amp;</span> cd temp
<span class="token comment">//判断文件夹是否存在，不存在则创建</span>
<span class="token punctuation">[</span> <span class="token operator">-</span>d temp <span class="token punctuation">]</span> <span class="token operator">||</span> mkdir temp 
</code></pre></div><h3 id="_5、读取键盘输入"><a href="#_5、读取键盘输入" class="header-anchor">#</a> 5、读取键盘输入</h3> <p><strong>1、read——从标准输入读取数据</strong></p> <p>​		read内部命令被用来从标准输入读取单行数据。该命令可以用来读取键盘输入。</p> <p>​		<code>options</code>表示的是<code>read</code>支持的选项，<code>variable</code>是用来存储输入数值的一个或多个变量名。如果没有提供变量名，shell 变量 REPLY 会包含数据行。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">read</span> <span class="token punctuation">[</span>-options<span class="token punctuation">]</span><span class="token punctuation">[</span>variable<span class="token punctuation">..</span>.<span class="token punctuation">]</span> 
</code></pre></div><p>read支持以下选项：</p> <table><thead><tr><th>选项</th> <th>说明</th></tr></thead> <tbody><tr><td>-a array</td> <td>把输入赋值到数组 array 中，从索引号零开始。</td></tr> <tr><td>-d delimiter</td> <td>用字符串 delimiter 中的第一个字符指示输入结束，而不是一个换行符。</td></tr> <tr><td>-e</td> <td>使用 Readline 来处理输入。这使得与命令行相同的方式编辑输入。</td></tr> <tr><td>-n num</td> <td>读取 num 个输入字符，而不是整行。</td></tr> <tr><td>-p prompt</td> <td>为输入显示提示信息，使用字符串 prompt。</td></tr> <tr><td>-r</td> <td>Raw mode. 不把反斜杠字符解释为转义字符。</td></tr> <tr><td>-s</td> <td>Raw mode. 不把反斜杠字符解释为转义字符。</td></tr> <tr><td>-t seconds</td> <td>超时. 几秒钟后终止输入。read 会返回一个非零退出状态，若输入超时。</td></tr> <tr><td>-u fd</td> <td>使用文件描述符 fd 中的输入，而不是标准输入。</td></tr></tbody></table> <div class="language-bash extra-class"><pre class="language-bash"><code> <span class="token number">1</span> <span class="token comment">#!/bin/bash</span>
 <span class="token number">2</span> <span class="token comment"># read-integer: evaluate the value of an integer .</span>
 <span class="token number">3</span> <span class="token builtin class-name">echo</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;Please enter an integer -&gt; &quot;</span> //-n表示不换行
 <span class="token number">4</span> <span class="token builtin class-name">read</span> int
 <span class="token number">5</span> <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$int</span>&quot;</span> <span class="token operator">=~</span> ^-?<span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span>+$ <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
 <span class="token number">6</span>   <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$int</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
 <span class="token number">7</span>     <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$int</span> is zero.&quot;</span>
 <span class="token number">8</span>   <span class="token keyword">else</span>
 <span class="token number">9</span>     <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$int</span> <span class="token parameter variable">-lt</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
 <span class="token number">10</span>         <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$int</span> is negative.&quot;</span>
 <span class="token number">11</span>     <span class="token keyword">else</span>
 <span class="token number">12</span>         <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$int</span> is positive.&quot;</span>
 <span class="token number">13</span>     <span class="token keyword">fi</span>
 <span class="token number">14</span>     <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable"><span class="token variable">$((</span>int <span class="token operator">%</span> <span class="token number">2</span><span class="token variable">))</span></span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
 <span class="token number">15</span>         <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$int</span> is even.&quot;</span>
 <span class="token number">16</span>     <span class="token keyword">else</span>
 <span class="token number">17</span>         <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$int</span> is odd.&quot;</span>
 <span class="token number">18</span>     <span class="token keyword">fi</span>
 <span class="token number">19</span>   <span class="token keyword">fi</span>
 <span class="token number">20</span> <span class="token keyword">else</span>
 <span class="token number">21</span>   <span class="token builtin class-name">echo</span> <span class="token string">&quot;Input value is not an integer.&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
 <span class="token number">22</span> <span class="token builtin class-name">exit</span> <span class="token number">1</span>
 <span class="token number">23</span> <span class="token keyword">fi</span>
</code></pre></div><p>read给多个变量赋值</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">1</span> <span class="token comment">#!/bin/bash</span>
<span class="token number">2</span> <span class="token builtin class-name">echo</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;please enter onoe or more values&gt;&quot;</span>
<span class="token number">3</span> <span class="token builtin class-name">read</span>  var1 var2 var3 var4 var5
<span class="token number">4</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;var1=<span class="token variable">$var1</span>&quot;</span>
<span class="token number">5</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;var2=<span class="token variable">$var2</span>&quot;</span>
<span class="token number">6</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;var3=<span class="token variable">$var3</span>&quot;</span>
<span class="token number">7</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;var4=<span class="token variable">$var4</span>&quot;</span>
<span class="token number">8</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;var5=<span class="token variable">$var5</span>&quot;</span>
</code></pre></div><p>read 配置密码输入及时间过期</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">1</span> <span class="token comment">#!/bin/bash</span>
<span class="token number">2</span> <span class="token comment"># read secret:input a secret</span>
<span class="token number">3</span> <span class="token keyword">if</span> <span class="token builtin class-name">read</span> <span class="token parameter variable">-t</span> <span class="token number">10</span> <span class="token parameter variable">-sp</span> <span class="token string">&quot;enter secret pass &gt;&quot;</span> secret_pass<span class="token punctuation">;</span> <span class="token keyword">then</span>
<span class="token number">4</span>   <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token entity" title="\n">\n</span>secret pass =<span class="token variable">$secret_pass</span>&quot;</span>
<span class="token number">5</span> <span class="token keyword">else</span>
    <span class="token number">6</span>   <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token entity" title="\n">\n</span>input timeout&quot;</span><span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
<span class="token number">7</span>   <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token number">8</span> <span class="token keyword">fi</span>
</code></pre></div><p><strong>2、IFS</strong></p> <p>​		内部字符分割符，默认值包含一个空格、一个tab和一个换行符。每一个都会把字段分割开。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>  <span class="token number">1</span> <span class="token comment">#!/bin/bash</span>
  <span class="token number">2</span> <span class="token comment"># split</span>
  <span class="token number">3</span> <span class="token assign-left variable">FILE</span><span class="token operator">=</span>/etc/passwd
  <span class="token number">4</span> <span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;enter a userName&gt;&quot;</span> user_name //输入用户名
  <span class="token number">5</span> <span class="token assign-left variable">file_info</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">grep</span> <span class="token string">&quot;^<span class="token variable">$user_name</span>:&quot;</span> $FILE<span class="token variable">)</span></span> //过滤含有<span class="token variable">$user_name</span>的文本行
  <span class="token number">6</span> <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable">$file_info</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  	  <span class="token comment"># &lt;&lt;&lt;指示一个here字符串，是重定向操作符</span>
  <span class="token number">7</span>   <span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span><span class="token string">&quot;:&quot;</span> <span class="token builtin class-name">read</span> user pw uid gid name home shell <span class="token operator">&lt;&lt;&lt;</span> <span class="token string">&quot;<span class="token variable">$file_info</span>&quot;</span> //以<span class="token string">&quot;:&quot;</span>作为分割符。
  <span class="token number">8</span>   <span class="token builtin class-name">echo</span> <span class="token string">&quot;user=<span class="token variable">$user</span>&quot;</span>
  <span class="token number">9</span>   <span class="token builtin class-name">echo</span> <span class="token string">&quot;uid=<span class="token variable">$uid</span>&quot;</span>
 <span class="token number">10</span>   <span class="token builtin class-name">echo</span> <span class="token string">&quot;gid=<span class="token variable">$gid</span>&quot;</span>
 <span class="token number">11</span>   <span class="token builtin class-name">echo</span> <span class="token string">&quot;fule name=<span class="token variable">$name</span>&quot;</span>
 <span class="token number">12</span>   <span class="token builtin class-name">echo</span> <span class="token string">&quot;home = <span class="token variable">$home</span>&quot;</span>
 <span class="token number">13</span>   <span class="token builtin class-name">echo</span> <span class="token string">&quot;shell= <span class="token variable">$shell</span>&quot;</span>
 <span class="token number">14</span> <span class="token keyword">else</span>
 <span class="token number">15</span>   <span class="token builtin class-name">echo</span> <span class="token string">&quot;no such user <span class="token variable">$user_name</span>&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
 <span class="token number">16</span>   <span class="token builtin class-name">exit</span> <span class="token number">1</span>
 <span class="token number">17</span> <span class="token keyword">fi</span>
</code></pre></div><p><strong>注意</strong> 不能使用<code>echo $file_info | IFS=&quot;:&quot; read user pw uid gid name home shell</code></p> <p>该命令能生效，但是<code>REPLY</code>变量将总是为空。这是因为在<code>bash</code>中，管道线会创建子<code>shell</code>,是<code>shell</code>的副本，且用来执行命令的环境变量在管道线中。在子<code>shell</code>执行的时候，会为进程创建父环境的副本。当进程结束后，环境副本就会被销毁，<code>shell</code>永远都不能改变父进程的环境。</p> <p><strong>3、矫正输入</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>  <span class="token number">1</span> <span class="token comment">#!/bin/bash</span>
  <span class="token number">2</span> <span class="token comment"># read-menu</span>
  <span class="token number">3</span> <span class="token function">clear</span>
  <span class="token number">4</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;
  5 please Select:
  6   1、Display System Infomation
  7   2、Display Disk space
  8   3、Display Home Space Utilization
  9   0、Quit
 10 &quot;</span>
 <span class="token number">11</span>
 <span class="token number">12</span> <span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;Enter Selection [0-3]&gt;&quot;</span>
 <span class="token number">13</span> <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token environment constant">$REPLY</span> <span class="token operator">=~</span> ^<span class="token punctuation">[</span><span class="token number">0</span>-3<span class="token punctuation">]</span>$ <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span> //正则匹配
 <span class="token number">14</span>   <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token environment constant">$REPLY</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
 <span class="token number">15</span>     <span class="token builtin class-name">echo</span> <span class="token string">&quot;Program terminated&quot;</span>
 <span class="token number">16</span>     <span class="token builtin class-name">exit</span>
 <span class="token number">17</span>   <span class="token keyword">fi</span>
 <span class="token number">18</span>   <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token environment constant">$REPLY</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
 <span class="token number">19</span>     <span class="token builtin class-name">echo</span> <span class="token string">&quot;Hostname:<span class="token environment constant">$HOSTNAME</span>&quot;</span>
 <span class="token number">20</span>     <span class="token function">uptime</span>
 <span class="token number">21</span>     <span class="token builtin class-name">exit</span>
 <span class="token number">22</span>   <span class="token keyword">fi</span>
 <span class="token number">23</span>   <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token environment constant">$REPLY</span> <span class="token operator">==</span> <span class="token number">2</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
 <span class="token number">24</span>     <span class="token function">df</span> <span class="token parameter variable">-h</span> //查看磁盘使用情况
 <span class="token number">25</span>     <span class="token builtin class-name">exit</span>
 <span class="token number">26</span>   <span class="token keyword">fi</span>
 <span class="token number">27</span>
 <span class="token number">28</span>
 <span class="token number">29</span>   <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token environment constant">$REPLY</span> <span class="token operator">==</span> <span class="token number">3</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
 <span class="token number">30</span>     <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">id</span> <span class="token parameter variable">-u</span><span class="token variable">)</span></span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
 <span class="token number">31</span>       <span class="token builtin class-name">echo</span> <span class="token string">&quot;Home Space Utilization (All Users)&quot;</span>
 <span class="token number">32</span>       <span class="token function">du</span> <span class="token parameter variable">-sh</span> /home/* //查看目录的真实大小
 <span class="token number">33</span>     <span class="token keyword">else</span>
 <span class="token number">34</span>       <span class="token builtin class-name">echo</span> <span class="token string">&quot;Home Space Utilization (<span class="token environment constant">$USER</span>)&quot;</span>
 <span class="token number">35</span>       <span class="token function">du</span> <span class="token parameter variable">-sh</span> <span class="token environment constant">$HOME</span>
 <span class="token number">36</span>     <span class="token keyword">fi</span>
 <span class="token number">37</span>     <span class="token builtin class-name">exit</span>
 <span class="token number">38</span>   <span class="token keyword">fi</span>
 <span class="token number">39</span> <span class="token keyword">else</span>
 <span class="token number">40</span>   <span class="token builtin class-name">echo</span> <span class="token string">&quot;Invalid entry.&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
 <span class="token number">41</span>   <span class="token builtin class-name">exit</span> <span class="token number">1</span>
 <span class="token number">42</span> <span class="token keyword">fi</span>
</code></pre></div><h3 id="_6、流程控制-while-until循环"><a href="#_6、流程控制-while-until循环" class="header-anchor">#</a> 6、流程控制——while/until循环</h3> <p><strong>1、while</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">while</span> commands<span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token builtin class-name">command</span><span class="token punctuation">;</span><span class="token keyword">done</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token parameter variable">-le</span> <span class="token number">5</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$count</span>&quot;</span>
	<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>count<span class="token operator">+</span><span class="token number">1</span><span class="token variable">))</span></span>
<span class="token keyword">done</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;finished&quot;</span>
</code></pre></div><p><strong>2、until</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">until</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token parameter variable">-gt</span> <span class="token number">5</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">do</span>	
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$count</span>&quot;</span>
	<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>count<span class="token operator">+</span><span class="token number">1</span><span class="token variable">))</span></span>
<span class="token keyword">done</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;finished&quot;</span>
</code></pre></div><p><strong>3、使用循环读文件</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash </span>
<span class="token comment"># while-read: read lines from a file </span>
<span class="token keyword">while</span> <span class="token builtin class-name">read</span> distro version release<span class="token punctuation">;</span> 
<span class="token keyword">do</span> 
	// <span class="token punctuation">\</span>t是制表符 <span class="token punctuation">\</span>n表示换行
	<span class="token builtin class-name">printf</span> <span class="token string">&quot;Distro: %s<span class="token entity" title="\t">\t</span>Version: %s<span class="token entity" title="\t">\t</span>Released: %s<span class="token entity" title="\n">\n</span>&quot;</span> <span class="token punctuation">\</span> 
		<span class="token variable">$distro</span> <span class="token punctuation">\</span> 
		<span class="token variable">$version</span> <span class="token punctuation">\</span> 
		<span class="token variable">$release</span> 
<span class="token keyword">done</span> <span class="token operator">&lt;</span> test.txt //从test.txt文件中读取数据 
</code></pre></div><h3 id="_7、调试技巧"><a href="#_7、调试技巧" class="header-anchor">#</a> 7、调试技巧</h3> <p><strong>1、防错编程</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>//先验证目录是否存在，存在再切换目录，删除文件
<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token parameter variable">-d</span> <span class="token variable">$dir_name</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span> 
	<span class="token keyword">if</span> <span class="token builtin class-name">cd</span> <span class="token variable">$dir_name</span><span class="token punctuation">;</span> <span class="token keyword">then</span> 
		<span class="token function">rm</span> * 
	<span class="token keyword">else</span> 
		<span class="token builtin class-name">echo</span> <span class="token string">&quot;cannot cd to '<span class="token variable">$dir_name</span>'&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span> 
		<span class="token builtin class-name">exit</span> <span class="token number">1</span> 
	<span class="token keyword">fi</span> 
<span class="token keyword">else</span> 
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;no such directory: '<span class="token variable">$dir_name</span>'&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span> 
<span class="token builtin class-name">exit</span> <span class="token number">1</span> 
<span class="token keyword">fi</span>
</code></pre></div><p><strong>2、追踪</strong></p> <p>​		通过 -x 选项和 set 命令加上 -x 选项两种途径实现</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//整个脚本追踪
<span class="token comment">#!/bin/bash -x </span>
<span class="token comment"># trouble: script to demonstrate common errors </span>
<span class="token assign-left variable">number</span><span class="token operator">=</span><span class="token number">1</span> 
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$number</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span> 
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;Number is equal to 1.&quot;</span> 
<span class="token keyword">else</span> 
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;Number is not equal to 1.&quot;</span> 
<span class="token keyword">fi</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>//追踪一块区域
<span class="token comment">#!/bin/bash </span>
<span class="token comment"># trouble: script to demonstrate common errors </span>
<span class="token assign-left variable">number</span><span class="token operator">=</span><span class="token number">1</span> 
<span class="token builtin class-name">set</span> <span class="token parameter variable">-x</span> <span class="token comment"># Turn on tracing </span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$number</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;Number is equal to 1.&quot;</span> 
<span class="token keyword">else</span> 
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;Number is not equal to 1.&quot;</span> 
<span class="token keyword">fi</span> 
<span class="token builtin class-name">set</span> +x <span class="token comment"># Turn off tracing</span>
</code></pre></div><h3 id="_8、流程控制-case分支"><a href="#_8、流程控制-case分支" class="header-anchor">#</a> 8、流程控制——case分支</h3> <p>​		case的语法规则如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">case</span> word <span class="token keyword">in</span> 
	<span class="token punctuation">[</span>pattern <span class="token punctuation">[</span><span class="token operator">|</span> pattern<span class="token punctuation">]</span><span class="token punctuation">..</span>.<span class="token punctuation">)</span> commands <span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">]</span><span class="token punctuation">..</span>. 
<span class="token keyword">esac</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">1</span> <span class="token comment">#!/bin/bash</span>
<span class="token number">2</span> <span class="token comment"># case-menu: a menu driven system information program</span>
<span class="token number">3</span> <span class="token function">clear</span>
<span class="token number">4</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot; Please Select:
5   1. Display System Information
6   2. Display Disk Space
7   3. Display Home Space Utilization
8   0. Quit &quot;</span>
<span class="token number">9</span> <span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;Enter selection [0-3] &gt; &quot;</span>
10case <span class="token environment constant">$REPLY</span> <span class="token keyword">in</span>
<span class="token number">11</span>   <span class="token number">0</span><span class="token punctuation">)</span>echo <span class="token string">&quot;Program terminated.&quot;</span>
<span class="token number">12</span>     <span class="token builtin class-name">exit</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token number">13</span>   <span class="token number">1</span><span class="token punctuation">)</span>echo <span class="token string">&quot;Hostname: <span class="token environment constant">$HOSTNAME</span>&quot;</span>
<span class="token number">14</span>     <span class="token function">uptime</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token number">15</span>   <span class="token number">2</span><span class="token punctuation">)</span>df <span class="token parameter variable">-h</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token number">16</span>   <span class="token number">3</span><span class="token punctuation">)</span>if <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">id</span> <span class="token parameter variable">-u</span><span class="token variable">)</span></span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
<span class="token number">17</span>       <span class="token builtin class-name">echo</span> <span class="token string">&quot;Home Space Utilization (All Users)&quot;</span>
<span class="token number">18</span>       <span class="token function">du</span> <span class="token parameter variable">-sh</span> /home/*
<span class="token number">19</span>     <span class="token keyword">else</span>
<span class="token number">20</span>       <span class="token builtin class-name">echo</span> <span class="token string">&quot;Home Space Utilization (<span class="token environment constant">$USER</span>)&quot;</span>
<span class="token number">21</span>       <span class="token function">du</span> <span class="token parameter variable">-sh</span> <span class="token environment constant">$HOME</span>
<span class="token number">22</span>     <span class="token keyword">fi</span>
<span class="token number">23</span>     <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token number">24</span>   *<span class="token punctuation">)</span>echo <span class="token string">&quot;Invalid entry&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
<span class="token number">25</span>     <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token number">26</span>     <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token number">27</span> <span class="token keyword">esac</span>
</code></pre></div><p>case模式实例如下：</p> <table><thead><tr><th>模式</th> <th>描述</th></tr></thead> <tbody><tr><td>a）</td> <td>若单词为 “a”，则匹配</td></tr> <tr><td>[[:alpha:]])</td> <td>若单词是一个字母字符，则匹配</td></tr> <tr><td>???)</td> <td>若单词只有3个字符，则匹配</td></tr> <tr><td>*.txt)</td> <td>若单词以 “.txt” 字符结尾，则匹配</td></tr> <tr><td>*)</td> <td>匹配任意单词。把这个模式做为 case 命令的最后一个模式，是一个很好的做法， 可以捕捉到任意一个 与先前模式不匹配的数值；也就是说，捕捉到任何可能的无效值。</td></tr></tbody></table> <p>模式使用实例</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">1</span> <span class="token comment">#!/bin/bash</span>
<span class="token number">2</span> <span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;enter world &gt; &quot;</span>
<span class="token number">3</span> <span class="token keyword">case</span> <span class="token environment constant">$REPLY</span> <span class="token keyword">in</span>
	<span class="token comment"># 正则，条件模式，添加的 “;;&amp;” 的语法允许 case 语句继续执行下一条测试，而不是简单地终止运行。</span>
	q<span class="token operator">|</span>Q<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;terminal&quot;</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>
<span class="token number">4</span>   <span class="token punctuation">[</span><span class="token punctuation">[</span>:alpha:<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;is a single char&quot;</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>
	<span class="token comment">#正则匹配</span>
<span class="token number">5</span>   <span class="token punctuation">[</span>ABC<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;is A|B|C and 1~9&quot;</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>	
<span class="token number">6</span>   ???<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;tree char&quot;</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>
<span class="token number">7</span>   *.txt<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> is a string endswith .txt<span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>
<span class="token number">8</span>   *<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;is something else&quot;</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>
<span class="token number">9</span> <span class="token keyword">esac</span>
</code></pre></div><h3 id="_9、位置参数"><a href="#_9、位置参数" class="header-anchor">#</a> 9、位置参数</h3> <p><strong>1、访问命令行</strong></p> <p>​		shell提供了一个位置参数的变量集合。这些变量按照从0到到9进行命名。分别为**<code>$0~$9</code><strong>,</strong><code>$#</code>**用于统计参数的个数（不包括$0,从$1开始算）。</p> <div class="language-bash extra-class"><pre class="language-bash"><code> //paramexam文件
 <span class="token number">1</span> <span class="token comment">#!/bin/bash</span>
 	<span class="token builtin class-name">echo</span> <span class="token string">&quot;length of arguments is <span class="token variable">$#</span>&quot;</span>
  <span class="token number">2</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;
  3 \<span class="token variable">$0</span>=<span class="token variable">$0</span>
  4 \<span class="token variable">$1</span>=<span class="token variable">$1</span>
  5 \<span class="token variable">$2</span>=<span class="token variable">$2</span>
  6 \<span class="token variable">$3</span>=<span class="token variable">$3</span>
  7 \<span class="token variable">$4</span>=<span class="token variable">$4</span>
  8 \<span class="token variable">$5</span>=<span class="token variable">$5</span>
  9 \<span class="token variable">$6</span>=<span class="token variable">$6</span>
 10 \<span class="token variable">$7</span>=<span class="token variable">$7</span>
 11 \<span class="token variable">$8</span>=<span class="token variable">$8</span>
 12 \<span class="token variable">$9</span>=<span class="token variable">$9</span>
 13 &quot;</span>
 //运行param文件，
 paramexam abcd e	//此时的<span class="token variable">$0</span>为 paramexam, <span class="token variable">$1</span>为abcd, <span class="token variable">$2</span>为e
 paramexam * //此时<span class="token variable">$#</span>是当前文件夹下文件或文件夹的个数
</code></pre></div><p><strong>shift命令</strong>。每执行一次，$#的个数减1，跟数组的shift操作一样。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//循环遍历参数
<span class="token comment">#!/bin/bash</span>
<span class="token comment">#获取文件名称</span>
<span class="token assign-left variable">filename</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">basename</span> $0<span class="token variable">)</span></span>
<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable">$#</span> <span class="token parameter variable">-gt</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;arguments <span class="token variable">$count</span>=<span class="token variable">$1</span>&quot;</span><span class="token punctuation">;</span>
	<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>count<span class="token operator">+</span><span class="token number">1</span><span class="token variable">))</span></span>
	<span class="token builtin class-name">shift</span>
<span class="token keyword">done</span>
</code></pre></div><p><strong>2、处理集体位置参数</strong></p> <p>​		shell提供了两种特殊的参数，都能扩展成完整的位置参数列表。</p> <p>​		<code>$*</code>：展开成一个从1开始的位置参数列表。当它被用双引号引起来的时候，展开成一个由双引号引起来的字符串，包含了所有的位置参数，每个位置参数由 shell 变量 IFS 的第一个字符（默认为 一个空格）分隔开。</p> <p>​		<code>$@</code>： 展开成一个从1开始的位置参数列表。当它被用双引号引起来的时候， 它把每一个位置参数展 开成一个由双引号引起来的分开的字符串。</p> <h3 id="_10、流程控制-for循环"><a href="#_10、流程控制-for循环" class="header-anchor">#</a> 10、流程控制——for循环</h3> <p>​		variable 是一个变量的名字，这个变量在循环执行期间会增加，words 是一个可选的条目列表， 其值会按顺序赋值给 variable，commands 是在每次循环迭代中要执行的命令。</p> <p><strong>第一种for语法格式</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">for</span> variables <span class="token punctuation">[</span>in words<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
	commands
<span class="token keyword">done</span>
</code></pre></div><p>实例1</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> A B C D<span class="token punctuation">;</span>
<span class="token keyword">do</span> 
	<span class="token builtin class-name">echo</span> <span class="token variable">$i</span>
<span class="token keyword">done</span>
</code></pre></div><p>实例2——正则</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//找出后缀名为.txt的所有文件
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> *.txt<span class="token punctuation">;</span>
<span class="token keyword">do</span> 
	<span class="token builtin class-name">echo</span> <span class="token variable">$i</span>
<span class="token keyword">done</span>
</code></pre></div><p><strong>第二种语法格式</strong>  跟常规for循环格式一样。这里的expression都是算术表达式</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span> expression1<span class="token punctuation">;</span> expression2<span class="token punctuation">;</span> expression3 <span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span> 
	commands 
<span class="token keyword">done</span>
</code></pre></div><h3 id="_11、字符串和数字"><a href="#_11、字符串和数字" class="header-anchor">#</a> 11、字符串和数字</h3> <p><strong>1、参数展开</strong></p> <p>​		简单参数获取方式为<code>$variable</code>。也可以使用花括号将参数包裹起来。<code>${a}、${a}_file</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token string">&quot;foo&quot;</span> //定义便令
<span class="token variable">$a</span> //获取变量
<span class="token variable">${a}</span>_file //获取变量
<span class="token variable">${11}</span> //获取大于9的位置参数
</code></pre></div><p><strong>2、管理空变量的展开</strong></p> <p>​		变量不存在或者空变量的参数展开形式如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token variable">${parameter<span class="token operator">:-</span>word}</span> //临时赋值
<span class="token variable">${parameter<span class="token operator">:?</span>word}</span>//这种方式echo <span class="token variable">$?</span>的结果为1，也是临时赋值
</code></pre></div><p>实例</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">foo</span><span class="token operator">=</span> //定义空变量
<span class="token builtin class-name">echo</span> <span class="token variable">${foo<span class="token operator">:-</span>&quot;this is a test&quot;}</span> //临时性赋值，再次获取<span class="token variable">$foo</span>还是为空

<span class="token assign-left variable">foo</span><span class="token operator">=</span>bar<span class="token punctuation">;</span>
<span class="token builtin class-name">echo</span> <span class="token variable">${foo<span class="token operator">:-</span>&quot;this is a test&quot;}</span> //bar,如果变量不为空,那么将直接获取<span class="token variable">$foo</span>的值
</code></pre></div><p>​		在变量存在的情况下，替换原来的值。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token variable">${parameter<span class="token operator">:+</span>word}</span> //也是临时性赋值
</code></pre></div><p><strong>3、返回变量名的参数展开</strong></p> <p>​		返回以特定参数开头的已有变量名。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token variable">${<span class="token operator">!</span>prefix*}</span>
<span class="token variable">${<span class="token operator">!</span>prefix@}</span>
</code></pre></div><p><strong>4、字符串展开</strong></p> <p>​		从字符串中获取部分字符串的形式如下所示：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token variable">${<span class="token operator">#</span>parameter}</span> //获取包含的字符串的长度。
<span class="token variable">${parameter<span class="token operator">:</span>offset}</span>//获取包含的字符串从offset索引后的字符串。若offset为负数时将从字符串的末尾开始算起，同时负数前面必须有一个空格。不然将返回整个字符串。
<span class="token variable">${parameter<span class="token operator">:</span>offset<span class="token operator">:</span>length}</span> //获取以offset为开始索引后的length个字符
</code></pre></div><p>​		从展开的字符串中清除一部分文本。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token variable">${parameter<span class="token operator">#</span>pattern}</span>
<span class="token variable">${parameter<span class="token operator">##</span>pattern}</span>
<span class="token variable">${parameter<span class="token operator">%</span>pattern}</span>
<span class="token variable">${parameter<span class="token operator">%%</span>pattern}</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">foo</span><span class="token operator">=</span><span class="token string">&quot;test.txt.test.zip&quot;</span>
<span class="token variable">${foo<span class="token operator">#</span>*.}</span> //txt.test.zip 
<span class="token variable">${foo<span class="token operator">##</span>*.}</span> //zip
<span class="token variable">${foo<span class="token operator">%</span>.*}</span> //file.txt.test
<span class="token variable">${foo<span class="token operator">%%</span>.*}</span> //file
</code></pre></div><p>​		对parameter的内容进行查找和替换。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token variable">${parameter<span class="token operator">/</span>pattern<span class="token operator">/</span>string}</span>  //只替换第一个匹配项
<span class="token variable">${parameter<span class="token operator">/</span><span class="token operator">/</span>pattern<span class="token operator">/</span>string}</span> //全部替换
<span class="token variable">${parameter<span class="token operator">/</span><span class="token operator">#</span>pattern<span class="token operator">/</span>string}</span> //要求匹配项出现在字符串的开头
<span class="token variable">${parameter<span class="token operator">/</span><span class="token operator">%</span>pattern<span class="token operator">/</span>string}</span> //要求出现在字符串的末尾
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">foo</span><span class="token operator">=</span><span class="token string">&quot;file.pdf.pdf&quot;</span>
<span class="token variable">${foo<span class="token operator">/</span>pdf<span class="token operator">/</span>txt}</span> //只替换第一个file.txt.pdf 临时替换
<span class="token variable">${foo<span class="token operator">/</span><span class="token operator">/</span>pdf<span class="token operator">/</span>txt}</span> //全部替换 file.txt.txt 临时替换
<span class="token variable">${foo<span class="token operator">/</span><span class="token operator">#</span>pdf<span class="token operator">/</span>txt}</span> //file.pdf.pdf
<span class="token variable">${foo<span class="token operator">/</span><span class="token operator">%</span>pdf<span class="token operator">/</span>txt}</span> //file.pdf.txt
</code></pre></div><p><strong>5、大小写转换</strong></p> <p>​		可以使用<code>declare</code>命令来将字符串大写转换成小写字符。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">declare</span> <span class="token parameter variable">-u</span> upper //定义大写变量
<span class="token builtin class-name">declare</span> <span class="token parameter variable">-l</span> lower //定义小写变量
<span class="token assign-left variable">foo</span><span class="token operator">=</span><span class="token string">&quot;teSt&quot;</span>
<span class="token assign-left variable">upper</span><span class="token operator">=</span><span class="token variable">$foo</span>
<span class="token assign-left variable">lower</span><span class="token operator">=</span><span class="token variable">$foo</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$upper</span> //TEST
<span class="token builtin class-name">echo</span> <span class="token variable">$lower</span> //test
</code></pre></div><p>​		以下四个参数展开可以执行大小写转换操作。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token variable">${parameter<span class="token operator">,,</span>}</span> //将parameter的值全部展开成小写字母
<span class="token variable">${parameter<span class="token operator">,</span>}</span> //仅仅把 parameter 的第一个字符展开成小写字母。 
<span class="token variable">${parameter<span class="token operator">^^</span>}</span> //把 parameter 的值全部转换成大写字母。 
<span class="token variable">${parameter<span class="token operator">^</span>}</span> //仅仅把 parameter 的第一个字符转换成大写字母（首字母大写）。
</code></pre></div><p><strong>6、算术求值和展开</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token variable"><span class="token variable">$((</span>expression<span class="token variable">))</span></span> //expression为一个有效的算术表达式
</code></pre></div><p>​		指定不同的数基。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>number 默认情况，10进制
0number 八进制度
0xnumber 十六进制
base<span class="token comment">#number number以base为底</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$((</span><span class="token number">076</span><span class="token variable">))</span></span> //62
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$((</span><span class="token number">0x76</span><span class="token variable">))</span></span> //118
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$((</span><span class="token number">2</span>#<span class="token number">110</span><span class="token variable">))</span></span> //6
</code></pre></div><p><strong>bc</strong>：是一种高精度计算语言，可以用来计算浮点数。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">bc</span> <span class="token parameter variable">-q</span> //进入bc程序，并不显示版权信息
<span class="token function">bc</span> <span class="token operator">&lt;</span> foo.bc //把一个脚本直接传递给bc程序
</code></pre></div><h3 id="_12、数组"><a href="#_12、数组" class="header-anchor">#</a> 12、数组</h3> <p><strong>1、创建数组</strong></p> <div class="language-bah extra-class"><pre class="language-text"><code>a[1]=test //方式1
declare -a a //方式2
</code></pre></div><p><strong>2、数组赋值</strong></p> <p>​		name是数组的名称，index是大于等于0的整数</p> <div class="language-bash extra-class"><pre class="language-bash"><code>name<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token operator">=</span>value 
<span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token punctuation">(</span>value1,value2<span class="token punctuation">..</span>.<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token punctuation">(</span>a b<span class="token punctuation">)</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span>a <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>b<span class="token punctuation">)</span>
</code></pre></div><p><strong>3、访问数组</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token variable">${name<span class="token punctuation">[</span>0<span class="token punctuation">]</span>}</span> //a
<span class="token builtin class-name">echo</span> <span class="token variable">${name}</span> //获取的是数组的第一个元素
</code></pre></div><p><strong>4、数组操作</strong></p> <p>​		<strong>输出整个数组的内容</strong> 	&quot;*&quot;和”@“可以用来访问数组中的每一个元素。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">names</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">&quot;张 三&quot;</span> <span class="token string">&quot;李 四&quot;</span> <span class="token string">&quot;王 五&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${names<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> <span class="token variable">$i</span><span class="token punctuation">;</span> <span class="token keyword">done</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${names<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> <span class="token variable">$i</span><span class="token punctuation">;</span> <span class="token keyword">done</span>
//输出的都是
张
三
李
四
王
五
//<span class="token string">&quot;&quot;</span>是为了防止 shell 执行路径名展开操作。
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token string">&quot;<span class="token variable">${names<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span>&quot;</span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> <span class="token variable">$i</span><span class="token punctuation">;</span> <span class="token keyword">done</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token string">&quot;<span class="token variable">${names<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>&quot;</span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> <span class="token variable">$i</span><span class="token punctuation">;</span> <span class="token keyword">done</span>
//输出的都是
张三
李四
王五
</code></pre></div><p>​		<strong>确定数组元素个数</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>a<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token operator">=</span>foo
<span class="token builtin class-name">echo</span> <span class="token variable">${<span class="token operator">#</span>a<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span> //1 求数组元素个数
<span class="token builtin class-name">echo</span> <span class="token variable">${<span class="token operator">#</span>a<span class="token punctuation">[</span>100<span class="token punctuation">]</span>}</span> //求a<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span>元素的字符个数
</code></pre></div><p>​		<strong>找到数组元素的下标</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token variable">${<span class="token operator">!</span>arr<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span>
<span class="token variable">${<span class="token operator">!</span>arr<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>
</code></pre></div><p>​		<strong>在数组末尾添加元素</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">data</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token assign-left variable">data</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token number">4</span> <span class="token number">5</span> <span class="token number">6</span><span class="token punctuation">)</span>
<span class="token builtin class-name">echo</span> <span class="token variable">${data<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span>
</code></pre></div><p>​		<strong>数组排序</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">data</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token number">12</span> <span class="token number">4</span><span class="token punctuation">)</span>
<span class="token assign-left variable">data_sorted</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable"><span class="token variable">$(</span><span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token string">&quot;<span class="token variable">${data<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>&quot;</span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> $i<span class="token punctuation">;</span> <span class="token keyword">done</span> <span class="token operator">|</span> <span class="token function">sort</span><span class="token variable">)</span></span><span class="token punctuation">)</span>
<span class="token builtin class-name">echo</span> <span class="token variable">${data_sorted<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span> // <span class="token number">12</span> <span class="token number">2</span> <span class="token number">4</span> 是按字符串来排序的
</code></pre></div><p>​		<strong>删除数组</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">data</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span><span class="token punctuation">)</span>
//删除整个数组
<span class="token builtin class-name">unset</span> data
//删除数组元素，数组元素索引不变 删除之后元素3的索引还是2
<span class="token builtin class-name">unset</span> <span class="token string">&quot;data[1]&quot;</span>

//给一个数组赋空值不会清空数组内容
<span class="token assign-left variable">foo</span><span class="token operator">=</span><span class="token punctuation">(</span>a b c d e f<span class="token punctuation">)</span> 
<span class="token assign-left variable">foo</span><span class="token operator">=</span>
<span class="token builtin class-name">echo</span> <span class="token variable">${foo<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span> //a b c d e f

//任何引用一个不带下标的数组变量，则指的是数组元素0：
<span class="token assign-left variable">foo</span><span class="token operator">=</span>A 
<span class="token builtin class-name">echo</span> <span class="token variable">${foo<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span> 
A b c d e f
</code></pre></div><p>​		<strong>关联数组</strong>		关联数组使用字符串而不是整数作为数组索引。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">declare</span> <span class="token parameter variable">-A</span> colors 
colors<span class="token punctuation">[</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;#ff0000&quot;</span> 
colors<span class="token punctuation">[</span><span class="token string">&quot;green&quot;</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;#00ff00&quot;</span>
colors<span class="token punctuation">[</span><span class="token string">&quot;blue&quot;</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;#0000ff&quot;</span>

</code></pre></div><p><strong>组命令和子shell</strong></p> <p>​		bash允许把命令组合在一起。花括号和命令之间必须有一个空格，并且最后一个命令必须用一个分号或者换行符终止。</p> <p>​		***组命令在当前 shell 中执行它的所有命令，而一个子 shell（顾名思义）在当前 shell 的一个 子副本中执行它的命令。**这意味着运行环境被复制给了一个新的 shell 实例。当这个子 shell 退出时，环境副本会消失，所以在子 shell 环境（包括变量赋值）中的任何更改也会消失。组命令运行很快并且占用的内存也少。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//组命令
<span class="token punctuation">{</span> command1<span class="token punctuation">;</span>command2<span class="token punctuation">;</span><span class="token punctuation">[</span>command3<span class="token punctuation">;</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token punctuation">}</span>
//子shell
<span class="token punctuation">(</span>command1<span class="token punctuation">;</span>command2<span class="token punctuation">;</span><span class="token punctuation">[</span>command3<span class="token punctuation">;</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>实例</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">ls</span> <span class="token parameter variable">-l</span> <span class="token operator">&gt;</span>outut.txt
<span class="token builtin class-name">echo</span> <span class="token string">&quot;this is atest&quot;</span> <span class="token operator">&gt;&gt;</span> output.txtx //追加内容
<span class="token function">cat</span> foo.txt <span class="token operator">&gt;&gt;</span> output.txt //追加内容

<span class="token punctuation">{</span>ls -l<span class="token punctuation">;</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;this is a test&quot;</span><span class="token punctuation">;</span><span class="token function">cat</span> foo.txt<span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token operator">&gt;</span> output.txt
<span class="token punctuation">(</span>ls-l<span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;this is a test&quot;</span><span class="token punctuation">;</span><span class="token function">cat</span> foo.txt<span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> output.txt
</code></pre></div><p><strong>进程替换</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&lt;</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span> //产生标准输出的进程
<span class="token operator">&gt;</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span> //接收标准输入的进程
</code></pre></div><p>实例</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash </span>
<span class="token comment"># pro-sub : demo of process substitution </span>
<span class="token keyword">while</span> <span class="token builtin class-name">read</span> attr links owner group size <span class="token function">date</span> <span class="token function">time</span> filename<span class="token punctuation">;</span> 
<span class="token keyword">do</span> 
	<span class="token function">cat</span> <span class="token operator">&lt;&lt;-</span> EOF 
		Filename:     <span class="token variable">$filename</span> 
		Size:         <span class="token variable">$size</span> 
		Owner:        <span class="token variable">$owner</span> 
		Group:        <span class="token variable">$group</span> 
		Modified:     <span class="token variable">$date</span> <span class="token variable">$time</span> 
		Links:        <span class="token variable">$links</span> 
		Attributes:   <span class="token variable">$attr</span>
	EOF
<span class="token keyword">done</span> <span class="token operator">&lt;</span> test.txt
</code></pre></div><p><strong>陷阱</strong></p> <p>​		argument是一个字符串，被读取当做一个命令，signal是一个信号的说明，它会触发执行所要解释的命令。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">trap</span> argument signal <span class="token punctuation">[</span>signal<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre></div><p>实例</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">1</span> <span class="token comment">#!/bin/bash</span>
<span class="token number">2</span> <span class="token builtin class-name">trap</span> <span class="token string">&quot;echo 'this is a test'&quot;</span> SIGINT SIGTERM
<span class="token number">3</span> <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
<span class="token number">4</span>   <span class="token builtin class-name">echo</span> <span class="token string">&quot;iteration <span class="token variable">$i</span> of 5&quot;</span>
<span class="token number">5</span>   <span class="token function">sleep</span> <span class="token number">5</span>
<span class="token number">6</span> <span class="token keyword">done</span>

//封装成函数
<span class="token comment">#!/bin/bash </span>
<span class="token comment"># trap-demo2 : simple signal handling demo exit_on_signal_SIGINT () { </span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;Script interrupted.&quot;</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 
	<span class="token builtin class-name">exit</span> <span class="token number">0</span> 
<span class="token punctuation">}</span> 
<span class="token function-name function">exit_on_signal_SIGTERM</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;Script terminated.&quot;</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> 
	<span class="token builtin class-name">exit</span> <span class="token number">0</span> 
<span class="token punctuation">}</span>
<span class="token builtin class-name">trap</span> exit_on_signal_SIGINT SIGINT 
<span class="token builtin class-name">trap</span> exit_on_signal_SIGTERM SIGTERM 
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token keyword">do</span> 
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;Iteration <span class="token variable">$i</span> of 5&quot;</span> 
	<span class="token function">sleep</span> <span class="token number">5</span> 
<span class="token keyword">done</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/24/2024, 10:23:52 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/articles/linux/第3章 常见任务和基本工具.html" class="prev">
        shell基本工具
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.07d0c6c3.js" defer></script><script src="/assets/js/2.918eef7d.js" defer></script><script src="/assets/js/1.dd66940c.js" defer></script><script src="/assets/js/188.1530f52d.js" defer></script>
  </body>
</html>
